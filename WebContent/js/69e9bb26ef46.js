if(typeof JSON!=='object')JSON={};(function(){'use strict';function a(a){return a<10?'0'+a:a;}if(typeof Date.prototype.toJSON!=='function'){Date.prototype.toJSON=function(b){return isFinite(this.valueOf())?this.getUTCFullYear()+'-'+a(this.getUTCMonth()+1)+'-'+a(this.getUTCDate())+'T'+a(this.getUTCHours())+':'+a(this.getUTCMinutes())+':'+a(this.getUTCSeconds())+'Z':null;};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(a){return this.valueOf();};}var b=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,c=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,d,e,f={'\b':'\\b','\t':'\\t','\n':'\\n','\f':'\\f','\r':'\\r','"':'\\"','\\':'\\\\'},g;function h(a){c.lastIndex=0;return c.test(a)?'"'+a.replace(c,function(a){var b=f[a];return typeof b==='string'?b:'\\u'+('0000'+a.charCodeAt(0).toString(16)).slice(-4);})+'"':'"'+a+'"';}function i(a,b){var c,f,j,k,l=d,m,n=b[a];if(n&&typeof n==='object'&&typeof n.toJSON==='function')n=n.toJSON(a);if(typeof g==='function')n=g.call(b,a,n);switch(typeof n){case 'string':return h(n);case 'number':return isFinite(n)?String(n):'null';case 'boolean':case 'null':return String(n);case 'object':if(!n)return 'null';d+=e;m=[];if(Object.prototype.toString.apply(n)==='[object Array]'){k=n.length;for(c=0;c<k;c+=1)m[c]=i(c,n)||'null';j=m.length===0?'[]':d?'[\n'+d+m.join(',\n'+d)+'\n'+l+']':'['+m.join(',')+']';d=l;return j;}if(g&&typeof g==='object'){k=g.length;for(c=0;c<k;c+=1)if(typeof g[c]==='string'){f=g[c];j=i(f,n);if(j)m.push(h(f)+(d?': ':':')+j);}}else for(f in n)if(Object.prototype.hasOwnProperty.call(n,f)){j=i(f,n);if(j)m.push(h(f)+(d?': ':':')+j);}j=m.length===0?'{}':d?'{\n'+d+m.join(',\n'+d)+'\n'+l+'}':'{'+m.join(',')+'}';d=l;return j;}}if(typeof JSON.stringify!=='function')JSON.stringify=function(a,b,c){var f;d='';e='';if(typeof c==='number')for(f=0;f<c;f+=1)e+=' ';else if(typeof c==='string')e=c;g=b;if(b&&typeof b!=='function'&&(typeof b!=='object'||typeof b.length!=='number'))throw new Error('JSON.stringify');return i('',{'':a});};if(typeof JSON.parse!=='function')JSON.parse=function(a,c){var d;function e(a,b){var d,f,g=a[b];if(g&&typeof g==='object')for(d in g)if(Object.prototype.hasOwnProperty.call(g,d)){f=e(g,d);if(f!==undefined)g[d]=f;else delete g[d];}return c.call(a,b,g);}a=String(a);b.lastIndex=0;if(b.test(a))a=a.replace(b,function(a){return '\\u'+('0000'+a.charCodeAt(0).toString(16)).slice(-4);});if(/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,'@').replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,']').replace(/(?:^|:|,)(?:\s*\[)+/g,''))){d=eval('('+a+')');return typeof c==='function'?e({'':d},''):d;}throw new SyntaxError('JSON.parse');};}());(function(a,b){if(typeof module==="object"&&typeof module.exports==="object"){module.exports=a.document?b(a,true):function(a){if(!a.document)throw new Error("jQuery requires a window with a document");return b(a);};}else b(a);}(typeof window!=="undefined"?window:this,function(a,b){var c=[];var d=c.slice;var e=c.concat;var f=c.push;var g=c.indexOf;var h={};var i=h.toString;var j=h.hasOwnProperty;var k={};var l="1.11.3",m=function(a,b){return new m.fn.init(a,b);},n=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,o=/^-ms-/,p=/-([\da-z])/gi,q=function(a,b){return b.toUpperCase();};m.fn=m.prototype={jquery:l,constructor:m,selector:"",length:0,toArray:function(){return d.call(this);},get:function(a){return a!=null?(a<0?this[a+this.length]:this[a]):d.call(this);},pushStack:function(a){var b=m.merge(this.constructor(),a);b.prevObject=this;b.context=this.context;return b;},each:function(a,b){return m.each(this,a,b);},map:function(a){return this.pushStack(m.map(this,function(b,c){return a.call(b,c,b);}));},slice:function(){return this.pushStack(d.apply(this,arguments));},first:function(){return this.eq(0);},last:function(){return this.eq(-1);},eq:function(a){var b=this.length,c=+a+(a<0?b:0);return this.pushStack(c>=0&&c<b?[this[c]]:[]);},end:function(){return this.prevObject||this.constructor(null);},push:f,sort:c.sort,splice:c.splice};m.extend=m.fn.extend=function(){var a,b,c,d,e,f,g=arguments[0]||{},h=1,i=arguments.length,j=false;if(typeof g==="boolean"){j=g;g=arguments[h]||{};h++;}if(typeof g!=="object"&&!m.isFunction(g))g={};if(h===i){g=this;h--;}for(;h<i;h++)if((e=arguments[h])!=null)for(d in e){a=g[d];c=e[d];if(g===c)continue;if(j&&c&&(m.isPlainObject(c)||(b=m.isArray(c)))){if(b){b=false;f=a&&m.isArray(a)?a:[];}else f=a&&m.isPlainObject(a)?a:{};g[d]=m.extend(j,f,c);}else if(c!==undefined)g[d]=c;}return g;};m.extend({expando:"jQuery"+(l+Math.random()).replace(/\D/g,""),isReady:true,error:function(a){throw new Error(a);},noop:function(){},isFunction:function(a){return m.type(a)==="function";},isArray:Array.isArray||function(a){return m.type(a)==="array";},isWindow:function(a){return a!=null&&a==a.window;},isNumeric:function(a){return !m.isArray(a)&&(a-parseFloat(a)+1)>=0;},isEmptyObject:function(a){var b;for(b in a)return false;return true;},isPlainObject:function(a){var b;if(!a||m.type(a)!=="object"||a.nodeType||m.isWindow(a))return false;try{if(a.constructor&&!j.call(a,"constructor")&&!j.call(a.constructor.prototype,"isPrototypeOf"))return false;}catch(c){return false;}if(k.ownLast)for(b in a)return j.call(a,b);for(b in a){}return b===undefined||j.call(a,b);},type:function(a){if(a==null)return a+"";return typeof a==="object"||typeof a==="function"?h[i.call(a)]||"object":typeof a;},globalEval:function(b){if(b&&m.trim(b))(a.execScript||function(b){a.eval.call(a,b);})(b);},camelCase:function(a){return a.replace(o,"ms-").replace(p,q);},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase();},each:function(a,b,c){var d,e=0,f=a.length,g=r(a);if(c){if(g){for(;e<f;e++){d=b.apply(a[e],c);if(d===false)break;}}else for(e in a){d=b.apply(a[e],c);if(d===false)break;}}else if(g){for(;e<f;e++){d=b.call(a[e],e,a[e]);if(d===false)break;}}else for(e in a){d=b.call(a[e],e,a[e]);if(d===false)break;}return a;},trim:function(a){return a==null?"":(a+"").replace(n,"");},makeArray:function(a,b){var c=b||[];if(a!=null)if(r(Object(a)))m.merge(c,typeof a==="string"?[a]:a);else f.call(c,a);return c;},inArray:function(a,b,c){var d;if(b){if(g)return g.call(b,a,c);d=b.length;c=c?c<0?Math.max(0,d+c):c:0;for(;c<d;c++)if(c in b&&b[c]===a)return c;}return -1;},merge:function(a,b){var c=+b.length,d=0,e=a.length;while(d<c)a[e++]=b[d++];if(c!==c)while(b[d]!==undefined)a[e++]=b[d++];a.length=e;return a;},grep:function(a,b,c){var d,e=[],f=0,g=a.length,h=!c;for(;f<g;f++){d=!b(a[f],f);if(d!==h)e.push(a[f]);}return e;},map:function(a,b,c){var d,f=0,g=a.length,h=r(a),i=[];if(h){for(;f<g;f++){d=b(a[f],f,c);if(d!=null)i.push(d);}}else for(f in a){d=b(a[f],f,c);if(d!=null)i.push(d);}return e.apply([],i);},guid:1,proxy:function(a,b){var c,e,f;if(typeof b==="string"){f=a[b];b=a;a=f;}if(!m.isFunction(a))return undefined;c=d.call(arguments,2);e=function(){return a.apply(b||this,c.concat(d.call(arguments)));};e.guid=a.guid=a.guid||m.guid++;return e;},now:function(){return +new Date();},support:k});m.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(a,b){h["[object "+b+"]"]=b.toLowerCase();});function r(a){var b="length" in a&&a.length,c=m.type(a);if(c==="function"||m.isWindow(a))return false;if(a.nodeType===1&&b)return true;return c==="array"||b===0||typeof b==="number"&&b>0&&(b-1) in a;}var s=(function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u="sizzle"+1*new Date(),v=a.document,w=0,x=0,y=ak(),z=ak(),A=ak(),B=function(a,b){if(a===b)l=true;return 0;},C=1<<31,D={}.hasOwnProperty,E=[],F=E.pop,G=E.push,H=E.push,I=E.slice,J=function(a,b){var c=0,d=a.length;for(;c<d;c++)if(a[c]===b)return c;return -1;},K="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",L="[\\x20\\t\\r\\n\\f]",M="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",N=M.replace("w","w#"),O="\\["+L+"*("+M+")(?:"+L+"*([*^$|!~]?=)"+L+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+N+"))|)"+L+"*\\]",P=":("+M+")(?:\\(("+"('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|"+"((?:\\\\.|[^\\\\()[\\]]|"+O+")*)|"+".*"+")\\)|)",Q=new RegExp(L+"+","g"),R=new RegExp("^"+L+"+|((?:^|[^\\\\])(?:\\\\.)*)"+L+"+$","g"),S=new RegExp("^"+L+"*,"+L+"*"),T=new RegExp("^"+L+"*([>+~]|"+L+")"+L+"*"),U=new RegExp("="+L+"*([^\\]'\"]*?)"+L+"*\\]","g"),V=new RegExp(P),W=new RegExp("^"+N+"$"),X={"ID":new RegExp("^#("+M+")"),"CLASS":new RegExp("^\\.("+M+")"),"TAG":new RegExp("^("+M.replace("w","w*")+")"),"ATTR":new RegExp("^"+O),"PSEUDO":new RegExp("^"+P),"CHILD":new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+L+"*(even|odd|(([+-]|)(\\d*)n|)"+L+"*(?:([+-]|)"+L+"*(\\d+)|))"+L+"*\\)|)","i"),"bool":new RegExp("^(?:"+K+")$","i"),"needsContext":new RegExp("^"+L+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+L+"*((?:-\\d)?\\d*)"+L+"*\\)|)(?=[^-]|$)","i")},Y=/^(?:input|select|textarea|button)$/i,Z=/^h\d$/i,ab=/^[^{]+\{\s*\[native \w/,ac=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ad=/[+~]/,ae=/'|\\/g,af=new RegExp("\\\\([\\da-f]{1,6}"+L+"?|("+L+")|.)","ig"),ag=function(a,b,c){var d="0x"+b-0x10000;return d!==d||c?b:d<0?String.fromCharCode(d+0x10000):String.fromCharCode(d>>10|0xD800,d&0x3FF|0xDC00);},ah=function(){m();};try{H.apply((E=I.call(v.childNodes)),v.childNodes);E[v.childNodes.length].nodeType;}catch(ai){H={apply:E.length?function(a,b){G.apply(a,I.call(b));}:function(a,b){var c=a.length,d=0;while((a[c++]=b[d++])){}a.length=c-1;}};}function aj(a,b,d,e){var f,h,j,k,l,o,r,s,w,x;if((b?b.ownerDocument||b:v)!==n)m(b);b=b||n;d=d||[];k=b.nodeType;if(typeof a!=="string"||!a||k!==1&&k!==9&&k!==11)return d;if(!e&&p){if(k!==11&&(f=ac.exec(a)))if((j=f[1])){if(k===9){h=b.getElementById(j);if(h&&h.parentNode){if(h.id===j){d.push(h);return d;}}else return d;}else if(b.ownerDocument&&(h=b.ownerDocument.getElementById(j))&&t(b,h)&&h.id===j){d.push(h);return d;}}else if(f[2]){H.apply(d,b.getElementsByTagName(a));return d;}else if((j=f[3])&&c.getElementsByClassName){H.apply(d,b.getElementsByClassName(j));return d;}if(c.qsa&&(!q||!q.test(a))){s=r=u;w=b;x=k!==1&&a;if(k===1&&b.nodeName.toLowerCase()!=="object"){o=g(a);if((r=b.getAttribute("id")))s=r.replace(ae,"\\$&");else b.setAttribute("id",s);s="[id='"+s+"'] ";l=o.length;while(l--)o[l]=s+au(o[l]);w=ad.test(a)&&as(b.parentNode)||b;x=o.join(",");}if(x)try{H.apply(d,w.querySelectorAll(x));return d;}catch(y){}finally{if(!r)b.removeAttribute("id");}}}return i(a.replace(R,"$1"),b,d,e);}function ak(){var a=[];function b(c,e){if(a.push(c+" ")>d.cacheLength)delete b[a.shift()];return(b[c+" "]=e);}return b;}function al(a){a[u]=true;return a;}function am(a){var b=n.createElement("div");try{return !!a(b);}catch(c){return false;}finally{if(b.parentNode)b.parentNode.removeChild(b);b=null;}}function an(a,b){var c=a.split("|"),e=a.length;while(e--)d.attrHandle[c[e]]=b;}function ao(a,b){var c=b&&a,d=c&&a.nodeType===1&&b.nodeType===1&&(~b.sourceIndex||C)-(~a.sourceIndex||C);if(d)return d;if(c)while((c=c.nextSibling))if(c===b)return -1;return a?1:-1;}function ap(a){return function(b){var c=b.nodeName.toLowerCase();return c==="input"&&b.type===a;};}function aq(a){return function(b){var c=b.nodeName.toLowerCase();return(c==="input"||c==="button")&&b.type===a;};}function ar(a){return al(function(b){b=+b;return al(function(c,d){var e,f=a([],c.length,b),g=f.length;while(g--)if(c[(e=f[g])])c[e]=!(d[e]=c[e]);});});}function as(a){return a&&typeof a.getElementsByTagName!=="undefined"&&a;}c=aj.support={};f=aj.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return b?b.nodeName!=="HTML":false;};m=aj.setDocument=function(a){var b,e,g=a?a.ownerDocument||a:v;if(g===n||g.nodeType!==9||!g.documentElement)return n;n=g;o=g.documentElement;e=g.defaultView;if(e&&e!==e.top)if(e.addEventListener)e.addEventListener("unload",ah,false);else if(e.attachEvent)e.attachEvent("onunload",ah);p=!f(g);c.attributes=am(function(a){a.className="i";return !a.getAttribute("className");});c.getElementsByTagName=am(function(a){a.appendChild(g.createComment(""));return !a.getElementsByTagName("*").length;});c.getElementsByClassName=ab.test(g.getElementsByClassName);c.getById=am(function(a){o.appendChild(a).id=u;return !g.getElementsByName||!g.getElementsByName(u).length;});if(c.getById){d.find.ID=function(a,b){if(typeof b.getElementById!=="undefined"&&p){var c=b.getElementById(a);return c&&c.parentNode?[c]:[];}};d.filter.ID=function(a){var b=a.replace(af,ag);return function(a){return a.getAttribute("id")===b;};};}else{delete d.find.ID;d.filter.ID=function(a){var b=a.replace(af,ag);return function(a){var c=typeof a.getAttributeNode!=="undefined"&&a.getAttributeNode("id");return c&&c.value===b;};};}d.find.TAG=c.getElementsByTagName?function(a,b){if(typeof b.getElementsByTagName!=="undefined")return b.getElementsByTagName(a);else if(c.qsa)return b.querySelectorAll(a);}:function(a,b){var c,d=[],e=0,f=b.getElementsByTagName(a);if(a==="*"){while((c=f[e++]))if(c.nodeType===1)d.push(c);return d;}return f;};d.find.CLASS=c.getElementsByClassName&&function(a,b){if(p)return b.getElementsByClassName(a);};r=[];q=[];if((c.qsa=ab.test(g.querySelectorAll))){am(function(a){o.appendChild(a).innerHTML="<a id='"+u+"'></a>"+"<select id='"+u+"-\f]' msallowcapture=''>"+"<option selected=''></option></select>";if(a.querySelectorAll("[msallowcapture^='']").length)q.push("[*^$]="+L+"*(?:''|\"\")");if(!a.querySelectorAll("[selected]").length)q.push("\\["+L+"*(?:value|"+K+")");if(!a.querySelectorAll("[id~="+u+"-]").length)q.push("~=");if(!a.querySelectorAll(":checked").length)q.push(":checked");if(!a.querySelectorAll("a#"+u+"+*").length)q.push(".#.+[+~]");});am(function(a){var b=g.createElement("input");b.setAttribute("type","hidden");a.appendChild(b).setAttribute("name","D");if(a.querySelectorAll("[name=d]").length)q.push("name"+L+"*[*^$|!~]?=");if(!a.querySelectorAll(":enabled").length)q.push(":enabled",":disabled");a.querySelectorAll("*,:x");q.push(",.*:");});}if((c.matchesSelector=ab.test((s=o.matches||o.webkitMatchesSelector||o.mozMatchesSelector||o.oMatchesSelector||o.msMatchesSelector))))am(function(a){c.disconnectedMatch=s.call(a,"div");s.call(a,"[s!='']:x");r.push("!=",P);});q=q.length&&new RegExp(q.join("|"));r=r.length&&new RegExp(r.join("|"));b=ab.test(o.compareDocumentPosition);t=b||ab.test(o.contains)?function(a,b){var c=a.nodeType===9?a.documentElement:a,d=b&&b.parentNode;return a===d||!!(d&&d.nodeType===1&&(c.contains?c.contains(d):a.compareDocumentPosition&&a.compareDocumentPosition(d)&16));}:function(a,b){if(b)while((b=b.parentNode))if(b===a)return true;return false;};B=b?function(a,b){if(a===b){l=true;return 0;}var d=!a.compareDocumentPosition-!b.compareDocumentPosition;if(d)return d;d=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1;if(d&1||(!c.sortDetached&&b.compareDocumentPosition(a)===d)){if(a===g||a.ownerDocument===v&&t(v,a))return -1;if(b===g||b.ownerDocument===v&&t(v,b))return 1;return k?(J(k,a)-J(k,b)):0;}return d&4?-1:1;}:function(a,b){if(a===b){l=true;return 0;}var c,d=0,e=a.parentNode,f=b.parentNode,h=[a],i=[b];if(!e||!f)return a===g?-1:b===g?1:e?-1:f?1:k?(J(k,a)-J(k,b)):0;else if(e===f)return ao(a,b);c=a;while((c=c.parentNode))h.unshift(c);c=b;while((c=c.parentNode))i.unshift(c);while(h[d]===i[d])d++;return d?ao(h[d],i[d]):h[d]===v?-1:i[d]===v?1:0;};return g;};aj.matches=function(a,b){return aj(a,null,null,b);};aj.matchesSelector=function(a,b){if((a.ownerDocument||a)!==n)m(a);b=b.replace(U,"='$1']");if(c.matchesSelector&&p&&(!r||!r.test(b))&&(!q||!q.test(b)))try{var d=s.call(a,b);if(d||c.disconnectedMatch||a.document&&a.document.nodeType!==11)return d;}catch(e){}return aj(b,n,null,[a]).length>0;};aj.contains=function(a,b){if((a.ownerDocument||a)!==n)m(a);return t(a,b);};aj.attr=function(a,b){if((a.ownerDocument||a)!==n)m(a);var e=d.attrHandle[b.toLowerCase()],f=e&&D.call(d.attrHandle,b.toLowerCase())?e(a,b,!p):undefined;return f!==undefined?f:c.attributes||!p?a.getAttribute(b):(f=a.getAttributeNode(b))&&f.specified?f.value:null;};aj.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a);};aj.uniqueSort=function(a){var b,d=[],e=0,f=0;l=!c.detectDuplicates;k=!c.sortStable&&a.slice(0);a.sort(B);if(l){while((b=a[f++]))if(b===a[f])e=d.push(f);while(e--)a.splice(d[e],1);}k=null;return a;};e=aj.getText=function(a){var b,c="",d=0,f=a.nodeType;if(!f)while((b=a[d++]))c+=e(b);else if(f===1||f===9||f===11)if(typeof a.textContent==="string")return a.textContent;else for(a=a.firstChild;a;a=a.nextSibling)c+=e(a);else if(f===3||f===4)return a.nodeValue;return c;};d=aj.selectors={cacheLength:50,createPseudo:al,match:X,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:true}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:true},"~":{dir:"previousSibling"}},preFilter:{"ATTR":function(a){a[1]=a[1].replace(af,ag);a[3]=(a[3]||a[4]||a[5]||"").replace(af,ag);if(a[2]==="~=")a[3]=" "+a[3]+" ";return a.slice(0,4);},"CHILD":function(a){a[1]=a[1].toLowerCase();if(a[1].slice(0,3)==="nth"){if(!a[3])aj.error(a[0]);a[4]=+(a[4]?a[5]+(a[6]||1):2*(a[3]==="even"||a[3]==="odd"));a[5]=+((a[7]+a[8])||a[3]==="odd");}else if(a[3])aj.error(a[0]);return a;},"PSEUDO":function(a){var b,c=!a[6]&&a[2];if(X.CHILD.test(a[0]))return null;if(a[3])a[2]=a[4]||a[5]||"";else if(c&&V.test(c)&&(b=g(c,true))&&(b=c.indexOf(")",c.length-b)-c.length)){a[0]=a[0].slice(0,b);a[2]=c.slice(0,b);}return a.slice(0,3);}},filter:{"TAG":function(a){var b=a.replace(af,ag).toLowerCase();return a==="*"?function(){return true;}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b;};},"CLASS":function(a){var b=y[a+" "];return b||(b=new RegExp("(^|"+L+")"+a+"("+L+"|$)"))&&y(a,function(a){return b.test(typeof a.className==="string"&&a.className||typeof a.getAttribute!=="undefined"&&a.getAttribute("class")||"");});},"ATTR":function(a,b,c){return function(d){var e=aj.attr(d,a);if(e==null)return b==="!=";if(!b)return true;e+="";return b==="="?e===c:b==="!="?e!==c:b==="^="?c&&e.indexOf(c)===0:b==="*="?c&&e.indexOf(c)>-1:b==="$="?c&&e.slice(-c.length)===c:b==="~="?(" "+e.replace(Q," ")+" ").indexOf(c)>-1:b==="|="?e===c||e.slice(0,c.length+1)===c+"-":false;};},"CHILD":function(a,b,c,d,e){var f=a.slice(0,3)!=="nth",g=a.slice(-4)!=="last",h=b==="of-type";return d===1&&e===0?function(a){return !!a.parentNode;}:function(b,c,i){var j,k,l,m,n,o,p=f!==g?"nextSibling":"previousSibling",q=b.parentNode,r=h&&b.nodeName.toLowerCase(),s=!i&&!h;if(q){if(f){while(p){l=b;while((l=l[p]))if(h?l.nodeName.toLowerCase()===r:l.nodeType===1)return false;o=p=a==="only"&&!o&&"nextSibling";}return true;}o=[g?q.firstChild:q.lastChild];if(g&&s){k=q[u]||(q[u]={});j=k[a]||[];n=j[0]===w&&j[1];m=j[0]===w&&j[2];l=n&&q.childNodes[n];while((l=++n&&l&&l[p]||(m=n=0)||o.pop()))if(l.nodeType===1&&++m&&l===b){k[a]=[w,n,m];break;}}else if(s&&(j=(b[u]||(b[u]={}))[a])&&j[0]===w)m=j[1];else while((l=++n&&l&&l[p]||(m=n=0)||o.pop()))if((h?l.nodeName.toLowerCase()===r:l.nodeType===1)&&++m){if(s)(l[u]||(l[u]={}))[a]=[w,m];if(l===b)break;}m-=e;return m===d||(m%d===0&&m/d>=0);}};},"PSEUDO":function(a,b){var c,e=d.pseudos[a]||d.setFilters[a.toLowerCase()]||aj.error("unsupported pseudo: "+a);if(e[u])return e(b);if(e.length>1){c=[a,a,"",b];return d.setFilters.hasOwnProperty(a.toLowerCase())?al(function(a,c){var d,f=e(a,b),g=f.length;while(g--){d=J(a,f[g]);a[d]=!(c[d]=f[g]);}}):function(a){return e(a,0,c);};}return e;}},pseudos:{"not":al(function(a){var b=[],c=[],d=h(a.replace(R,"$1"));return d[u]?al(function(a,b,c,e){var f,g=d(a,null,e,[]),h=a.length;while(h--)if((f=g[h]))a[h]=!(b[h]=f);}):function(a,e,f){b[0]=a;d(b,null,f,c);b[0]=null;return !c.pop();};}),"has":al(function(a){return function(b){return aj(a,b).length>0;};}),"contains":al(function(a){a=a.replace(af,ag);return function(b){return(b.textContent||b.innerText||e(b)).indexOf(a)>-1;};}),"lang":al(function(a){if(!W.test(a||""))aj.error("unsupported lang: "+a);a=a.replace(af,ag).toLowerCase();return function(b){var c;do if((c=p?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))){c=c.toLowerCase();return c===a||c.indexOf(a+"-")===0;}while((b=b.parentNode)&&b.nodeType===1);return false;};}),"target":function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id;},"root":function(a){return a===o;},"focus":function(a){return a===n.activeElement&&(!n.hasFocus||n.hasFocus())&&!!(a.type||a.href||~a.tabIndex);},"enabled":function(a){return a.disabled===false;},"disabled":function(a){return a.disabled===true;},"checked":function(a){var b=a.nodeName.toLowerCase();return(b==="input"&&!!a.checked)||(b==="option"&&!!a.selected);},"selected":function(a){if(a.parentNode)a.parentNode.selectedIndex;return a.selected===true;},"empty":function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeType<6)return false;return true;},"parent":function(a){return !d.pseudos.empty(a);},"header":function(a){return Z.test(a.nodeName);},"input":function(a){return Y.test(a.nodeName);},"button":function(a){var b=a.nodeName.toLowerCase();return b==="input"&&a.type==="button"||b==="button";},"text":function(a){var b;return a.nodeName.toLowerCase()==="input"&&a.type==="text"&&((b=a.getAttribute("type"))==null||b.toLowerCase()==="text");},"first":ar(function(){return [0];}),"last":ar(function(a,b){return [b-1];}),"eq":ar(function(a,b,c){return [c<0?c+b:c];}),"even":ar(function(a,b){var c=0;for(;c<b;c+=2)a.push(c);return a;}),"odd":ar(function(a,b){var c=1;for(;c<b;c+=2)a.push(c);return a;}),"lt":ar(function(a,b,c){var d=c<0?c+b:c;for(;--d>=0;)a.push(d);return a;}),"gt":ar(function(a,b,c){var d=c<0?c+b:c;for(;++d<b;)a.push(d);return a;})}};d.pseudos.nth=d.pseudos.eq;for(b in {radio:true,checkbox:true,file:true,password:true,image:true})d.pseudos[b]=ap(b);for(b in {submit:true,reset:true})d.pseudos[b]=aq(b);function at(){}at.prototype=d.filters=d.pseudos;d.setFilters=new at();g=aj.tokenize=function(a,b){var c,e,f,g,h,i,j,k=z[a+" "];if(k)return b?0:k.slice(0);h=a;i=[];j=d.preFilter;while(h){if(!c||(e=S.exec(h))){if(e)h=h.slice(e[0].length)||h;i.push((f=[]));}c=false;if((e=T.exec(h))){c=e.shift();f.push({value:c,type:e[0].replace(R," ")});h=h.slice(c.length);}for(g in d.filter)if((e=X[g].exec(h))&&(!j[g]||(e=j[g](e)))){c=e.shift();f.push({value:c,type:g,matches:e});h=h.slice(c.length);}if(!c)break;}return b?h.length:h?aj.error(a):z(a,i).slice(0);};function au(a){var b=0,c=a.length,d="";for(;b<c;b++)d+=a[b].value;return d;}function av(a,b,c){var d=b.dir,e=c&&d==="parentNode",f=x++;return b.first?function(b,c,f){while((b=b[d]))if(b.nodeType===1||e)return a(b,c,f);}:function(b,c,g){var h,i,j=[w,f];if(g){while((b=b[d]))if(b.nodeType===1||e)if(a(b,c,g))return true;}else while((b=b[d]))if(b.nodeType===1||e){i=b[u]||(b[u]={});if((h=i[d])&&h[0]===w&&h[1]===f)return(j[2]=h[2]);else{i[d]=j;if((j[2]=a(b,c,g)))return true;}}};}function aw(a){return a.length>1?function(b,c,d){var e=a.length;while(e--)if(!a[e](b,c,d))return false;return true;}:a[0];}function ax(a,b,c){var d=0,e=b.length;for(;d<e;d++)aj(a,b[d],c);return c;}function ay(a,b,c,d,e){var f,g=[],h=0,i=a.length,j=b!=null;for(;h<i;h++)if((f=a[h]))if(!c||c(f,d,e)){g.push(f);if(j)b.push(h);}return g;}function az(a,b,c,d,e,f){if(d&&!d[u])d=az(d);if(e&&!e[u])e=az(e,f);return al(function(f,g,h,i){var j,k,l,m=[],n=[],o=g.length,p=f||ax(b||"*",h.nodeType?[h]:h,[]),q=a&&(f||!b)?ay(p,m,a,h,i):p,r=c?e||(f?a:o||d)?[]:g:q;if(c)c(q,r,h,i);if(d){j=ay(r,n);d(j,[],h,i);k=j.length;while(k--)if((l=j[k]))r[n[k]]=!(q[n[k]]=l);}if(f){if(e||a){if(e){j=[];k=r.length;while(k--)if((l=r[k]))j.push((q[k]=l));e(null,(r=[]),j,i);}k=r.length;while(k--)if((l=r[k])&&(j=e?J(f,l):m[k])>-1)f[j]=!(g[j]=l);}}else{r=ay(r===g?r.splice(o,r.length):r);if(e)e(null,g,r,i);else H.apply(g,r);}});}function aA(a){var b,c,e,f=a.length,g=d.relative[a[0].type],h=g||d.relative[" "],i=g?1:0,k=av(function(a){return a===b;},h,true),l=av(function(a){return J(b,a)>-1;},h,true),m=[function(a,c,d){var e=(!g&&(d||c!==j))||((b=c).nodeType?k(a,c,d):l(a,c,d));b=null;return e;}];for(;i<f;i++)if((c=d.relative[a[i].type]))m=[av(aw(m),c)];else{c=d.filter[a[i].type].apply(null,a[i].matches);if(c[u]){e=++i;for(;e<f;e++)if(d.relative[a[e].type])break;return az(i>1&&aw(m),i>1&&au(a.slice(0,i-1).concat({value:a[i-2].type===" "?"*":""})).replace(R,"$1"),c,i<e&&aA(a.slice(i,e)),e<f&&aA((a=a.slice(e))),e<f&&au(a));}m.push(c);}return aw(m);}function aB(a,b){var c=b.length>0,e=a.length>0,f=function(f,g,h,i,k){var l,m,o,p=0,q="0",r=f&&[],s=[],t=j,u=f||e&&d.find.TAG("*",k),v=(w+=t==null?1:Math.random()||0.1),x=u.length;if(k)j=g!==n&&g;for(;q!==x&&(l=u[q])!=null;q++){if(e&&l){m=0;while((o=a[m++]))if(o(l,g,h)){i.push(l);break;}if(k)w=v;}if(c){if((l=!o&&l))p--;if(f)r.push(l);}}p+=q;if(c&&q!==p){m=0;while((o=b[m++]))o(r,s,g,h);if(f){if(p>0)while(q--)if(!(r[q]||s[q]))s[q]=F.call(i);s=ay(s);}H.apply(i,s);if(k&&!f&&s.length>0&&(p+b.length)>1)aj.uniqueSort(i);}if(k){w=v;j=t;}return r;};return c?al(f):f;}h=aj.compile=function(a,b){var c,d=[],e=[],f=A[a+" "];if(!f){if(!b)b=g(a);c=b.length;while(c--){f=aA(b[c]);if(f[u])d.push(f);else e.push(f);}f=A(a,aB(e,d));f.selector=a;}return f;};i=aj.select=function(a,b,e,f){var i,j,k,l,m,n=typeof a==="function"&&a,o=!f&&g((a=n.selector||a));e=e||[];if(o.length===1){j=o[0]=o[0].slice(0);if(j.length>2&&(k=j[0]).type==="ID"&&c.getById&&b.nodeType===9&&p&&d.relative[j[1].type]){b=(d.find.ID(k.matches[0].replace(af,ag),b)||[])[0];if(!b)return e;else if(n)b=b.parentNode;a=a.slice(j.shift().value.length);}i=X.needsContext.test(a)?0:j.length;while(i--){k=j[i];if(d.relative[(l=k.type)])break;if((m=d.find[l]))if((f=m(k.matches[0].replace(af,ag),ad.test(j[0].type)&&as(b.parentNode)||b))){j.splice(i,1);a=f.length&&au(j);if(!a){H.apply(e,f);return e;}break;}}}(n||h(a,o))(f,b,!p,e,ad.test(a)&&as(b.parentNode)||b);return e;};c.sortStable=u.split("").sort(B).join("")===u;c.detectDuplicates=!!l;m();c.sortDetached=am(function(a){return a.compareDocumentPosition(n.createElement("div"))&1;});if(!am(function(a){a.innerHTML="<a href='#'></a>";return a.firstChild.getAttribute("href")==="#";}))an("type|href|height|width",function(a,b,c){if(!c)return a.getAttribute(b,b.toLowerCase()==="type"?1:2);});if(!c.attributes||!am(function(a){a.innerHTML="<input/>";a.firstChild.setAttribute("value","");return a.firstChild.getAttribute("value")==="";}))an("value",function(a,b,c){if(!c&&a.nodeName.toLowerCase()==="input")return a.defaultValue;});if(!am(function(a){return a.getAttribute("disabled")==null;}))an(K,function(a,b,c){var d;if(!c)return a[b]===true?b.toLowerCase():(d=a.getAttributeNode(b))&&d.specified?d.value:null;});return aj;})(a);m.find=s;m.expr=s.selectors;m.expr[":"]=m.expr.pseudos;m.unique=s.uniqueSort;m.text=s.getText;m.isXMLDoc=s.isXML;m.contains=s.contains;var t=m.expr.match.needsContext;var u=(/^<(\w+)\s*\/?>(?:<\/\1>|)$/);var v=/^.[^:#\[\.,]*$/;function w(a,b,c){if(m.isFunction(b))return m.grep(a,function(a,d){return !!b.call(a,d,a)!==c;});if(b.nodeType)return m.grep(a,function(a){return(a===b)!==c;});if(typeof b==="string"){if(v.test(b))return m.filter(b,a,c);b=m.filter(b,a);}return m.grep(a,function(a){return(m.inArray(a,b)>=0)!==c;});}m.filter=function(a,b,c){var d=b[0];if(c)a=":not("+a+")";return b.length===1&&d.nodeType===1?m.find.matchesSelector(d,a)?[d]:[]:m.find.matches(a,m.grep(b,function(a){return a.nodeType===1;}));};m.fn.extend({find:function(a){var b,c=[],d=this,e=d.length;if(typeof a!=="string")return this.pushStack(m(a).filter(function(){for(b=0;b<e;b++)if(m.contains(d[b],this))return true;}));for(b=0;b<e;b++)m.find(a,d[b],c);c=this.pushStack(e>1?m.unique(c):c);c.selector=this.selector?this.selector+" "+a:a;return c;},filter:function(a){return this.pushStack(w(this,a||[],false));},not:function(a){return this.pushStack(w(this,a||[],true));},is:function(a){return !!w(this,typeof a==="string"&&t.test(a)?m(a):a||[],false).length;}});var x,y=a.document,z=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,A=m.fn.init=function(a,b){var c,d;if(!a)return this;if(typeof a==="string"){if(a.charAt(0)==="<"&&a.charAt(a.length-1)===">"&&a.length>=3)c=[null,a,null];else c=z.exec(a);if(c&&(c[1]||!b)){if(c[1]){b=b instanceof m?b[0]:b;m.merge(this,m.parseHTML(c[1],b&&b.nodeType?b.ownerDocument||b:y,true));if(u.test(c[1])&&m.isPlainObject(b))for(c in b)if(m.isFunction(this[c]))this[c](b[c]);else this.attr(c,b[c]);return this;}else{d=y.getElementById(c[2]);if(d&&d.parentNode){if(d.id!==c[2])return x.find(a);this.length=1;this[0]=d;}this.context=y;this.selector=a;return this;}}else if(!b||b.jquery)return(b||x).find(a);else return this.constructor(b).find(a);}else if(a.nodeType){this.context=this[0]=a;this.length=1;return this;}else if(m.isFunction(a))return typeof x.ready!=="undefined"?x.ready(a):a(m);if(a.selector!==undefined){this.selector=a.selector;this.context=a.context;}return m.makeArray(a,this);};A.prototype=m.fn;x=m(y);var B=/^(?:parents|prev(?:Until|All))/,C={children:true,contents:true,next:true,prev:true};m.extend({dir:function(a,b,c){var d=[],e=a[b];while(e&&e.nodeType!==9&&(c===undefined||e.nodeType!==1||!m(e).is(c))){if(e.nodeType===1)d.push(e);e=e[b];}return d;},sibling:function(a,b){var c=[];for(;a;a=a.nextSibling)if(a.nodeType===1&&a!==b)c.push(a);return c;}});m.fn.extend({has:function(a){var b,c=m(a,this),d=c.length;return this.filter(function(){for(b=0;b<d;b++)if(m.contains(this,c[b]))return true;});},closest:function(a,b){var c,d=0,e=this.length,f=[],g=t.test(a)||typeof a!=="string"?m(a,b||this.context):0;for(;d<e;d++)for(c=this[d];c&&c!==b;c=c.parentNode)if(c.nodeType<11&&(g?g.index(c)>-1:c.nodeType===1&&m.find.matchesSelector(c,a))){f.push(c);break;}return this.pushStack(f.length>1?m.unique(f):f);},index:function(a){if(!a)return(this[0]&&this[0].parentNode)?this.first().prevAll().length:-1;if(typeof a==="string")return m.inArray(this[0],m(a));return m.inArray(a.jquery?a[0]:a,this);},add:function(a,b){return this.pushStack(m.unique(m.merge(this.get(),m(a,b))));},addBack:function(a){return this.add(a==null?this.prevObject:this.prevObject.filter(a));}});function D(a,b){do a=a[b];while(a&&a.nodeType!==1);return a;}m.each({parent:function(a){var b=a.parentNode;return b&&b.nodeType!==11?b:null;},parents:function(a){return m.dir(a,"parentNode");},parentsUntil:function(a,b,c){return m.dir(a,"parentNode",c);},next:function(a){return D(a,"nextSibling");},prev:function(a){return D(a,"previousSibling");},nextAll:function(a){return m.dir(a,"nextSibling");},prevAll:function(a){return m.dir(a,"previousSibling");},nextUntil:function(a,b,c){return m.dir(a,"nextSibling",c);},prevUntil:function(a,b,c){return m.dir(a,"previousSibling",c);},siblings:function(a){return m.sibling((a.parentNode||{}).firstChild,a);},children:function(a){return m.sibling(a.firstChild);},contents:function(a){return m.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:m.merge([],a.childNodes);}},function(a,b){m.fn[a]=function(c,d){var e=m.map(this,b,c);if(a.slice(-5)!=="Until")d=c;if(d&&typeof d==="string")e=m.filter(d,e);if(this.length>1){if(!C[a])e=m.unique(e);if(B.test(a))e=e.reverse();}return this.pushStack(e);};});var E=(/\S+/g);var F={};function G(a){var b=F[a]={};m.each(a.match(E)||[],function(a,c){b[c]=true;});return b;}m.Callbacks=function(a){a=typeof a==="string"?(F[a]||G(a)):m.extend({},a);var b,c,d,e,f,g,h=[],i=!a.once&&[],j=function(l){c=a.memory&&l;d=true;f=g||0;g=0;e=h.length;b=true;for(;h&&f<e;f++)if(h[f].apply(l[0],l[1])===false&&a.stopOnFalse){c=false;break;}b=false;if(h)if(i){if(i.length)j(i.shift());}else if(c)h=[];else k.disable();},k={add:function(){if(h){var d=h.length;(function f(b){m.each(b,function(b,c){var d=m.type(c);if(d==="function"){if(!a.unique||!k.has(c))h.push(c);}else if(c&&c.length&&d!=="string")f(c);});})(arguments);if(b)e=h.length;else if(c){g=d;j(c);}}return this;},remove:function(){if(h)m.each(arguments,function(a,c){var d;while((d=m.inArray(c,h,d))>-1){h.splice(d,1);if(b){if(d<=e)e--;if(d<=f)f--;}}});return this;},has:function(a){return a?m.inArray(a,h)>-1:!!(h&&h.length);},empty:function(){h=[];e=0;return this;},disable:function(){h=i=c=undefined;return this;},disabled:function(){return !h;},lock:function(){i=undefined;if(!c)k.disable();return this;},locked:function(){return !i;},fireWith:function(a,c){if(h&&(!d||i)){c=c||[];c=[a,c.slice?c.slice():c];if(b)i.push(c);else j(c);}return this;},fire:function(){k.fireWith(this,arguments);return this;},fired:function(){return !!d;}};return k;};m.extend({Deferred:function(a){var b=[["resolve","done",m.Callbacks("once memory"),"resolved"],["reject","fail",m.Callbacks("once memory"),"rejected"],["notify","progress",m.Callbacks("memory")]],c="pending",d={state:function(){return c;},always:function(){e.done(arguments).fail(arguments);return this;},then:function(){var a=arguments;return m.Deferred(function(c){m.each(b,function(b,f){var g=m.isFunction(a[b])&&a[b];e[f[1]](function(){var a=g&&g.apply(this,arguments);if(a&&m.isFunction(a.promise))a.promise().done(c.resolve).fail(c.reject).progress(c.notify);else c[f[0]+"With"](this===d?c.promise():this,g?[a]:arguments);});});a=null;}).promise();},promise:function(a){return a!=null?m.extend(a,d):d;}},e={};d.pipe=d.then;m.each(b,function(a,f){var g=f[2],h=f[3];d[f[1]]=g.add;if(h)g.add(function(){c=h;},b[a^1][2].disable,b[2][2].lock);e[f[0]]=function(){e[f[0]+"With"](this===e?d:this,arguments);return this;};e[f[0]+"With"]=g.fireWith;});d.promise(e);if(a)a.call(e,e);return e;},when:function(a){var b=0,c=d.call(arguments),e=c.length,f=e!==1||(a&&m.isFunction(a.promise))?e:0,g=f===1?a:m.Deferred(),h=function(a,b,c){return function(e){b[a]=this;c[a]=arguments.length>1?d.call(arguments):e;if(c===i)g.notifyWith(b,c);else if(!(--f))g.resolveWith(b,c);};},i,j,k;if(e>1){i=new Array(e);j=new Array(e);k=new Array(e);for(;b<e;b++)if(c[b]&&m.isFunction(c[b].promise))c[b].promise().done(h(b,k,c)).fail(g.reject).progress(h(b,j,i));else --f;}if(!f)g.resolveWith(k,c);return g.promise();}});var H;m.fn.ready=function(a){m.ready.promise().done(a);return this;};m.extend({isReady:false,readyWait:1,holdReady:function(a){if(a)m.readyWait++;else m.ready(true);},ready:function(a){if(a===true?--m.readyWait:m.isReady)return;if(!y.body)return setTimeout(m.ready);m.isReady=true;if(a!==true&&--m.readyWait>0)return;H.resolveWith(y,[m]);if(m.fn.triggerHandler){m(y).triggerHandler("ready");m(y).off("ready");}}});function I(){if(y.addEventListener){y.removeEventListener("DOMContentLoaded",J,false);a.removeEventListener("load",J,false);}else{y.detachEvent("onreadystatechange",J);a.detachEvent("onload",J);}}function J(){if(y.addEventListener||event.type==="load"||y.readyState==="complete"){I();m.ready();}}m.ready.promise=function(b){if(!H){H=m.Deferred();if(y.readyState==="complete")setTimeout(m.ready);else if(y.addEventListener){y.addEventListener("DOMContentLoaded",J,false);a.addEventListener("load",J,false);}else{y.attachEvent("onreadystatechange",J);a.attachEvent("onload",J);var c=false;try{c=a.frameElement==null&&y.documentElement;}catch(d){}if(c&&c.doScroll)(function e(){if(!m.isReady){try{c.doScroll("left");}catch(a){return setTimeout(e,50);}I();m.ready();}})();}}return H.promise(b);};var K=typeof undefined;var L;for(L in m(k))break;k.ownLast=L!=="0";k.inlineBlockNeedsLayout=false;m(function(){var a,b,c,d;c=y.getElementsByTagName("body")[0];if(!c||!c.style)return;b=y.createElement("div");d=y.createElement("div");d.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px";c.appendChild(d).appendChild(b);if(typeof b.style.zoom!==K){b.style.cssText="display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1";k.inlineBlockNeedsLayout=a=b.offsetWidth===3;if(a)c.style.zoom=1;}c.removeChild(d);});(function(){var a=y.createElement("div");if(k.deleteExpando==null){k.deleteExpando=true;try{delete a.test;}catch(b){k.deleteExpando=false;}}a=null;})();m.acceptData=function(a){var b=m.noData[(a.nodeName+" ").toLowerCase()],c=+a.nodeType||1;return c!==1&&c!==9?false:!b||b!==true&&a.getAttribute("classid")===b;};var M=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,N=/([A-Z])/g;function O(a,b,c){if(c===undefined&&a.nodeType===1){var d="data-"+b.replace(N,"-$1").toLowerCase();c=a.getAttribute(d);if(typeof c==="string"){try{c=c==="true"?true:c==="false"?false:c==="null"?null:+c+""===c?+c:M.test(c)?m.parseJSON(c):c;}catch(e){}m.data(a,b,c);}else c=undefined;}return c;}function P(a){var b;for(b in a){if(b==="data"&&m.isEmptyObject(a[b]))continue;if(b!=="toJSON")return false;}return true;}function Q(a,b,d,e){if(!m.acceptData(a))return;var f,g,h=m.expando,i=a.nodeType,j=i?m.cache:a,k=i?a[h]:a[h]&&h;if((!k||!j[k]||(!e&&!j[k].data))&&d===undefined&&typeof b==="string")return;if(!k)if(i)k=a[h]=c.pop()||m.guid++;else k=h;if(!j[k])j[k]=i?{}:{toJSON:m.noop};if(typeof b==="object"||typeof b==="function")if(e)j[k]=m.extend(j[k],b);else j[k].data=m.extend(j[k].data,b);g=j[k];if(!e){if(!g.data)g.data={};g=g.data;}if(d!==undefined)g[m.camelCase(b)]=d;if(typeof b==="string"){f=g[b];if(f==null)f=g[m.camelCase(b)];}else f=g;return f;}function R(a,b,c){if(!m.acceptData(a))return;var d,e,f=a.nodeType,g=f?m.cache:a,h=f?a[m.expando]:m.expando;if(!g[h])return;if(b){d=c?g[h]:g[h].data;if(d){if(!m.isArray(b))if(b in d)b=[b];else{b=m.camelCase(b);if(b in d)b=[b];else b=b.split(" ");}else b=b.concat(m.map(b,m.camelCase));e=b.length;while(e--)delete d[b[e]];if(c?!P(d):!m.isEmptyObject(d))return;}}if(!c){delete g[h].data;if(!P(g[h]))return;}if(f)m.cleanData([a],true);else if(k.deleteExpando||g!=g.window)delete g[h];else g[h]=null;}m.extend({cache:{},noData:{"applet ":true,"embed ":true,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(a){a=a.nodeType?m.cache[a[m.expando]]:a[m.expando];return !!a&&!P(a);},data:function(a,b,c){return Q(a,b,c);},removeData:function(a,b){return R(a,b);},_data:function(a,b,c){return Q(a,b,c,true);},_removeData:function(a,b){return R(a,b,true);}});m.fn.extend({data:function(a,b){var c,d,e,f=this[0],g=f&&f.attributes;if(a===undefined){if(this.length){e=m.data(f);if(f.nodeType===1&&!m._data(f,"parsedAttrs")){c=g.length;while(c--)if(g[c]){d=g[c].name;if(d.indexOf("data-")===0){d=m.camelCase(d.slice(5));O(f,d,e[d]);}}m._data(f,"parsedAttrs",true);}}return e;}if(typeof a==="object")return this.each(function(){m.data(this,a);});return arguments.length>1?this.each(function(){m.data(this,a,b);}):f?O(f,a,m.data(f,a)):undefined;},removeData:function(a){return this.each(function(){m.removeData(this,a);});}});m.extend({queue:function(a,b,c){var d;if(a){b=(b||"fx")+"queue";d=m._data(a,b);if(c)if(!d||m.isArray(c))d=m._data(a,b,m.makeArray(c));else d.push(c);return d||[];}},dequeue:function(a,b){b=b||"fx";var c=m.queue(a,b),d=c.length,e=c.shift(),f=m._queueHooks(a,b),g=function(){m.dequeue(a,b);};if(e==="inprogress"){e=c.shift();d--;}if(e){if(b==="fx")c.unshift("inprogress");delete f.stop;e.call(a,g,f);}if(!d&&f)f.empty.fire();},_queueHooks:function(a,b){var c=b+"queueHooks";return m._data(a,c)||m._data(a,c,{empty:m.Callbacks("once memory").add(function(){m._removeData(a,b+"queue");m._removeData(a,c);})});}});m.fn.extend({queue:function(a,b){var c=2;if(typeof a!=="string"){b=a;a="fx";c--;}if(arguments.length<c)return m.queue(this[0],a);return b===undefined?this:this.each(function(){var c=m.queue(this,a,b);m._queueHooks(this,a);if(a==="fx"&&c[0]!=="inprogress")m.dequeue(this,a);});},dequeue:function(a){return this.each(function(){m.dequeue(this,a);});},clearQueue:function(a){return this.queue(a||"fx",[]);},promise:function(a,b){var c,d=1,e=m.Deferred(),f=this,g=this.length,h=function(){if(!(--d))e.resolveWith(f,[f]);};if(typeof a!=="string"){b=a;a=undefined;}a=a||"fx";while(g--){c=m._data(f[g],a+"queueHooks");if(c&&c.empty){d++;c.empty.add(h);}}h();return e.promise(b);}});var S=(/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/).source;var T=["Top","Right","Bottom","Left"];var U=function(a,b){a=b||a;return m.css(a,"display")==="none"||!m.contains(a.ownerDocument,a);};var V=m.access=function(a,b,c,d,e,f,g){var h=0,i=a.length,j=c==null;if(m.type(c)==="object"){e=true;for(h in c)m.access(a,b,h,c[h],true,f,g);}else if(d!==undefined){e=true;if(!m.isFunction(d))g=true;if(j)if(g){b.call(a,d);b=null;}else{j=b;b=function(a,b,c){return j.call(m(a),c);};}if(b)for(;h<i;h++)b(a[h],c,g?d:d.call(a[h],h,b(a[h],c)));}return e?a:j?b.call(a):i?b(a[0],c):f;};var W=(/^(?:checkbox|radio)$/i);(function(){var a=y.createElement("input"),b=y.createElement("div"),c=y.createDocumentFragment();b.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>";k.leadingWhitespace=b.firstChild.nodeType===3;k.tbody=!b.getElementsByTagName("tbody").length;k.htmlSerialize=!!b.getElementsByTagName("link").length;k.html5Clone=y.createElement("nav").cloneNode(true).outerHTML!=="<:nav></:nav>";a.type="checkbox";a.checked=true;c.appendChild(a);k.appendChecked=a.checked;b.innerHTML="<textarea>x</textarea>";k.noCloneChecked=!!b.cloneNode(true).lastChild.defaultValue;c.appendChild(b);b.innerHTML="<input type='radio' checked='checked' name='t'/>";k.checkClone=b.cloneNode(true).cloneNode(true).lastChild.checked;k.noCloneEvent=true;if(b.attachEvent){b.attachEvent("onclick",function(){k.noCloneEvent=false;});b.cloneNode(true).click();}if(k.deleteExpando==null){k.deleteExpando=true;try{delete b.test;}catch(d){k.deleteExpando=false;}}})();(function(){var b,c,d=y.createElement("div");for(b in {submit:true,change:true,focusin:true}){c="on"+b;if(!(k[b+"Bubbles"]=c in a)){d.setAttribute(c,"t");k[b+"Bubbles"]=d.attributes[c].expando===false;}}d=null;})();var X=/^(?:input|select|textarea)$/i,Y=/^key/,Z=/^(?:mouse|pointer|contextmenu)|click/,ab=/^(?:focusinfocus|focusoutblur)$/,ac=/^([^.]*)(?:\.(.+)|)$/;function ad(){return true;}function ae(){return false;}function af(){try{return y.activeElement;}catch(a){}}m.event={global:{},add:function(a,b,c,d,e){var f,g,h,i,j,k,l,n,o,p,q,r=m._data(a);if(!r)return;if(c.handler){i=c;c=i.handler;e=i.selector;}if(!c.guid)c.guid=m.guid++;if(!(g=r.events))g=r.events={};if(!(k=r.handle)){k=r.handle=function(a){return typeof m!==K&&(!a||m.event.triggered!==a.type)?m.event.dispatch.apply(k.elem,arguments):undefined;};k.elem=a;}b=(b||"").match(E)||[""];h=b.length;while(h--){f=ac.exec(b[h])||[];o=q=f[1];p=(f[2]||"").split(".").sort();if(!o)continue;j=m.event.special[o]||{};o=(e?j.delegateType:j.bindType)||o;j=m.event.special[o]||{};l=m.extend({type:o,origType:q,data:d,handler:c,guid:c.guid,selector:e,needsContext:e&&m.expr.match.needsContext.test(e),namespace:p.join(".")},i);if(!(n=g[o])){n=g[o]=[];n.delegateCount=0;if(!j.setup||j.setup.call(a,d,p,k)===false)if(a.addEventListener)a.addEventListener(o,k,false);else if(a.attachEvent)a.attachEvent("on"+o,k);}if(j.add){j.add.call(a,l);if(!l.handler.guid)l.handler.guid=c.guid;}if(e)n.splice(n.delegateCount++,0,l);else n.push(l);m.event.global[o]=true;}a=null;},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,n,o,p,q,r=m.hasData(a)&&m._data(a);if(!r||!(k=r.events))return;b=(b||"").match(E)||[""];j=b.length;while(j--){h=ac.exec(b[j])||[];o=q=h[1];p=(h[2]||"").split(".").sort();if(!o){for(o in k)m.event.remove(a,o+b[j],c,d,true);continue;}l=m.event.special[o]||{};o=(d?l.delegateType:l.bindType)||o;n=k[o]||[];h=h[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)");i=f=n.length;while(f--){g=n[f];if((e||q===g.origType)&&(!c||c.guid===g.guid)&&(!h||h.test(g.namespace))&&(!d||d===g.selector||d==="**"&&g.selector)){n.splice(f,1);if(g.selector)n.delegateCount--;if(l.remove)l.remove.call(a,g);}}if(i&&!n.length){if(!l.teardown||l.teardown.call(a,p,r.handle)===false)m.removeEvent(a,o,r.handle);delete k[o];}}if(m.isEmptyObject(k)){delete r.handle;m._removeData(a,"events");}},trigger:function(b,c,d,e){var f,g,h,i,k,l,n,o=[d||y],p=j.call(b,"type")?b.type:b,q=j.call(b,"namespace")?b.namespace.split("."):[];h=l=d=d||y;if(d.nodeType===3||d.nodeType===8)return;if(ab.test(p+m.event.triggered))return;if(p.indexOf(".")>=0){q=p.split(".");p=q.shift();q.sort();}g=p.indexOf(":")<0&&"on"+p;b=b[m.expando]?b:new m.Event(p,typeof b==="object"&&b);b.isTrigger=e?2:3;b.namespace=q.join(".");b.namespace_re=b.namespace?new RegExp("(^|\\.)"+q.join("\\.(?:.*\\.|)")+"(\\.|$)"):null;b.result=undefined;if(!b.target)b.target=d;c=c==null?[b]:m.makeArray(c,[b]);k=m.event.special[p]||{};if(!e&&k.trigger&&k.trigger.apply(d,c)===false)return;if(!e&&!k.noBubble&&!m.isWindow(d)){i=k.delegateType||p;if(!ab.test(i+p))h=h.parentNode;for(;h;h=h.parentNode){o.push(h);l=h;}if(l===(d.ownerDocument||y))o.push(l.defaultView||l.parentWindow||a);}n=0;while((h=o[n++])&&!b.isPropagationStopped()){b.type=n>1?i:k.bindType||p;f=(m._data(h,"events")||{})[b.type]&&m._data(h,"handle");if(f)f.apply(h,c);f=g&&h[g];if(f&&f.apply&&m.acceptData(h)){b.result=f.apply(h,c);if(b.result===false)b.preventDefault();}}b.type=p;if(!e&&!b.isDefaultPrevented())if((!k._default||k._default.apply(o.pop(),c)===false)&&m.acceptData(d))if(g&&d[p]&&!m.isWindow(d)){l=d[g];if(l)d[g]=null;m.event.triggered=p;try{d[p]();}catch(r){}m.event.triggered=undefined;if(l)d[g]=l;}return b.result;},dispatch:function(a){a=m.event.fix(a);var b,c,e,f,g,h=[],i=d.call(arguments),j=(m._data(this,"events")||{})[a.type]||[],k=m.event.special[a.type]||{};i[0]=a;a.delegateTarget=this;if(k.preDispatch&&k.preDispatch.call(this,a)===false)return;h=m.event.handlers.call(this,a,j);b=0;while((f=h[b++])&&!a.isPropagationStopped()){a.currentTarget=f.elem;g=0;while((e=f.handlers[g++])&&!a.isImmediatePropagationStopped())if(!a.namespace_re||a.namespace_re.test(e.namespace)){a.handleObj=e;a.data=e.data;c=((m.event.special[e.origType]||{}).handle||e.handler).apply(f.elem,i);if(c!==undefined)if((a.result=c)===false){a.preventDefault();a.stopPropagation();}}}if(k.postDispatch)k.postDispatch.call(this,a);return a.result;},handlers:function(a,b){var c,d,e,f,g=[],h=b.delegateCount,i=a.target;if(h&&i.nodeType&&(!a.button||a.type!=="click"))for(;i!=this;i=i.parentNode||this)if(i.nodeType===1&&(i.disabled!==true||a.type!=="click")){e=[];for(f=0;f<h;f++){d=b[f];c=d.selector+" ";if(e[c]===undefined)e[c]=d.needsContext?m(c,this).index(i)>=0:m.find(c,this,null,[i]).length;if(e[c])e.push(d);}if(e.length)g.push({elem:i,handlers:e});}if(h<b.length)g.push({elem:this,handlers:b.slice(h)});return g;},fix:function(a){if(a[m.expando])return a;var b,c,d,e=a.type,f=a,g=this.fixHooks[e];if(!g)this.fixHooks[e]=g=Z.test(e)?this.mouseHooks:Y.test(e)?this.keyHooks:{};d=g.props?this.props.concat(g.props):this.props;a=new m.Event(f);b=d.length;while(b--){c=d[b];a[c]=f[c];}if(!a.target)a.target=f.srcElement||y;if(a.target.nodeType===3)a.target=a.target.parentNode;a.metaKey=!!a.metaKey;return g.filter?g.filter(a,f):a;},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){if(a.which==null)a.which=b.charCode!=null?b.charCode:b.keyCode;return a;}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,b){var c,d,e,f=b.button,g=b.fromElement;if(a.pageX==null&&b.clientX!=null){d=a.target.ownerDocument||y;e=d.documentElement;c=d.body;a.pageX=b.clientX+(e&&e.scrollLeft||c&&c.scrollLeft||0)-(e&&e.clientLeft||c&&c.clientLeft||0);a.pageY=b.clientY+(e&&e.scrollTop||c&&c.scrollTop||0)-(e&&e.clientTop||c&&c.clientTop||0);}if(!a.relatedTarget&&g)a.relatedTarget=g===a.target?b.toElement:g;if(!a.which&&f!==undefined)a.which=(f&1?1:(f&2?3:(f&4?2:0)));return a;}},special:{load:{noBubble:true},focus:{trigger:function(){if(this!==af()&&this.focus)try{this.focus();return false;}catch(a){}},delegateType:"focusin"},blur:{trigger:function(){if(this===af()&&this.blur){this.blur();return false;}},delegateType:"focusout"},click:{trigger:function(){if(m.nodeName(this,"input")&&this.type==="checkbox"&&this.click){this.click();return false;}},_default:function(a){return m.nodeName(a.target,"a");}},beforeunload:{postDispatch:function(a){if(a.result!==undefined&&a.originalEvent)a.originalEvent.returnValue=a.result;}}},simulate:function(a,b,c,d){var e=m.extend(new m.Event(),c,{type:a,isSimulated:true,originalEvent:{}});if(d)m.event.trigger(e,null,b);else m.event.dispatch.call(b,e);if(e.isDefaultPrevented())c.preventDefault();}};m.removeEvent=y.removeEventListener?function(a,b,c){if(a.removeEventListener)a.removeEventListener(b,c,false);}:function(a,b,c){var d="on"+b;if(a.detachEvent){if(typeof a[d]===K)a[d]=null;a.detachEvent(d,c);}};m.Event=function(a,b){if(!(this instanceof m.Event))return new m.Event(a,b);if(a&&a.type){this.originalEvent=a;this.type=a.type;this.isDefaultPrevented=a.defaultPrevented||a.defaultPrevented===undefined&&a.returnValue===false?ad:ae;}else this.type=a;if(b)m.extend(this,b);this.timeStamp=a&&a.timeStamp||m.now();this[m.expando]=true;};m.Event.prototype={isDefaultPrevented:ae,isPropagationStopped:ae,isImmediatePropagationStopped:ae,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=ad;if(!a)return;if(a.preventDefault)a.preventDefault();else a.returnValue=false;},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=ad;if(!a)return;if(a.stopPropagation)a.stopPropagation();a.cancelBubble=true;},stopImmediatePropagation:function(){var a=this.originalEvent;this.isImmediatePropagationStopped=ad;if(a&&a.stopImmediatePropagation)a.stopImmediatePropagation();this.stopPropagation();}};m.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(a,b){m.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=this,e=a.relatedTarget,f=a.handleObj;if(!e||(e!==d&&!m.contains(d,e))){a.type=f.origType;c=f.handler.apply(this,arguments);a.type=b;}return c;}};});if(!k.submitBubbles)m.event.special.submit={setup:function(){if(m.nodeName(this,"form"))return false;m.event.add(this,"click._submit keypress._submit",function(a){var b=a.target,c=m.nodeName(b,"input")||m.nodeName(b,"button")?b.form:undefined;if(c&&!m._data(c,"submitBubbles")){m.event.add(c,"submit._submit",function(a){a._submit_bubble=true;});m._data(c,"submitBubbles",true);}});},postDispatch:function(a){if(a._submit_bubble){delete a._submit_bubble;if(this.parentNode&&!a.isTrigger)m.event.simulate("submit",this.parentNode,a,true);}},teardown:function(){if(m.nodeName(this,"form"))return false;m.event.remove(this,"._submit");}};if(!k.changeBubbles)m.event.special.change={setup:function(){if(X.test(this.nodeName)){if(this.type==="checkbox"||this.type==="radio"){m.event.add(this,"propertychange._change",function(a){if(a.originalEvent.propertyName==="checked")this._just_changed=true;});m.event.add(this,"click._change",function(a){if(this._just_changed&&!a.isTrigger)this._just_changed=false;m.event.simulate("change",this,a,true);});}return false;}m.event.add(this,"beforeactivate._change",function(a){var b=a.target;if(X.test(b.nodeName)&&!m._data(b,"changeBubbles")){m.event.add(b,"change._change",function(a){if(this.parentNode&&!a.isSimulated&&!a.isTrigger)m.event.simulate("change",this.parentNode,a,true);});m._data(b,"changeBubbles",true);}});},handle:function(a){var b=a.target;if(this!==b||a.isSimulated||a.isTrigger||(b.type!=="radio"&&b.type!=="checkbox"))return a.handleObj.handler.apply(this,arguments);},teardown:function(){m.event.remove(this,"._change");return !X.test(this.nodeName);}};if(!k.focusinBubbles)m.each({focus:"focusin",blur:"focusout"},function(a,b){var c=function(a){m.event.simulate(b,a.target,m.event.fix(a),true);};m.event.special[b]={setup:function(){var d=this.ownerDocument||this,e=m._data(d,b);if(!e)d.addEventListener(a,c,true);m._data(d,b,(e||0)+1);},teardown:function(){var d=this.ownerDocument||this,e=m._data(d,b)-1;if(!e){d.removeEventListener(a,c,true);m._removeData(d,b);}else m._data(d,b,e);}};});m.fn.extend({on:function(a,b,c,d,e){var f,g;if(typeof a==="object"){if(typeof b!=="string"){c=c||b;b=undefined;}for(f in a)this.on(f,b,c,a[f],e);return this;}if(c==null&&d==null){d=b;c=b=undefined;}else if(d==null)if(typeof b==="string"){d=c;c=undefined;}else{d=c;c=b;b=undefined;}if(d===false)d=ae;else if(!d)return this;if(e===1){g=d;d=function(a){m().off(a);return g.apply(this,arguments);};d.guid=g.guid||(g.guid=m.guid++);}return this.each(function(){m.event.add(this,a,d,c,b);});},one:function(a,b,c,d){return this.on(a,b,c,d,1);},off:function(a,b,c){var d,e;if(a&&a.preventDefault&&a.handleObj){d=a.handleObj;m(a.delegateTarget).off(d.namespace?d.origType+"."+d.namespace:d.origType,d.selector,d.handler);return this;}if(typeof a==="object"){for(e in a)this.off(e,b,a[e]);return this;}if(b===false||typeof b==="function"){c=b;b=undefined;}if(c===false)c=ae;return this.each(function(){m.event.remove(this,a,c,b);});},trigger:function(a,b){return this.each(function(){m.event.trigger(a,b,this);});},triggerHandler:function(a,b){var c=this[0];if(c)return m.event.trigger(a,b,c,true);}});function ag(a){var b=ah.split("|"),c=a.createDocumentFragment();if(c.createElement)while(b.length)c.createElement(b.pop());return c;}var ah="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|"+"header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",ai=/ jQuery\d+="(?:null|\d+)"/g,aj=new RegExp("<(?:"+ah+")[\\s/>]","i"),ak=/^\s+/,al=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,am=/<([\w:]+)/,an=/<tbody/i,ao=/<|&#?\w+;/,ap=/<(?:script|style|link)/i,aq=/checked\s*(?:[^=]|=\s*.checked.)/i,ar=/^$|\/(?:java|ecma)script/i,as=/^true\/(.*)/,at=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,au={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:k.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},av=ag(y),aw=av.appendChild(y.createElement("div"));au.optgroup=au.option;au.tbody=au.tfoot=au.colgroup=au.caption=au.thead;au.th=au.td;function ax(a,b){var c,d,e=0,f=typeof a.getElementsByTagName!==K?a.getElementsByTagName(b||"*"):typeof a.querySelectorAll!==K?a.querySelectorAll(b||"*"):undefined;if(!f)for(f=[],c=a.childNodes||a;(d=c[e])!=null;e++)if(!b||m.nodeName(d,b))f.push(d);else m.merge(f,ax(d,b));return b===undefined||b&&m.nodeName(a,b)?m.merge([a],f):f;}function ay(a){if(W.test(a.type))a.defaultChecked=a.checked;}function az(a,b){return m.nodeName(a,"table")&&m.nodeName(b.nodeType!==11?b:b.firstChild,"tr")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a;}function aA(a){a.type=(m.find.attr(a,"type")!==null)+"/"+a.type;return a;}function aB(a){var b=as.exec(a.type);if(b)a.type=b[1];else a.removeAttribute("type");return a;}function aC(a,b){var c,d=0;for(;(c=a[d])!=null;d++)m._data(c,"globalEval",!b||m._data(b[d],"globalEval"));}function aD(a,b){if(b.nodeType!==1||!m.hasData(a))return;var c,d,e,f=m._data(a),g=m._data(b,f),h=f.events;if(h){delete g.handle;g.events={};for(c in h)for(d=0,e=h[c].length;d<e;d++)m.event.add(b,c,h[c][d]);}if(g.data)g.data=m.extend({},g.data);}function aE(a,b){var c,d,e;if(b.nodeType!==1)return;c=b.nodeName.toLowerCase();if(!k.noCloneEvent&&b[m.expando]){e=m._data(b);for(d in e.events)m.removeEvent(b,d,e.handle);b.removeAttribute(m.expando);}if(c==="script"&&b.text!==a.text){aA(b).text=a.text;aB(b);}else if(c==="object"){if(b.parentNode)b.outerHTML=a.outerHTML;if(k.html5Clone&&(a.innerHTML&&!m.trim(b.innerHTML)))b.innerHTML=a.innerHTML;}else if(c==="input"&&W.test(a.type)){b.defaultChecked=b.checked=a.checked;if(b.value!==a.value)b.value=a.value;}else if(c==="option")b.defaultSelected=b.selected=a.defaultSelected;else if(c==="input"||c==="textarea")b.defaultValue=a.defaultValue;}m.extend({clone:function(a,b,c){var d,e,f,g,h,i=m.contains(a.ownerDocument,a);if(k.html5Clone||m.isXMLDoc(a)||!aj.test("<"+a.nodeName+">"))f=a.cloneNode(true);else{aw.innerHTML=a.outerHTML;aw.removeChild(f=aw.firstChild);}if((!k.noCloneEvent||!k.noCloneChecked)&&(a.nodeType===1||a.nodeType===11)&&!m.isXMLDoc(a)){d=ax(f);h=ax(a);for(g=0;(e=h[g])!=null;++g)if(d[g])aE(e,d[g]);}if(b)if(c){h=h||ax(a);d=d||ax(f);for(g=0;(e=h[g])!=null;g++)aD(e,d[g]);}else aD(a,f);d=ax(f,"script");if(d.length>0)aC(d,!i&&ax(a,"script"));d=h=e=null;return f;},buildFragment:function(a,b,c,d){var e,f,g,h,i,j,l,n=a.length,o=ag(b),p=[],q=0;for(;q<n;q++){f=a[q];if(f||f===0)if(m.type(f)==="object")m.merge(p,f.nodeType?[f]:f);else if(!ao.test(f))p.push(b.createTextNode(f));else{h=h||o.appendChild(b.createElement("div"));i=(am.exec(f)||["",""])[1].toLowerCase();l=au[i]||au._default;h.innerHTML=l[1]+f.replace(al,"<$1></$2>")+l[2];e=l[0];while(e--)h=h.lastChild;if(!k.leadingWhitespace&&ak.test(f))p.push(b.createTextNode(ak.exec(f)[0]));if(!k.tbody){f=i==="table"&&!an.test(f)?h.firstChild:l[1]==="<table>"&&!an.test(f)?h:0;e=f&&f.childNodes.length;while(e--)if(m.nodeName((j=f.childNodes[e]),"tbody")&&!j.childNodes.length)f.removeChild(j);}m.merge(p,h.childNodes);h.textContent="";while(h.firstChild)h.removeChild(h.firstChild);h=o.lastChild;}}if(h)o.removeChild(h);if(!k.appendChecked)m.grep(ax(p,"input"),ay);q=0;while((f=p[q++])){if(d&&m.inArray(f,d)!==-1)continue;g=m.contains(f.ownerDocument,f);h=ax(o.appendChild(f),"script");if(g)aC(h);if(c){e=0;while((f=h[e++]))if(ar.test(f.type||""))c.push(f);}}h=null;return o;},cleanData:function(a,b){var d,e,f,g,h=0,i=m.expando,j=m.cache,l=k.deleteExpando,n=m.event.special;for(;(d=a[h])!=null;h++)if(b||m.acceptData(d)){f=d[i];g=f&&j[f];if(g){if(g.events)for(e in g.events)if(n[e])m.event.remove(d,e);else m.removeEvent(d,e,g.handle);if(j[f]){delete j[f];if(l)delete d[i];else if(typeof d.removeAttribute!==K)d.removeAttribute(i);else d[i]=null;c.push(f);}}}}});m.fn.extend({text:function(a){return V(this,function(a){return a===undefined?m.text(this):this.empty().append((this[0]&&this[0].ownerDocument||y).createTextNode(a));},null,a,arguments.length);},append:function(){return this.domManip(arguments,function(a){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var b=az(this,a);b.appendChild(a);}});},prepend:function(){return this.domManip(arguments,function(a){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var b=az(this,a);b.insertBefore(a,b.firstChild);}});},before:function(){return this.domManip(arguments,function(a){if(this.parentNode)this.parentNode.insertBefore(a,this);});},after:function(){return this.domManip(arguments,function(a){if(this.parentNode)this.parentNode.insertBefore(a,this.nextSibling);});},remove:function(a,b){var c,d=a?m.filter(a,this):this,e=0;for(;(c=d[e])!=null;e++){if(!b&&c.nodeType===1)m.cleanData(ax(c));if(c.parentNode){if(b&&m.contains(c.ownerDocument,c))aC(ax(c,"script"));c.parentNode.removeChild(c);}}return this;},empty:function(){var a,b=0;for(;(a=this[b])!=null;b++){if(a.nodeType===1)m.cleanData(ax(a,false));while(a.firstChild)a.removeChild(a.firstChild);if(a.options&&m.nodeName(a,"select"))a.options.length=0;}return this;},clone:function(a,b){a=a==null?false:a;b=b==null?a:b;return this.map(function(){return m.clone(this,a,b);});},html:function(a){return V(this,function(a){var b=this[0]||{},c=0,d=this.length;if(a===undefined)return b.nodeType===1?b.innerHTML.replace(ai,""):undefined;if(typeof a==="string"&&!ap.test(a)&&(k.htmlSerialize||!aj.test(a))&&(k.leadingWhitespace||!ak.test(a))&&!au[(am.exec(a)||["",""])[1].toLowerCase()]){a=a.replace(al,"<$1></$2>");try{for(;c<d;c++){b=this[c]||{};if(b.nodeType===1){m.cleanData(ax(b,false));b.innerHTML=a;}}b=0;}catch(e){}}if(b)this.empty().append(a);},null,a,arguments.length);},replaceWith:function(){var a=arguments[0];this.domManip(arguments,function(b){a=this.parentNode;m.cleanData(ax(this));if(a)a.replaceChild(b,this);});return a&&(a.length||a.nodeType)?this:this.remove();},detach:function(a){return this.remove(a,true);},domManip:function(a,b){a=e.apply([],a);var c,d,f,g,h,i,j=0,l=this.length,n=this,o=l-1,p=a[0],q=m.isFunction(p);if(q||(l>1&&typeof p==="string"&&!k.checkClone&&aq.test(p)))return this.each(function(c){var d=n.eq(c);if(q)a[0]=p.call(this,c,d.html());d.domManip(a,b);});if(l){i=m.buildFragment(a,this[0].ownerDocument,false,this);c=i.firstChild;if(i.childNodes.length===1)i=c;if(c){g=m.map(ax(i,"script"),aA);f=g.length;for(;j<l;j++){d=i;if(j!==o){d=m.clone(d,true,true);if(f)m.merge(g,ax(d,"script"));}b.call(this[j],d,j);}if(f){h=g[g.length-1].ownerDocument;m.map(g,aB);for(j=0;j<f;j++){d=g[j];if(ar.test(d.type||"")&&!m._data(d,"globalEval")&&m.contains(h,d))if(d.src){if(m._evalUrl)m._evalUrl(d.src);}else m.globalEval((d.text||d.textContent||d.innerHTML||"").replace(at,""));}}i=c=null;}}return this;}});m.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){m.fn[a]=function(a){var c,d=0,e=[],g=m(a),h=g.length-1;for(;d<=h;d++){c=d===h?this:this.clone(true);m(g[d])[b](c);f.apply(e,c.get());}return this.pushStack(e);};});var aF,aG={};function aH(b,c){var d,e=m(c.createElement(b)).appendTo(c.body),f=a.getDefaultComputedStyle&&(d=a.getDefaultComputedStyle(e[0]))?d.display:m.css(e[0],"display");e.detach();return f;}function aI(a){var b=y,c=aG[a];if(!c){c=aH(a,b);if(c==="none"||!c){aF=(aF||m("<iframe frameborder='0' width='0' height='0'/>")).appendTo(b.documentElement);b=(aF[0].contentWindow||aF[0].contentDocument).document;b.write();b.close();c=aH(a,b);aF.detach();}aG[a]=c;}return c;}(function(){var a;k.shrinkWrapBlocks=function(){if(a!=null)return a;a=false;var b,c,d;c=y.getElementsByTagName("body")[0];if(!c||!c.style)return;b=y.createElement("div");d=y.createElement("div");d.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px";c.appendChild(d).appendChild(b);if(typeof b.style.zoom!==K){b.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;"+"box-sizing:content-box;display:block;margin:0;border:0;"+"padding:1px;width:1px;zoom:1";b.appendChild(y.createElement("div")).style.width="5px";a=b.offsetWidth!==3;}c.removeChild(d);return a;};})();var aJ=(/^margin/);var aK=new RegExp("^("+S+")(?!px)[a-z%]+$","i");var aL,aM,aN=/^(top|right|bottom|left)$/;if(a.getComputedStyle){aL=function(b){if(b.ownerDocument.defaultView.opener)return b.ownerDocument.defaultView.getComputedStyle(b,null);return a.getComputedStyle(b,null);};aM=function(a,b,c){var d,e,f,g,h=a.style;c=c||aL(a);g=c?c.getPropertyValue(b)||c[b]:undefined;if(c){if(g===""&&!m.contains(a.ownerDocument,a))g=m.style(a,b);if(aK.test(g)&&aJ.test(b)){d=h.width;e=h.minWidth;f=h.maxWidth;h.minWidth=h.maxWidth=h.width=g;g=c.width;h.width=d;h.minWidth=e;h.maxWidth=f;}}return g===undefined?g:g+"";};}else if(y.documentElement.currentStyle){aL=function(a){return a.currentStyle;};aM=function(a,b,c){var d,e,f,g,h=a.style;c=c||aL(a);g=c?c[b]:undefined;if(g==null&&h&&h[b])g=h[b];if(aK.test(g)&&!aN.test(b)){d=h.left;e=a.runtimeStyle;f=e&&e.left;if(f)e.left=a.currentStyle.left;h.left=b==="fontSize"?"1em":g;g=h.pixelLeft+"px";h.left=d;if(f)e.left=f;}return g===undefined?g:g+""||"auto";};}function aO(a,b){return{get:function(){var c=a();if(c==null)return;if(c){delete this.get;return;}return(this.get=b).apply(this,arguments);}};}(function(){var b,c,d,e,f,g,h;b=y.createElement("div");b.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>";d=b.getElementsByTagName("a")[0];c=d&&d.style;if(!c)return;c.cssText="float:left;opacity:.5";k.opacity=c.opacity==="0.5";k.cssFloat=!!c.cssFloat;b.style.backgroundClip="content-box";b.cloneNode(true).style.backgroundClip="";k.clearCloneStyle=b.style.backgroundClip==="content-box";k.boxSizing=c.boxSizing===""||c.MozBoxSizing===""||c.WebkitBoxSizing==="";m.extend(k,{reliableHiddenOffsets:function(){if(g==null)i();return g;},boxSizingReliable:function(){if(f==null)i();return f;},pixelPosition:function(){if(e==null)i();return e;},reliableMarginRight:function(){if(h==null)i();return h;}});function i(){var b,c,d,i;c=y.getElementsByTagName("body")[0];if(!c||!c.style)return;b=y.createElement("div");d=y.createElement("div");d.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px";c.appendChild(d).appendChild(b);b.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;"+"box-sizing:border-box;display:block;margin-top:1%;top:1%;"+"border:1px;padding:1px;width:4px;position:absolute";e=f=false;h=true;if(a.getComputedStyle){e=(a.getComputedStyle(b,null)||{}).top!=="1%";f=(a.getComputedStyle(b,null)||{width:"4px"}).width==="4px";i=b.appendChild(y.createElement("div"));i.style.cssText=b.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;"+"box-sizing:content-box;display:block;margin:0;border:0;padding:0";i.style.marginRight=i.style.width="0";b.style.width="1px";h=!parseFloat((a.getComputedStyle(i,null)||{}).marginRight);b.removeChild(i);}b.innerHTML="<table><tr><td></td><td>t</td></tr></table>";i=b.getElementsByTagName("td");i[0].style.cssText="margin:0;border:0;padding:0;display:none";g=i[0].offsetHeight===0;if(g){i[0].style.display="";i[1].style.display="none";g=i[0].offsetHeight===0;}c.removeChild(d);}})();m.swap=function(a,b,c,d){var e,f,g={};for(f in b){g[f]=a.style[f];a.style[f]=b[f];}e=c.apply(a,d||[]);for(f in b)a.style[f]=g[f];return e;};var aP=/alpha\([^)]*\)/i,aQ=/opacity\s*=\s*([^)]*)/,aR=/^(none|table(?!-c[ea]).+)/,aS=new RegExp("^("+S+")(.*)$","i"),aT=new RegExp("^([+-])=("+S+")","i"),aU={position:"absolute",visibility:"hidden",display:"block"},aV={letterSpacing:"0",fontWeight:"400"},aW=["Webkit","O","Moz","ms"];function aX(a,b){if(b in a)return b;var c=b.charAt(0).toUpperCase()+b.slice(1),d=b,e=aW.length;while(e--){b=aW[e]+c;if(b in a)return b;}return d;}function aY(a,b){var c,d,e,f=[],g=0,h=a.length;for(;g<h;g++){d=a[g];if(!d.style)continue;f[g]=m._data(d,"olddisplay");c=d.style.display;if(b){if(!f[g]&&c==="none")d.style.display="";if(d.style.display===""&&U(d))f[g]=m._data(d,"olddisplay",aI(d.nodeName));}else{e=U(d);if(c&&c!=="none"||!e)m._data(d,"olddisplay",e?c:m.css(d,"display"));}}for(g=0;g<h;g++){d=a[g];if(!d.style)continue;if(!b||d.style.display==="none"||d.style.display==="")d.style.display=b?f[g]||"":"none";}return a;}function aZ(a,b,c){var d=aS.exec(b);return d?Math.max(0,d[1]-(c||0))+(d[2]||"px"):b;}function bc(a,b,c,d,e){var f=c===(d?"border":"content")?4:b==="width"?1:0,g=0;for(;f<4;f+=2){if(c==="margin")g+=m.css(a,c+T[f],true,e);if(d){if(c==="content")g-=m.css(a,"padding"+T[f],true,e);if(c!=="margin")g-=m.css(a,"border"+T[f]+"Width",true,e);}else{g+=m.css(a,"padding"+T[f],true,e);if(c!=="padding")g+=m.css(a,"border"+T[f]+"Width",true,e);}}return g;}function bd(a,b,c){var d=true,e=b==="width"?a.offsetWidth:a.offsetHeight,f=aL(a),g=k.boxSizing&&m.css(a,"boxSizing",false,f)==="border-box";if(e<=0||e==null){e=aM(a,b,f);if(e<0||e==null)e=a.style[b];if(aK.test(e))return e;d=g&&(k.boxSizingReliable()||e===a.style[b]);e=parseFloat(e)||0;}return(e+bc(a,b,c||(g?"border":"content"),d,f))+"px";}m.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=aM(a,"opacity");return c===""?"1":c;}}}},cssNumber:{"columnCount":true,"fillOpacity":true,"flexGrow":true,"flexShrink":true,"fontWeight":true,"lineHeight":true,"opacity":true,"order":true,"orphans":true,"widows":true,"zIndex":true,"zoom":true},cssProps:{"float":k.cssFloat?"cssFloat":"styleFloat"},style:function(a,b,c,d){if(!a||a.nodeType===3||a.nodeType===8||!a.style)return;var e,f,g,h=m.camelCase(b),i=a.style;b=m.cssProps[h]||(m.cssProps[h]=aX(i,h));g=m.cssHooks[b]||m.cssHooks[h];if(c!==undefined){f=typeof c;if(f==="string"&&(e=aT.exec(c))){c=(e[1]+1)*e[2]+parseFloat(m.css(a,b));f="number";}if(c==null||c!==c)return;if(f==="number"&&!m.cssNumber[h])c+="px";if(!k.clearCloneStyle&&c===""&&b.indexOf("background")===0)i[b]="inherit";if(!g||!("set" in g)||(c=g.set(a,c,d))!==undefined)try{i[b]=c;}catch(j){}}else{if(g&&"get" in g&&(e=g.get(a,false,d))!==undefined)return e;return i[b];}},css:function(a,b,c,d){var e,f,g,h=m.camelCase(b);b=m.cssProps[h]||(m.cssProps[h]=aX(a.style,h));g=m.cssHooks[b]||m.cssHooks[h];if(g&&"get" in g)f=g.get(a,true,c);if(f===undefined)f=aM(a,b,d);if(f==="normal"&&b in aV)f=aV[b];if(c===""||c){e=parseFloat(f);return c===true||m.isNumeric(e)?e||0:f;}return f;}});m.each(["height","width"],function(a,b){m.cssHooks[b]={get:function(a,c,d){if(c)return aR.test(m.css(a,"display"))&&a.offsetWidth===0?m.swap(a,aU,function(){return bd(a,b,d);}):bd(a,b,d);},set:function(a,c,d){var e=d&&aL(a);return aZ(a,c,d?bc(a,b,d,k.boxSizing&&m.css(a,"boxSizing",false,e)==="border-box",e):0);}};});if(!k.opacity)m.cssHooks.opacity={get:function(a,b){return aQ.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?(0.01*parseFloat(RegExp.$1))+"":b?"1":"";},set:function(a,b){var c=a.style,d=a.currentStyle,e=m.isNumeric(b)?"alpha(opacity="+b*100+")":"",f=d&&d.filter||c.filter||"";c.zoom=1;if((b>=1||b==="")&&m.trim(f.replace(aP,""))===""&&c.removeAttribute){c.removeAttribute("filter");if(b===""||d&&!d.filter)return;}c.filter=aP.test(f)?f.replace(aP,e):f+" "+e;}};m.cssHooks.marginRight=aO(k.reliableMarginRight,function(a,b){if(b)return m.swap(a,{"display":"inline-block"},aM,[a,"marginRight"]);});m.each({margin:"",padding:"",border:"Width"},function(a,b){m.cssHooks[a+b]={expand:function(c){var d=0,e={},f=typeof c==="string"?c.split(" "):[c];for(;d<4;d++)e[a+T[d]+b]=f[d]||f[d-2]||f[0];return e;}};if(!aJ.test(a))m.cssHooks[a+b].set=aZ;});m.fn.extend({css:function(a,b){return V(this,function(a,b,c){var d,e,f={},g=0;if(m.isArray(b)){d=aL(a);e=b.length;for(;g<e;g++)f[b[g]]=m.css(a,b[g],false,d);return f;}return c!==undefined?m.style(a,b,c):m.css(a,b);},a,b,arguments.length>1);},show:function(){return aY(this,true);},hide:function(){return aY(this);},toggle:function(a){if(typeof a==="boolean")return a?this.show():this.hide();return this.each(function(){if(U(this))m(this).show();else m(this).hide();});}});function be(a,b,c,d,e){return new be.prototype.init(a,b,c,d,e);}m.Tween=be;be.prototype={constructor:be,init:function(a,b,c,d,e,f){this.elem=a;this.prop=c;this.easing=e||"swing";this.options=b;this.start=this.now=this.cur();this.end=d;this.unit=f||(m.cssNumber[c]?"":"px");},cur:function(){var a=be.propHooks[this.prop];return a&&a.get?a.get(this):be.propHooks._default.get(this);},run:function(a){var b,c=be.propHooks[this.prop];if(this.options.duration)this.pos=b=m.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration);else this.pos=b=a;this.now=(this.end-this.start)*b+this.start;if(this.options.step)this.options.step.call(this.elem,this.now,this);if(c&&c.set)c.set(this);else be.propHooks._default.set(this);return this;}};be.prototype.init.prototype=be.prototype;be.propHooks={_default:{get:function(a){var b;if(a.elem[a.prop]!=null&&(!a.elem.style||a.elem.style[a.prop]==null))return a.elem[a.prop];b=m.css(a.elem,a.prop,"");return !b||b==="auto"?0:b;},set:function(a){if(m.fx.step[a.prop])m.fx.step[a.prop](a);else if(a.elem.style&&(a.elem.style[m.cssProps[a.prop]]!=null||m.cssHooks[a.prop]))m.style(a.elem,a.prop,a.now+a.unit);else a.elem[a.prop]=a.now;}}};be.propHooks.scrollTop=be.propHooks.scrollLeft={set:function(a){if(a.elem.nodeType&&a.elem.parentNode)a.elem[a.prop]=a.now;}};m.easing={linear:function(a){return a;},swing:function(a){return 0.5-Math.cos(a*Math.PI)/2;}};m.fx=be.prototype.init;m.fx.step={};var bf,bg,bh=/^(?:toggle|show|hide)$/,bi=new RegExp("^(?:([+-])=|)("+S+")([a-z%]*)$","i"),bj=/queueHooks$/,bk=[bp],bl={"*":[function(a,b){var c=this.createTween(a,b),d=c.cur(),e=bi.exec(b),f=e&&e[3]||(m.cssNumber[a]?"":"px"),g=(m.cssNumber[a]||f!=="px"&&+d)&&bi.exec(m.css(c.elem,a)),h=1,i=20;if(g&&g[3]!==f){f=f||g[3];e=e||[];g=+d||1;do{h=h||".5";g=g/h;m.style(c.elem,a,g+f);}while(h!==(h=c.cur()/d)&&h!==1&&--i);}if(e){g=c.start=+g||+d||0;c.unit=f;c.end=e[1]?g+(e[1]+1)*e[2]:+e[2];}return c;}]};function bm(){setTimeout(function(){bf=undefined;});return(bf=m.now());}function bn(a,b){var c,d={height:a},e=0;b=b?1:0;for(;e<4;e+=2-b){c=T[e];d["margin"+c]=d["padding"+c]=a;}if(b)d.opacity=d.width=a;return d;}function bo(a,b,c){var d,e=(bl[b]||[]).concat(bl["*"]),f=0,g=e.length;for(;f<g;f++)if((d=e[f].call(c,b,a)))return d;}function bp(a,b,c){var d,e,f,g,h,i,j,l,n=this,o={},p=a.style,q=a.nodeType&&U(a),r=m._data(a,"fxshow");if(!c.queue){h=m._queueHooks(a,"fx");if(h.unqueued==null){h.unqueued=0;i=h.empty.fire;h.empty.fire=function(){if(!h.unqueued)i();};}h.unqueued++;n.always(function(){n.always(function(){h.unqueued--;if(!m.queue(a,"fx").length)h.empty.fire();});});}if(a.nodeType===1&&("height" in b||"width" in b)){c.overflow=[p.overflow,p.overflowX,p.overflowY];j=m.css(a,"display");l=j==="none"?m._data(a,"olddisplay")||aI(a.nodeName):j;if(l==="inline"&&m.css(a,"float")==="none")if(!k.inlineBlockNeedsLayout||aI(a.nodeName)==="inline")p.display="inline-block";else p.zoom=1;}if(c.overflow){p.overflow="hidden";if(!k.shrinkWrapBlocks())n.always(function(){p.overflow=c.overflow[0];p.overflowX=c.overflow[1];p.overflowY=c.overflow[2];});}for(d in b){e=b[d];if(bh.exec(e)){delete b[d];f=f||e==="toggle";if(e===(q?"hide":"show"))if(e==="show"&&r&&r[d]!==undefined)q=true;else continue;o[d]=r&&r[d]||m.style(a,d);}else j=undefined;}if(!m.isEmptyObject(o)){if(r){if("hidden" in r)q=r.hidden;}else r=m._data(a,"fxshow",{});if(f)r.hidden=!q;if(q)m(a).show();else n.done(function(){m(a).hide();});n.done(function(){var b;m._removeData(a,"fxshow");for(b in o)m.style(a,b,o[b]);});for(d in o){g=bo(q?r[d]:0,d,n);if(!(d in r)){r[d]=g.start;if(q){g.end=g.start;g.start=d==="width"||d==="height"?1:0;}}}}else if((j==="none"?aI(a.nodeName):j)==="inline")p.display=j;}function bq(a,b){var c,d,e,f,g;for(c in a){d=m.camelCase(c);e=b[d];f=a[c];if(m.isArray(f)){e=f[1];f=a[c]=f[0];}if(c!==d){a[d]=f;delete a[c];}g=m.cssHooks[d];if(g&&"expand" in g){f=g.expand(f);delete a[d];for(c in f)if(!(c in a)){a[c]=f[c];b[c]=e;}}else b[d]=e;}}function br(a,b,c){var d,e,f=0,g=bk.length,h=m.Deferred().always(function(){delete i.elem;}),i=function(){if(e)return false;var b=bf||bm(),c=Math.max(0,j.startTime+j.duration-b),d=c/j.duration||0,f=1-d,g=0,i=j.tweens.length;for(;g<i;g++)j.tweens[g].run(f);h.notifyWith(a,[j,f,c]);if(f<1&&i)return c;else{h.resolveWith(a,[j]);return false;}},j=h.promise({elem:a,props:m.extend({},b),opts:m.extend(true,{specialEasing:{}},c),originalProperties:b,originalOptions:c,startTime:bf||bm(),duration:c.duration,tweens:[],createTween:function(b,c){var d=m.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);j.tweens.push(d);return d;},stop:function(b){var c=0,d=b?j.tweens.length:0;if(e)return this;e=true;for(;c<d;c++)j.tweens[c].run(1);if(b)h.resolveWith(a,[j,b]);else h.rejectWith(a,[j,b]);return this;}}),k=j.props;bq(k,j.opts.specialEasing);for(;f<g;f++){d=bk[f].call(j,a,k,j.opts);if(d)return d;}m.map(k,bo,j);if(m.isFunction(j.opts.start))j.opts.start.call(a,j);m.fx.timer(m.extend(i,{elem:a,anim:j,queue:j.opts.queue}));return j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always);}m.Animation=m.extend(br,{tweener:function(a,b){if(m.isFunction(a)){b=a;a=["*"];}else a=a.split(" ");var c,d=0,e=a.length;for(;d<e;d++){c=a[d];bl[c]=bl[c]||[];bl[c].unshift(b);}},prefilter:function(a,b){if(b)bk.unshift(a);else bk.push(a);}});m.speed=function(a,b,c){var d=a&&typeof a==="object"?m.extend({},a):{complete:c||!c&&b||m.isFunction(a)&&a,duration:a,easing:c&&b||b&&!m.isFunction(b)&&b};d.duration=m.fx.off?0:typeof d.duration==="number"?d.duration:d.duration in m.fx.speeds?m.fx.speeds[d.duration]:m.fx.speeds._default;if(d.queue==null||d.queue===true)d.queue="fx";d.old=d.complete;d.complete=function(){if(m.isFunction(d.old))d.old.call(this);if(d.queue)m.dequeue(this,d.queue);};return d;};m.fn.extend({fadeTo:function(a,b,c,d){return this.filter(U).css("opacity",0).show().end().animate({opacity:b},a,c,d);},animate:function(a,b,c,d){var e=m.isEmptyObject(a),f=m.speed(b,c,d),g=function(){var b=br(this,m.extend({},a),f);if(e||m._data(this,"finish"))b.stop(true);};g.finish=g;return e||f.queue===false?this.each(g):this.queue(f.queue,g);},stop:function(a,b,c){var d=function(a){var b=a.stop;delete a.stop;b(c);};if(typeof a!=="string"){c=b;b=a;a=undefined;}if(b&&a!==false)this.queue(a||"fx",[]);return this.each(function(){var b=true,e=a!=null&&a+"queueHooks",f=m.timers,g=m._data(this);if(e){if(g[e]&&g[e].stop)d(g[e]);}else for(e in g)if(g[e]&&g[e].stop&&bj.test(e))d(g[e]);for(e=f.length;e--;)if(f[e].elem===this&&(a==null||f[e].queue===a)){f[e].anim.stop(c);b=false;f.splice(e,1);}if(b||!c)m.dequeue(this,a);});},finish:function(a){if(a!==false)a=a||"fx";return this.each(function(){var b,c=m._data(this),d=c[a+"queue"],e=c[a+"queueHooks"],f=m.timers,g=d?d.length:0;c.finish=true;m.queue(this,a,[]);if(e&&e.stop)e.stop.call(this,true);for(b=f.length;b--;)if(f[b].elem===this&&f[b].queue===a){f[b].anim.stop(true);f.splice(b,1);}for(b=0;b<g;b++)if(d[b]&&d[b].finish)d[b].finish.call(this);delete c.finish;});}});m.each(["toggle","show","hide"],function(a,b){var c=m.fn[b];m.fn[b]=function(a,d,e){return a==null||typeof a==="boolean"?c.apply(this,arguments):this.animate(bn(b,true),a,d,e);};});m.each({slideDown:bn("show"),slideUp:bn("hide"),slideToggle:bn("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){m.fn[a]=function(a,c,d){return this.animate(b,a,c,d);};});m.timers=[];m.fx.tick=function(){var a,b=m.timers,c=0;bf=m.now();for(;c<b.length;c++){a=b[c];if(!a()&&b[c]===a)b.splice(c--,1);}if(!b.length)m.fx.stop();bf=undefined;};m.fx.timer=function(a){m.timers.push(a);if(a())m.fx.start();else m.timers.pop();};m.fx.interval=13;m.fx.start=function(){if(!bg)bg=setInterval(m.fx.tick,m.fx.interval);};m.fx.stop=function(){clearInterval(bg);bg=null;};m.fx.speeds={slow:600,fast:200,_default:400};m.fn.delay=function(a,b){a=m.fx?m.fx.speeds[a]||a:a;b=b||"fx";return this.queue(b,function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d);};});};(function(){var a,b,c,d,e;b=y.createElement("div");b.setAttribute("className","t");b.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>";d=b.getElementsByTagName("a")[0];c=y.createElement("select");e=c.appendChild(y.createElement("option"));a=b.getElementsByTagName("input")[0];d.style.cssText="top:1px";k.getSetAttribute=b.className!=="t";k.style=/top/.test(d.getAttribute("style"));k.hrefNormalized=d.getAttribute("href")==="/a";k.checkOn=!!a.value;k.optSelected=e.selected;k.enctype=!!y.createElement("form").enctype;c.disabled=true;k.optDisabled=!e.disabled;a=y.createElement("input");a.setAttribute("value","");k.input=a.getAttribute("value")==="";a.value="t";a.setAttribute("type","radio");k.radioValue=a.value==="t";})();var bs=/\r/g;m.fn.extend({val:function(a){var b,c,d,e=this[0];if(!arguments.length){if(e){b=m.valHooks[e.type]||m.valHooks[e.nodeName.toLowerCase()];if(b&&"get" in b&&(c=b.get(e,"value"))!==undefined)return c;c=e.value;return typeof c==="string"?c.replace(bs,""):c==null?"":c;}return;}d=m.isFunction(a);return this.each(function(c){var e;if(this.nodeType!==1)return;if(d)e=a.call(this,c,m(this).val());else e=a;if(e==null)e="";else if(typeof e==="number")e+="";else if(m.isArray(e))e=m.map(e,function(a){return a==null?"":a+"";});b=m.valHooks[this.type]||m.valHooks[this.nodeName.toLowerCase()];if(!b||!("set" in b)||b.set(this,e,"value")===undefined)this.value=e;});}});m.extend({valHooks:{option:{get:function(a){var b=m.find.attr(a,"value");return b!=null?b:m.trim(m.text(a));}},select:{get:function(a){var b,c,d=a.options,e=a.selectedIndex,f=a.type==="select-one"||e<0,g=f?null:[],h=f?e+1:d.length,i=e<0?h:f?e:0;for(;i<h;i++){c=d[i];if((c.selected||i===e)&&(k.optDisabled?!c.disabled:c.getAttribute("disabled")===null)&&(!c.parentNode.disabled||!m.nodeName(c.parentNode,"optgroup"))){b=m(c).val();if(f)return b;g.push(b);}}return g;},set:function(a,b){var c,d,e=a.options,f=m.makeArray(b),g=e.length;while(g--){d=e[g];if(m.inArray(m.valHooks.option.get(d),f)>=0)try{d.selected=c=true;}catch(h){d.scrollHeight;}else d.selected=false;}if(!c)a.selectedIndex=-1;return e;}}}});m.each(["radio","checkbox"],function(){m.valHooks[this]={set:function(a,b){if(m.isArray(b))return(a.checked=m.inArray(m(a).val(),b)>=0);}};if(!k.checkOn)m.valHooks[this].get=function(a){return a.getAttribute("value")===null?"on":a.value;};});var bt,bu,bv=m.expr.attrHandle,bw=/^(?:checked|selected)$/i,bx=k.getSetAttribute,by=k.input;m.fn.extend({attr:function(a,b){return V(this,m.attr,a,b,arguments.length>1);},removeAttr:function(a){return this.each(function(){m.removeAttr(this,a);});}});m.extend({attr:function(a,b,c){var d,e,f=a.nodeType;if(!a||f===3||f===8||f===2)return;if(typeof a.getAttribute===K)return m.prop(a,b,c);if(f!==1||!m.isXMLDoc(a)){b=b.toLowerCase();d=m.attrHooks[b]||(m.expr.match.bool.test(b)?bu:bt);}if(c!==undefined)if(c===null)m.removeAttr(a,b);else if(d&&"set" in d&&(e=d.set(a,c,b))!==undefined)return e;else{a.setAttribute(b,c+"");return c;}else if(d&&"get" in d&&(e=d.get(a,b))!==null)return e;else{e=m.find.attr(a,b);return e==null?undefined:e;}},removeAttr:function(a,b){var c,d,e=0,f=b&&b.match(E);if(f&&a.nodeType===1)while((c=f[e++])){d=m.propFix[c]||c;if(m.expr.match.bool.test(c))if(by&&bx||!bw.test(c))a[d]=false;else a[m.camelCase("default-"+c)]=a[d]=false;else m.attr(a,c,"");a.removeAttribute(bx?c:d);}},attrHooks:{type:{set:function(a,b){if(!k.radioValue&&b==="radio"&&m.nodeName(a,"input")){var c=a.value;a.setAttribute("type",b);if(c)a.value=c;return b;}}}}});bu={set:function(a,b,c){if(b===false)m.removeAttr(a,c);else if(by&&bx||!bw.test(c))a.setAttribute(!bx&&m.propFix[c]||c,c);else a[m.camelCase("default-"+c)]=a[c]=true;return c;}};m.each(m.expr.match.bool.source.match(/\w+/g),function(a,b){var c=bv[b]||m.find.attr;bv[b]=by&&bx||!bw.test(b)?function(a,b,d){var e,f;if(!d){f=bv[b];bv[b]=e;e=c(a,b,d)!=null?b.toLowerCase():null;bv[b]=f;}return e;}:function(a,b,c){if(!c)return a[m.camelCase("default-"+b)]?b.toLowerCase():null;};});if(!by||!bx)m.attrHooks.value={set:function(a,b,c){if(m.nodeName(a,"input"))a.defaultValue=b;else return bt&&bt.set(a,b,c);}};if(!bx){bt={set:function(a,b,c){var d=a.getAttributeNode(c);if(!d)a.setAttributeNode((d=a.ownerDocument.createAttribute(c)));d.value=b+="";if(c==="value"||b===a.getAttribute(c))return b;}};bv.id=bv.name=bv.coords=function(a,b,c){var d;if(!c)return(d=a.getAttributeNode(b))&&d.value!==""?d.value:null;};m.valHooks.button={get:function(a,b){var c=a.getAttributeNode(b);if(c&&c.specified)return c.value;},set:bt.set};m.attrHooks.contenteditable={set:function(a,b,c){bt.set(a,b===""?false:b,c);}};m.each(["width","height"],function(a,b){m.attrHooks[b]={set:function(a,c){if(c===""){a.setAttribute(b,"auto");return c;}}};});}if(!k.style)m.attrHooks.style={get:function(a){return a.style.cssText||undefined;},set:function(a,b){return(a.style.cssText=b+"");}};var bz=/^(?:input|select|textarea|button|object)$/i,bA=/^(?:a|area)$/i;m.fn.extend({prop:function(a,b){return V(this,m.prop,a,b,arguments.length>1);},removeProp:function(a){a=m.propFix[a]||a;return this.each(function(){try{this[a]=undefined;delete this[a];}catch(b){}});}});m.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(a,b,c){var d,e,f,g=a.nodeType;if(!a||g===3||g===8||g===2)return;f=g!==1||!m.isXMLDoc(a);if(f){b=m.propFix[b]||b;e=m.propHooks[b];}if(c!==undefined)return e&&"set" in e&&(d=e.set(a,c,b))!==undefined?d:(a[b]=c);else return e&&"get" in e&&(d=e.get(a,b))!==null?d:a[b];},propHooks:{tabIndex:{get:function(a){var b=m.find.attr(a,"tabindex");return b?parseInt(b,10):bz.test(a.nodeName)||bA.test(a.nodeName)&&a.href?0:-1;}}}});if(!k.hrefNormalized)m.each(["href","src"],function(a,b){m.propHooks[b]={get:function(a){return a.getAttribute(b,4);}};});if(!k.optSelected)m.propHooks.selected={get:function(a){var b=a.parentNode;if(b){b.selectedIndex;if(b.parentNode)b.parentNode.selectedIndex;}return null;}};m.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){m.propFix[this.toLowerCase()]=this;});if(!k.enctype)m.propFix.enctype="encoding";var bB=/[\t\r\n\f]/g;m.fn.extend({addClass:function(a){var b,c,d,e,f,g,h=0,i=this.length,j=typeof a==="string"&&a;if(m.isFunction(a))return this.each(function(b){m(this).addClass(a.call(this,b,this.className));});if(j){b=(a||"").match(E)||[];for(;h<i;h++){c=this[h];d=c.nodeType===1&&(c.className?(" "+c.className+" ").replace(bB," "):" ");if(d){f=0;while((e=b[f++]))if(d.indexOf(" "+e+" ")<0)d+=e+" ";g=m.trim(d);if(c.className!==g)c.className=g;}}}return this;},removeClass:function(a){var b,c,d,e,f,g,h=0,i=this.length,j=arguments.length===0||typeof a==="string"&&a;if(m.isFunction(a))return this.each(function(b){m(this).removeClass(a.call(this,b,this.className));});if(j){b=(a||"").match(E)||[];for(;h<i;h++){c=this[h];d=c.nodeType===1&&(c.className?(" "+c.className+" ").replace(bB," "):"");if(d){f=0;while((e=b[f++]))while(d.indexOf(" "+e+" ")>=0)d=d.replace(" "+e+" "," ");g=a?m.trim(d):"";if(c.className!==g)c.className=g;}}}return this;},toggleClass:function(a,b){var c=typeof a;if(typeof b==="boolean"&&c==="string")return b?this.addClass(a):this.removeClass(a);if(m.isFunction(a))return this.each(function(c){m(this).toggleClass(a.call(this,c,this.className,b),b);});return this.each(function(){if(c==="string"){var b,d=0,e=m(this),f=a.match(E)||[];while((b=f[d++]))if(e.hasClass(b))e.removeClass(b);else e.addClass(b);}else if(c===K||c==="boolean"){if(this.className)m._data(this,"__className__",this.className);this.className=this.className||a===false?"":m._data(this,"__className__")||"";}});},hasClass:function(a){var b=" "+a+" ",c=0,d=this.length;for(;c<d;c++)if(this[c].nodeType===1&&(" "+this[c].className+" ").replace(bB," ").indexOf(b)>=0)return true;return false;}});m.each(("blur focus focusin focusout load resize scroll unload click dblclick "+"mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave "+"change select submit keydown keypress keyup error contextmenu").split(" "),function(a,b){m.fn[b]=function(a,c){return arguments.length>0?this.on(b,null,a,c):this.trigger(b);};});m.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a);},bind:function(a,b,c){return this.on(a,null,b,c);},unbind:function(a,b){return this.off(a,null,b);},delegate:function(a,b,c,d){return this.on(b,a,c,d);},undelegate:function(a,b,c){return arguments.length===1?this.off(a,"**"):this.off(b,a||"**",c);}});var bC=m.now();var bD=(/\?/);var bE=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;m.parseJSON=function(b){if(a.JSON&&a.JSON.parse)return a.JSON.parse(b+"");var c,d=null,e=m.trim(b+"");return e&&!m.trim(e.replace(bE,function(a,b,e,f){if(c&&b)d=0;if(d===0)return a;c=e||b;d+=!f-!e;return "";}))?(Function("return "+e))():m.error("Invalid JSON: "+b);};m.parseXML=function(b){var c,d;if(!b||typeof b!=="string")return null;try{if(a.DOMParser){d=new DOMParser();c=d.parseFromString(b,"text/xml");}else{c=new ActiveXObject("Microsoft.XMLDOM");c.async="false";c.loadXML(b);}}catch(e){c=undefined;}if(!c||!c.documentElement||c.getElementsByTagName("parsererror").length)m.error("Invalid XML: "+b);return c;};var bF,bG,bH=/#.*$/,bI=/([?&])_=[^&]*/,bJ=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,bK=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,bL=/^(?:GET|HEAD)$/,bM=/^\/\//,bN=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,bO={},bP={},bQ="*/".concat("*");try{bG=location.href;}catch(bR){bG=y.createElement("a");bG.href="";bG=bG.href;}bF=bN.exec(bG.toLowerCase())||[];function bS(a){return function(b,c){if(typeof b!=="string"){c=b;b="*";}var d,e=0,f=b.toLowerCase().match(E)||[];if(m.isFunction(c))while((d=f[e++]))if(d.charAt(0)==="+"){d=d.slice(1)||"*";(a[d]=a[d]||[]).unshift(c);}else(a[d]=a[d]||[]).push(c);};}function bT(a,b,c,d){var e={},f=(a===bP);function g(h){var i;e[h]=true;m.each(a[h]||[],function(a,h){var j=h(b,c,d);if(typeof j==="string"&&!f&&!e[j]){b.dataTypes.unshift(j);g(j);return false;}else if(f)return !(i=j);});return i;}return g(b.dataTypes[0])||!e["*"]&&g("*");}function bU(a,b){var c,d,e=m.ajaxSettings.flatOptions||{};for(d in b)if(b[d]!==undefined)(e[d]?a:(c||(c={})))[d]=b[d];if(c)m.extend(true,a,c);return a;}function bV(a,b,c){var d,e,f,g,h=a.contents,i=a.dataTypes;while(i[0]==="*"){i.shift();if(e===undefined)e=a.mimeType||b.getResponseHeader("Content-Type");}if(e)for(g in h)if(h[g]&&h[g].test(e)){i.unshift(g);break;}if(i[0] in c)f=i[0];else{for(g in c){if(!i[0]||a.converters[g+" "+i[0]]){f=g;break;}if(!d)d=g;}f=f||d;}if(f){if(f!==i[0])i.unshift(f);return c[f];}}function bW(a,b,c,d){var e,f,g,h,i,j={},k=a.dataTypes.slice();if(k[1])for(g in a.converters)j[g.toLowerCase()]=a.converters[g];f=k.shift();while(f){if(a.responseFields[f])c[a.responseFields[f]]=b;if(!i&&d&&a.dataFilter)b=a.dataFilter(b,a.dataType);i=f;f=k.shift();if(f)if(f==="*")f=i;else if(i!=="*"&&i!==f){g=j[i+" "+f]||j["* "+f];if(!g)for(e in j){h=e.split(" ");if(h[1]===f){g=j[i+" "+h[0]]||j["* "+h[0]];if(g){if(g===true)g=j[e];else if(j[e]!==true){f=h[0];k.unshift(h[1]);}break;}}}if(g!==true)if(g&&a.throws)b=g(b);else try{b=g(b);}catch(l){return{state:"parsererror",error:g?l:"No conversion from "+i+" to "+f};}}}return{state:"success",data:b};}m.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:bG,type:"GET",isLocal:bK.test(bF[1]),global:true,processData:true,async:true,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":bQ,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":true,"text json":m.parseJSON,"text xml":m.parseXML},flatOptions:{url:true,context:true}},ajaxSetup:function(a,b){return b?bU(bU(a,m.ajaxSettings),b):bU(m.ajaxSettings,a);},ajaxPrefilter:bS(bO),ajaxTransport:bS(bP),ajax:function(a,b){if(typeof a==="object"){b=a;a=undefined;}b=b||{};var c,d,e,f,g,h,i,j,k=m.ajaxSetup({},b),l=k.context||k,n=k.context&&(l.nodeType||l.jquery)?m(l):m.event,o=m.Deferred(),p=m.Callbacks("once memory"),q=k.statusCode||{},r={},s={},t=0,u="canceled",v={readyState:0,getResponseHeader:function(a){var b;if(t===2){if(!j){j={};while((b=bJ.exec(f)))j[b[1].toLowerCase()]=b[2];}b=j[a.toLowerCase()];}return b==null?null:b;},getAllResponseHeaders:function(){return t===2?f:null;},setRequestHeader:function(a,b){var c=a.toLowerCase();if(!t){a=s[c]=s[c]||a;r[a]=b;}return this;},overrideMimeType:function(a){if(!t)k.mimeType=a;return this;},statusCode:function(a){var b;if(a)if(t<2)for(b in a)q[b]=[q[b],a[b]];else v.always(a[v.status]);return this;},abort:function(a){var b=a||u;if(i)i.abort(b);x(0,b);return this;}};o.promise(v).complete=p.add;v.success=v.done;v.error=v.fail;k.url=((a||k.url||bG)+"").replace(bH,"").replace(bM,bF[1]+"//");k.type=b.method||b.type||k.method||k.type;k.dataTypes=m.trim(k.dataType||"*").toLowerCase().match(E)||[""];if(k.crossDomain==null){c=bN.exec(k.url.toLowerCase());k.crossDomain=!!(c&&(c[1]!==bF[1]||c[2]!==bF[2]||(c[3]||(c[1]==="http:"?"80":"443"))!==(bF[3]||(bF[1]==="http:"?"80":"443"))));}if(k.data&&k.processData&&typeof k.data!=="string")k.data=m.param(k.data,k.traditional);bT(bO,k,b,v);if(t===2)return v;h=m.event&&k.global;if(h&&m.active++===0)m.event.trigger("ajaxStart");k.type=k.type.toUpperCase();k.hasContent=!bL.test(k.type);e=k.url;if(!k.hasContent){if(k.data){e=(k.url+=(bD.test(e)?"&":"?")+k.data);delete k.data;}if(k.cache===false)k.url=bI.test(e)?e.replace(bI,"$1_="+bC++):e+(bD.test(e)?"&":"?")+"_="+bC++;}if(k.ifModified){if(m.lastModified[e])v.setRequestHeader("If-Modified-Since",m.lastModified[e]);if(m.etag[e])v.setRequestHeader("If-None-Match",m.etag[e]);}if(k.data&&k.hasContent&&k.contentType!==false||b.contentType)v.setRequestHeader("Content-Type",k.contentType);v.setRequestHeader("Accept",k.dataTypes[0]&&k.accepts[k.dataTypes[0]]?k.accepts[k.dataTypes[0]]+(k.dataTypes[0]!=="*"?", "+bQ+"; q=0.01":""):k.accepts["*"]);for(d in k.headers)v.setRequestHeader(d,k.headers[d]);if(k.beforeSend&&(k.beforeSend.call(l,v,k)===false||t===2))return v.abort();u="abort";for(d in {success:1,error:1,complete:1})v[d](k[d]);i=bT(bP,k,b,v);if(!i)x(-1,"No Transport");else{v.readyState=1;if(h)n.trigger("ajaxSend",[v,k]);if(k.async&&k.timeout>0)g=setTimeout(function(){v.abort("timeout");},k.timeout);try{t=1;i.send(r,x);}catch(w){if(t<2)x(-1,w);else throw w;}}function x(a,b,c,d){var j,r,s,u,w,x=b;if(t===2)return;t=2;if(g)clearTimeout(g);i=undefined;f=d||"";v.readyState=a>0?4:0;j=a>=200&&a<300||a===304;if(c)u=bV(k,v,c);u=bW(k,u,v,j);if(j){if(k.ifModified){w=v.getResponseHeader("Last-Modified");if(w)m.lastModified[e]=w;w=v.getResponseHeader("etag");if(w)m.etag[e]=w;}if(a===204||k.type==="HEAD")x="nocontent";else if(a===304)x="notmodified";else{x=u.state;r=u.data;s=u.error;j=!s;}}else{s=x;if(a||!x){x="error";if(a<0)a=0;}}v.status=a;v.statusText=(b||x)+"";if(j)o.resolveWith(l,[r,x,v]);else o.rejectWith(l,[v,x,s]);v.statusCode(q);q=undefined;if(h)n.trigger(j?"ajaxSuccess":"ajaxError",[v,k,j?r:s]);p.fireWith(l,[v,x]);if(h){n.trigger("ajaxComplete",[v,k]);if(!(--m.active))m.event.trigger("ajaxStop");}}return v;},getJSON:function(a,b,c){return m.get(a,b,c,"json");},getScript:function(a,b){return m.get(a,undefined,b,"script");}});m.each(["get","post"],function(a,b){m[b]=function(a,c,d,e){if(m.isFunction(c)){e=e||d;d=c;c=undefined;}return m.ajax({url:a,type:b,dataType:e,data:c,success:d});};});m._evalUrl=function(a){return m.ajax({url:a,type:"GET",dataType:"script",async:false,global:false,"throws":true});};m.fn.extend({wrapAll:function(a){if(m.isFunction(a))return this.each(function(b){m(this).wrapAll(a.call(this,b));});if(this[0]){var b=m(a,this[0].ownerDocument).eq(0).clone(true);if(this[0].parentNode)b.insertBefore(this[0]);b.map(function(){var a=this;while(a.firstChild&&a.firstChild.nodeType===1)a=a.firstChild;return a;}).append(this);}return this;},wrapInner:function(a){if(m.isFunction(a))return this.each(function(b){m(this).wrapInner(a.call(this,b));});return this.each(function(){var b=m(this),c=b.contents();if(c.length)c.wrapAll(a);else b.append(a);});},wrap:function(a){var b=m.isFunction(a);return this.each(function(c){m(this).wrapAll(b?a.call(this,c):a);});},unwrap:function(){return this.parent().each(function(){if(!m.nodeName(this,"body"))m(this).replaceWith(this.childNodes);}).end();}});m.expr.filters.hidden=function(a){return a.offsetWidth<=0&&a.offsetHeight<=0||(!k.reliableHiddenOffsets()&&((a.style&&a.style.display)||m.css(a,"display"))==="none");};m.expr.filters.visible=function(a){return !m.expr.filters.hidden(a);};var bX=/%20/g,bY=/\[\]$/,bZ=/\r?\n/g,cd=/^(?:submit|button|image|reset|file)$/i,ce=/^(?:input|select|textarea|keygen)/i;function cf(a,b,c,d){var e;if(m.isArray(b))m.each(b,function(b,e){if(c||bY.test(a))d(a,e);else cf(a+"["+(typeof e==="object"?b:"")+"]",e,c,d);});else if(!c&&m.type(b)==="object")for(e in b)cf(a+"["+e+"]",b[e],c,d);else d(a,b);}m.param=function(a,b){var c,d=[],e=function(a,b){b=m.isFunction(b)?b():(b==null?"":b);d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b);};if(b===undefined)b=m.ajaxSettings&&m.ajaxSettings.traditional;if(m.isArray(a)||(a.jquery&&!m.isPlainObject(a)))m.each(a,function(){e(this.name,this.value);});else for(c in a)cf(c,a[c],b,e);return d.join("&").replace(bX,"+");};m.fn.extend({serialize:function(){return m.param(this.serializeArray());},serializeArray:function(){return this.map(function(){var a=m.prop(this,"elements");return a?m.makeArray(a):this;}).filter(function(){var a=this.type;return this.name&&!m(this).is(":disabled")&&ce.test(this.nodeName)&&!cd.test(a)&&(this.checked||!W.test(a));}).map(function(a,b){var c=m(this).val();return c==null?null:m.isArray(c)?m.map(c,function(a){return{name:b.name,value:a.replace(bZ,"\r\n")};}):{name:b.name,value:c.replace(bZ,"\r\n")};}).get();}});m.ajaxSettings.xhr=a.ActiveXObject!==undefined?function(){return !this.isLocal&&/^(get|post|head|put|delete|options)$/i.test(this.type)&&cj()||ck();}:cj;var cg=0,ch={},ci=m.ajaxSettings.xhr();if(a.attachEvent)a.attachEvent("onunload",function(){for(var a in ch)ch[a](undefined,true);});k.cors=!!ci&&("withCredentials" in ci);ci=k.ajax=!!ci;if(ci)m.ajaxTransport(function(a){if(!a.crossDomain||k.cors){var b;return{send:function(c,d){var e,f=a.xhr(),g=++cg;f.open(a.type,a.url,a.async,a.username,a.password);if(a.xhrFields)for(e in a.xhrFields)f[e]=a.xhrFields[e];if(a.mimeType&&f.overrideMimeType)f.overrideMimeType(a.mimeType);if(!a.crossDomain&&!c["X-Requested-With"])c["X-Requested-With"]="XMLHttpRequest";for(e in c)if(c[e]!==undefined)f.setRequestHeader(e,c[e]+"");f.send((a.hasContent&&a.data)||null);b=function(c,e){var h,i,j;if(b&&(e||f.readyState===4)){delete ch[g];b=undefined;f.onreadystatechange=m.noop;if(e){if(f.readyState!==4)f.abort();}else{j={};h=f.status;if(typeof f.responseText==="string")j.text=f.responseText;try{i=f.statusText;}catch(k){i="";}if(!h&&a.isLocal&&!a.crossDomain)h=j.text?200:404;else if(h===1223)h=204;}}if(j)d(h,i,j,f.getAllResponseHeaders());};if(!a.async)b();else if(f.readyState===4)setTimeout(b);else f.onreadystatechange=ch[g]=b;},abort:function(){if(b)b(undefined,true);}};}});function cj(){try{return new a.XMLHttpRequest();}catch(b){}}function ck(){try{return new a.ActiveXObject("Microsoft.XMLHTTP");}catch(b){}}m.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(a){m.globalEval(a);return a;}}});m.ajaxPrefilter("script",function(a){if(a.cache===undefined)a.cache=false;if(a.crossDomain){a.type="GET";a.global=false;}});m.ajaxTransport("script",function(a){if(a.crossDomain){var b,c=y.head||m("head")[0]||y.documentElement;return{send:function(d,e){b=y.createElement("script");b.async=true;if(a.scriptCharset)b.charset=a.scriptCharset;b.src=a.url;b.onload=b.onreadystatechange=function(a,c){if(c||!b.readyState||/loaded|complete/.test(b.readyState)){b.onload=b.onreadystatechange=null;if(b.parentNode)b.parentNode.removeChild(b);b=null;if(!c)e(200,"success");}};c.insertBefore(b,c.firstChild);},abort:function(){if(b)b.onload(undefined,true);}};}});var cl=[],cm=/(=)\?(?=&|$)|\?\?/;m.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=cl.pop()||(m.expando+"_"+(bC++));this[a]=true;return a;}});m.ajaxPrefilter("json jsonp",function(b,c,d){var e,f,g,h=b.jsonp!==false&&(cm.test(b.url)?"url":typeof b.data==="string"&&!(b.contentType||"").indexOf("application/x-www-form-urlencoded")&&cm.test(b.data)&&"data");if(h||b.dataTypes[0]==="jsonp"){e=b.jsonpCallback=m.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback;if(h)b[h]=b[h].replace(cm,"$1"+e);else if(b.jsonp!==false)b.url+=(bD.test(b.url)?"&":"?")+b.jsonp+"="+e;b.converters["script json"]=function(){if(!g)m.error(e+" was not called");return g[0];};b.dataTypes[0]="json";f=a[e];a[e]=function(){g=arguments;};d.always(function(){a[e]=f;if(b[e]){b.jsonpCallback=c.jsonpCallback;cl.push(e);}if(g&&m.isFunction(f))f(g[0]);g=f=undefined;});return "script";}});m.parseHTML=function(a,b,c){if(!a||typeof a!=="string")return null;if(typeof b==="boolean"){c=b;b=false;}b=b||y;var d=u.exec(a),e=!c&&[];if(d)return [b.createElement(d[1])];d=m.buildFragment([a],b,e);if(e&&e.length)m(e).remove();return m.merge([],d.childNodes);};var cn=m.fn.load;m.fn.load=function(a,b,c){if(typeof a!=="string"&&cn)return cn.apply(this,arguments);var d,e,f,g=this,h=a.indexOf(" ");if(h>=0){d=m.trim(a.slice(h,a.length));a=a.slice(0,h);}if(m.isFunction(b)){c=b;b=undefined;}else if(b&&typeof b==="object")f="POST";if(g.length>0)m.ajax({url:a,type:f,dataType:"html",data:b}).done(function(a){e=arguments;g.html(d?m("<div>").append(m.parseHTML(a)).find(d):a);}).complete(c&&function(a,b){g.each(c,e||[a.responseText,b,a]);});return this;};m.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(a,b){m.fn[b]=function(a){return this.on(b,a);};});m.expr.filters.animated=function(a){return m.grep(m.timers,function(b){return a===b.elem;}).length;};var co=a.document.documentElement;function cp(a){return m.isWindow(a)?a:a.nodeType===9?a.defaultView||a.parentWindow:false;}m.offset={setOffset:function(a,b,c){var d,e,f,g,h,i,j,k=m.css(a,"position"),l=m(a),n={};if(k==="static")a.style.position="relative";h=l.offset();f=m.css(a,"top");i=m.css(a,"left");j=(k==="absolute"||k==="fixed")&&m.inArray("auto",[f,i])>-1;if(j){d=l.position();g=d.top;e=d.left;}else{g=parseFloat(f)||0;e=parseFloat(i)||0;}if(m.isFunction(b))b=b.call(a,c,h);if(b.top!=null)n.top=(b.top-h.top)+g;if(b.left!=null)n.left=(b.left-h.left)+e;if("using" in b)b.using.call(a,n);else l.css(n);}};m.fn.extend({offset:function(a){if(arguments.length)return a===undefined?this:this.each(function(b){m.offset.setOffset(this,a,b);});var b,c,d={top:0,left:0},e=this[0],f=e&&e.ownerDocument;if(!f)return;b=f.documentElement;if(!m.contains(b,e))return d;if(typeof e.getBoundingClientRect!==K)d=e.getBoundingClientRect();c=cp(f);return{top:d.top+(c.pageYOffset||b.scrollTop)-(b.clientTop||0),left:d.left+(c.pageXOffset||b.scrollLeft)-(b.clientLeft||0)};},position:function(){if(!this[0])return;var a,b,c={top:0,left:0},d=this[0];if(m.css(d,"position")==="fixed")b=d.getBoundingClientRect();else{a=this.offsetParent();b=this.offset();if(!m.nodeName(a[0],"html"))c=a.offset();c.top+=m.css(a[0],"borderTopWidth",true);c.left+=m.css(a[0],"borderLeftWidth",true);}return{top:b.top-c.top-m.css(d,"marginTop",true),left:b.left-c.left-m.css(d,"marginLeft",true)};},offsetParent:function(){return this.map(function(){var a=this.offsetParent||co;while(a&&(!m.nodeName(a,"html")&&m.css(a,"position")==="static"))a=a.offsetParent;return a||co;});}});m.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,b){var c=/Y/.test(b);m.fn[a]=function(d){return V(this,function(a,d,e){var f=cp(a);if(e===undefined)return f?(b in f)?f[b]:f.document.documentElement[d]:a[d];if(f)f.scrollTo(!c?e:m(f).scrollLeft(),c?e:m(f).scrollTop());else a[d]=e;},a,d,arguments.length,null);};});m.each(["top","left"],function(a,b){m.cssHooks[b]=aO(k.pixelPosition,function(a,c){if(c){c=aM(a,b);return aK.test(c)?m(a).position()[b]+"px":c;}});});m.each({Height:"height",Width:"width"},function(a,b){m.each({padding:"inner"+a,content:b,"":"outer"+a},function(c,d){m.fn[d]=function(d,e){var f=arguments.length&&(c||typeof d!=="boolean"),g=c||(d===true||e===true?"margin":"border");return V(this,function(b,c,d){var e;if(m.isWindow(b))return b.document.documentElement["client"+a];if(b.nodeType===9){e=b.documentElement;return Math.max(b.body["scroll"+a],e["scroll"+a],b.body["offset"+a],e["offset"+a],e["client"+a]);}return d===undefined?m.css(b,c,g):m.style(b,c,d,g);},b,f?d:undefined,f,null);};});});m.fn.size=function(){return this.length;};m.fn.andSelf=m.fn.addBack;if(typeof define==="function"&&define.amd)define("jquery",[],function(){return m;});var cq=a.jQuery,cr=a.$;m.noConflict=function(b){if(a.$===m)a.$=cr;if(b&&a.jQuery===m)a.jQuery=cq;return m;};if(typeof b===K)a.jQuery=a.$=m;return m;}));(function(a,b){typeof exports==='object'&&typeof module!=='undefined'?module.exports=b():typeof define==='function'&&define.amd?define(b):a.moment=b();}(this,function(){'use strict';var a;function b(){return a.apply(null,arguments);}function c(b){a=b;}function d(a){return Object.prototype.toString.call(a)==='[object Array]';}function e(a){return a instanceof Date||Object.prototype.toString.call(a)==='[object Date]';}function f(a,b){var c=[],d;for(d=0;d<a.length;++d)c.push(b(a[d],d));return c;}function g(a,b){return Object.prototype.hasOwnProperty.call(a,b);}function h(a,b){for(var c in b)if(g(b,c))a[c]=b[c];if(g(b,'toString'))a.toString=b.toString;if(g(b,'valueOf'))a.valueOf=b.valueOf;return a;}function i(a,b,c,d){return bx(a,b,c,d,true).utc();}function j(){return{empty:false,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:false,invalidMonth:null,invalidFormat:false,userInvalidated:false,iso:false};}function k(a){if(a._pf==null)a._pf=j();return a._pf;}function l(a){if(a._isValid==null){var b=k(a);a._isValid=!isNaN(a._d.getTime())&&b.overflow<0&&!b.empty&&!b.invalidMonth&&!b.invalidWeekday&&!b.nullInput&&!b.invalidFormat&&!b.userInvalidated;if(a._strict)a._isValid=a._isValid&&b.charsLeftOver===0&&b.unusedTokens.length===0&&b.bigHour===undefined;}return a._isValid;}function m(a){var b=i(NaN);if(a!=null)h(k(b),a);else k(b).userInvalidated=true;return b;}var n=b.momentProperties=[];function o(a,b){var c,d,e;if(typeof b._isAMomentObject!=='undefined')a._isAMomentObject=b._isAMomentObject;if(typeof b._i!=='undefined')a._i=b._i;if(typeof b._f!=='undefined')a._f=b._f;if(typeof b._l!=='undefined')a._l=b._l;if(typeof b._strict!=='undefined')a._strict=b._strict;if(typeof b._tzm!=='undefined')a._tzm=b._tzm;if(typeof b._isUTC!=='undefined')a._isUTC=b._isUTC;if(typeof b._offset!=='undefined')a._offset=b._offset;if(typeof b._pf!=='undefined')a._pf=k(b);if(typeof b._locale!=='undefined')a._locale=b._locale;if(n.length>0)for(c in n){d=n[c];e=b[d];if(typeof e!=='undefined')a[d]=e;}return a;}var p=false;function q(a){o(this,a);this._d=new Date(a._d!=null?a._d.getTime():NaN);if(p===false){p=true;b.updateOffset(this);p=false;}}function r(a){return a instanceof q||(a!=null&&a._isAMomentObject!=null);}function s(a){if(a<0)return Math.ceil(a);else return Math.floor(a);}function t(a){var b=+a,c=0;if(b!==0&&isFinite(b))c=s(b);return c;}function u(a,b,c){var d=Math.min(a.length,b.length),e=Math.abs(a.length-b.length),f=0,g;for(g=0;g<d;g++)if((c&&a[g]!==b[g])||(!c&&t(a[g])!==t(b[g])))f++;return f+e;}function v(){}var w={};var x;function y(a){return a?a.toLowerCase().replace('_','-'):a;}function z(a){var b=0,c,d,e,f;while(b<a.length){f=y(a[b]).split('-');c=f.length;d=y(a[b+1]);d=d?d.split('-'):null;while(c>0){e=A(f.slice(0,c).join('-'));if(e)return e;if(d&&d.length>=c&&u(f,d,true)>=c-1)break;c--;}b++;}return null;}function A(a){var b=null;if(!w[a]&&typeof module!=='undefined'&&module&&module.exports)try{b=x._abbr;require('./locale/'+a);B(b);}catch(c){}return w[a];}function B(a,b){var c;if(a){if(typeof b==='undefined')c=D(a);else c=C(a,b);if(c)x=c;}return x._abbr;}function C(a,b){if(b!==null){b.abbr=a;w[a]=w[a]||new v();w[a].set(b);B(a);return w[a];}else{delete w[a];return null;}}function D(a){var b;if(a&&a._locale&&a._locale._abbr)a=a._locale._abbr;if(!a)return x;if(!d(a)){b=A(a);if(b)return b;a=[a];}return z(a);}var E={};function F(a,b){var c=a.toLowerCase();E[c]=E[c+'s']=E[b]=a;}function G(a){return typeof a==='string'?E[a]||E[a.toLowerCase()]:undefined;}function H(a){var b={},c,d;for(d in a)if(g(a,d)){c=G(d);if(c)b[c]=a[d];}return b;}function I(a,c){return function(d){if(d!=null){K(this,a,d);b.updateOffset(this,c);return this;}else return J(this,a);};}function J(a,b){return a._d['get'+(a._isUTC?'UTC':'')+b]();}function K(a,b,c){return a._d['set'+(a._isUTC?'UTC':'')+b](c);}function L(a,b){var c;if(typeof a==='object')for(c in a)this.set(c,a[c]);else{a=G(a);if(typeof this[a]==='function')return this[a](b);}return this;}function M(a,b,c){var d=''+Math.abs(a),e=b-d.length,f=a>=0;return(f?(c?'+':''):'-')+Math.pow(10,Math.max(0,e)).toString().substr(1)+d;}var N=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g;var O=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g;var P={};var Q={};function R(a,b,c,d){var e=d;if(typeof d==='string')e=function(){return this[d]();};if(a)Q[a]=e;if(b)Q[b[0]]=function(){return M(e.apply(this,arguments),b[1],b[2]);};if(c)Q[c]=function(){return this.localeData().ordinal(e.apply(this,arguments),a);};}function S(a){if(a.match(/\[[\s\S]/))return a.replace(/^\[|\]$/g,'');return a.replace(/\\/g,'');}function T(a){var b=a.match(N),c,d;for(c=0,d=b.length;c<d;c++)if(Q[b[c]])b[c]=Q[b[c]];else b[c]=S(b[c]);return function(e){var f='';for(c=0;c<d;c++)f+=b[c] instanceof Function?b[c].call(e,a):b[c];return f;};}function U(a,b){if(!a.isValid())return a.localeData().invalidDate();b=V(b,a.localeData());P[b]=P[b]||T(b);return P[b](a);}function V(a,b){var c=5;function d(a){return b.longDateFormat(a)||a;}O.lastIndex=0;while(c>=0&&O.test(a)){a=a.replace(O,d);O.lastIndex=0;c-=1;}return a;}var W=/\d/;var X=/\d\d/;var Y=/\d{3}/;var Z=/\d{4}/;var ab=/[+-]?\d{6}/;var ac=/\d\d?/;var ad=/\d{1,3}/;var ae=/\d{1,4}/;var af=/[+-]?\d{1,6}/;var ag=/\d+/;var ah=/[+-]?\d+/;var ai=/Z|[+-]\d\d:?\d\d/gi;var aj=/[+-]?\d+(\.\d{1,3})?/;var ak=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i;var al={};function am(a){return typeof a==='function'&&Object.prototype.toString.call(a)==='[object Function]';}function an(a,b,c){al[a]=am(b)?b:function(a){return(a&&c)?c:b;};}function ao(a,b){if(!g(al,a))return new RegExp(ap(a));return al[a](b._strict,b._locale);}function ap(a){return a.replace('\\','').replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(a,b,c,d,e){return b||c||d||e;}).replace(/[-\/\\^$*+?.()|[\]{}]/g,'\\$&');}var aq={};function ar(a,b){var c,d=b;if(typeof a==='string')a=[a];if(typeof b==='number')d=function(a,c){c[b]=t(a);};for(c=0;c<a.length;c++)aq[a[c]]=d;}function as(a,b){ar(a,function(a,c,d,e){d._w=d._w||{};b(a,d._w,d,e);});}function at(a,b,c){if(b!=null&&g(aq,a))aq[a](b,c._a,c,a);}var au=0;var av=1;var aw=2;var ax=3;var ay=4;var az=5;var aA=6;function aB(a,b){return new Date(Date.UTC(a,b+1,0)).getUTCDate();}R('M',['MM',2],'Mo',function(){return this.month()+1;});R('MMM',0,0,function(a){return this.localeData().monthsShort(this,a);});R('MMMM',0,0,function(a){return this.localeData().months(this,a);});F('month','M');an('M',ac);an('MM',ac,X);an('MMM',ak);an('MMMM',ak);ar(['M','MM'],function(a,b){b[av]=t(a)-1;});ar(['MMM','MMMM'],function(a,b,c,d){var e=c._locale.monthsParse(a,d,c._strict);if(e!=null)b[av]=e;else k(c).invalidMonth=a;});var aC='January_February_March_April_May_June_July_August_September_October_November_December'.split('_');function aD(a){return this._months[a.month()];}var aE='Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec'.split('_');function aF(a){return this._monthsShort[a.month()];}function aG(a,b,c){var d,e,f;if(!this._monthsParse){this._monthsParse=[];this._longMonthsParse=[];this._shortMonthsParse=[];}for(d=0;d<12;d++){e=i([2000,d]);if(c&&!this._longMonthsParse[d]){this._longMonthsParse[d]=new RegExp('^'+this.months(e,'').replace('.','')+'$','i');this._shortMonthsParse[d]=new RegExp('^'+this.monthsShort(e,'').replace('.','')+'$','i');}if(!c&&!this._monthsParse[d]){f='^'+this.months(e,'')+'|^'+this.monthsShort(e,'');this._monthsParse[d]=new RegExp(f.replace('.',''),'i');}if(c&&b==='MMMM'&&this._longMonthsParse[d].test(a))return d;else if(c&&b==='MMM'&&this._shortMonthsParse[d].test(a))return d;else if(!c&&this._monthsParse[d].test(a))return d;}}function aH(a,b){var c;if(typeof b==='string'){b=a.localeData().monthsParse(b);if(typeof b!=='number')return a;}c=Math.min(a.date(),aB(a.year(),b));a._d['set'+(a._isUTC?'UTC':'')+'Month'](b,c);return a;}function aI(a){if(a!=null){aH(this,a);b.updateOffset(this,true);return this;}else return J(this,'Month');}function aJ(){return aB(this.year(),this.month());}function aK(a){var b;var c=a._a;if(c&&k(a).overflow===-2){b=c[av]<0||c[av]>11?av:c[aw]<1||c[aw]>aB(c[au],c[av])?aw:c[ax]<0||c[ax]>24||(c[ax]===24&&(c[ay]!==0||c[az]!==0||c[aA]!==0))?ax:c[ay]<0||c[ay]>59?ay:c[az]<0||c[az]>59?az:c[aA]<0||c[aA]>999?aA:-1;if(k(a)._overflowDayOfYear&&(b<au||b>aw))b=aw;k(a).overflow=b;}return a;}function aL(a){if(b.suppressDeprecationWarnings===false&&typeof console!=='undefined'&&console.warn)console.warn('Deprecation warning: '+a);}function aM(a,b){var c=true;return h(function(){if(c){aL(a+'\n'+new Error().stack);c=false;}return b.apply(this,arguments);},b);}var aN={};function aO(a,b){if(!aN[a]){aL(b);aN[a]=true;}}b.suppressDeprecationWarnings=false;var aP=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/;var aQ=[['YYYYYY-MM-DD',/[+-]\d{6}-\d{2}-\d{2}/],['YYYY-MM-DD',/\d{4}-\d{2}-\d{2}/],['GGGG-[W]WW-E',/\d{4}-W\d{2}-\d/],['GGGG-[W]WW',/\d{4}-W\d{2}/],['YYYY-DDD',/\d{4}-\d{3}/]];var aR=[['HH:mm:ss.SSSS',/(T| )\d\d:\d\d:\d\d\.\d+/],['HH:mm:ss',/(T| )\d\d:\d\d:\d\d/],['HH:mm',/(T| )\d\d:\d\d/],['HH',/(T| )\d\d/]];var aS=/^\/?Date\((\-?\d+)/i;function aT(a){var b,c,d=a._i,e=aP.exec(d);if(e){k(a).iso=true;for(b=0,c=aQ.length;b<c;b++)if(aQ[b][1].exec(d)){a._f=aQ[b][0];break;}for(b=0,c=aR.length;b<c;b++)if(aR[b][1].exec(d)){a._f+=(e[6]||' ')+aR[b][0];break;}if(d.match(ai))a._f+='Z';bq(a);}else a._isValid=false;}function aU(a){var c=aS.exec(a._i);if(c!==null){a._d=new Date(+c[1]);return;}aT(a);if(a._isValid===false){delete a._isValid;b.createFromInputFallback(a);}}b.createFromInputFallback=aM('moment construction falls back to js Date. This is '+'discouraged and will be removed in upcoming major '+'release. Please refer to '+'https://github.com/moment/moment/issues/1407 for more info.',function(a){a._d=new Date(a._i+(a._useUTC?' UTC':''));});function aV(a,b,c,d,e,f,g){var h=new Date(a,b,c,d,e,f,g);if(a<1970)h.setFullYear(a);return h;}function aW(a){var b=new Date(Date.UTC.apply(null,arguments));if(a<1970)b.setUTCFullYear(a);return b;}R(0,['YY',2],0,function(){return this.year()%100;});R(0,['YYYY',4],0,'year');R(0,['YYYYY',5],0,'year');R(0,['YYYYYY',6,true],0,'year');F('year','y');an('Y',ah);an('YY',ac,X);an('YYYY',ae,Z);an('YYYYY',af,ab);an('YYYYYY',af,ab);ar(['YYYYY','YYYYYY'],au);ar('YYYY',function(a,c){c[au]=a.length===2?b.parseTwoDigitYear(a):t(a);});ar('YY',function(a,c){c[au]=b.parseTwoDigitYear(a);});function aX(a){return aY(a)?366:365;}function aY(a){return(a%4===0&&a%100!==0)||a%400===0;}b.parseTwoDigitYear=function(a){return t(a)+(t(a)>68?1900:2000);};var aZ=I('FullYear',false);function bc(){return aY(this.year());}R('w',['ww',2],'wo','week');R('W',['WW',2],'Wo','isoWeek');F('week','w');F('isoWeek','W');an('w',ac);an('ww',ac,X);an('W',ac);an('WW',ac,X);as(['w','ww','W','WW'],function(a,b,c,d){b[d.substr(0,1)]=t(a);});function bd(a,b,c){var d=c-b,e=c-a.day(),f;if(e>d)e-=7;if(e<d-7)e+=7;f=by(a).add(e,'d');return{week:Math.ceil(f.dayOfYear()/7),year:f.year()};}function be(a){return bd(a,this._week.dow,this._week.doy).week;}var bf={dow:0,doy:6};function bg(){return this._week.dow;}function bh(){return this._week.doy;}function bi(a){var b=this.localeData().week(this);return a==null?b:this.add((a-b)*7,'d');}function bj(a){var b=bd(this,1,4).week;return a==null?b:this.add((a-b)*7,'d');}R('DDD',['DDDD',3],'DDDo','dayOfYear');F('dayOfYear','DDD');an('DDD',ad);an('DDDD',Y);ar(['DDD','DDDD'],function(a,b,c){c._dayOfYear=t(a);});function bk(a,b,c,d,e){var f=6+e-d,g=aW(a,0,1+f),h=g.getUTCDay(),i;if(h<e)h+=7;c=c!=null?1*c:e;i=1+f+7*(b-1)-h+c;return{year:i>0?a:a-1,dayOfYear:i>0?i:aX(a-1)+i};}function bl(a){var b=Math.round((this.clone().startOf('day')-this.clone().startOf('year'))/864e5)+1;return a==null?b:this.add((a-b),'d');}function bm(a,b,c){if(a!=null)return a;if(b!=null)return b;return c;}function bn(a){var b=new Date();if(a._useUTC)return [b.getUTCFullYear(),b.getUTCMonth(),b.getUTCDate()];return [b.getFullYear(),b.getMonth(),b.getDate()];}function bo(a){var b,c,d=[],e,f;if(a._d)return;e=bn(a);if(a._w&&a._a[aw]==null&&a._a[av]==null)bp(a);if(a._dayOfYear){f=bm(a._a[au],e[au]);if(a._dayOfYear>aX(f))k(a)._overflowDayOfYear=true;c=aW(f,0,a._dayOfYear);a._a[av]=c.getUTCMonth();a._a[aw]=c.getUTCDate();}for(b=0;b<3&&a._a[b]==null;++b)a._a[b]=d[b]=e[b];for(;b<7;b++)a._a[b]=d[b]=(a._a[b]==null)?(b===2?1:0):a._a[b];if(a._a[ax]===24&&a._a[ay]===0&&a._a[az]===0&&a._a[aA]===0){a._nextDay=true;a._a[ax]=0;}a._d=(a._useUTC?aW:aV).apply(null,d);if(a._tzm!=null)a._d.setUTCMinutes(a._d.getUTCMinutes()-a._tzm);if(a._nextDay)a._a[ax]=24;}function bp(a){var b,c,d,e,f,g,h;b=a._w;if(b.GG!=null||b.W!=null||b.E!=null){f=1;g=4;c=bm(b.GG,a._a[au],bd(by(),1,4).year);d=bm(b.W,1);e=bm(b.E,1);}else{f=a._locale._week.dow;g=a._locale._week.doy;c=bm(b.gg,a._a[au],bd(by(),f,g).year);d=bm(b.w,1);if(b.d!=null){e=b.d;if(e<f)++d;}else if(b.e!=null)e=b.e+f;else e=f;}h=bk(c,d,e,g,f);a._a[au]=h.year;a._dayOfYear=h.dayOfYear;}b.ISO_8601=function(){};function bq(a){if(a._f===b.ISO_8601){aT(a);return;}a._a=[];k(a).empty=true;var c=''+a._i,d,e,f,g,h,i=c.length,j=0;f=V(a._f,a._locale).match(N)||[];for(d=0;d<f.length;d++){g=f[d];e=(c.match(ao(g,a))||[])[0];if(e){h=c.substr(0,c.indexOf(e));if(h.length>0)k(a).unusedInput.push(h);c=c.slice(c.indexOf(e)+e.length);j+=e.length;}if(Q[g]){if(e)k(a).empty=false;else k(a).unusedTokens.push(g);at(g,e,a);}else if(a._strict&&!e)k(a).unusedTokens.push(g);}k(a).charsLeftOver=i-j;if(c.length>0)k(a).unusedInput.push(c);if(k(a).bigHour===true&&a._a[ax]<=12&&a._a[ax]>0)k(a).bigHour=undefined;a._a[ax]=br(a._locale,a._a[ax],a._meridiem);bo(a);aK(a);}function br(a,b,c){var d;if(c==null)return b;if(a.meridiemHour!=null)return a.meridiemHour(b,c);else if(a.isPM!=null){d=a.isPM(c);if(d&&b<12)b+=12;if(!d&&b===12)b=0;return b;}else return b;}function bs(a){var b,c,d,e,f;if(a._f.length===0){k(a).invalidFormat=true;a._d=new Date(NaN);return;}for(e=0;e<a._f.length;e++){f=0;b=o({},a);if(a._useUTC!=null)b._useUTC=a._useUTC;b._f=a._f[e];bq(b);if(!l(b))continue;f+=k(b).charsLeftOver;f+=k(b).unusedTokens.length*10;k(b).score=f;if(d==null||f<d){d=f;c=b;}}h(a,c||b);}function bt(a){if(a._d)return;var b=H(a._i);a._a=[b.year,b.month,b.day||b.date,b.hour,b.minute,b.second,b.millisecond];bo(a);}function bu(a){var b=new q(aK(bv(a)));if(b._nextDay){b.add(1,'d');b._nextDay=undefined;}return b;}function bv(a){var b=a._i,c=a._f;a._locale=a._locale||D(a._l);if(b===null||(c===undefined&&b===''))return m({nullInput:true});if(typeof b==='string')a._i=b=a._locale.preparse(b);if(r(b))return new q(aK(b));else if(d(c))bs(a);else if(c)bq(a);else if(e(b))a._d=b;else bw(a);return a;}function bw(a){var c=a._i;if(c===undefined)a._d=new Date();else if(e(c))a._d=new Date(+c);else if(typeof c==='string')aU(a);else if(d(c)){a._a=f(c.slice(0),function(a){return parseInt(a,10);});bo(a);}else if(typeof c==='object')bt(a);else if(typeof c==='number')a._d=new Date(c);else b.createFromInputFallback(a);}function bx(a,b,c,d,e){var f={};if(typeof c==='boolean'){d=c;c=undefined;}f._isAMomentObject=true;f._useUTC=f._isUTC=e;f._l=c;f._i=a;f._f=b;f._strict=d;return bu(f);}function by(a,b,c,d){return bx(a,b,c,d,false);}var bz=aM('moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548',function(){var a=by.apply(null,arguments);return a<this?this:a;});var bA=aM('moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548',function(){var a=by.apply(null,arguments);return a>this?this:a;});function bB(a,b){var c,e;if(b.length===1&&d(b[0]))b=b[0];if(!b.length)return by();c=b[0];for(e=1;e<b.length;++e)if(!b[e].isValid()||b[e][a](c))c=b[e];return c;}function bC(){var a=[].slice.call(arguments,0);return bB('isBefore',a);}function bD(){var a=[].slice.call(arguments,0);return bB('isAfter',a);}function bE(a){var b=H(a),c=b.year||0,d=b.quarter||0,e=b.month||0,f=b.week||0,g=b.day||0,h=b.hour||0,i=b.minute||0,j=b.second||0,k=b.millisecond||0;this._milliseconds=+k+j*1e3+i*6e4+h*36e5;this._days=+g+f*7;this._months=+e+d*3+c*12;this._data={};this._locale=D();this._bubble();}function bF(a){return a instanceof bE;}function bG(a,b){R(a,0,0,function(){var a=this.utcOffset();var c='+';if(a<0){a=-a;c='-';}return c+M(~~(a/60),2)+b+M(~~a%60,2);});}bG('Z',':');bG('ZZ','');an('Z',ai);an('ZZ',ai);ar(['Z','ZZ'],function(a,b,c){c._useUTC=true;c._tzm=bI(a);});var bH=/([\+\-]|\d\d)/gi;function bI(a){var b=((a||'').match(ai)||[]);var c=b[b.length-1]||[];var d=(c+'').match(bH)||['-',0,0];var e=+(d[1]*60)+t(d[2]);return d[0]==='+'?e:-e;}function bJ(a,c){var d,f;if(c._isUTC){d=c.clone();f=(r(a)||e(a)?+a:+by(a))-(+d);d._d.setTime(+d._d+f);b.updateOffset(d,false);return d;}else return by(a).local();}function bK(a){return -Math.round(a._d.getTimezoneOffset()/15)*15;}b.updateOffset=function(){};function bL(a,c){var d=this._offset||0,e;if(a!=null){if(typeof a==='string')a=bI(a);if(Math.abs(a)<16)a=a*60;if(!this._isUTC&&c)e=bK(this);this._offset=a;this._isUTC=true;if(e!=null)this.add(e,'m');if(d!==a)if(!c||this._changeInProgress)cg(this,bY(a-d,'m'),1,false);else if(!this._changeInProgress){this._changeInProgress=true;b.updateOffset(this,true);this._changeInProgress=null;}return this;}else return this._isUTC?d:bK(this);}function bM(a,b){if(a!=null){if(typeof a!=='string')a=-a;this.utcOffset(a,b);return this;}else return -this.utcOffset();}function bN(a){return this.utcOffset(0,a);}function bO(a){if(this._isUTC){this.utcOffset(0,a);this._isUTC=false;if(a)this.subtract(bK(this),'m');}return this;}function bP(){if(this._tzm)this.utcOffset(this._tzm);else if(typeof this._i==='string')this.utcOffset(bI(this._i));return this;}function bQ(a){a=a?by(a).utcOffset():0;return(this.utcOffset()-a)%60===0;}function bR(){return(this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset());}function bS(){if(typeof this._isDSTShifted!=='undefined')return this._isDSTShifted;var a={};o(a,this);a=bv(a);if(a._a){var b=a._isUTC?i(a._a):by(a._a);this._isDSTShifted=this.isValid()&&u(a._a,b.toArray())>0;}else this._isDSTShifted=false;return this._isDSTShifted;}function bT(){return !this._isUTC;}function bU(){return this._isUTC;}function bV(){return this._isUTC&&this._offset===0;}var bW=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/;var bX=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/;function bY(a,b){var c=a,d=null,e,f,h;if(bF(a))c={ms:a._milliseconds,d:a._days,M:a._months};else if(typeof a==='number'){c={};if(b)c[b]=a;else c.milliseconds=a;}else if(!!(d=bW.exec(a))){e=(d[1]==='-')?-1:1;c={y:0,d:t(d[aw])*e,h:t(d[ax])*e,m:t(d[ay])*e,s:t(d[az])*e,ms:t(d[aA])*e};}else if(!!(d=bX.exec(a))){e=(d[1]==='-')?-1:1;c={y:bZ(d[2],e),M:bZ(d[3],e),d:bZ(d[4],e),h:bZ(d[5],e),m:bZ(d[6],e),s:bZ(d[7],e),w:bZ(d[8],e)};}else if(c==null)c={};else if(typeof c==='object'&&('from' in c||'to' in c)){h=ce(by(c.from),by(c.to));c={};c.ms=h.milliseconds;c.M=h.months;}f=new bE(c);if(bF(a)&&g(a,'_locale'))f._locale=a._locale;return f;}bY.fn=bE.prototype;function bZ(a,b){var c=a&&parseFloat(a.replace(',','.'));return(isNaN(c)?0:c)*b;}function cd(a,b){var c={milliseconds:0,months:0};c.months=b.month()-a.month()+(b.year()-a.year())*12;if(a.clone().add(c.months,'M').isAfter(b))--c.months;c.milliseconds=+b-+(a.clone().add(c.months,'M'));return c;}function ce(a,b){var c;b=bJ(b,a);if(a.isBefore(b))c=cd(a,b);else{c=cd(b,a);c.milliseconds=-c.milliseconds;c.months=-c.months;}return c;}function cf(a,b){return function(c,d){var e,f;if(d!==null&&!isNaN(+d)){aO(b,'moment().'+b+'(period, number) is deprecated. Please use moment().'+b+'(number, period).');f=c;c=d;d=f;}c=typeof c==='string'?+c:c;e=bY(c,d);cg(this,e,a);return this;};}function cg(a,c,d,e){var f=c._milliseconds,g=c._days,h=c._months;e=e==null?true:e;if(f)a._d.setTime(+a._d+f*d);if(g)K(a,'Date',J(a,'Date')+g*d);if(h)aH(a,J(a,'Month')+h*d);if(e)b.updateOffset(a,g||h);}var ch=cf(1,'add');var ci=cf(-1,'subtract');function cj(a,b){var c=a||by(),d=bJ(c,this).startOf('day'),e=this.diff(d,'days',true),f=e<-6?'sameElse':e<-1?'lastWeek':e<0?'lastDay':e<1?'sameDay':e<2?'nextDay':e<7?'nextWeek':'sameElse';return this.format(b&&b[f]||this.localeData().calendar(f,this,by(c)));}function ck(){return new q(this);}function cl(a,b){var c;b=G(typeof b!=='undefined'?b:'millisecond');if(b==='millisecond'){a=r(a)?a:by(a);return +this>+a;}else{c=r(a)?+a:+by(a);return c<+this.clone().startOf(b);}}function cm(a,b){var c;b=G(typeof b!=='undefined'?b:'millisecond');if(b==='millisecond'){a=r(a)?a:by(a);return +this<+a;}else{c=r(a)?+a:+by(a);return +this.clone().endOf(b)<c;}}function cn(a,b,c){return this.isAfter(a,c)&&this.isBefore(b,c);}function co(a,b){var c;b=G(b||'millisecond');if(b==='millisecond'){a=r(a)?a:by(a);return +this===+a;}else{c=+by(a);return +(this.clone().startOf(b))<=c&&c<=+(this.clone().endOf(b));}}function cp(a,b,c){var d=bJ(a,this),e=(d.utcOffset()-this.utcOffset())*6e4,f,g;b=G(b);if(b==='year'||b==='month'||b==='quarter'){g=cq(this,d);if(b==='quarter')g=g/3;else if(b==='year')g=g/12;}else{f=this-d;g=b==='second'?f/1e3:b==='minute'?f/6e4:b==='hour'?f/36e5:b==='day'?(f-e)/864e5:b==='week'?(f-e)/6048e5:f;}return c?g:s(g);}function cq(a,b){var c=((b.year()-a.year())*12)+(b.month()-a.month()),d=a.clone().add(c,'months'),e,f;if(b-d<0){e=a.clone().add(c-1,'months');f=(b-d)/(d-e);}else{e=a.clone().add(c+1,'months');f=(b-d)/(e-d);}return -(c+f);}b.defaultFormat='YYYY-MM-DDTHH:mm:ssZ';function cr(){return this.clone().locale('en').format('ddd MMM DD YYYY HH:mm:ss [GMT]ZZ');}function cs(){var a=this.clone().utc();if(0<a.year()&&a.year()<=9999)if('function'===typeof Date.prototype.toISOString)return this.toDate().toISOString();else return U(a,'YYYY-MM-DD[T]HH:mm:ss.SSS[Z]');else return U(a,'YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]');}function ct(a){var c=U(this,a||b.defaultFormat);return this.localeData().postformat(c);}function cu(a,b){if(!this.isValid())return this.localeData().invalidDate();return bY({to:this,from:a}).locale(this.locale()).humanize(!b);}function cv(a){return this.from(by(),a);}function cw(a,b){if(!this.isValid())return this.localeData().invalidDate();return bY({from:this,to:a}).locale(this.locale()).humanize(!b);}function cx(a){return this.to(by(),a);}function cy(a){var b;if(a===undefined)return this._locale._abbr;else{b=D(a);if(b!=null)this._locale=b;return this;}}var cz=aM('moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.',function(a){if(a===undefined)return this.localeData();else return this.locale(a);});function cA(){return this._locale;}function cB(a){a=G(a);switch(a){case 'year':this.month(0);case 'quarter':case 'month':this.date(1);case 'week':case 'isoWeek':case 'day':this.hours(0);case 'hour':this.minutes(0);case 'minute':this.seconds(0);case 'second':this.milliseconds(0);}if(a==='week')this.weekday(0);if(a==='isoWeek')this.isoWeekday(1);if(a==='quarter')this.month(Math.floor(this.month()/3)*3);return this;}function cC(a){a=G(a);if(a===undefined||a==='millisecond')return this;return this.startOf(a).add(1,(a==='isoWeek'?'week':a)).subtract(1,'ms');}function cD(){return +this._d-((this._offset||0)*60000);}function cE(){return Math.floor(+this/1000);}function cF(){return this._offset?new Date(+this):this._d;}function cG(){var a=this;return [a.year(),a.month(),a.date(),a.hour(),a.minute(),a.second(),a.millisecond()];}function cH(){var a=this;return{years:a.year(),months:a.month(),date:a.date(),hours:a.hours(),minutes:a.minutes(),seconds:a.seconds(),milliseconds:a.milliseconds()};}function cI(){return l(this);}function cJ(){return h({},k(this));}function cK(){return k(this).overflow;}R(0,['gg',2],0,function(){return this.weekYear()%100;});R(0,['GG',2],0,function(){return this.isoWeekYear()%100;});function cL(a,b){R(0,[a,a.length],0,b);}cL('gggg','weekYear');cL('ggggg','weekYear');cL('GGGG','isoWeekYear');cL('GGGGG','isoWeekYear');F('weekYear','gg');F('isoWeekYear','GG');an('G',ah);an('g',ah);an('GG',ac,X);an('gg',ac,X);an('GGGG',ae,Z);an('gggg',ae,Z);an('GGGGG',af,ab);an('ggggg',af,ab);as(['gggg','ggggg','GGGG','GGGGG'],function(a,b,c,d){b[d.substr(0,2)]=t(a);});as(['gg','GG'],function(a,c,d,e){c[e]=b.parseTwoDigitYear(a);});function cM(a,b,c){return bd(by([a,11,31+b-c]),b,c).week;}function cN(a){var b=bd(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return a==null?b:this.add((a-b),'y');}function cO(a){var b=bd(this,1,4).year;return a==null?b:this.add((a-b),'y');}function cP(){return cM(this.year(),1,4);}function cQ(){var a=this.localeData()._week;return cM(this.year(),a.dow,a.doy);}R('Q',0,0,'quarter');F('quarter','Q');an('Q',W);ar('Q',function(a,b){b[av]=(t(a)-1)*3;});function cR(a){return a==null?Math.ceil((this.month()+1)/3):this.month((a-1)*3+this.month()%3);}R('D',['DD',2],'Do','date');F('date','D');an('D',ac);an('DD',ac,X);an('Do',function(a,b){return a?b._ordinalParse:b._ordinalParseLenient;});ar(['D','DD'],aw);ar('Do',function(a,b){b[aw]=t(a.match(ac)[0],10);});var cS=I('Date',true);R('d',0,'do','day');R('dd',0,0,function(a){return this.localeData().weekdaysMin(this,a);});R('ddd',0,0,function(a){return this.localeData().weekdaysShort(this,a);});R('dddd',0,0,function(a){return this.localeData().weekdays(this,a);});R('e',0,0,'weekday');R('E',0,0,'isoWeekday');F('day','d');F('weekday','e');F('isoWeekday','E');an('d',ac);an('e',ac);an('E',ac);an('dd',ak);an('ddd',ak);an('dddd',ak);as(['dd','ddd','dddd'],function(a,b,c){var d=c._locale.weekdaysParse(a);if(d!=null)b.d=d;else k(c).invalidWeekday=a;});as(['d','e','E'],function(a,b,c,d){b[d]=t(a);});function cT(a,b){if(typeof a!=='string')return a;if(!isNaN(a))return parseInt(a,10);a=b.weekdaysParse(a);if(typeof a==='number')return a;return null;}var cU='Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday'.split('_');function cV(a){return this._weekdays[a.day()];}var cW='Sun_Mon_Tue_Wed_Thu_Fri_Sat'.split('_');function cX(a){return this._weekdaysShort[a.day()];}var cY='Su_Mo_Tu_We_Th_Fr_Sa'.split('_');function cZ(a){return this._weekdaysMin[a.day()];}function de(a){var b,c,d;this._weekdaysParse=this._weekdaysParse||[];for(b=0;b<7;b++){if(!this._weekdaysParse[b]){c=by([2000,1]).day(b);d='^'+this.weekdays(c,'')+'|^'+this.weekdaysShort(c,'')+'|^'+this.weekdaysMin(c,'');this._weekdaysParse[b]=new RegExp(d.replace('.',''),'i');}if(this._weekdaysParse[b].test(a))return b;}}function df(a){var b=this._isUTC?this._d.getUTCDay():this._d.getDay();if(a!=null){a=cT(a,this.localeData());return this.add(a-b,'d');}else return b;}function dg(a){var b=(this.day()+7-this.localeData()._week.dow)%7;return a==null?b:this.add(a-b,'d');}function dh(a){return a==null?this.day()||7:this.day(this.day()%7?a:a-7);}R('H',['HH',2],0,'hour');R('h',['hh',2],0,function(){return this.hours()%12||12;});function di(a,b){R(a,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),b);});}di('a',true);di('A',false);F('hour','h');function dj(a,b){return b._meridiemParse;}an('a',dj);an('A',dj);an('H',ac);an('h',ac);an('HH',ac,X);an('hh',ac,X);ar(['H','HH'],ax);ar(['a','A'],function(a,b,c){c._isPm=c._locale.isPM(a);c._meridiem=a;});ar(['h','hh'],function(a,b,c){b[ax]=t(a);k(c).bigHour=true;});function dk(a){return((a+'').toLowerCase().charAt(0)==='p');}var dl=/[ap]\.?m?\.?/i;function dm(a,b,c){if(a>11)return c?'pm':'PM';else return c?'am':'AM';}var dn=I('Hours',true);R('m',['mm',2],0,'minute');F('minute','m');an('m',ac);an('mm',ac,X);ar(['m','mm'],ay);var dp=I('Minutes',false);R('s',['ss',2],0,'second');F('second','s');an('s',ac);an('ss',ac,X);ar(['s','ss'],az);var dq=I('Seconds',false);R('S',0,0,function(){return ~~(this.millisecond()/100);});R(0,['SS',2],0,function(){return ~~(this.millisecond()/10);});R(0,['SSS',3],0,'millisecond');R(0,['SSSS',4],0,function(){return this.millisecond()*10;});R(0,['SSSSS',5],0,function(){return this.millisecond()*100;});R(0,['SSSSSS',6],0,function(){return this.millisecond()*1000;});R(0,['SSSSSSS',7],0,function(){return this.millisecond()*10000;});R(0,['SSSSSSSS',8],0,function(){return this.millisecond()*100000;});R(0,['SSSSSSSSS',9],0,function(){return this.millisecond()*1000000;});F('millisecond','ms');an('S',ad,W);an('SS',ad,X);an('SSS',ad,Y);var dr;for(dr='SSSS';dr.length<=9;dr+='S')an(dr,ag);function ds(a,b){b[aA]=t(('0.'+a)*1000);}for(dr='S';dr.length<=9;dr+='S')ar(dr,ds);var dt=I('Milliseconds',false);R('z',0,0,'zoneAbbr');R('zz',0,0,'zoneName');function du(){return this._isUTC?'UTC':'';}function dv(){return this._isUTC?'Coordinated Universal Time':'';}var dw=q.prototype;dw.add=ch;dw.calendar=cj;dw.clone=ck;dw.diff=cp;dw.endOf=cC;dw.format=ct;dw.from=cu;dw.fromNow=cv;dw.to=cw;dw.toNow=cx;dw.get=L;dw.invalidAt=cK;dw.isAfter=cl;dw.isBefore=cm;dw.isBetween=cn;dw.isSame=co;dw.isValid=cI;dw.lang=cz;dw.locale=cy;dw.localeData=cA;dw.max=bA;dw.min=bz;dw.parsingFlags=cJ;dw.set=L;dw.startOf=cB;dw.subtract=ci;dw.toArray=cG;dw.toObject=cH;dw.toDate=cF;dw.toISOString=cs;dw.toJSON=cs;dw.toString=cr;dw.unix=cE;dw.valueOf=cD;dw.year=aZ;dw.isLeapYear=bc;dw.weekYear=cN;dw.isoWeekYear=cO;dw.quarter=dw.quarters=cR;dw.month=aI;dw.daysInMonth=aJ;dw.week=dw.weeks=bi;dw.isoWeek=dw.isoWeeks=bj;dw.weeksInYear=cQ;dw.isoWeeksInYear=cP;dw.date=cS;dw.day=dw.days=df;dw.weekday=dg;dw.isoWeekday=dh;dw.dayOfYear=bl;dw.hour=dw.hours=dn;dw.minute=dw.minutes=dp;dw.second=dw.seconds=dq;dw.millisecond=dw.milliseconds=dt;dw.utcOffset=bL;dw.utc=bN;dw.local=bO;dw.parseZone=bP;dw.hasAlignedHourOffset=bQ;dw.isDST=bR;dw.isDSTShifted=bS;dw.isLocal=bT;dw.isUtcOffset=bU;dw.isUtc=bV;dw.isUTC=bV;dw.zoneAbbr=du;dw.zoneName=dv;dw.dates=aM('dates accessor is deprecated. Use date instead.',cS);dw.months=aM('months accessor is deprecated. Use month instead',aI);dw.years=aM('years accessor is deprecated. Use year instead',aZ);dw.zone=aM('moment().zone is deprecated, use moment().utcOffset instead. https://github.com/moment/moment/issues/1779',bM);var dx=dw;function dy(a){return by(a*1000);}function dz(){return by.apply(null,arguments).parseZone();}var dA={sameDay:'[Today at] LT',nextDay:'[Tomorrow at] LT',nextWeek:'dddd [at] LT',lastDay:'[Yesterday at] LT',lastWeek:'[Last] dddd [at] LT',sameElse:'L'};function dB(a,b,c){var d=this._calendar[a];return typeof d==='function'?d.call(b,c):d;}var dC={LTS:'h:mm:ss A',LT:'h:mm A',L:'MM/DD/YYYY',LL:'MMMM D, YYYY',LLL:'MMMM D, YYYY h:mm A',LLLL:'dddd, MMMM D, YYYY h:mm A'};function dD(a){var b=this._longDateFormat[a],c=this._longDateFormat[a.toUpperCase()];if(b||!c)return b;this._longDateFormat[a]=c.replace(/MMMM|MM|DD|dddd/g,function(a){return a.slice(1);});return this._longDateFormat[a];}var dE='Invalid date';function dF(){return this._invalidDate;}var dG='%d';var dH=/\d{1,2}/;function dI(a){return this._ordinal.replace('%d',a);}function dJ(a){return a;}var dK={future:'in %s',past:'%s ago',s:'a few seconds',m:'a minute',mm:'%d minutes',h:'an hour',hh:'%d hours',d:'a day',dd:'%d days',M:'a month',MM:'%d months',y:'a year',yy:'%d years'};function dL(a,b,c,d){var e=this._relativeTime[c];return(typeof e==='function')?e(a,b,c,d):e.replace(/%d/i,a);}function dM(a,b){var c=this._relativeTime[a>0?'future':'past'];return typeof c==='function'?c(b):c.replace(/%s/i,b);}function dN(a){var b,c;for(c in a){b=a[c];if(typeof b==='function')this[c]=b;else this['_'+c]=b;}this._ordinalParseLenient=new RegExp(this._ordinalParse.source+'|'+(/\d{1,2}/).source);}var dP=v.prototype;dP._calendar=dA;dP.calendar=dB;dP._longDateFormat=dC;dP.longDateFormat=dD;dP._invalidDate=dE;dP.invalidDate=dF;dP._ordinal=dG;dP.ordinal=dI;dP._ordinalParse=dH;dP.preparse=dJ;dP.postformat=dJ;dP._relativeTime=dK;dP.relativeTime=dL;dP.pastFuture=dM;dP.set=dN;dP.months=aD;dP._months=aC;dP.monthsShort=aF;dP._monthsShort=aE;dP.monthsParse=aG;dP.week=be;dP._week=bf;dP.firstDayOfYear=bh;dP.firstDayOfWeek=bg;dP.weekdays=cV;dP._weekdays=cU;dP.weekdaysMin=cZ;dP._weekdaysMin=cY;dP.weekdaysShort=cX;dP._weekdaysShort=cW;dP.weekdaysParse=de;dP.isPM=dk;dP._meridiemParse=dl;dP.meridiem=dm;function dQ(a,b,c,d){var e=D();var f=i().set(d,b);return e[c](f,a);}function dR(a,b,c,d,e){if(typeof a==='number'){b=a;a=undefined;}a=a||'';if(b!=null)return dQ(a,b,c,e);var f;var g=[];for(f=0;f<d;f++)g[f]=dQ(a,f,c,e);return g;}function dS(a,b){return dR(a,b,'months',12,'month');}function dT(a,b){return dR(a,b,'monthsShort',12,'month');}function dU(a,b){return dR(a,b,'weekdays',7,'day');}function dV(a,b){return dR(a,b,'weekdaysShort',7,'day');}function dW(a,b){return dR(a,b,'weekdaysMin',7,'day');}B('en',{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(a){var b=a%10,c=(t(a%100/10)===1)?'th':(b===1)?'st':(b===2)?'nd':(b===3)?'rd':'th';return a+c;}});b.lang=aM('moment.lang is deprecated. Use moment.locale instead.',B);b.langData=aM('moment.langData is deprecated. Use moment.localeData instead.',D);var dX=Math.abs;function dY(){var a=this._data;this._milliseconds=dX(this._milliseconds);this._days=dX(this._days);this._months=dX(this._months);a.milliseconds=dX(a.milliseconds);a.seconds=dX(a.seconds);a.minutes=dX(a.minutes);a.hours=dX(a.hours);a.months=dX(a.months);a.years=dX(a.years);return this;}function dZ(a,b,c,d){var e=bY(b,c);a._milliseconds+=d*e._milliseconds;a._days+=d*e._days;a._months+=d*e._months;return a._bubble();}function ef(a,b){return dZ(this,a,b,1);}function eg(a,b){return dZ(this,a,b,-1);}function eh(a){if(a<0)return Math.floor(a);else return Math.ceil(a);}function ei(){var a=this._milliseconds;var b=this._days;var c=this._months;var d=this._data;var e,f,g,h,i;if(!((a>=0&&b>=0&&c>=0)||(a<=0&&b<=0&&c<=0))){a+=eh(ek(c)+b)*864e5;b=0;c=0;}d.milliseconds=a%1000;e=s(a/1000);d.seconds=e%60;f=s(e/60);d.minutes=f%60;g=s(f/60);d.hours=g%24;b+=s(g/24);i=s(ej(b));c+=i;b-=eh(ek(i));h=s(c/12);c%=12;d.days=b;d.months=c;d.years=h;return this;}function ej(a){return a*4800/146097;}function ek(a){return a*146097/4800;}function el(a){var b;var c;var d=this._milliseconds;a=G(a);if(a==='month'||a==='year'){b=this._days+d/864e5;c=this._months+ej(b);return a==='month'?c:c/12;}else{b=this._days+Math.round(ek(this._months));switch(a){case 'week':return b/7+d/6048e5;case 'day':return b+d/864e5;case 'hour':return b*24+d/36e5;case 'minute':return b*1440+d/6e4;case 'second':return b*86400+d/1000;case 'millisecond':return Math.floor(b*864e5)+d;default:throw new Error('Unknown unit '+a);}}}function em(){return(this._milliseconds+this._days*864e5+(this._months%12)*2592e6+t(this._months/12)*31536e6);}function en(a){return function(){return this.as(a);};}var eo=en('ms');var ep=en('s');var eq=en('m');var er=en('h');var es=en('d');var et=en('w');var eu=en('M');var ev=en('y');function ew(a){a=G(a);return this[a+'s']();}function ex(a){return function(){return this._data[a];};}var ey=ex('milliseconds');var ez=ex('seconds');var eA=ex('minutes');var eB=ex('hours');var eC=ex('days');var eD=ex('months');var eE=ex('years');function eF(){return s(this.days()/7);}var eG=Math.round;var eH={s:45,m:45,h:22,d:26,M:11};function eI(a,b,c,d,e){return e.relativeTime(b||1,!!c,a,d);}function eJ(a,b,c){var d=bY(a).abs();var e=eG(d.as('s'));var f=eG(d.as('m'));var g=eG(d.as('h'));var h=eG(d.as('d'));var i=eG(d.as('M'));var j=eG(d.as('y'));var k=e<eH.s&&['s',e]||f===1&&['m']||f<eH.m&&['mm',f]||g===1&&['h']||g<eH.h&&['hh',g]||h===1&&['d']||h<eH.d&&['dd',h]||i===1&&['M']||i<eH.M&&['MM',i]||j===1&&['y']||['yy',j];k[2]=b;k[3]=+a>0;k[4]=c;return eI.apply(null,k);}function eK(a,b){if(eH[a]===undefined)return false;if(b===undefined)return eH[a];eH[a]=b;return true;}function eL(a){var b=this.localeData();var c=eJ(this,!a,b);if(a)c=b.pastFuture(+this,c);return b.postformat(c);}var eM=Math.abs;function eN(){var a=eM(this._milliseconds)/1000;var b=eM(this._days);var c=eM(this._months);var d,e,f;d=s(a/60);e=s(d/60);a%=60;d%=60;f=s(c/12);c%=12;var g=f;var h=c;var i=b;var j=e;var k=d;var l=a;var m=this.asSeconds();if(!m)return 'P0D';return(m<0?'-':'')+'P'+(g?g+'Y':'')+(h?h+'M':'')+(i?i+'D':'')+((j||k||l)?'T':'')+(j?j+'H':'')+(k?k+'M':'')+(l?l+'S':'');}var eO=bE.prototype;eO.abs=dY;eO.add=ef;eO.subtract=eg;eO.as=el;eO.asMilliseconds=eo;eO.asSeconds=ep;eO.asMinutes=eq;eO.asHours=er;eO.asDays=es;eO.asWeeks=et;eO.asMonths=eu;eO.asYears=ev;eO.valueOf=em;eO._bubble=ei;eO.get=ew;eO.milliseconds=ey;eO.seconds=ez;eO.minutes=eA;eO.hours=eB;eO.days=eC;eO.weeks=eF;eO.months=eD;eO.years=eE;eO.humanize=eL;eO.toISOString=eN;eO.toString=eN;eO.toJSON=eN;eO.locale=cy;eO.localeData=cA;eO.toIsoString=aM('toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)',eN);eO.lang=cz;R('X',0,0,'unix');R('x',0,0,'valueOf');an('x',ah);an('X',aj);ar('X',function(a,b,c){c._d=new Date(parseFloat(a,10)*1000);});ar('x',function(a,b,c){c._d=new Date(t(a));});;b.version='2.10.6';c(by);b.fn=dx;b.min=bC;b.max=bD;b.utc=i;b.unix=dy;b.months=dS;b.isDate=e;b.locale=B;b.invalid=m;b.duration=bY;b.isMoment=r;b.weekdays=dU;b.parseZone=dz;b.localeData=D;b.isDuration=bF;b.monthsShort=dT;b.weekdaysMin=dW;b.defineLocale=C;b.weekdaysShort=dV;b.normalizeUnits=G;b.relativeTimeThreshold=eK;var eP=b;var eQ='Ene._Feb._Mar._Abr._May._Jun._Jul._Ago._Sep._Oct._Nov._Dic.'.split('_'),eR='Ene_Feb_Mar_Abr_May_Jun_Jul_Ago_Sep_Oct_Nov_Dic'.split('_');var eS=eP.defineLocale('es',{months:'Enero_Febrero_Marzo_Abril_Mayo_Junio_Julio_Agosto_Septiembre_Octubre_Noviembre_Diciembre'.split('_'),monthsShort:function(a,b){if(/-MMM-/.test(b))return eR[a.month()];else return eQ[a.month()];},weekdays:'Domingo_Lunes_Martes_Miércoles_Jueves_Viernes_Sábado'.split('_'),weekdaysShort:'Dom._Lun._Mar._Mié._Jue._Vie._Sáb.'.split('_'),weekdaysMin:'Do_Lu_Ma_Mi_Ju_Vi_Sá'.split('_'),longDateFormat:{LT:'H:mm',LTS:'H:mm:ss',L:'DD/MM/YYYY',LL:'D [de] MMMM [de] YYYY',LLL:'D [de] MMMM [de] YYYY H:mm',LLLL:'dddd, D [de] MMMM [de] YYYY H:mm'},calendar:{sameDay:function(){return '[hoy a la'+((this.hours()!==1)?'s':'')+'] LT';},nextDay:function(){return '[mañana a la'+((this.hours()!==1)?'s':'')+'] LT';},nextWeek:function(){return 'dddd [a la'+((this.hours()!==1)?'s':'')+'] LT';},lastDay:function(){return '[ayer a la'+((this.hours()!==1)?'s':'')+'] LT';},lastWeek:function(){return '[el] dddd [pasado a la'+((this.hours()!==1)?'s':'')+'] LT';},sameElse:'L'},relativeTime:{future:'en %s',past:'hace %s',s:'unos segundos',m:'un minuto',mm:'%d minutos',h:'una hora',hh:'%d horas',d:'un día',dd:'%d días',M:'un mes',MM:'%d meses',y:'un año',yy:'%d años'},ordinalParse:/\d{1,2}º/,ordinal:'%dº',week:{dow:1,doy:4}});var eT=eP.defineLocale('fr',{months:'janvier_février_mars_avril_mai_juin_juillet_août_septembre_octobre_novembre_décembre'.split('_'),monthsShort:'janv._févr._mars_avr._mai_juin_juil._août_sept._oct._nov._déc.'.split('_'),weekdays:'dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi'.split('_'),weekdaysShort:'dim._lun._mar._mer._jeu._ven._sam.'.split('_'),weekdaysMin:'Di_Lu_Ma_Me_Je_Ve_Sa'.split('_'),longDateFormat:{LT:'HH:mm',LTS:'HH:mm:ss',L:'DD/MM/YYYY',LL:'D MMMM YYYY',LLL:'D MMMM YYYY HH:mm',LLLL:'dddd D MMMM YYYY HH:mm'},calendar:{sameDay:'[Aujourd\'hui à] LT',nextDay:'[Demain à] LT',nextWeek:'dddd [à] LT',lastDay:'[Hier à] LT',lastWeek:'dddd [dernier à] LT',sameElse:'L'},relativeTime:{future:'dans %s',past:'il y a %s',s:'quelques secondes',m:'une minute',mm:'%d minutes',h:'une heure',hh:'%d heures',d:'un jour',dd:'%d jours',M:'un mois',MM:'%d mois',y:'un an',yy:'%d ans'},ordinalParse:/\d{1,2}(er|)/,ordinal:function(a){return a+(a===1?'er':'');},week:{dow:1,doy:4}});var eU=eP.defineLocale('ja',{months:'1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月'.split('_'),monthsShort:'1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月'.split('_'),weekdays:'日曜日_月曜日_火曜日_水曜日_木曜日_金曜日_土曜日'.split('_'),weekdaysShort:'日_月_火_水_木_金_土'.split('_'),weekdaysMin:'日_月_火_水_木_金_土'.split('_'),longDateFormat:{LT:'Ah時m分',LTS:'Ah時m分s秒',L:'YYYY/MM/DD',LL:'YYYY年M月D日',LLL:'YYYY年M月D日Ah時m分',LLLL:'YYYY年M月D日Ah時m分 dddd'},meridiemParse:/午前|午後/i,isPM:function(a){return a==='午後';},meridiem:function(a,b,c){if(a<12)return '午前';else return '午後';},calendar:{sameDay:'[今日] LT',nextDay:'[明日] LT',nextWeek:'[来週]dddd LT',lastDay:'[昨日] LT',lastWeek:'[前週]dddd LT',sameElse:'L'},relativeTime:{future:'%s後',past:'%s前',s:'数秒',m:'1分',mm:'%d分',h:'1時間',hh:'%d時間',d:'1日',dd:'%d日',M:'1ヶ月',MM:'%dヶ月',y:'1年',yy:'%d年'}});var eV=eP;eV.locale('en');return eV;}));(function(a,b){"use strict";if(typeof define==='function'&&define.amd)define(['moment'],b);else if(typeof exports==='object')module.exports=b(require('moment'));else b(a.moment);}(this,function(a){"use strict";if(a.tz!==undefined){x('Moment Timezone '+a.tz.version+' was already loaded '+(a.tz.dataVersion?'with data from ':'without any data')+a.tz.dataVersion);return a;}var b="0.4.1",c={},d={},e={},f=a.version.split('.'),g=+f[0],h=+f[1];if(g<2||(g===2&&h<6))x('Moment Timezone requires Moment.js >= 2.6.0. You are using Moment.js '+a.version+'. See momentjs.com');function i(a){if(a>96)return a-87;else if(a>64)return a-29;return a-48;}function j(a){var b=0,c=a.split('.'),d=c[0],e=c[1]||'',f=1,g,h=0,j=1;if(a.charCodeAt(0)===45){b=1;j=-1;}for(b;b<d.length;b++){g=i(d.charCodeAt(b));h=60*h+g;}for(b=0;b<e.length;b++){f=f/60;g=i(e.charCodeAt(b));h+=g*f;}return h*j;}function k(a){for(var b=0;b<a.length;b++)a[b]=j(a[b]);}function l(a,b){for(var c=0;c<b;c++)a[c]=Math.round((a[c-1]||0)+(a[c]*60000));a[b-1]=Infinity;}function m(a,b){var c=[],d;for(d=0;d<b.length;d++)c[d]=a[b[d]];return c;}function n(a){var b=a.split('|'),c=b[2].split(' '),d=b[3].split(''),e=b[4].split(' ');k(c);k(d);k(e);l(e,d.length);return{name:b[0],abbrs:m(b[1].split(' '),d),offsets:m(c,d),untils:e};}function o(a){if(a)this._set(n(a));}o.prototype={_set:function(a){this.name=a.name;this.abbrs=a.abbrs;this.untils=a.untils;this.offsets=a.offsets;},_index:function(a){var b=+a,c=this.untils,d;for(d=0;d<c.length;d++)if(b<c[d])return d;},parse:function(a){var b=+a,c=this.offsets,d=this.untils,e=d.length-1,f,g,h,i;for(i=0;i<e;i++){f=c[i];g=c[i+1];h=c[i?i-1:i];if(f<g&&y.moveAmbiguousForward)f=g;else if(f>h&&y.moveInvalidForward)f=h;if(b<d[i]-(f*60000))return c[i];}return c[e];},abbr:function(a){return this.abbrs[this._index(a)];},offset:function(a){return this.offsets[this._index(a)];}};function p(a){return(a||'').toLowerCase().replace(/\//g,'_');}function q(a){var b,d,f;if(typeof a==="string")a=[a];for(b=0;b<a.length;b++){d=a[b].split('|')[0];f=p(d);c[f]=a[b];e[f]=d;}}function r(a,b){a=p(a);var f=c[a];var g;if(f instanceof o)return f;if(typeof f==='string'){f=new o(f);c[a]=f;return f;}if(d[a]&&b!==r&&(g=r(d[a],r))){f=c[a]=new o();f._set(g);f.name=e[a];return f;}return null;}function s(){var a,b=[];for(a in e)if(e.hasOwnProperty(a)&&(c[a]||c[d[a]])&&e[a])b.push(e[a]);return b.sort();}function t(a){var b,c,f,g;if(typeof a==="string")a=[a];for(b=0;b<a.length;b++){c=a[b].split('|');f=p(c[0]);g=p(c[1]);d[f]=g;e[f]=c[0];d[g]=f;e[g]=c[1];}}function u(a){q(a.zones);t(a.links);y.dataVersion=a.version;}function v(a){if(!v.didShowError){v.didShowError=true;x("moment.tz.zoneExists('"+a+"') has been deprecated in favor of !moment.tz.zone('"+a+"')");}return !!r(a);}function w(a){return !!(a._a&&(a._tzm===undefined));}function x(a){if(typeof console!=='undefined'&&typeof console.error==='function')console.error(a);}function y(b){var c=Array.prototype.slice.call(arguments,0,-1),d=arguments[arguments.length-1],e=r(d),f=a.utc.apply(null,c);if(e&&!a.isMoment(b)&&w(f))f.add(e.parse(f),'minutes');f.tz(d);return f;}y.version=b;y.dataVersion='';y._zones=c;y._links=d;y._names=e;y.add=q;y.link=t;y.load=u;y.zone=r;y.zoneExists=v;y.names=s;y.Zone=o;y.unpack=n;y.unpackBase60=j;y.needsOffset=w;y.moveInvalidForward=true;y.moveAmbiguousForward=false;var z=a.fn;a.tz=y;a.defaultZone=null;a.updateOffset=function(b,c){var d=a.defaultZone,e;if(b._z===undefined){if(d&&w(b)&&!b._isUTC){b._d=a.utc(b._a)._d;b.utc().add(d.parse(b),'minutes');}b._z=d;}if(b._z){e=b._z.offset(b);if(Math.abs(e)<16)e=e/60;if(b.utcOffset!==undefined)b.utcOffset(-e,c);else b.zone(e,c);}};z.tz=function(b){if(b){this._z=r(b);if(this._z)a.updateOffset(this);else x("Moment Timezone has no data for "+b+". See http://momentjs.com/timezone/docs/#/data-loading/.");return this;}if(this._z)return this._z.name;};function A(a){return function(){if(this._z)return this._z.abbr(this);return a.call(this);};}function B(a){return function(){this._z=null;return a.apply(this,arguments);};}z.zoneName=A(z.zoneName);z.zoneAbbr=A(z.zoneAbbr);z.utc=B(z.utc);a.tz.setDefault=function(b){if(g<2||(g===2&&h<9))x('Moment Timezone setDefault() requires Moment.js >= 2.9.0. You are using Moment.js '+a.version+'.');a.defaultZone=b?r(b):null;return a;};var C=a.momentProperties;if(Object.prototype.toString.call(C)==='[object Array]'){C.push('_z');C.push('_a');}else if(C)C._z=null;u({"version":"2015g","zones":["Africa/Abidjan|GMT|0|0|","Africa/Addis_Ababa|EAT|-30|0|","Africa/Algiers|CET|-10|0|","Africa/Bangui|WAT|-10|0|","Africa/Blantyre|CAT|-20|0|","Africa/Cairo|EET EEST|-20 -30|010101010|1Cby0 Fb0 c10 8n0 8Nd0 gL0 e10 mn0","Africa/Casablanca|WET WEST|0 -10|01010101010101010101010101010101010101010|1Cco0 Db0 1zd0 Lz0 1Nf0 wM0 co0 go0 1o00 s00 dA0 vc0 11A0 A00 e00 y00 11A0 uM0 e00 Dc0 11A0 s00 e00 IM0 WM0 mo0 gM0 LA0 WM0 jA0 e00 Rc0 11A0 e00 e00 U00 11A0 8o0 e00 11A0","Africa/Ceuta|CET CEST|-10 -20|01010101010101010101010|1BWp0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","Africa/Johannesburg|SAST|-20|0|","Africa/Tripoli|EET CET CEST|-20 -10 -20|0120|1IlA0 TA0 1o00","Africa/Windhoek|WAST WAT|-20 -10|01010101010101010101010|1C1c0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 11B0","America/Adak|HST HDT|a0 90|01010101010101010101010|1BR00 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Anchorage|AKST AKDT|90 80|01010101010101010101010|1BQX0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Anguilla|AST|40|0|","America/Araguaina|BRT BRST|30 20|010|1IdD0 Lz0","America/Argentina/Buenos_Aires|ART|30|0|","America/Asuncion|PYST PYT|30 40|01010101010101010101010|1C430 1a10 1fz0 1a10 1fz0 1cN0 17b0 1ip0 17b0 1ip0 17b0 1ip0 19X0 1fB0 19X0 1fB0 19X0 1ip0 17b0 1ip0 17b0 1ip0","America/Atikokan|EST|50|0|","America/Bahia|BRT BRST|30 20|010|1FJf0 Rb0","America/Bahia_Banderas|MST CDT CST|70 50 60|01212121212121212121212|1C1l0 1nW0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0","America/Belem|BRT|30|0|","America/Belize|CST|60|0|","America/Boa_Vista|AMT|40|0|","America/Bogota|COT|50|0|","America/Boise|MST MDT|70 60|01010101010101010101010|1BQV0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Campo_Grande|AMST AMT|30 40|01010101010101010101010|1BIr0 1zd0 On0 1zd0 Rb0 1zd0 Lz0 1C10 Lz0 1C10 On0 1zd0 On0 1zd0 On0 1zd0 On0 1C10 Lz0 1C10 Lz0 1C10","America/Cancun|CST CDT EST|60 50 50|010101010102|1C1k0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 Dd0","America/Caracas|VET|4u|0|","America/Cayenne|GFT|30|0|","America/Cayman|EST EDT|50 40|01010101010|1Qtj0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Chicago|CST CDT|60 50|01010101010101010101010|1BQU0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Chihuahua|MST MDT|70 60|01010101010101010101010|1C1l0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0","America/Creston|MST|70|0|","America/Dawson|PST PDT|80 70|01010101010101010101010|1BQW0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Detroit|EST EDT|50 40|01010101010101010101010|1BQT0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Eirunepe|AMT ACT|40 50|01|1KLE0","America/Fort_Nelson|PST PDT MST|80 70 70|010101010102|1BQW0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0","America/Glace_Bay|AST ADT|40 30|01010101010101010101010|1BQS0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Godthab|WGT WGST|30 20|01010101010101010101010|1BWp0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","America/Goose_Bay|AST ADT|40 30|01010101010101010101010|1BQQ1 1zb0 Op0 1zcX Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Grand_Turk|EST EDT AST|50 40 40|0101010101012|1BQT0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Guayaquil|ECT|50|0|","America/Guyana|GYT|40|0|","America/Havana|CST CDT|50 40|01010101010101010101010|1BQR0 1wo0 U00 1zc0 U00 1qM0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0","America/La_Paz|BOT|40|0|","America/Lima|PET|50|0|","America/Merida|CST CDT|60 50|01010101010101010101010|1C1k0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0","America/Metlakatla|PST|80|0|","America/Miquelon|PMST PMDT|30 20|01010101010101010101010|1BQR0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Montevideo|UYST UYT|20 30|010101010101|1BQQ0 1ld0 14n0 1ld0 14n0 1o10 11z0 1o10 11z0 1o10 11z0","America/Noronha|FNT|20|0|","America/North_Dakota/Beulah|MST MDT CST CDT|70 60 60 50|01232323232323232323232|1BQV0 1zb0 Oo0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Paramaribo|SRT|30|0|","America/Port-au-Prince|EST EDT|50 40|0101010101010101010|1GI70 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Santa_Isabel|PST PDT|80 70|01010101010101010101010|1C1m0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0","America/Santiago|CLST CLT CLT|30 40 30|010101010102|1C1f0 1fB0 1nX0 G10 1EL0 Op0 1zb0 Rd0 1wn0 Rd0 1wn0","America/Sao_Paulo|BRST BRT|20 30|01010101010101010101010|1BIq0 1zd0 On0 1zd0 Rb0 1zd0 Lz0 1C10 Lz0 1C10 On0 1zd0 On0 1zd0 On0 1zd0 On0 1C10 Lz0 1C10 Lz0 1C10","America/Scoresbysund|EGT EGST|10 0|01010101010101010101010|1BWp0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","America/St_Johns|NST NDT|3u 2u|01010101010101010101010|1BQPv 1zb0 Op0 1zcX Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","Antarctica/Casey|CAST AWST|-b0 -80|0101|1BN30 40P0 KL0","Antarctica/Davis|DAVT DAVT|-50 -70|0101|1BPw0 3Wn0 KN0","Antarctica/DumontDUrville|DDUT|-a0|0|","Antarctica/Macquarie|AEDT MIST|-b0 -b0|01|1C140","Antarctica/Mawson|MAWT|-50|0|","Antarctica/McMurdo|NZDT NZST|-d0 -c0|01010101010101010101010|1C120 1a00 1fA0 1a00 1fA0 1cM0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0 1fA0 1a00 1fA0 1a00","Antarctica/Rothera|ROTT|30|0|","Antarctica/Syowa|SYOT|-30|0|","Antarctica/Troll|UTC CEST|0 -20|01010101010101010101010|1BWp0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","Antarctica/Vostok|VOST|-60|0|","Asia/Aden|AST|-30|0|","Asia/Almaty|ALMT|-60|0|","Asia/Amman|EET EEST|-20 -30|010101010101010101010|1BVy0 1qM0 11A0 1o00 11A0 4bX0 Dd0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0","Asia/Anadyr|ANAT ANAST ANAT|-c0 -c0 -b0|0120|1BWe0 1qN0 WM0","Asia/Aqtau|AQTT|-50|0|","Asia/Ashgabat|TMT|-50|0|","Asia/Baku|AZT AZST|-40 -50|01010101010101010101010|1BWo0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","Asia/Bangkok|ICT|-70|0|","Asia/Beirut|EET EEST|-20 -30|01010101010101010101010|1BWm0 1qL0 WN0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0","Asia/Bishkek|KGT|-60|0|","Asia/Brunei|BNT|-80|0|","Asia/Calcutta|IST|-5u|0|","Asia/Chita|YAKT YAKST YAKT IRKT|-90 -a0 -a0 -80|01023|1BWh0 1qM0 WM0 8Hz0","Asia/Choibalsan|CHOT CHOST|-80 -90|0101010101010|1O8G0 1cJ0 1cP0 1cJ0 1cP0 1fx0 1cP0 1cJ0 1cP0 1cJ0 1cP0 1cJ0","Asia/Chongqing|CST|-80|0|","Asia/Dacca|BDT|-60|0|","Asia/Damascus|EET EEST|-20 -30|01010101010101010101010|1C0m0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1qL0","Asia/Dili|TLT|-90|0|","Asia/Dubai|GST|-40|0|","Asia/Dushanbe|TJT|-50|0|","Asia/Gaza|EET EEST|-20 -30|01010101010101010101010|1BVW1 SKX 1xd1 MKX 1AN0 1a00 1fA0 1cL0 1cN0 1nX0 1210 1nz0 1210 1nz0 14N0 1nz0 1210 1nz0 1210 1nz0 1210 1nz0","Asia/Hebron|EET EEST|-20 -30|0101010101010101010101010|1BVy0 Tb0 1xd1 MKX bB0 cn0 1cN0 1a00 1fA0 1cL0 1cN0 1nX0 1210 1nz0 1210 1nz0 14N0 1nz0 1210 1nz0 1210 1nz0 1210 1nz0","Asia/Hong_Kong|HKT|-80|0|","Asia/Hovd|HOVT HOVST|-70 -80|0101010101010|1O8H0 1cJ0 1cP0 1cJ0 1cP0 1fx0 1cP0 1cJ0 1cP0 1cJ0 1cP0 1cJ0","Asia/Irkutsk|IRKT IRKST IRKT|-80 -90 -90|01020|1BWi0 1qM0 WM0 8Hz0","Asia/Istanbul|EET EEST|-20 -30|01010101010101010101010|1BWp0 1qM0 Xc0 1qo0 WM0 1qM0 11A0 1o00 1200 1nA0 11A0 1tA0 U00 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","Asia/Jakarta|WIB|-70|0|","Asia/Jayapura|WIT|-90|0|","Asia/Jerusalem|IST IDT|-20 -30|01010101010101010101010|1BVA0 17X0 1kp0 1dz0 1c10 1aL0 1eN0 1oL0 10N0 1oL0 10N0 1oL0 10N0 1rz0 W10 1rz0 W10 1rz0 10N0 1oL0 10N0 1oL0","Asia/Kabul|AFT|-4u|0|","Asia/Kamchatka|PETT PETST PETT|-c0 -c0 -b0|0120|1BWe0 1qN0 WM0","Asia/Karachi|PKT|-50|0|","Asia/Kashgar|XJT|-60|0|","Asia/Kathmandu|NPT|-5J|0|","Asia/Khandyga|VLAT VLAST VLAT YAKT YAKT|-a0 -b0 -b0 -a0 -90|010234|1BWg0 1qM0 WM0 17V0 7zD0","Asia/Krasnoyarsk|KRAT KRAST KRAT|-70 -80 -80|01020|1BWj0 1qM0 WM0 8Hz0","Asia/Kuala_Lumpur|MYT|-80|0|","Asia/Magadan|MAGT MAGST MAGT MAGT|-b0 -c0 -c0 -a0|01023|1BWf0 1qM0 WM0 8Hz0","Asia/Makassar|WITA|-80|0|","Asia/Manila|PHT|-80|0|","Asia/Nicosia|EET EEST|-20 -30|01010101010101010101010|1BWp0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","Asia/Novokuznetsk|KRAT NOVST NOVT NOVT|-70 -70 -60 -70|01230|1BWj0 1qN0 WM0 8Hz0","Asia/Novosibirsk|NOVT NOVST NOVT|-60 -70 -70|01020|1BWk0 1qM0 WM0 8Hz0","Asia/Omsk|OMST OMSST OMST|-60 -70 -70|01020|1BWk0 1qM0 WM0 8Hz0","Asia/Oral|ORAT|-50|0|","Asia/Pyongyang|KST KST|-90 -8u|01|1P4D0","Asia/Qyzylorda|QYZT|-60|0|","Asia/Rangoon|MMT|-6u|0|","Asia/Sakhalin|SAKT SAKST SAKT|-a0 -b0 -b0|01020|1BWg0 1qM0 WM0 8Hz0","Asia/Samarkand|UZT|-50|0|","Asia/Seoul|KST|-90|0|","Asia/Singapore|SGT|-80|0|","Asia/Srednekolymsk|MAGT MAGST MAGT SRET|-b0 -c0 -c0 -b0|01023|1BWf0 1qM0 WM0 8Hz0","Asia/Tbilisi|GET|-40|0|","Asia/Tehran|IRST IRDT|-3u -4u|01010101010101010101010|1BTUu 1dz0 1cp0 1dz0 1cp0 1dz0 1cN0 1dz0 1cp0 1dz0 1cp0 1dz0 1cp0 1dz0 1cN0 1dz0 1cp0 1dz0 1cp0 1dz0 1cp0 1dz0","Asia/Thimbu|BTT|-60|0|","Asia/Tokyo|JST|-90|0|","Asia/Ulaanbaatar|ULAT ULAST|-80 -90|0101010101010|1O8G0 1cJ0 1cP0 1cJ0 1cP0 1fx0 1cP0 1cJ0 1cP0 1cJ0 1cP0 1cJ0","Asia/Ust-Nera|MAGT MAGST MAGT VLAT VLAT|-b0 -c0 -c0 -b0 -a0|010234|1BWf0 1qM0 WM0 17V0 7zD0","Asia/Vladivostok|VLAT VLAST VLAT|-a0 -b0 -b0|01020|1BWg0 1qM0 WM0 8Hz0","Asia/Yakutsk|YAKT YAKST YAKT|-90 -a0 -a0|01020|1BWh0 1qM0 WM0 8Hz0","Asia/Yekaterinburg|YEKT YEKST YEKT|-50 -60 -60|01020|1BWl0 1qM0 WM0 8Hz0","Asia/Yerevan|AMT AMST|-40 -50|01010|1BWm0 1qM0 WM0 1qM0","Atlantic/Azores|AZOT AZOST|10 0|01010101010101010101010|1BWp0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","Atlantic/Canary|WET WEST|0 -10|01010101010101010101010|1BWp0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","Atlantic/Cape_Verde|CVT|10|0|","Atlantic/South_Georgia|GST|20|0|","Atlantic/Stanley|FKST FKT|30 40|010|1C6R0 U10","Australia/ACT|AEDT AEST|-b0 -a0|01010101010101010101010|1C140 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0","Australia/Adelaide|ACDT ACST|-au -9u|01010101010101010101010|1C14u 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0","Australia/Brisbane|AEST|-a0|0|","Australia/Darwin|ACST|-9u|0|","Australia/Eucla|ACWST|-8J|0|","Australia/LHI|LHDT LHST|-b0 -au|01010101010101010101010|1C130 1cMu 1cLu 1cMu 1cLu 1fAu 1cLu 1cMu 1cLu 1cMu 1cLu 1cMu 1cLu 1cMu 1cLu 1cMu 1cLu 1fAu 1cLu 1cMu 1cLu 1cMu","Australia/Perth|AWST|-80|0|","Chile/EasterIsland|EASST EAST EAST|50 60 50|010101010102|1C1f0 1fB0 1nX0 G10 1EL0 Op0 1zb0 Rd0 1wn0 Rd0 1wn0","Eire|GMT IST|0 -10|01010101010101010101010|1BWp0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","Etc/GMT+1|GMT+1|10|0|","Etc/GMT+10|GMT+10|a0|0|","Etc/GMT+11|GMT+11|b0|0|","Etc/GMT+12|GMT+12|c0|0|","Etc/GMT+2|GMT+2|20|0|","Etc/GMT+3|GMT+3|30|0|","Etc/GMT+4|GMT+4|40|0|","Etc/GMT+5|GMT+5|50|0|","Etc/GMT+6|GMT+6|60|0|","Etc/GMT+7|GMT+7|70|0|","Etc/GMT+8|GMT+8|80|0|","Etc/GMT+9|GMT+9|90|0|","Etc/GMT-1|GMT-1|-10|0|","Etc/GMT-10|GMT-10|-a0|0|","Etc/GMT-11|GMT-11|-b0|0|","Etc/GMT-12|GMT-12|-c0|0|","Etc/GMT-13|GMT-13|-d0|0|","Etc/GMT-14|GMT-14|-e0|0|","Etc/GMT-2|GMT-2|-20|0|","Etc/GMT-3|GMT-3|-30|0|","Etc/GMT-4|GMT-4|-40|0|","Etc/GMT-5|GMT-5|-50|0|","Etc/GMT-6|GMT-6|-60|0|","Etc/GMT-7|GMT-7|-70|0|","Etc/GMT-8|GMT-8|-80|0|","Etc/GMT-9|GMT-9|-90|0|","Etc/UCT|UCT|0|0|","Etc/UTC|UTC|0|0|","Europe/Belfast|GMT BST|0 -10|01010101010101010101010|1BWp0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","Europe/Chisinau|EET EEST|-20 -30|01010101010101010101010|1BWo0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","Europe/Kaliningrad|EET EEST FET|-20 -30 -30|01020|1BWo0 1qM0 WM0 8Hz0","Europe/Minsk|EET EEST FET MSK|-20 -30 -30 -30|01023|1BWo0 1qM0 WM0 8Hy0","Europe/Moscow|MSK MSD MSK|-30 -40 -40|01020|1BWn0 1qM0 WM0 8Hz0","Europe/Samara|SAMT SAMST SAMT|-40 -40 -30|0120|1BWm0 1qN0 WM0","Europe/Simferopol|EET EEST MSK MSK|-20 -30 -40 -30|01010101023|1BWp0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11z0 1nW0","HST|HST|a0|0|","Indian/Chagos|IOT|-60|0|","Indian/Christmas|CXT|-70|0|","Indian/Cocos|CCT|-6u|0|","Indian/Kerguelen|TFT|-50|0|","Indian/Mahe|SCT|-40|0|","Indian/Maldives|MVT|-50|0|","Indian/Mauritius|MUT|-40|0|","Indian/Reunion|RET|-40|0|","Kwajalein|MHT|-c0|0|","MET|MET MEST|-10 -20|01010101010101010101010|1BWp0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","NZ-CHAT|CHADT CHAST|-dJ -cJ|01010101010101010101010|1C120 1a00 1fA0 1a00 1fA0 1cM0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0 1fA0 1a00 1fA0 1a00","Pacific/Apia|SST SDT WSDT WSST|b0 a0 -e0 -d0|01012323232323232323232|1Dbn0 1ff0 1a00 CI0 AQ0 1cM0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0 1fA0 1a00 1fA0 1a00","Pacific/Bougainville|PGT BST|-a0 -b0|01|1NwE0","Pacific/Chuuk|CHUT|-a0|0|","Pacific/Efate|VUT|-b0|0|","Pacific/Enderbury|PHOT|-d0|0|","Pacific/Fakaofo|TKT TKT|b0 -d0|01|1Gfn0","Pacific/Fiji|FJST FJT|-d0 -c0|01010101010101010101010|1BWe0 1o00 Rc0 1wo0 Ao0 1Nc0 Ao0 1Q00 xz0 1SN0 uM0 1SM0 uM0 1VA0 s00 1VA0 uM0 1SM0 uM0 1SM0 uM0 1SM0","Pacific/Funafuti|TVT|-c0|0|","Pacific/Galapagos|GALT|60|0|","Pacific/Gambier|GAMT|90|0|","Pacific/Guadalcanal|SBT|-b0|0|","Pacific/Guam|ChST|-a0|0|","Pacific/Kiritimati|LINT|-e0|0|","Pacific/Kosrae|KOST|-b0|0|","Pacific/Marquesas|MART|9u|0|","Pacific/Midway|SST|b0|0|","Pacific/Nauru|NRT|-c0|0|","Pacific/Niue|NUT|b0|0|","Pacific/Norfolk|NFT NFT|-bu -b0|01|1PoCu","Pacific/Noumea|NCT|-b0|0|","Pacific/Palau|PWT|-90|0|","Pacific/Pohnpei|PONT|-b0|0|","Pacific/Port_Moresby|PGT|-a0|0|","Pacific/Rarotonga|CKT|a0|0|","Pacific/Tahiti|TAHT|a0|0|","Pacific/Tarawa|GILT|-c0|0|","Pacific/Tongatapu|TOT|-d0|0|","Pacific/Wake|WAKT|-c0|0|","Pacific/Wallis|WFT|-c0|0|"],"links":["Africa/Abidjan|Africa/Accra","Africa/Abidjan|Africa/Bamako","Africa/Abidjan|Africa/Banjul","Africa/Abidjan|Africa/Bissau","Africa/Abidjan|Africa/Conakry","Africa/Abidjan|Africa/Dakar","Africa/Abidjan|Africa/Freetown","Africa/Abidjan|Africa/Lome","Africa/Abidjan|Africa/Monrovia","Africa/Abidjan|Africa/Nouakchott","Africa/Abidjan|Africa/Ouagadougou","Africa/Abidjan|Africa/Sao_Tome","Africa/Abidjan|Africa/Timbuktu","Africa/Abidjan|America/Danmarkshavn","Africa/Abidjan|Atlantic/Reykjavik","Africa/Abidjan|Atlantic/St_Helena","Africa/Abidjan|Etc/GMT","Africa/Abidjan|Etc/GMT+0","Africa/Abidjan|Etc/GMT-0","Africa/Abidjan|Etc/GMT0","Africa/Abidjan|Etc/Greenwich","Africa/Abidjan|GMT","Africa/Abidjan|GMT+0","Africa/Abidjan|GMT-0","Africa/Abidjan|GMT0","Africa/Abidjan|Greenwich","Africa/Abidjan|Iceland","Africa/Addis_Ababa|Africa/Asmara","Africa/Addis_Ababa|Africa/Asmera","Africa/Addis_Ababa|Africa/Dar_es_Salaam","Africa/Addis_Ababa|Africa/Djibouti","Africa/Addis_Ababa|Africa/Juba","Africa/Addis_Ababa|Africa/Kampala","Africa/Addis_Ababa|Africa/Khartoum","Africa/Addis_Ababa|Africa/Mogadishu","Africa/Addis_Ababa|Africa/Nairobi","Africa/Addis_Ababa|Indian/Antananarivo","Africa/Addis_Ababa|Indian/Comoro","Africa/Addis_Ababa|Indian/Mayotte","Africa/Algiers|Africa/Tunis","Africa/Bangui|Africa/Brazzaville","Africa/Bangui|Africa/Douala","Africa/Bangui|Africa/Kinshasa","Africa/Bangui|Africa/Lagos","Africa/Bangui|Africa/Libreville","Africa/Bangui|Africa/Luanda","Africa/Bangui|Africa/Malabo","Africa/Bangui|Africa/Ndjamena","Africa/Bangui|Africa/Niamey","Africa/Bangui|Africa/Porto-Novo","Africa/Blantyre|Africa/Bujumbura","Africa/Blantyre|Africa/Gaborone","Africa/Blantyre|Africa/Harare","Africa/Blantyre|Africa/Kigali","Africa/Blantyre|Africa/Lubumbashi","Africa/Blantyre|Africa/Lusaka","Africa/Blantyre|Africa/Maputo","Africa/Cairo|Egypt","Africa/Casablanca|Africa/El_Aaiun","Africa/Ceuta|Arctic/Longyearbyen","Africa/Ceuta|Atlantic/Jan_Mayen","Africa/Ceuta|CET","Africa/Ceuta|Europe/Amsterdam","Africa/Ceuta|Europe/Andorra","Africa/Ceuta|Europe/Belgrade","Africa/Ceuta|Europe/Berlin","Africa/Ceuta|Europe/Bratislava","Africa/Ceuta|Europe/Brussels","Africa/Ceuta|Europe/Budapest","Africa/Ceuta|Europe/Busingen","Africa/Ceuta|Europe/Copenhagen","Africa/Ceuta|Europe/Gibraltar","Africa/Ceuta|Europe/Ljubljana","Africa/Ceuta|Europe/Luxembourg","Africa/Ceuta|Europe/Madrid","Africa/Ceuta|Europe/Malta","Africa/Ceuta|Europe/Monaco","Africa/Ceuta|Europe/Oslo","Africa/Ceuta|Europe/Paris","Africa/Ceuta|Europe/Podgorica","Africa/Ceuta|Europe/Prague","Africa/Ceuta|Europe/Rome","Africa/Ceuta|Europe/San_Marino","Africa/Ceuta|Europe/Sarajevo","Africa/Ceuta|Europe/Skopje","Africa/Ceuta|Europe/Stockholm","Africa/Ceuta|Europe/Tirane","Africa/Ceuta|Europe/Vaduz","Africa/Ceuta|Europe/Vatican","Africa/Ceuta|Europe/Vienna","Africa/Ceuta|Europe/Warsaw","Africa/Ceuta|Europe/Zagreb","Africa/Ceuta|Europe/Zurich","Africa/Ceuta|Poland","Africa/Johannesburg|Africa/Maseru","Africa/Johannesburg|Africa/Mbabane","Africa/Tripoli|Libya","America/Adak|America/Atka","America/Adak|US/Aleutian","America/Anchorage|America/Juneau","America/Anchorage|America/Nome","America/Anchorage|America/Sitka","America/Anchorage|America/Yakutat","America/Anchorage|US/Alaska","America/Anguilla|America/Antigua","America/Anguilla|America/Aruba","America/Anguilla|America/Barbados","America/Anguilla|America/Blanc-Sablon","America/Anguilla|America/Curacao","America/Anguilla|America/Dominica","America/Anguilla|America/Grenada","America/Anguilla|America/Guadeloupe","America/Anguilla|America/Kralendijk","America/Anguilla|America/Lower_Princes","America/Anguilla|America/Marigot","America/Anguilla|America/Martinique","America/Anguilla|America/Montserrat","America/Anguilla|America/Port_of_Spain","America/Anguilla|America/Puerto_Rico","America/Anguilla|America/Santo_Domingo","America/Anguilla|America/St_Barthelemy","America/Anguilla|America/St_Kitts","America/Anguilla|America/St_Lucia","America/Anguilla|America/St_Thomas","America/Anguilla|America/St_Vincent","America/Anguilla|America/Tortola","America/Anguilla|America/Virgin","America/Argentina/Buenos_Aires|America/Argentina/Catamarca","America/Argentina/Buenos_Aires|America/Argentina/ComodRivadavia","America/Argentina/Buenos_Aires|America/Argentina/Cordoba","America/Argentina/Buenos_Aires|America/Argentina/Jujuy","America/Argentina/Buenos_Aires|America/Argentina/La_Rioja","America/Argentina/Buenos_Aires|America/Argentina/Mendoza","America/Argentina/Buenos_Aires|America/Argentina/Rio_Gallegos","America/Argentina/Buenos_Aires|America/Argentina/Salta","America/Argentina/Buenos_Aires|America/Argentina/San_Juan","America/Argentina/Buenos_Aires|America/Argentina/San_Luis","America/Argentina/Buenos_Aires|America/Argentina/Tucuman","America/Argentina/Buenos_Aires|America/Argentina/Ushuaia","America/Argentina/Buenos_Aires|America/Buenos_Aires","America/Argentina/Buenos_Aires|America/Catamarca","America/Argentina/Buenos_Aires|America/Cordoba","America/Argentina/Buenos_Aires|America/Jujuy","America/Argentina/Buenos_Aires|America/Mendoza","America/Argentina/Buenos_Aires|America/Rosario","America/Atikokan|America/Coral_Harbour","America/Atikokan|America/Jamaica","America/Atikokan|America/Panama","America/Atikokan|EST","America/Atikokan|Jamaica","America/Belem|America/Fortaleza","America/Belem|America/Maceio","America/Belem|America/Recife","America/Belem|America/Santarem","America/Belize|America/Costa_Rica","America/Belize|America/El_Salvador","America/Belize|America/Guatemala","America/Belize|America/Managua","America/Belize|America/Regina","America/Belize|America/Swift_Current","America/Belize|America/Tegucigalpa","America/Belize|Canada/East-Saskatchewan","America/Belize|Canada/Saskatchewan","America/Boa_Vista|America/Manaus","America/Boa_Vista|America/Porto_Velho","America/Boa_Vista|Brazil/West","America/Boise|America/Cambridge_Bay","America/Boise|America/Denver","America/Boise|America/Edmonton","America/Boise|America/Inuvik","America/Boise|America/Ojinaga","America/Boise|America/Shiprock","America/Boise|America/Yellowknife","America/Boise|Canada/Mountain","America/Boise|MST7MDT","America/Boise|Navajo","America/Boise|US/Mountain","America/Campo_Grande|America/Cuiaba","America/Chicago|America/Indiana/Knox","America/Chicago|America/Indiana/Tell_City","America/Chicago|America/Knox_IN","America/Chicago|America/Matamoros","America/Chicago|America/Menominee","America/Chicago|America/North_Dakota/Center","America/Chicago|America/North_Dakota/New_Salem","America/Chicago|America/Rainy_River","America/Chicago|America/Rankin_Inlet","America/Chicago|America/Resolute","America/Chicago|America/Winnipeg","America/Chicago|CST6CDT","America/Chicago|Canada/Central","America/Chicago|US/Central","America/Chicago|US/Indiana-Starke","America/Chihuahua|America/Mazatlan","America/Chihuahua|Mexico/BajaSur","America/Creston|America/Dawson_Creek","America/Creston|America/Hermosillo","America/Creston|America/Phoenix","America/Creston|MST","America/Creston|US/Arizona","America/Dawson|America/Ensenada","America/Dawson|America/Los_Angeles","America/Dawson|America/Tijuana","America/Dawson|America/Vancouver","America/Dawson|America/Whitehorse","America/Dawson|Canada/Pacific","America/Dawson|Canada/Yukon","America/Dawson|Mexico/BajaNorte","America/Dawson|PST8PDT","America/Dawson|US/Pacific","America/Dawson|US/Pacific-New","America/Detroit|America/Fort_Wayne","America/Detroit|America/Indiana/Indianapolis","America/Detroit|America/Indiana/Marengo","America/Detroit|America/Indiana/Petersburg","America/Detroit|America/Indiana/Vevay","America/Detroit|America/Indiana/Vincennes","America/Detroit|America/Indiana/Winamac","America/Detroit|America/Indianapolis","America/Detroit|America/Iqaluit","America/Detroit|America/Kentucky/Louisville","America/Detroit|America/Kentucky/Monticello","America/Detroit|America/Louisville","America/Detroit|America/Montreal","America/Detroit|America/Nassau","America/Detroit|America/New_York","America/Detroit|America/Nipigon","America/Detroit|America/Pangnirtung","America/Detroit|America/Thunder_Bay","America/Detroit|America/Toronto","America/Detroit|Canada/Eastern","America/Detroit|EST5EDT","America/Detroit|US/East-Indiana","America/Detroit|US/Eastern","America/Detroit|US/Michigan","America/Eirunepe|America/Porto_Acre","America/Eirunepe|America/Rio_Branco","America/Eirunepe|Brazil/Acre","America/Glace_Bay|America/Halifax","America/Glace_Bay|America/Moncton","America/Glace_Bay|America/Thule","America/Glace_Bay|Atlantic/Bermuda","America/Glace_Bay|Canada/Atlantic","America/Havana|Cuba","America/Merida|America/Mexico_City","America/Merida|America/Monterrey","America/Merida|Mexico/General","America/Metlakatla|Pacific/Pitcairn","America/Noronha|Brazil/DeNoronha","America/Santiago|Antarctica/Palmer","America/Santiago|Chile/Continental","America/Sao_Paulo|Brazil/East","America/St_Johns|Canada/Newfoundland","Antarctica/McMurdo|Antarctica/South_Pole","Antarctica/McMurdo|NZ","Antarctica/McMurdo|Pacific/Auckland","Asia/Aden|Asia/Baghdad","Asia/Aden|Asia/Bahrain","Asia/Aden|Asia/Kuwait","Asia/Aden|Asia/Qatar","Asia/Aden|Asia/Riyadh","Asia/Aqtau|Asia/Aqtobe","Asia/Ashgabat|Asia/Ashkhabad","Asia/Bangkok|Asia/Ho_Chi_Minh","Asia/Bangkok|Asia/Phnom_Penh","Asia/Bangkok|Asia/Saigon","Asia/Bangkok|Asia/Vientiane","Asia/Calcutta|Asia/Colombo","Asia/Calcutta|Asia/Kolkata","Asia/Chongqing|Asia/Chungking","Asia/Chongqing|Asia/Harbin","Asia/Chongqing|Asia/Macao","Asia/Chongqing|Asia/Macau","Asia/Chongqing|Asia/Shanghai","Asia/Chongqing|Asia/Taipei","Asia/Chongqing|PRC","Asia/Chongqing|ROC","Asia/Dacca|Asia/Dhaka","Asia/Dubai|Asia/Muscat","Asia/Hong_Kong|Hongkong","Asia/Istanbul|Europe/Istanbul","Asia/Istanbul|Turkey","Asia/Jakarta|Asia/Pontianak","Asia/Jerusalem|Asia/Tel_Aviv","Asia/Jerusalem|Israel","Asia/Kashgar|Asia/Urumqi","Asia/Kathmandu|Asia/Katmandu","Asia/Kuala_Lumpur|Asia/Kuching","Asia/Makassar|Asia/Ujung_Pandang","Asia/Nicosia|EET","Asia/Nicosia|Europe/Athens","Asia/Nicosia|Europe/Bucharest","Asia/Nicosia|Europe/Helsinki","Asia/Nicosia|Europe/Kiev","Asia/Nicosia|Europe/Mariehamn","Asia/Nicosia|Europe/Nicosia","Asia/Nicosia|Europe/Riga","Asia/Nicosia|Europe/Sofia","Asia/Nicosia|Europe/Tallinn","Asia/Nicosia|Europe/Uzhgorod","Asia/Nicosia|Europe/Vilnius","Asia/Nicosia|Europe/Zaporozhye","Asia/Samarkand|Asia/Tashkent","Asia/Seoul|ROK","Asia/Singapore|Singapore","Asia/Tehran|Iran","Asia/Thimbu|Asia/Thimphu","Asia/Tokyo|Japan","Asia/Ulaanbaatar|Asia/Ulan_Bator","Atlantic/Canary|Atlantic/Faeroe","Atlantic/Canary|Atlantic/Faroe","Atlantic/Canary|Atlantic/Madeira","Atlantic/Canary|Europe/Lisbon","Atlantic/Canary|Portugal","Atlantic/Canary|WET","Australia/ACT|Australia/Canberra","Australia/ACT|Australia/Currie","Australia/ACT|Australia/Hobart","Australia/ACT|Australia/Melbourne","Australia/ACT|Australia/NSW","Australia/ACT|Australia/Sydney","Australia/ACT|Australia/Tasmania","Australia/ACT|Australia/Victoria","Australia/Adelaide|Australia/Broken_Hill","Australia/Adelaide|Australia/South","Australia/Adelaide|Australia/Yancowinna","Australia/Brisbane|Australia/Lindeman","Australia/Brisbane|Australia/Queensland","Australia/Darwin|Australia/North","Australia/LHI|Australia/Lord_Howe","Australia/Perth|Australia/West","Chile/EasterIsland|Pacific/Easter","Eire|Europe/Dublin","Etc/UCT|UCT","Etc/UTC|Etc/Universal","Etc/UTC|Etc/Zulu","Etc/UTC|UTC","Etc/UTC|Universal","Etc/UTC|Zulu","Europe/Belfast|Europe/Guernsey","Europe/Belfast|Europe/Isle_of_Man","Europe/Belfast|Europe/Jersey","Europe/Belfast|Europe/London","Europe/Belfast|GB","Europe/Belfast|GB-Eire","Europe/Chisinau|Europe/Tiraspol","Europe/Moscow|Europe/Volgograd","Europe/Moscow|W-SU","HST|Pacific/Honolulu","HST|Pacific/Johnston","HST|US/Hawaii","Kwajalein|Pacific/Kwajalein","Kwajalein|Pacific/Majuro","NZ-CHAT|Pacific/Chatham","Pacific/Chuuk|Pacific/Truk","Pacific/Chuuk|Pacific/Yap","Pacific/Guam|Pacific/Saipan","Pacific/Midway|Pacific/Pago_Pago","Pacific/Midway|Pacific/Samoa","Pacific/Midway|US/Samoa","Pacific/Pohnpei|Pacific/Ponape"]});return a;}));(function(){var a=this;var b=a._;var c=Array.prototype,d=Object.prototype,e=Function.prototype;var f=c.push,g=c.slice,h=d.toString,i=d.hasOwnProperty;var j=Array.isArray,k=Object.keys,l=e.bind,m=Object.create;var n=function(){};var o=function(a){if(a instanceof o)return a;if(!(this instanceof o))return new o(a);this._wrapped=a;};if(typeof exports!=='undefined'){if(typeof module!=='undefined'&&module.exports)exports=module.exports=o;exports._=o;}else a._=o;o.VERSION='1.8.3';var p=function(a,b,c){if(b===void 0)return a;switch(c==null?3:c){case 1:return function(c){return a.call(b,c);};case 2:return function(c,d){return a.call(b,c,d);};case 3:return function(c,d,e){return a.call(b,c,d,e);};case 4:return function(c,d,e,f){return a.call(b,c,d,e,f);};}return function(){return a.apply(b,arguments);};};var q=function(a,b,c){if(a==null)return o.identity;if(o.isFunction(a))return p(a,b,c);if(o.isObject(a))return o.matcher(a);return o.property(a);};o.iteratee=function(a,b){return q(a,b,Infinity);};var r=function(a,b){return function(c){var d=arguments.length;if(d<2||c==null)return c;for(var e=1;e<d;e++){var f=arguments[e],g=a(f),h=g.length;for(var i=0;i<h;i++){var j=g[i];if(!b||c[j]===void 0)c[j]=f[j];}}return c;};};var s=function(a){if(!o.isObject(a))return{};if(m)return m(a);n.prototype=a;var b=new n();n.prototype=null;return b;};var t=function(a){return function(b){return b==null?void 0:b[a];};};var u=Math.pow(2,53)-1;var v=t('length');var w=function(a){var b=v(a);return typeof b=='number'&&b>=0&&b<=u;};o.each=o.forEach=function(a,b,c){b=p(b,c);var d,e;if(w(a))for(d=0,e=a.length;d<e;d++)b(a[d],d,a);else{var f=o.keys(a);for(d=0,e=f.length;d<e;d++)b(a[f[d]],f[d],a);}return a;};o.map=o.collect=function(a,b,c){b=q(b,c);var d=!w(a)&&o.keys(a),e=(d||a).length,f=Array(e);for(var g=0;g<e;g++){var h=d?d[g]:g;f[g]=b(a[h],h,a);}return f;};function x(a){function b(b,c,d,e,f,g){for(;f>=0&&f<g;f+=a){var h=e?e[f]:f;d=c(d,b[h],h,b);}return d;}return function(c,d,e,f){d=p(d,f,4);var g=!w(c)&&o.keys(c),h=(g||c).length,i=a>0?0:h-1;if(arguments.length<3){e=c[g?g[i]:i];i+=a;}return b(c,d,e,g,i,h);};}o.reduce=o.foldl=o.inject=x(1);o.reduceRight=o.foldr=x(-1);o.find=o.detect=function(a,b,c){var d;if(w(a))d=o.findIndex(a,b,c);else d=o.findKey(a,b,c);if(d!==void 0&&d!==-1)return a[d];};o.filter=o.select=function(a,b,c){var d=[];b=q(b,c);o.each(a,function(a,c,e){if(b(a,c,e))d.push(a);});return d;};o.reject=function(a,b,c){return o.filter(a,o.negate(q(b)),c);};o.every=o.all=function(a,b,c){b=q(b,c);var d=!w(a)&&o.keys(a),e=(d||a).length;for(var f=0;f<e;f++){var g=d?d[f]:f;if(!b(a[g],g,a))return false;}return true;};o.some=o.any=function(a,b,c){b=q(b,c);var d=!w(a)&&o.keys(a),e=(d||a).length;for(var f=0;f<e;f++){var g=d?d[f]:f;if(b(a[g],g,a))return true;}return false;};o.contains=o.includes=o.include=function(a,b,c,d){if(!w(a))a=o.values(a);if(typeof c!='number'||d)c=0;return o.indexOf(a,b,c)>=0;};o.invoke=function(a,b){var c=g.call(arguments,2);var d=o.isFunction(b);return o.map(a,function(a){var e=d?b:a[b];return e==null?e:e.apply(a,c);});};o.pluck=function(a,b){return o.map(a,o.property(b));};o.where=function(a,b){return o.filter(a,o.matcher(b));};o.findWhere=function(a,b){return o.find(a,o.matcher(b));};o.max=function(a,b,c){var d=-Infinity,e=-Infinity,f,g;if(b==null&&a!=null){a=w(a)?a:o.values(a);for(var h=0,i=a.length;h<i;h++){f=a[h];if(f>d)d=f;}}else{b=q(b,c);o.each(a,function(a,c,f){g=b(a,c,f);if(g>e||g===-Infinity&&d===-Infinity){d=a;e=g;}});}return d;};o.min=function(a,b,c){var d=Infinity,e=Infinity,f,g;if(b==null&&a!=null){a=w(a)?a:o.values(a);for(var h=0,i=a.length;h<i;h++){f=a[h];if(f<d)d=f;}}else{b=q(b,c);o.each(a,function(a,c,f){g=b(a,c,f);if(g<e||g===Infinity&&d===Infinity){d=a;e=g;}});}return d;};o.shuffle=function(a){var b=w(a)?a:o.values(a);var c=b.length;var d=Array(c);for(var e=0,f;e<c;e++){f=o.random(0,e);if(f!==e)d[e]=d[f];d[f]=b[e];}return d;};o.sample=function(a,b,c){if(b==null||c){if(!w(a))a=o.values(a);return a[o.random(a.length-1)];}return o.shuffle(a).slice(0,Math.max(0,b));};o.sortBy=function(a,b,c){b=q(b,c);return o.pluck(o.map(a,function(a,c,d){return{value:a,index:c,criteria:b(a,c,d)};}).sort(function(a,b){var c=a.criteria;var d=b.criteria;if(c!==d){if(c>d||c===void 0)return 1;if(c<d||d===void 0)return -1;}return a.index-b.index;}),'value');};var y=function(a){return function(b,c,d){var e={};c=q(c,d);o.each(b,function(d,f){var g=c(d,f,b);a(e,d,g);});return e;};};o.groupBy=y(function(a,b,c){if(o.has(a,c))a[c].push(b);else a[c]=[b];});o.indexBy=y(function(a,b,c){a[c]=b;});o.countBy=y(function(a,b,c){if(o.has(a,c))a[c]++;else a[c]=1;});o.toArray=function(a){if(!a)return [];if(o.isArray(a))return g.call(a);if(w(a))return o.map(a,o.identity);return o.values(a);};o.size=function(a){if(a==null)return 0;return w(a)?a.length:o.keys(a).length;};o.partition=function(a,b,c){b=q(b,c);var d=[],e=[];o.each(a,function(a,c,f){(b(a,c,f)?d:e).push(a);});return [d,e];};o.first=o.head=o.take=function(a,b,c){if(a==null)return void 0;if(b==null||c)return a[0];return o.initial(a,a.length-b);};o.initial=function(a,b,c){return g.call(a,0,Math.max(0,a.length-(b==null||c?1:b)));};o.last=function(a,b,c){if(a==null)return void 0;if(b==null||c)return a[a.length-1];return o.rest(a,Math.max(0,a.length-b));};o.rest=o.tail=o.drop=function(a,b,c){return g.call(a,b==null||c?1:b);};o.compact=function(a){return o.filter(a,o.identity);};var z=function(a,b,c,d){var e=[],f=0;for(var g=d||0,h=v(a);g<h;g++){var i=a[g];if(w(i)&&(o.isArray(i)||o.isArguments(i))){if(!b)i=z(i,b,c);var j=0,k=i.length;e.length+=k;while(j<k)e[f++]=i[j++];}else if(!c)e[f++]=i;}return e;};o.flatten=function(a,b){return z(a,b,false);};o.without=function(a){return o.difference(a,g.call(arguments,1));};o.uniq=o.unique=function(a,b,c,d){if(!o.isBoolean(b)){d=c;c=b;b=false;}if(c!=null)c=q(c,d);var e=[];var f=[];for(var g=0,h=v(a);g<h;g++){var i=a[g],j=c?c(i,g,a):i;if(b){if(!g||f!==j)e.push(i);f=j;}else if(c){if(!o.contains(f,j)){f.push(j);e.push(i);}}else if(!o.contains(e,i))e.push(i);}return e;};o.union=function(){return o.uniq(z(arguments,true,true));};o.intersection=function(a){var b=[];var c=arguments.length;for(var d=0,e=v(a);d<e;d++){var f=a[d];if(o.contains(b,f))continue;for(var g=1;g<c;g++)if(!o.contains(arguments[g],f))break;if(g===c)b.push(f);}return b;};o.difference=function(a){var b=z(arguments,true,true,1);return o.filter(a,function(a){return !o.contains(b,a);});};o.zip=function(){return o.unzip(arguments);};o.unzip=function(a){var b=a&&o.max(a,v).length||0;var c=Array(b);for(var d=0;d<b;d++)c[d]=o.pluck(a,d);return c;};o.object=function(a,b){var c={};for(var d=0,e=v(a);d<e;d++)if(b)c[a[d]]=b[d];else c[a[d][0]]=a[d][1];return c;};function A(a){return function(b,c,d){c=q(c,d);var e=v(b);var f=a>0?0:e-1;for(;f>=0&&f<e;f+=a)if(c(b[f],f,b))return f;return -1;};}o.findIndex=A(1);o.findLastIndex=A(-1);o.sortedIndex=function(a,b,c,d){c=q(c,d,1);var e=c(b);var f=0,g=v(a);while(f<g){var h=Math.floor((f+g)/2);if(c(a[h])<e)f=h+1;else g=h;}return f;};function B(a,b,c){return function(d,e,f){var h=0,i=v(d);if(typeof f=='number')if(a>0)h=f>=0?f:Math.max(f+i,h);else i=f>=0?Math.min(f+1,i):f+i+1;else if(c&&f&&i){f=c(d,e);return d[f]===e?f:-1;}if(e!==e){f=b(g.call(d,h,i),o.isNaN);return f>=0?f+h:-1;}for(f=a>0?h:i-1;f>=0&&f<i;f+=a)if(d[f]===e)return f;return -1;};}o.indexOf=B(1,o.findIndex,o.sortedIndex);o.lastIndexOf=B(-1,o.findLastIndex);o.range=function(a,b,c){if(b==null){b=a||0;a=0;}c=c||1;var d=Math.max(Math.ceil((b-a)/c),0);var e=Array(d);for(var f=0;f<d;f++,a+=c)e[f]=a;return e;};var C=function(a,b,c,d,e){if(!(d instanceof b))return a.apply(c,e);var f=s(a.prototype);var g=a.apply(f,e);if(o.isObject(g))return g;return f;};o.bind=function(a,b){if(l&&a.bind===l)return l.apply(a,g.call(arguments,1));if(!o.isFunction(a))throw new TypeError('Bind must be called on a function');var c=g.call(arguments,2);var d=function(){return C(a,d,b,this,c.concat(g.call(arguments)));};return d;};o.partial=function(a){var b=g.call(arguments,1);var c=function(){var d=0,e=b.length;var f=Array(e);for(var g=0;g<e;g++)f[g]=b[g]===o?arguments[d++]:b[g];while(d<arguments.length)f.push(arguments[d++]);return C(a,c,this,this,f);};return c;};o.bindAll=function(a){var b,c=arguments.length,d;if(c<=1)throw new Error('bindAll must be passed function names');for(b=1;b<c;b++){d=arguments[b];a[d]=o.bind(a[d],a);}return a;};o.memoize=function(a,b){var c=function(d){var e=c.cache;var f=''+(b?b.apply(this,arguments):d);if(!o.has(e,f))e[f]=a.apply(this,arguments);return e[f];};c.cache={};return c;};o.delay=function(a,b){var c=g.call(arguments,2);return setTimeout(function(){return a.apply(null,c);},b);};o.defer=o.partial(o.delay,o,1);o.throttle=function(a,b,c){var d,e,f;var g=null;var h=0;if(!c)c={};var i=function(){h=c.leading===false?0:o.now();g=null;f=a.apply(d,e);if(!g)d=e=null;};return function(){var j=o.now();if(!h&&c.leading===false)h=j;var k=b-(j-h);d=this;e=arguments;if(k<=0||k>b){if(g){clearTimeout(g);g=null;}h=j;f=a.apply(d,e);if(!g)d=e=null;}else if(!g&&c.trailing!==false)g=setTimeout(i,k);return f;};};o.debounce=function(a,b,c){var d,e,f,g,h;var i=function(){var j=o.now()-g;if(j<b&&j>=0)d=setTimeout(i,b-j);else{d=null;if(!c){h=a.apply(f,e);if(!d)f=e=null;}}};return function(){f=this;e=arguments;g=o.now();var j=c&&!d;if(!d)d=setTimeout(i,b);if(j){h=a.apply(f,e);f=e=null;}return h;};};o.wrap=function(a,b){return o.partial(b,a);};o.negate=function(a){return function(){return !a.apply(this,arguments);};};o.compose=function(){var a=arguments;var b=a.length-1;return function(){var c=b;var d=a[b].apply(this,arguments);while(c--)d=a[c].call(this,d);return d;};};o.after=function(a,b){return function(){if(--a<1)return b.apply(this,arguments);};};o.before=function(a,b){var c;return function(){if(--a>0)c=b.apply(this,arguments);if(a<=1)b=null;return c;};};o.once=o.partial(o.before,2);var D=!{toString:null}.propertyIsEnumerable('toString');var E=['valueOf','isPrototypeOf','toString','propertyIsEnumerable','hasOwnProperty','toLocaleString'];function F(a,b){var c=E.length;var e=a.constructor;var f=(o.isFunction(e)&&e.prototype)||d;var g='constructor';if(o.has(a,g)&&!o.contains(b,g))b.push(g);while(c--){g=E[c];if(g in a&&a[g]!==f[g]&&!o.contains(b,g))b.push(g);}}o.keys=function(a){if(!o.isObject(a))return [];if(k)return k(a);var b=[];for(var c in a)if(o.has(a,c))b.push(c);if(D)F(a,b);return b;};o.allKeys=function(a){if(!o.isObject(a))return [];var b=[];for(var c in a)b.push(c);if(D)F(a,b);return b;};o.values=function(a){var b=o.keys(a);var c=b.length;var d=Array(c);for(var e=0;e<c;e++)d[e]=a[b[e]];return d;};o.mapObject=function(a,b,c){b=q(b,c);var d=o.keys(a),e=d.length,f={},g;for(var h=0;h<e;h++){g=d[h];f[g]=b(a[g],g,a);}return f;};o.pairs=function(a){var b=o.keys(a);var c=b.length;var d=Array(c);for(var e=0;e<c;e++)d[e]=[b[e],a[b[e]]];return d;};o.invert=function(a){var b={};var c=o.keys(a);for(var d=0,e=c.length;d<e;d++)b[a[c[d]]]=c[d];return b;};o.functions=o.methods=function(a){var b=[];for(var c in a)if(o.isFunction(a[c]))b.push(c);return b.sort();};o.extend=r(o.allKeys);o.extendOwn=o.assign=r(o.keys);o.findKey=function(a,b,c){b=q(b,c);var d=o.keys(a),e;for(var f=0,g=d.length;f<g;f++){e=d[f];if(b(a[e],e,a))return e;}};o.pick=function(a,b,c){var d={},e=a,f,g;if(e==null)return d;if(o.isFunction(b)){g=o.allKeys(e);f=p(b,c);}else{g=z(arguments,false,false,1);f=function(a,b,c){return b in c;};e=Object(e);}for(var h=0,i=g.length;h<i;h++){var j=g[h];var k=e[j];if(f(k,j,e))d[j]=k;}return d;};o.omit=function(a,b,c){if(o.isFunction(b))b=o.negate(b);else{var d=o.map(z(arguments,false,false,1),String);b=function(a,b){return !o.contains(d,b);};}return o.pick(a,b,c);};o.defaults=r(o.allKeys,true);o.create=function(a,b){var c=s(a);if(b)o.extendOwn(c,b);return c;};o.clone=function(a){if(!o.isObject(a))return a;return o.isArray(a)?a.slice():o.extend({},a);};o.tap=function(a,b){b(a);return a;};o.isMatch=function(a,b){var c=o.keys(b),d=c.length;if(a==null)return !d;var e=Object(a);for(var f=0;f<d;f++){var g=c[f];if(b[g]!==e[g]||!(g in e))return false;}return true;};var G=function(a,b,c,d){if(a===b)return a!==0||1/a===1/b;if(a==null||b==null)return a===b;if(a instanceof o)a=a._wrapped;if(b instanceof o)b=b._wrapped;var e=h.call(a);if(e!==h.call(b))return false;switch(e){case '[object RegExp]':case '[object String]':return ''+a===''+b;case '[object Number]':if(+a!==+a)return +b!==+b;return +a===0?1/+a===1/b:+a===+b;case '[object Date]':case '[object Boolean]':return +a===+b;}var f=e==='[object Array]';if(!f){if(typeof a!='object'||typeof b!='object')return false;var g=a.constructor,i=b.constructor;if(g!==i&&!(o.isFunction(g)&&g instanceof g&&o.isFunction(i)&&i instanceof i)&&('constructor' in a&&'constructor' in b))return false;}c=c||[];d=d||[];var j=c.length;while(j--)if(c[j]===a)return d[j]===b;c.push(a);d.push(b);if(f){j=a.length;if(j!==b.length)return false;while(j--)if(!G(a[j],b[j],c,d))return false;}else{var k=o.keys(a),l;j=k.length;if(o.keys(b).length!==j)return false;while(j--){l=k[j];if(!(o.has(b,l)&&G(a[l],b[l],c,d)))return false;}}c.pop();d.pop();return true;};o.isEqual=function(a,b){return G(a,b);};o.isEmpty=function(a){if(a==null)return true;if(w(a)&&(o.isArray(a)||o.isString(a)||o.isArguments(a)))return a.length===0;return o.keys(a).length===0;};o.isElement=function(a){return !!(a&&a.nodeType===1);};o.isArray=j||function(a){return h.call(a)==='[object Array]';};o.isObject=function(a){var b=typeof a;return b==='function'||b==='object'&&!!a;};o.each(['Arguments','Function','String','Number','Date','RegExp','Error'],function(a){o['is'+a]=function(b){return h.call(b)==='[object '+a+']';};});if(!o.isArguments(arguments))o.isArguments=function(a){return o.has(a,'callee');};if(typeof /./!='function'&&typeof Int8Array!='object')o.isFunction=function(a){return typeof a=='function'||false;};o.isFinite=function(a){return isFinite(a)&&!isNaN(parseFloat(a));};o.isNaN=function(a){return o.isNumber(a)&&a!==+a;};o.isBoolean=function(a){return a===true||a===false||h.call(a)==='[object Boolean]';};o.isNull=function(a){return a===null;};o.isUndefined=function(a){return a===void 0;};o.has=function(a,b){return a!=null&&i.call(a,b);};o.noConflict=function(){a._=b;return this;};o.identity=function(a){return a;};o.constant=function(a){return function(){return a;};};o.noop=function(){};o.property=t;o.propertyOf=function(a){return a==null?function(){}:function(b){return a[b];};};o.matcher=o.matches=function(a){a=o.extendOwn({},a);return function(b){return o.isMatch(b,a);};};o.times=function(a,b,c){var d=Array(Math.max(0,a));b=p(b,c,1);for(var e=0;e<a;e++)d[e]=b(e);return d;};o.random=function(a,b){if(b==null){b=a;a=0;}return a+Math.floor(Math.random()*(b-a+1));};o.now=Date.now||function(){return new Date().getTime();};var H={'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#x27;','`':'&#x60;'};var I=o.invert(H);var J=function(a){var b=function(b){return a[b];};var c='(?:'+o.keys(a).join('|')+')';var d=RegExp(c);var e=RegExp(c,'g');return function(a){a=a==null?'':''+a;return d.test(a)?a.replace(e,b):a;};};o.escape=J(H);o.unescape=J(I);o.result=function(a,b,c){var d=a==null?void 0:a[b];if(d===void 0)d=c;return o.isFunction(d)?d.call(a):d;};var K=0;o.uniqueId=function(a){var b=++K+'';return a?a+b:b;};o.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var L=/(.)^/;var M={"'":"'",'\\':'\\','\r':'r','\n':'n','\u2028':'u2028','\u2029':'u2029'};var N=/\\|'|\r|\n|\u2028|\u2029/g;var O=function(a){return '\\'+M[a];};o.template=function(a,b,c){if(!b&&c)b=c;b=o.defaults({},b,o.templateSettings);var d=RegExp([(b.escape||L).source,(b.interpolate||L).source,(b.evaluate||L).source].join('|')+'|$','g');var e=0;var f="__p+='";a.replace(d,function(b,c,d,g,h){f+=a.slice(e,h).replace(N,O);e=h+b.length;if(c)f+="'+\n((__t=("+c+"))==null?'':_.escape(__t))+\n'";else if(d)f+="'+\n((__t=("+d+"))==null?'':__t)+\n'";else if(g)f+="';\n"+g+"\n__p+='";return b;});f+="';\n";if(!b.variable)f='with(obj||{}){\n'+f+'}\n';f="var __t,__p='',__j=Array.prototype.join,"+"print=function(){__p+=__j.call(arguments,'');};\n"+f+'return __p;\n';try{var g=new Function(b.variable||'obj','_',f);}catch(h){h.source=f;throw h;}var i=function(a){return g.call(this,a,o);};var j=b.variable||'obj';i.source='function('+j+'){\n'+f+'}';return i;};o.chain=function(a){var b=o(a);b._chain=true;return b;};var P=function(a,b){return a._chain?o(b).chain():b;};o.mixin=function(a){o.each(o.functions(a),function(b){var c=o[b]=a[b];o.prototype[b]=function(){var a=[this._wrapped];f.apply(a,arguments);return P(this,c.apply(o,a));};});};o.mixin(o);o.each(['pop','push','reverse','shift','sort','splice','unshift'],function(a){var b=c[a];o.prototype[a]=function(){var c=this._wrapped;b.apply(c,arguments);if((a==='shift'||a==='splice')&&c.length===0)delete c[0];return P(this,c);};});o.each(['concat','join','slice'],function(a){var b=c[a];o.prototype[a]=function(){return P(this,b.apply(this._wrapped,arguments));};});o.prototype.value=function(){return this._wrapped;};o.prototype.valueOf=o.prototype.toJSON=o.prototype.value;o.prototype.toString=function(){return ''+this._wrapped;};if(typeof define==='function'&&define.amd)define('underscore',[],function(){return o;});}.call(this));!function(a,b){'use strict';var c=b.prototype.trim;var d=b.prototype.trimRight;var e=b.prototype.trimLeft;var f=function(a){return a*1||0;};var g=function(a,b){if(b<1)return '';var c='';while(b>0){if(b&1)c+=a;b>>=1,a+=a;}return c;};var h=[].slice;var i=function(a){if(a==null)return '\\s';else if(a.source)return a.source;else return '['+n.escapeRegExp(a)+']';};var j={lt:'<',gt:'>',quot:'"',apos:"'",amp:'&'};var k={};for(var l in j)k[j[l]]=l;var m=(function(){function a(a){return Object.prototype.toString.call(a).slice(8,-1).toLowerCase();}var c=g;var d=function(){if(!d.cache.hasOwnProperty(arguments[0]))d.cache[arguments[0]]=d.parse(arguments[0]);return d.format.call(null,d.cache[arguments[0]],arguments);};d.format=function(d,e){var f=1,g=d.length,h='',i,j=[],k,l,n,o,p,q;for(k=0;k<g;k++){h=a(d[k]);if(h==='string')j.push(d[k]);else if(h==='array'){n=d[k];if(n[2]){i=e[f];for(l=0;l<n[2].length;l++){if(!i.hasOwnProperty(n[2][l]))throw new Error(m('[_.sprintf] property "%s" does not exist',n[2][l]));i=i[n[2][l]];}}else if(n[1])i=e[n[1]];else i=e[f++];if(/[^s]/.test(n[8])&&(a(i)!='number'))throw new Error(m('[_.sprintf] expecting number but found %s',a(i)));switch(n[8]){case 'b':i=i.toString(2);break;case 'c':i=b.fromCharCode(i);break;case 'd':i=parseInt(i,10);break;case 'e':i=n[7]?i.toExponential(n[7]):i.toExponential();break;case 'f':i=n[7]?parseFloat(i).toFixed(n[7]):parseFloat(i);break;case 'o':i=i.toString(8);break;case 's':i=((i=b(i))&&n[7]?i.substring(0,n[7]):i);break;case 'u':i=Math.abs(i);break;case 'x':i=i.toString(16);break;case 'X':i=i.toString(16).toUpperCase();break;}i=(/[def]/.test(n[8])&&n[3]&&i>=0?'+'+i:i);p=n[4]?n[4]=='0'?'0':n[4].charAt(1):' ';q=n[6]-b(i).length;o=n[6]?c(p,q):'';j.push(n[5]?i+o:o+i);}}return j.join('');};d.cache={};d.parse=function(a){var b=a,c=[],d=[],e=0;while(b){if((c=/^[^\x25]+/.exec(b))!==null)d.push(c[0]);else if((c=/^\x25{2}/.exec(b))!==null)d.push('%');else if((c=/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(b))!==null){if(c[2]){e|=1;var f=[],g=c[2],h=[];if((h=/^([a-z_][a-z_\d]*)/i.exec(g))!==null){f.push(h[1]);while((g=g.substring(h[0].length))!=='')if((h=/^\.([a-z_][a-z_\d]*)/i.exec(g))!==null)f.push(h[1]);else if((h=/^\[(\d+)\]/.exec(g))!==null)f.push(h[1]);else throw new Error('[_.sprintf] huh?');}else throw new Error('[_.sprintf] huh?');c[2]=f;}else e|=2;if(e===3)throw new Error('[_.sprintf] mixing positional and named placeholders is not (yet) supported');d.push(c);}else throw new Error('[_.sprintf] huh?');b=b.substring(c[0].length);}return d;};return d;})();var n={VERSION:'2.3.0',isBlank:function(a){if(a==null)a='';return(/^\s*$/).test(a);},stripTags:function(a){if(a==null)return '';return b(a).replace(/<\/?[^>]+>/g,'');},capitalize:function(a){a=a==null?'':b(a);return a.charAt(0).toUpperCase()+a.slice(1);},chop:function(a,c){if(a==null)return [];a=b(a);c=~~c;return c>0?a.match(new RegExp('.{1,'+c+'}','g')):[a];},clean:function(a){return n.strip(a).replace(/\s+/g,' ');},count:function(a,c){if(a==null||c==null)return 0;return b(a).split(c).length-1;},chars:function(a){if(a==null)return [];return b(a).split('');},swapCase:function(a){if(a==null)return '';return b(a).replace(/\S/g,function(a){return a===a.toUpperCase()?a.toLowerCase():a.toUpperCase();});},escapeHTML:function(a){if(a==null)return '';return b(a).replace(/[&<>"']/g,function(a){return '&'+k[a]+';';});},unescapeHTML:function(a){if(a==null)return '';return b(a).replace(/\&([^;]+);/g,function(a,c){var d;if(c in j)return j[c];else if(d=c.match(/^#x([\da-fA-F]+)$/))return b.fromCharCode(parseInt(d[1],16));else if(d=c.match(/^#(\d+)$/))return b.fromCharCode(~~d[1]);else return a;});},escapeRegExp:function(a){if(a==null)return '';return b(a).replace(/([.*+?^=!:${}()|[\]\/\\])/g,'\\$1');},splice:function(a,b,c,d){var e=n.chars(a);e.splice(~~b,~~c,d);return e.join('');},insert:function(a,b,c){return n.splice(a,b,0,c);},include:function(a,c){if(c==='')return true;if(a==null)return false;return b(a).indexOf(c)!==-1;},join:function(){var a=h.call(arguments),b=a.shift();if(b==null)b='';return a.join(b);},lines:function(a){if(a==null)return [];return b(a).split("\n");},reverse:function(a){return n.chars(a).reverse().join('');},startsWith:function(a,c){if(c==='')return true;if(a==null||c==null)return false;a=b(a);c=b(c);return a.length>=c.length&&a.slice(0,c.length)===c;},endsWith:function(a,c){if(c==='')return true;if(a==null||c==null)return false;a=b(a);c=b(c);return a.length>=c.length&&a.slice(a.length-c.length)===c;},succ:function(a){if(a==null)return '';a=b(a);return a.slice(0,-1)+b.fromCharCode(a.charCodeAt(a.length-1)+1);},titleize:function(a){if(a==null)return '';return b(a).replace(/(?:^|\s)\S/g,function(a){return a.toUpperCase();});},camelize:function(a){return n.trim(a).replace(/[-_\s]+(.)?/g,function(a,b){return b.toUpperCase();});},underscored:function(a){return n.trim(a).replace(/([a-z\d])([A-Z]+)/g,'$1_$2').replace(/[-\s]+/g,'_').toLowerCase();},dasherize:function(a){return n.trim(a).replace(/([A-Z])/g,'-$1').replace(/[-_\s]+/g,'-').toLowerCase();},classify:function(a){return n.titleize(b(a).replace(/_/g,' ')).replace(/\s/g,'');},humanize:function(a){return n.capitalize(n.underscored(a).replace(/_id$/,'').replace(/_/g,' '));},trim:function(a,d){if(a==null)return '';if(!d&&c)return c.call(a);d=i(d);return b(a).replace(new RegExp('\^'+d+'+|'+d+'+$','g'),'');},ltrim:function(a,c){if(a==null)return '';if(!c&&e)return e.call(a);c=i(c);return b(a).replace(new RegExp('^'+c+'+'),'');},rtrim:function(a,c){if(a==null)return '';if(!c&&d)return d.call(a);c=i(c);return b(a).replace(new RegExp(c+'+$'),'');},truncate:function(a,c,d){if(a==null)return '';a=b(a);d=d||'...';c=~~c;return a.length>c?a.slice(0,c)+d:a;},prune:function(a,c,d){if(a==null)return '';a=b(a);c=~~c;d=d!=null?b(d):'...';if(a.length<=c)return a;var e=function(a){return a.toUpperCase()!==a.toLowerCase()?'A':' ';},f=a.slice(0,c+1).replace(/.(?=\W*\w*$)/g,e);if(f.slice(f.length-2).match(/\w\w/))f=f.replace(/\s*\S+$/,'');else f=n.rtrim(f.slice(0,f.length-1));return(f+d).length>a.length?a:a.slice(0,f.length)+d;},words:function(a,b){if(n.isBlank(a))return [];return n.trim(a,b).split(b||/\s+/);},pad:function(a,c,d,e){a=a==null?'':b(a);c=~~c;var f=0;if(!d)d=' ';else if(d.length>1)d=d.charAt(0);switch(e){case 'right':f=c-a.length;return a+g(d,f);case 'both':f=c-a.length;return g(d,Math.ceil(f/2))+a+g(d,Math.floor(f/2));default:f=c-a.length;return g(d,f)+a;}},lpad:function(a,b,c){return n.pad(a,b,c);},rpad:function(a,b,c){return n.pad(a,b,c,'right');},lrpad:function(a,b,c){return n.pad(a,b,c,'both');},sprintf:m,vsprintf:function(a,b){b.unshift(a);return m.apply(null,b);},toNumber:function(a,c){if(a==null||a=='')return 0;a=b(a);var d=f(f(a).toFixed(~~c));return d===0&&!a.match(/^0+$/)?Number.NaN:d;},numberFormat:function(a,b,c,d){if(isNaN(a)||a==null)return '';a=a.toFixed(~~b);d=d||',';var e=a.split('.'),f=e[0],g=e[1]?(c||'.')+e[1]:'';return f.replace(/(\d)(?=(?:\d{3})+$)/g,'$1'+d)+g;},strRight:function(a,c){if(a==null)return '';a=b(a);c=c!=null?b(c):c;var d=!c?-1:a.indexOf(c);return ~d?a.slice(d+c.length,a.length):a;},strRightBack:function(a,c){if(a==null)return '';a=b(a);c=c!=null?b(c):c;var d=!c?-1:a.lastIndexOf(c);return ~d?a.slice(d+c.length,a.length):a;},strLeft:function(a,c){if(a==null)return '';a=b(a);c=c!=null?b(c):c;var d=!c?-1:a.indexOf(c);return ~d?a.slice(0,d):a;},strLeftBack:function(a,b){if(a==null)return '';a+='';b=b!=null?''+b:b;var c=a.lastIndexOf(b);return ~c?a.slice(0,c):a;},toSentence:function(a,b,c,d){b=b||', ';c=c||' and ';var e=a.slice(),f=e.pop();if(a.length>2&&d)c=n.rtrim(b)+c;return e.length?e.join(b)+c+f:f;},toSentenceSerial:function(){var a=h.call(arguments);a[3]=true;return n.toSentence.apply(n,a);},slugify:function(a){if(a==null)return '';var c="ąàáäâãåæćęèéëêìíïîłńòóöôõøùúüûñçżź",d="aaaaaaaaceeeeeiiiilnoooooouuuunczz",e=new RegExp(i(c),'g');a=b(a).toLowerCase().replace(e,function(a){var b=c.indexOf(a);return d.charAt(b)||'-';});return n.dasherize(a.replace(/[^\w\s-]/g,''));},surround:function(a,b){return [b,a,b].join('');},quote:function(a){return n.surround(a,'"');},exports:function(){var a={};for(var b in this){if(!this.hasOwnProperty(b)||b.match(/^(?:include|contains|reverse)$/))continue;a[b]=this[b];}return a;},repeat:function(a,c,d){if(a==null)return '';c=~~c;if(d==null)return g(b(a),c);for(var e=[];c>0;e[--c]=a){}return e.join(d);},levenshtein:function(a,c){if(a==null&&c==null)return 0;if(a==null)return b(c).length;if(c==null)return b(a).length;a=b(a);c=b(c);var d=[],e,f;for(var g=0;g<=c.length;g++)for(var h=0;h<=a.length;h++){if(g&&h)if(a.charAt(h-1)===c.charAt(g-1))f=e;else f=Math.min(d[h],d[h-1],e)+1;else f=g+h;e=d[h];d[h]=f;}return d.pop();}};n.strip=n.trim;n.lstrip=n.ltrim;n.rstrip=n.rtrim;n.center=n.lrpad;n.rjust=n.lpad;n.ljust=n.rpad;n.contains=n.include;n.q=n.quote;if(typeof exports!=='undefined'){if(typeof module!=='undefined'&&module.exports)module.exports=n;exports._s=n;}else if(typeof define==='function'&&define.amd)define('underscore.string',[],function(){return n;});else{a._=a._||{};a._.string=a._.str=n;}}(this,String);(function(a){var b=(typeof self=='object'&&self.self==self&&self)||(typeof global=='object'&&global.global==global&&global);if(typeof define==='function'&&define.amd)define(['underscore','jquery','exports'],function(c,d,e){b.Backbone=a(b,e,c,d);});else if(typeof exports!=='undefined'){var c=require('underscore'),d;try{d=require('jquery');}catch(e){}a(b,exports,c,d);}else b.Backbone=a(b,{},b._,(b.jQuery||b.Zepto||b.ender||b.$));}(function(a,b,c,d){var e=a.Backbone;var f=[].slice;b.VERSION='1.2.1';b.$=d;b.noConflict=function(){a.Backbone=e;return this;};b.emulateHTTP=false;b.emulateJSON=false;var g=function(a,b,d){switch(a){case 1:return function(){return c[b](this[d]);};case 2:return function(a){return c[b](this[d],a);};case 3:return function(a,e){return c[b](this[d],a,e);};case 4:return function(a,e,f){return c[b](this[d],a,e,f);};default:return function(){var a=f.call(arguments);a.unshift(this[d]);return c[b].apply(c,a);};}};var h=function(a,b,d){c.each(b,function(b,e){if(c[e])a.prototype[e]=g(b,e,d);});};var i=b.Events={};var j=/\s+/;var k=function(a,b,d,e,f){var g=0,h;if(d&&typeof d==='object'){if(e!==void 0&&'context' in f&&f.context===void 0)f.context=e;for(h=c.keys(d);g<h.length;g++)b=a(b,h[g],d[h[g]],f);}else if(d&&j.test(d))for(h=d.split(j);g<h.length;g++)b=a(b,h[g],e,f);else b=a(b,d,e,f);return b;};i.on=function(a,b,c){return l(this,a,b,c);};var l=function(a,b,c,d,e){a._events=k(m,a._events||{},b,c,{context:d,ctx:a,listening:e});if(e){var f=a._listeners||(a._listeners={});f[e.id]=e;}return a;};i.listenTo=function(a,b,d){if(!a)return this;var e=a._listenId||(a._listenId=c.uniqueId('l'));var f=this._listeningTo||(this._listeningTo={});var g=f[e];if(!g){var h=this._listenId||(this._listenId=c.uniqueId('l'));g=f[e]={obj:a,objId:e,id:h,listeningTo:f,count:0};}l(a,b,d,this,g);return this;};var m=function(a,b,c,d){if(c){var e=a[b]||(a[b]=[]);var f=d.context,g=d.ctx,h=d.listening;if(h)h.count++;e.push({callback:c,context:f,ctx:f||g,listening:h});}return a;};i.off=function(a,b,c){if(!this._events)return this;this._events=k(n,this._events,a,b,{context:c,listeners:this._listeners});return this;};i.stopListening=function(a,b,d){var e=this._listeningTo;if(!e)return this;var f=a?[a._listenId]:c.keys(e);for(var g=0;g<f.length;g++){var h=e[f[g]];if(!h)break;h.obj.off(b,d,this);}if(c.isEmpty(e))this._listeningTo=void 0;return this;};var n=function(a,b,d,e){if(!a)return;var f=0,g;var h=e.context,i=e.listeners;if(!b&&!d&&!h){var j=c.keys(i);for(;f<j.length;f++){g=i[j[f]];delete i[g.id];delete g.listeningTo[g.objId];}return;}var k=b?[b]:c.keys(a);for(;f<k.length;f++){b=k[f];var l=a[b];if(!l)break;var m=[];for(var n=0;n<l.length;n++){var o=l[n];if(d&&d!==o.callback&&d!==o.callback._callback||h&&h!==o.context)m.push(o);else{g=o.listening;if(g&&--g.count===0){delete i[g.id];delete g.listeningTo[g.objId];}}}if(m.length)a[b]=m;else delete a[b];}if(c.size(a))return a;};i.once=function(a,b,d){var e=k(o,{},a,b,c.bind(this.off,this));return this.on(e,void 0,d);};i.listenToOnce=function(a,b,d){var e=k(o,{},b,d,c.bind(this.stopListening,this,a));return this.listenTo(a,e);};var o=function(a,b,d,e){if(d){var f=a[b]=c.once(function(){e(b,f);d.apply(this,arguments);});f._callback=d;}return a;};i.trigger=function(a){if(!this._events)return this;var b=Math.max(0,arguments.length-1);var c=Array(b);for(var d=0;d<b;d++)c[d]=arguments[d+1];k(p,this._events,a,void 0,c);return this;};var p=function(a,b,c,d){if(a){var e=a[b];var f=a.all;if(e&&f)f=f.slice();if(e)q(e,d);if(f)q(f,[b].concat(d));}return a;};var q=function(a,b){var c,d=-1,e=a.length,f=b[0],g=b[1],h=b[2];switch(b.length){case 0:while(++d<e)(c=a[d]).callback.call(c.ctx);return;case 1:while(++d<e)(c=a[d]).callback.call(c.ctx,f);return;case 2:while(++d<e)(c=a[d]).callback.call(c.ctx,f,g);return;case 3:while(++d<e)(c=a[d]).callback.call(c.ctx,f,g,h);return;default:while(++d<e)(c=a[d]).callback.apply(c.ctx,b);return;}};i.bind=i.on;i.unbind=i.off;c.extend(b,i);var r=b.Model=function(a,b){var d=a||{};b||(b={});this.cid=c.uniqueId(this.cidPrefix);this.attributes={};if(b.collection)this.collection=b.collection;if(b.parse)d=this.parse(d,b)||{};d=c.defaults({},d,c.result(this,'defaults'));this.set(d,b);this.changed={};this.initialize.apply(this,arguments);};c.extend(r.prototype,i,{changed:null,validationError:null,idAttribute:'id',cidPrefix:'c',initialize:function(){},toJSON:function(a){return c.clone(this.attributes);},sync:function(){return b.sync.apply(this,arguments);},get:function(a){return this.attributes[a];},escape:function(a){return c.escape(this.get(a));},has:function(a){return this.get(a)!=null;},matches:function(a){return !!c.iteratee(a,this)(this.attributes);},set:function(a,b,d){if(a==null)return this;var e;if(typeof a==='object'){e=a;d=b;}else(e={})[a]=b;d||(d={});if(!this._validate(e,d))return false;var f=d.unset;var g=d.silent;var h=[];var i=this._changing;this._changing=true;if(!i){this._previousAttributes=c.clone(this.attributes);this.changed={};}var j=this.attributes;var k=this.changed;var l=this._previousAttributes;if(this.idAttribute in e)this.id=e[this.idAttribute];for(var m in e){b=e[m];if(!c.isEqual(j[m],b))h.push(m);if(!c.isEqual(l[m],b))k[m]=b;else delete k[m];f?delete j[m]:j[m]=b;}if(!g){if(h.length)this._pending=d;for(var n=0;n<h.length;n++)this.trigger('change:'+h[n],this,j[h[n]],d);}if(i)return this;if(!g)while(this._pending){d=this._pending;this._pending=false;this.trigger('change',this,d);}this._pending=false;this._changing=false;return this;},unset:function(a,b){return this.set(a,void 0,c.extend({},b,{unset:true}));},clear:function(a){var b={};for(var d in this.attributes)b[d]=void 0;return this.set(b,c.extend({},a,{unset:true}));},hasChanged:function(a){if(a==null)return !c.isEmpty(this.changed);return c.has(this.changed,a);},changedAttributes:function(a){if(!a)return this.hasChanged()?c.clone(this.changed):false;var b=this._changing?this._previousAttributes:this.attributes;var d={};for(var e in a){var f=a[e];if(c.isEqual(b[e],f))continue;d[e]=f;}return c.size(d)?d:false;},previous:function(a){if(a==null||!this._previousAttributes)return null;return this._previousAttributes[a];},previousAttributes:function(){return c.clone(this._previousAttributes);},fetch:function(a){a=c.extend({parse:true},a);var b=this;var d=a.success;a.success=function(c){var e=a.parse?b.parse(c,a):c;if(!b.set(e,a))return false;if(d)d.call(a.context,b,c,a);b.trigger('sync',b,c,a);};N(this,a);return this.sync('read',this,a);},save:function(a,b,d){var e;if(a==null||typeof a==='object'){e=a;d=b;}else(e={})[a]=b;d=c.extend({validate:true,parse:true},d);var f=d.wait;if(e&&!f){if(!this.set(e,d))return false;}else if(!this._validate(e,d))return false;var g=this;var h=d.success;var i=this.attributes;d.success=function(a){g.attributes=i;var b=d.parse?g.parse(a,d):a;if(f)b=c.extend({},e,b);if(b&&!g.set(b,d))return false;if(h)h.call(d.context,g,a,d);g.trigger('sync',g,a,d);};N(this,d);if(e&&f)this.attributes=c.extend({},i,e);var j=this.isNew()?'create':(d.patch?'patch':'update');if(j==='patch'&&!d.attrs)d.attrs=e;var k=this.sync(j,this,d);this.attributes=i;return k;},destroy:function(a){a=a?c.clone(a):{};var b=this;var d=a.success;var e=a.wait;var f=function(){b.stopListening();b.trigger('destroy',b,b.collection,a);};a.success=function(c){if(e)f();if(d)d.call(a.context,b,c,a);if(!b.isNew())b.trigger('sync',b,c,a);};var g=false;if(this.isNew())c.defer(a.success);else{N(this,a);g=this.sync('delete',this,a);}if(!e)f();return g;},url:function(){var a=c.result(this,'urlRoot')||c.result(this.collection,'url')||M();if(this.isNew())return a;var b=this.get(this.idAttribute);return a.replace(/[^\/]$/,'$&/')+encodeURIComponent(b);},parse:function(a,b){return a;},clone:function(){return new this.constructor(this.attributes);},isNew:function(){return !this.has(this.idAttribute);},isValid:function(a){return this._validate({},c.defaults({validate:true},a));},_validate:function(a,b){if(!b.validate||!this.validate)return true;a=c.extend({},this.attributes,a);var d=this.validationError=this.validate(a,b)||null;if(!d)return true;this.trigger('invalid',this,d,c.extend(b,{validationError:d}));return false;}});var s={keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1};h(r,s,'attributes');var t=b.Collection=function(a,b){b||(b={});if(b.model)this.model=b.model;if(b.comparator!==void 0)this.comparator=b.comparator;this._reset();this.initialize.apply(this,arguments);if(a)this.reset(a,c.extend({silent:true},b));};var u={add:true,remove:true,merge:true};var v={add:true,remove:false};c.extend(t.prototype,i,{model:r,initialize:function(){},toJSON:function(a){return this.map(function(b){return b.toJSON(a);});},sync:function(){return b.sync.apply(this,arguments);},add:function(a,b){return this.set(a,c.extend({merge:false},b,v));},remove:function(a,b){b=c.extend({},b);var d=!c.isArray(a);a=d?[a]:c.clone(a);var e=this._removeModels(a,b);if(!b.silent&&e)this.trigger('update',this,b);return d?e[0]:e;},set:function(a,b){b=c.defaults({},b,u);if(b.parse&&!this._isModel(a))a=this.parse(a,b);var d=!c.isArray(a);a=d?(a?[a]:[]):a.slice();var e,f,g,h,i;var j=b.at;if(j!=null)j=+j;if(j<0)j+=this.length+1;var k=this.comparator&&(j==null)&&b.sort!==false;var l=c.isString(this.comparator)?this.comparator:null;var m=[],n=[],o={};var p=b.add,q=b.merge,r=b.remove;var s=!k&&p&&r?[]:false;var t=false;for(var v=0;v<a.length;v++){g=a[v];if(h=this.get(g)){if(r)o[h.cid]=true;if(q&&g!==h){g=this._isModel(g)?g.attributes:g;if(b.parse)g=h.parse(g,b);h.set(g,b);if(k&&!i&&h.hasChanged(l))i=true;}a[v]=h;}else if(p){f=a[v]=this._prepareModel(g,b);if(!f)continue;m.push(f);this._addReference(f,b);}f=h||f;if(!f)continue;e=this.modelId(f.attributes);if(s&&(f.isNew()||!o[e])){s.push(f);t=t||!this.models[v]||f.cid!==this.models[v].cid;}o[e]=true;}if(r){for(var v=0;v<this.length;v++)if(!o[(f=this.models[v]).cid])n.push(f);if(n.length)this._removeModels(n,b);}if(m.length||t){if(k)i=true;this.length+=m.length;if(j!=null)for(var v=0;v<m.length;v++)this.models.splice(j+v,0,m[v]);else{if(s)this.models.length=0;var w=s||m;for(var v=0;v<w.length;v++)this.models.push(w[v]);}}if(i)this.sort({silent:true});if(!b.silent){var x=j!=null?c.clone(b):b;for(var v=0;v<m.length;v++){if(j!=null)x.index=j+v;(f=m[v]).trigger('add',f,this,x);}if(i||t)this.trigger('sort',this,b);if(m.length||n.length)this.trigger('update',this,b);}return d?a[0]:a;},reset:function(a,b){b=b?c.clone(b):{};for(var d=0;d<this.models.length;d++)this._removeReference(this.models[d],b);b.previousModels=this.models;this._reset();a=this.add(a,c.extend({silent:true},b));if(!b.silent)this.trigger('reset',this,b);return a;},push:function(a,b){return this.add(a,c.extend({at:this.length},b));},pop:function(a){var b=this.at(this.length-1);return this.remove(b,a);},unshift:function(a,b){return this.add(a,c.extend({at:0},b));},shift:function(a){var b=this.at(0);return this.remove(b,a);},slice:function(){return f.apply(this.models,arguments);},get:function(a){if(a==null)return void 0;var b=this.modelId(this._isModel(a)?a.attributes:a);return this._byId[a]||this._byId[b]||this._byId[a.cid];},at:function(a){if(a<0)a+=this.length;return this.models[a];},where:function(a,b){var d=c.matches(a);return this[b?'find':'filter'](function(a){return d(a.attributes);});},findWhere:function(a){return this.where(a,true);},sort:function(a){if(!this.comparator)throw new Error('Cannot sort a set without a comparator');a||(a={});if(c.isString(this.comparator)||this.comparator.length===1)this.models=this.sortBy(this.comparator,this);else this.models.sort(c.bind(this.comparator,this));if(!a.silent)this.trigger('sort',this,a);return this;},pluck:function(a){return c.invoke(this.models,'get',a);},fetch:function(a){a=c.extend({parse:true},a);var b=a.success;var d=this;a.success=function(c){var e=a.reset?'reset':'set';d[e](c,a);if(b)b.call(a.context,d,c,a);d.trigger('sync',d,c,a);};N(this,a);return this.sync('read',this,a);},create:function(a,b){b=b?c.clone(b):{};var d=b.wait;a=this._prepareModel(a,b);if(!a)return false;if(!d)this.add(a,b);var e=this;var f=b.success;b.success=function(a,b,c){if(d)e.add(a,c);if(f)f.call(c.context,a,b,c);};a.save(null,b);return a;},parse:function(a,b){return a;},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator});},modelId:function(a){return a[this.model.prototype.idAttribute||'id'];},_reset:function(){this.length=0;this.models=[];this._byId={};},_prepareModel:function(a,b){if(this._isModel(a)){if(!a.collection)a.collection=this;return a;}b=b?c.clone(b):{};b.collection=this;var d=new this.model(a,b);if(!d.validationError)return d;this.trigger('invalid',this,d.validationError,b);return false;},_removeModels:function(a,b){var c=[];for(var d=0;d<a.length;d++){var e=this.get(a[d]);if(!e)continue;var f=this.indexOf(e);this.models.splice(f,1);this.length--;if(!b.silent){b.index=f;e.trigger('remove',e,this,b);}c.push(e);this._removeReference(e,b);}return c.length?c:false;},_isModel:function(a){return a instanceof r;},_addReference:function(a,b){this._byId[a.cid]=a;var c=this.modelId(a.attributes);if(c!=null)this._byId[c]=a;a.on('all',this._onModelEvent,this);},_removeReference:function(a,b){delete this._byId[a.cid];var c=this.modelId(a.attributes);if(c!=null)delete this._byId[c];if(this===a.collection)delete a.collection;a.off('all',this._onModelEvent,this);},_onModelEvent:function(a,b,c,d){if((a==='add'||a==='remove')&&c!==this)return;if(a==='destroy')this.remove(b,d);if(a==='change'){var e=this.modelId(b.previousAttributes());var f=this.modelId(b.attributes);if(e!==f){if(e!=null)delete this._byId[e];if(f!=null)this._byId[f]=b;}}this.trigger.apply(this,arguments);}});var w={forEach:3,each:3,map:3,collect:3,reduce:4,foldl:4,inject:4,reduceRight:4,foldr:4,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:2,contains:2,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3};h(t,w,'models');var x=['groupBy','countBy','sortBy','indexBy'];c.each(x,function(a){if(!c[a])return;t.prototype[a]=function(b,d){var e=c.isFunction(b)?b:function(a){return a.get(b);};return c[a](this.models,e,d);};});var y=b.View=function(a){this.cid=c.uniqueId('view');c.extend(this,c.pick(a,A));this._ensureElement();this.initialize.apply(this,arguments);};var z=/^(\S+)\s*(.*)$/;var A=['model','collection','el','id','attributes','className','tagName','events'];c.extend(y.prototype,i,{tagName:'div',$:function(a){return this.$el.find(a);},initialize:function(){},render:function(){return this;},remove:function(){this._removeElement();this.stopListening();return this;},_removeElement:function(){this.$el.remove();},setElement:function(a){this.undelegateEvents();this._setElement(a);this.delegateEvents();return this;},_setElement:function(a){this.$el=a instanceof b.$?a:b.$(a);this.el=this.$el[0];},delegateEvents:function(a){a||(a=c.result(this,'events'));if(!a)return this;this.undelegateEvents();for(var b in a){var d=a[b];if(!c.isFunction(d))d=this[d];if(!d)continue;var e=b.match(z);this.delegate(e[1],e[2],c.bind(d,this));}return this;},delegate:function(a,b,c){this.$el.on(a+'.delegateEvents'+this.cid,b,c);return this;},undelegateEvents:function(){if(this.$el)this.$el.off('.delegateEvents'+this.cid);return this;},undelegate:function(a,b,c){this.$el.off(a+'.delegateEvents'+this.cid,b,c);return this;},_createElement:function(a){return document.createElement(a);},_ensureElement:function(){if(!this.el){var a=c.extend({},c.result(this,'attributes'));if(this.id)a.id=c.result(this,'id');if(this.className)a['class']=c.result(this,'className');this.setElement(this._createElement(c.result(this,'tagName')));this._setAttributes(a);}else this.setElement(c.result(this,'el'));},_setAttributes:function(a){this.$el.attr(a);}});b.sync=function(a,d,e){var f=B[a];c.defaults(e||(e={}),{emulateHTTP:b.emulateHTTP,emulateJSON:b.emulateJSON});var g={type:f,dataType:'json'};if(!e.url)g.url=c.result(d,'url')||M();if(e.data==null&&d&&(a==='create'||a==='update'||a==='patch')){g.contentType='application/json';g.data=JSON.stringify(e.attrs||d.toJSON(e));}if(e.emulateJSON){g.contentType='application/x-www-form-urlencoded';g.data=g.data?{model:g.data}:{};}if(e.emulateHTTP&&(f==='PUT'||f==='DELETE'||f==='PATCH')){g.type='POST';if(e.emulateJSON)g.data._method=f;var h=e.beforeSend;e.beforeSend=function(a){a.setRequestHeader('X-HTTP-Method-Override',f);if(h)return h.apply(this,arguments);};}if(g.type!=='GET'&&!e.emulateJSON)g.processData=false;var i=e.error;e.error=function(a,b,c){e.textStatus=b;e.errorThrown=c;if(i)i.call(e.context,a,b,c);};var j=e.xhr=b.ajax(c.extend(g,e));d.trigger('request',d,j,e);return j;};var B={'create':'POST','update':'PUT','patch':'PATCH','delete':'DELETE','read':'GET'};b.ajax=function(){return b.$.ajax.apply(b.$,arguments);};var C=b.Router=function(a){a||(a={});if(a.routes)this.routes=a.routes;this._bindRoutes();this.initialize.apply(this,arguments);};var D=/\((.*?)\)/g;var E=/(\(\?)?:\w+/g;var F=/\*\w+/g;var G=/[\-{}\[\]+?.,\\\^$|#\s]/g;c.extend(C.prototype,i,{initialize:function(){},route:function(a,d,e){if(!c.isRegExp(a))a=this._routeToRegExp(a);if(c.isFunction(d)){e=d;d='';}if(!e)e=this[d];var f=this;b.history.route(a,function(c){var g=f._extractParameters(a,c);if(f.execute(e,g,d)!==false){f.trigger.apply(f,['route:'+d].concat(g));f.trigger('route',d,g);b.history.trigger('route',f,d,g);}});return this;},execute:function(a,b,c){if(a)a.apply(this,b);},navigate:function(a,c){b.history.navigate(a,c);return this;},_bindRoutes:function(){if(!this.routes)return;this.routes=c.result(this,'routes');var a,b=c.keys(this.routes);while((a=b.pop())!=null)this.route(a,this.routes[a]);},_routeToRegExp:function(a){a=a.replace(G,'\\$&').replace(D,'(?:$1)?').replace(E,function(a,b){return b?a:'([^/?]+)';}).replace(F,'([^?]*?)');return new RegExp('^'+a+'(?:\\?([\\s\\S]*))?$');},_extractParameters:function(a,b){var d=a.exec(b).slice(1);return c.map(d,function(a,b){if(b===d.length-1)return a||null;return a?decodeURIComponent(a):null;});}});var H=b.History=function(){this.handlers=[];c.bindAll(this,'checkUrl');if(typeof window!=='undefined'){this.location=window.location;this.history=window.history;}};var I=/^[#\/]|\s+$/g;var J=/^\/+|\/+$/g;var K=/#.*$/;H.started=false;c.extend(H.prototype,i,{interval:50,atRoot:function(){var a=this.location.pathname.replace(/[^\/]$/,'$&/');return a===this.root&&!this.getSearch();},matchRoot:function(){var a=this.decodeFragment(this.location.pathname);var b=a.slice(0,this.root.length-1)+'/';return b===this.root;},decodeFragment:function(a){return decodeURI(a.replace(/%25/g,'%2525'));},getSearch:function(){var a=this.location.href.replace(/#.*/,'').match(/\?.+/);return a?a[0]:'';},getHash:function(a){var b=(a||this).location.href.match(/#(.*)$/);return b?b[1]:'';},getPath:function(){var a=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return a.charAt(0)==='/'?a.slice(1):a;},getFragment:function(a){if(a==null)if(this._usePushState||!this._wantsHashChange)a=this.getPath();else a=this.getHash();return a.replace(I,'');},start:function(a){if(H.started)throw new Error('Backbone.history has already been started');H.started=true;this.options=c.extend({root:'/'},this.options,a);this.root=this.options.root;this._wantsHashChange=this.options.hashChange!==false;this._hasHashChange='onhashchange' in window;this._useHashChange=this._wantsHashChange&&this._hasHashChange;this._wantsPushState=!!this.options.pushState;this._hasPushState=!!(this.history&&this.history.pushState);this._usePushState=this._wantsPushState&&this._hasPushState;this.fragment=this.getFragment();this.root=('/'+this.root+'/').replace(J,'/');if(this._wantsHashChange&&this._wantsPushState)if(!this._hasPushState&&!this.atRoot()){var b=this.root.slice(0,-1)||'/';this.location.replace(b+'#'+this.getPath());return true;}else if(this._hasPushState&&this.atRoot())this.navigate(this.getHash(),{replace:true});if(!this._hasHashChange&&this._wantsHashChange&&!this._usePushState){this.iframe=document.createElement('iframe');this.iframe.src='javascript:0';this.iframe.style.display='none';this.iframe.tabIndex=-1;var d=document.body;var e=d.insertBefore(this.iframe,d.firstChild).contentWindow;e.document.open();e.document.close();e.location.hash='#'+this.fragment;}var f=window.addEventListener||function(a,b){return attachEvent('on'+a,b);};if(this._usePushState)f('popstate',this.checkUrl,false);else if(this._useHashChange&&!this.iframe)f('hashchange',this.checkUrl,false);else if(this._wantsHashChange)this._checkUrlInterval=setInterval(this.checkUrl,this.interval);if(!this.options.silent)return this.loadUrl();},stop:function(){var a=window.removeEventListener||function(a,b){return detachEvent('on'+a,b);};if(this._usePushState)a('popstate',this.checkUrl,false);else if(this._useHashChange&&!this.iframe)a('hashchange',this.checkUrl,false);if(this.iframe){document.body.removeChild(this.iframe);this.iframe=null;}if(this._checkUrlInterval)clearInterval(this._checkUrlInterval);H.started=false;},route:function(a,b){this.handlers.unshift({route:a,callback:b});},checkUrl:function(a){var b=this.getFragment();if(b===this.fragment&&this.iframe)b=this.getHash(this.iframe.contentWindow);if(b===this.fragment)return false;if(this.iframe)this.navigate(b);this.loadUrl();},loadUrl:function(a){if(!this.matchRoot())return false;a=this.fragment=this.getFragment(a);return c.any(this.handlers,function(b){if(b.route.test(a)){b.callback(a);return true;}});},navigate:function(a,b){if(!H.started)return false;if(!b||b===true)b={trigger:!!b};a=this.getFragment(a||'');var c=this.root;if(a===''||a.charAt(0)==='?')c=c.slice(0,-1)||'/';var d=c+a;a=this.decodeFragment(a.replace(K,''));if(this.fragment===a)return;this.fragment=a;if(this._usePushState)this.history[b.replace?'replaceState':'pushState']({},document.title,d);else if(this._wantsHashChange){this._updateHash(this.location,a,b.replace);if(this.iframe&&(a!==this.getHash(this.iframe.contentWindow))){var e=this.iframe.contentWindow;if(!b.replace){e.document.open();e.document.close();}this._updateHash(e.location,a,b.replace);}}else return this.location.assign(d);if(b.trigger)return this.loadUrl(a);},_updateHash:function(a,b,c){if(c){var d=a.href.replace(/(javascript:|#).*$/,'');a.replace(d+'#'+b);}else a.hash='#'+b;}});b.history=new H();var L=function(a,b){var d=this;var e;if(a&&c.has(a,'constructor'))e=a.constructor;else e=function(){return d.apply(this,arguments);};c.extend(e,d,b);var f=function(){this.constructor=e;};f.prototype=d.prototype;e.prototype=new f();if(a)c.extend(e.prototype,a);e.__super__=d.prototype;return e;};r.extend=t.extend=C.extend=y.extend=H.extend=L;var M=function(){throw new Error('A "url" property or function must be specified');};var N=function(a,b){var c=b.error;b.error=function(d){if(c)c.call(b.context,a,d,b);a.trigger('error',a,d,b);};};return b;}));(function(a,b){if(typeof define==='function'&&define.amd)define(['backbone','underscore'],function(c,d){return(a.Marionette=a.Mn=b(a,c,d));});else if(typeof exports!=='undefined'){var c=require('backbone');var d=require('underscore');module.exports=b(a,c,d);}else a.Marionette=a.Mn=b(a,a.Backbone,a._);}(this,function(a,b,c){'use strict';(function(a,b){"use strict";var c=a.ChildViewContainer;a.ChildViewContainer=function(a,b){var c=function(a){this._views={};this._indexByModel={};this._indexByCustom={};this._updateLength();b.each(a,this.add,this);};b.extend(c.prototype,{add:function(a,b){var c=a.cid;this._views[c]=a;if(a.model)this._indexByModel[a.model.cid]=c;if(b)this._indexByCustom[b]=c;this._updateLength();return this;},findByModel:function(a){return this.findByModelCid(a.cid);},findByModelCid:function(a){var b=this._indexByModel[a];return this.findByCid(b);},findByCustom:function(a){var b=this._indexByCustom[a];return this.findByCid(b);},findByIndex:function(a){return b.values(this._views)[a];},findByCid:function(a){return this._views[a];},remove:function(a){var c=a.cid;if(a.model)delete this._indexByModel[a.model.cid];b.any(this._indexByCustom,function(a,b){if(a===c){delete this._indexByCustom[b];return true;}},this);delete this._views[c];this._updateLength();return this;},call:function(a){this.apply(a,b.tail(arguments));},apply:function(a,c){b.each(this._views,function(d){if(b.isFunction(d[a]))d[a].apply(d,c||[]);});},_updateLength:function(){this.length=b.size(this._views);}});var d=["forEach","each","map","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","toArray","first","initial","rest","last","without","isEmpty","pluck","reduce"];b.each(d,function(a){c.prototype[a]=function(){var c=b.values(this._views);var d=[c].concat(b.toArray(arguments));return b[a].apply(b,d);};});return c;}(a,b);a.ChildViewContainer.VERSION="0.1.7";a.ChildViewContainer.noConflict=function(){a.ChildViewContainer=c;return this;};return a.ChildViewContainer;})(b,c);(function(a,b){"use strict";var c=a.Wreqr;var d=a.Wreqr={};a.Wreqr.VERSION="1.3.3";a.Wreqr.noConflict=function(){a.Wreqr=c;return this;};d.Handlers=function(a,b){"use strict";var c=function(a){this.options=a;this._wreqrHandlers={};if(b.isFunction(this.initialize))this.initialize(a);};c.extend=a.Model.extend;b.extend(c.prototype,a.Events,{setHandlers:function(a){b.each(a,function(a,c){var d=null;if(b.isObject(a)&&!b.isFunction(a)){d=a.context;a=a.callback;}this.setHandler(c,a,d);},this);},setHandler:function(a,b,c){var d={callback:b,context:c};this._wreqrHandlers[a]=d;this.trigger("handler:add",a,b,c);},hasHandler:function(a){return !!this._wreqrHandlers[a];},getHandler:function(a){var b=this._wreqrHandlers[a];if(!b)return;return function(){return b.callback.apply(b.context,arguments);};},removeHandler:function(a){delete this._wreqrHandlers[a];},removeAllHandlers:function(){this._wreqrHandlers={};}});return c;}(a,b);d.CommandStorage=function(){"use strict";var c=function(a){this.options=a;this._commands={};if(b.isFunction(this.initialize))this.initialize(a);};b.extend(c.prototype,a.Events,{getCommands:function(a){var b=this._commands[a];if(!b){b={command:a,instances:[]};this._commands[a]=b;}return b;},addCommand:function(a,b){var c=this.getCommands(a);c.instances.push(b);},clearCommands:function(a){var b=this.getCommands(a);b.instances=[];}});return c;}();d.Commands=function(a,b){"use strict";return a.Handlers.extend({storageType:a.CommandStorage,constructor:function(b){this.options=b||{};this._initializeStorage(this.options);this.on("handler:add",this._executeCommands,this);a.Handlers.prototype.constructor.apply(this,arguments);},execute:function(a){a=arguments[0];var c=b.rest(arguments);if(this.hasHandler(a))this.getHandler(a).apply(this,c);else this.storage.addCommand(a,c);},_executeCommands:function(a,c,d){var e=this.storage.getCommands(a);b.each(e.instances,function(a){c.apply(d,a);});this.storage.clearCommands(a);},_initializeStorage:function(a){var c;var d=a.storageType||this.storageType;if(b.isFunction(d))c=new d();else c=d;this.storage=c;}});}(d,b);d.RequestResponse=function(a,b){"use strict";return a.Handlers.extend({request:function(a){if(this.hasHandler(a))return this.getHandler(a).apply(this,b.rest(arguments));}});}(d,b);d.EventAggregator=function(a,b){"use strict";var c=function(){};c.extend=a.Model.extend;b.extend(c.prototype,a.Events);return c;}(a,b);d.Channel=function(c){"use strict";var d=function(b){this.vent=new a.Wreqr.EventAggregator();this.reqres=new a.Wreqr.RequestResponse();this.commands=new a.Wreqr.Commands();this.channelName=b;};b.extend(d.prototype,{reset:function(){this.vent.off();this.vent.stopListening();this.reqres.removeAllHandlers();this.commands.removeAllHandlers();return this;},connectEvents:function(a,b){this._connect("vent",a,b);return this;},connectCommands:function(a,b){this._connect("commands",a,b);return this;},connectRequests:function(a,b){this._connect("reqres",a,b);return this;},_connect:function(a,c,d){if(!c)return;d=d||this;var e=a==="vent"?"on":"setHandler";b.each(c,function(c,f){this[a][e](f,b.bind(c,d));},this);}});return d;}(d);d.radio=function(a,b){"use strict";var c=function(){this._channels={};this.vent={};this.commands={};this.reqres={};this._proxyMethods();};b.extend(c.prototype,{channel:function(a){if(!a)throw new Error("Channel must receive a name");return this._getChannel(a);},_getChannel:function(b){var c=this._channels[b];if(!c){c=new a.Channel(b);this._channels[b]=c;}return c;},_proxyMethods:function(){b.each(["vent","commands","reqres"],function(a){b.each(d[a],function(b){this[a][b]=e(this,a,b);},this);},this);}});var d={vent:["on","off","trigger","once","stopListening","listenTo","listenToOnce"],commands:["execute","setHandler","setHandlers","removeHandler","removeAllHandlers"],reqres:["request","setHandler","setHandlers","removeHandler","removeAllHandlers"]};var e=function(a,c,d){return function(e){var f=a._getChannel(e)[c];return f[d].apply(f,b.rest(arguments));};};return new c();}(d,b);return a.Wreqr;})(b,c);var d=a.Marionette;var e=a.Mn;var f=b.Marionette={};f.VERSION='2.4.2';f.noConflict=function(){a.Marionette=d;a.Mn=e;return this;};b.Marionette=f;f.Deferred=b.$.Deferred;f.extend=b.Model.extend;f.isNodeAttached=function(a){return b.$.contains(document.documentElement,a);};f.mergeOptions=function(a,b){if(!a)return;c.extend(this,c.pick(a,b));};f.getOption=function(a,b){if(!a||!b)return;if(a.options&&(a.options[b]!==undefined))return a.options[b];else return a[b];};f.proxyGetOption=function(a){return f.getOption(this,a);};f._getValue=function(a,b,d){if(c.isFunction(a))a=d?a.apply(b,d):a.call(b);return a;};f.normalizeMethods=function(a){return c.reduce(a,function(a,b,d){if(!c.isFunction(b))b=this[b];if(b)a[d]=b;return a;},{},this);};f.normalizeUIString=function(a,b){return a.replace(/@ui\.[a-zA-Z_$0-9]*/g,function(a){return b[a.slice(4)];});};f.normalizeUIKeys=function(a,b){return c.reduce(a,function(a,c,d){var e=f.normalizeUIString(d,b);a[e]=c;return a;},{});};f.normalizeUIValues=function(a,b,d){c.each(a,function(e,g){if(c.isString(e))a[g]=f.normalizeUIString(e,b);else if(c.isObject(e)&&c.isArray(d)){c.extend(e,f.normalizeUIValues(c.pick(e,d),b));c.each(d,function(a){var d=e[a];if(c.isString(d))e[a]=f.normalizeUIString(d,b);});}});return a;};f.actAsCollection=function(a,b){var d=['forEach','each','map','find','detect','filter','select','reject','every','all','some','any','include','contains','invoke','toArray','first','initial','rest','last','without','isEmpty','pluck'];c.each(d,function(d){a[d]=function(){var a=c.values(c.result(this,b));var e=[a].concat(c.toArray(arguments));return c[d].apply(c,e);};});};var g=f.deprecate=function(a,b){if(c.isObject(a))a=(a.prev+' is going to be removed in the future. '+'Please use '+a.next+' instead.'+(a.url?' See: '+a.url:''));if((b===undefined||!b)&&!g._cache[a]){g._warn('Deprecation warning: '+a);g._cache[a]=true;}};g._warn=typeof console!=='undefined'&&(console.warn||console.log)||function(){};g._cache={};f._triggerMethod=(function(){var a=/(^|:)(\w)/gi;function b(a,b,c){return c.toUpperCase();}return function(d,e,f){var g=arguments.length<3;if(g){f=e;e=f[0];}var h='on'+e.replace(a,b);var i=d[h];var j;if(c.isFunction(i))j=i.apply(d,g?c.rest(f):f);if(c.isFunction(d.trigger))if(g+f.length>1)d.trigger.apply(d,g?f:[e].concat(c.drop(f,0)));else d.trigger(e);return j;};})();f.triggerMethod=function(a){return f._triggerMethod(this,arguments);};f.triggerMethodOn=function(a){var b=c.isFunction(a.triggerMethod)?a.triggerMethod:f.triggerMethod;return b.apply(a,c.rest(arguments));};f.MonitorDOMRefresh=function(a){function b(){a._isShown=true;e();}function d(){a._isRendered=true;e();}function e(){if(a._isShown&&a._isRendered&&f.isNodeAttached(a.el))if(c.isFunction(a.triggerMethod))a.triggerMethod('dom:refresh');}a.on({show:b,render:d});};(function(a){'use strict';function b(b,d,e,f){var g=f.split(/\s+/);c.each(g,function(c){var f=b[c];if(!f)throw new a.Error('Method "'+c+'" was configured as an event handler, but does not exist.');b.listenTo(d,e,f);});}function d(a,b,c,d){a.listenTo(b,c,d);}function e(a,b,d,e){var f=e.split(/\s+/);c.each(f,function(c){var e=a[c];a.stopListening(b,d,e);});}function f(a,b,c,d){a.stopListening(b,c,d);}function g(b,d,e,f,g){if(!d||!e)return;if(!c.isObject(e))throw new a.Error({message:'Bindings must be an object or function.',url:'marionette.functions.html#marionettebindentityevents'});e=a._getValue(e,b);c.each(e,function(a,e){if(c.isFunction(a))f(b,d,e,a);else g(b,d,e,a);});}a.bindEntityEvents=function(a,c,e){g(a,c,e,d,b);};a.unbindEntityEvents=function(a,b,c){g(a,b,c,f,e);};a.proxyBindEntityEvents=function(b,c){return a.bindEntityEvents(this,b,c);};a.proxyUnbindEntityEvents=function(b,c){return a.unbindEntityEvents(this,b,c);};})(f);var h=['description','fileName','lineNumber','name','message','number'];f.Error=f.extend.call(Error,{urlRoot:'http://marionettejs.com/docs/v'+f.VERSION+'/',constructor:function(a,b){if(c.isObject(a)){b=a;a=b.message;}else if(!b)b={};var d=Error.call(this,a);c.extend(this,c.pick(d,h),c.pick(b,h));this.captureStackTrace();if(b.url)this.url=this.urlRoot+b.url;},captureStackTrace:function(){if(Error.captureStackTrace)Error.captureStackTrace(this,f.Error);},toString:function(){return this.name+': '+this.message+(this.url?' See: '+this.url:'');}});f.Error.extend=f.extend;f.Callbacks=function(){this._deferred=f.Deferred();this._callbacks=[];};c.extend(f.Callbacks.prototype,{add:function(a,b){var d=c.result(this._deferred,'promise');this._callbacks.push({cb:a,ctx:b});d.then(function(c){if(b)c.context=b;a.call(c.context,c.options);});},run:function(a,b){this._deferred.resolve({options:a,context:b});},reset:function(){var a=this._callbacks;this._deferred=f.Deferred();this._callbacks=[];c.each(a,function(a){this.add(a.cb,a.ctx);},this);}});f.Controller=function(a){this.options=a||{};if(c.isFunction(this.initialize))this.initialize(this.options);};f.Controller.extend=f.extend;c.extend(f.Controller.prototype,b.Events,{destroy:function(){f._triggerMethod(this,'before:destroy',arguments);f._triggerMethod(this,'destroy',arguments);this.stopListening();this.off();return this;},triggerMethod:f.triggerMethod,mergeOptions:f.mergeOptions,getOption:f.proxyGetOption});f.Object=function(a){this.options=c.extend({},c.result(this,'options'),a);this.initialize.apply(this,arguments);};f.Object.extend=f.extend;c.extend(f.Object.prototype,b.Events,{initialize:function(){},destroy:function(){this.triggerMethod('before:destroy');this.triggerMethod('destroy');this.stopListening();return this;},triggerMethod:f.triggerMethod,mergeOptions:f.mergeOptions,getOption:f.proxyGetOption,bindEntityEvents:f.proxyBindEntityEvents,unbindEntityEvents:f.proxyUnbindEntityEvents});f.Region=f.Object.extend({constructor:function(a){this.options=a||{};this.el=this.getOption('el');this.el=this.el instanceof b.$?this.el[0]:this.el;if(!this.el)throw new f.Error({name:'NoElError',message:'An "el" must be specified for a region.'});this.$el=this.getEl(this.el);f.Object.call(this,a);},show:function(a,b){if(!this._ensureElement())return;this._ensureViewIsIntact(a);var d=b||{};var e=a!==this.currentView;var g=!!d.preventDestroy;var h=!!d.forceShow;var i=!!this.currentView;var j=e&&!g;var k=e||h;if(i)this.triggerMethod('before:swapOut',this.currentView,this,b);if(this.currentView)delete this.currentView._parent;if(j)this.empty();else if(i&&k)this.currentView.off('destroy',this.empty,this);if(k){a.once('destroy',this.empty,this);a.render();a._parent=this;if(i)this.triggerMethod('before:swap',a,this,b);this.triggerMethod('before:show',a,this,b);f.triggerMethodOn(a,'before:show',a,this,b);if(i)this.triggerMethod('swapOut',this.currentView,this,b);var l=f.isNodeAttached(this.el);var m=[];var n=c.extend({triggerBeforeAttach:this.triggerBeforeAttach,triggerAttach:this.triggerAttach},d);if(l&&n.triggerBeforeAttach){m=this._displayedViews(a);this._triggerAttach(m,'before:');}this.attachHtml(a);this.currentView=a;if(l&&n.triggerAttach){m=this._displayedViews(a);this._triggerAttach(m);}if(i)this.triggerMethod('swap',a,this,b);this.triggerMethod('show',a,this,b);f.triggerMethodOn(a,'show',a,this,b);return this;}return this;},triggerBeforeAttach:true,triggerAttach:true,_triggerAttach:function(a,b){var d=(b||'')+'attach';c.each(a,function(a){f.triggerMethodOn(a,d,a,this);},this);},_displayedViews:function(a){return c.union([a],c.result(a,'_getNestedViews')||[]);},_ensureElement:function(){if(!c.isObject(this.el)){this.$el=this.getEl(this.el);this.el=this.$el[0];}if(!this.$el||this.$el.length===0)if(this.getOption('allowMissingEl'))return false;else throw new f.Error('An "el" '+this.$el.selector+' must exist in DOM');return true;},_ensureViewIsIntact:function(a){if(!a)throw new f.Error({name:'ViewNotValid',message:'The view passed is undefined and therefore invalid. You must pass a view instance to show.'});if(a.isDestroyed)throw new f.Error({name:'ViewDestroyedError',message:'View (cid: "'+a.cid+'") has already been destroyed and cannot be used.'});},getEl:function(a){return b.$(a,f._getValue(this.options.parentEl,this));},attachHtml:function(a){this.$el.contents().detach();this.el.appendChild(a.el);},empty:function(a){var b=this.currentView;var c=f._getValue(a,'preventDestroy',this);if(!b)return;b.off('destroy',this.empty,this);this.triggerMethod('before:empty',b);if(!c)this._destroyView();this.triggerMethod('empty',b);delete this.currentView;if(c)this.$el.contents().detach();return this;},_destroyView:function(){var a=this.currentView;if(a.destroy&&!a.isDestroyed)a.destroy();else if(a.remove){a.remove();a.isDestroyed=true;}},attachView:function(a){this.currentView=a;return this;},hasView:function(){return !!this.currentView;},reset:function(){this.empty();if(this.$el)this.el=this.$el.selector;delete this.$el;return this;}},{buildRegion:function(a,b){if(c.isString(a))return this._buildRegionFromSelector(a,b);if(a.selector||a.el||a.regionClass)return this._buildRegionFromObject(a,b);if(c.isFunction(a))return this._buildRegionFromRegionClass(a);throw new f.Error({message:'Improper region configuration type.',url:'marionette.region.html#region-configuration-types'});},_buildRegionFromSelector:function(a,b){return new b({el:a});},_buildRegionFromObject:function(a,b){var d=a.regionClass||b;var e=c.omit(a,'selector','regionClass');if(a.selector&&!e.el)e.el=a.selector;return new d(e);},_buildRegionFromRegionClass:function(a){return new a();}});f.RegionManager=f.Controller.extend({constructor:function(a){this._regions={};this.length=0;f.Controller.call(this,a);this.addRegions(this.getOption('regions'));},addRegions:function(a,b){a=f._getValue(a,this,arguments);return c.reduce(a,function(a,d,e){if(c.isString(d))d={selector:d};if(d.selector)d=c.defaults({},d,b);a[e]=this.addRegion(e,d);return a;},{},this);},addRegion:function(a,b){var c;if(b instanceof f.Region)c=b;else c=f.Region.buildRegion(b,f.Region);this.triggerMethod('before:add:region',a,c);c._parent=this;this._store(a,c);this.triggerMethod('add:region',a,c);return c;},get:function(a){return this._regions[a];},getRegions:function(){return c.clone(this._regions);},removeRegion:function(a){var b=this._regions[a];this._remove(a,b);return b;},removeRegions:function(){var a=this.getRegions();c.each(this._regions,function(a,b){this._remove(b,a);},this);return a;},emptyRegions:function(){var a=this.getRegions();c.invoke(a,'empty');return a;},destroy:function(){this.removeRegions();return f.Controller.prototype.destroy.apply(this,arguments);},_store:function(a,b){if(!this._regions[a])this.length++;this._regions[a]=b;},_remove:function(a,b){this.triggerMethod('before:remove:region',a,b);b.empty();b.stopListening();delete b._parent;delete this._regions[a];this.length--;this.triggerMethod('remove:region',a,b);}});f.actAsCollection(f.RegionManager.prototype,'_regions');f.TemplateCache=function(a){this.templateId=a;};c.extend(f.TemplateCache,{templateCaches:{},get:function(a,b){var c=this.templateCaches[a];if(!c){c=new f.TemplateCache(a);this.templateCaches[a]=c;}return c.load(b);},clear:function(){var a;var b=c.toArray(arguments);var d=b.length;if(d>0)for(a=0;a<d;a++)delete this.templateCaches[b[a]];else this.templateCaches={};}});c.extend(f.TemplateCache.prototype,{load:function(a){if(this.compiledTemplate)return this.compiledTemplate;var b=this.loadTemplate(this.templateId,a);this.compiledTemplate=this.compileTemplate(b,a);return this.compiledTemplate;},loadTemplate:function(a,c){var d=b.$(a).html();if(!d||d.length===0)throw new f.Error({name:'NoTemplateError',message:'Could not find template: "'+a+'"'});return d;},compileTemplate:function(a,b){return c.template(a,b);}});f.Renderer={render:function(a,b){if(!a)throw new f.Error({name:'TemplateNotFoundError',message:'Cannot render the template since its false, null or undefined.'});var d=c.isFunction(a)?a:f.TemplateCache.get(a);return d(b);}};f.View=b.View.extend({isDestroyed:false,constructor:function(a){c.bindAll(this,'render');a=f._getValue(a,this);this.options=c.extend({},c.result(this,'options'),a);this._behaviors=f.Behaviors(this);b.View.call(this,this.options);f.MonitorDOMRefresh(this);},getTemplate:function(){return this.getOption('template');},serializeModel:function(a){return a.toJSON.apply(a,c.rest(arguments));},mixinTemplateHelpers:function(a){a=a||{};var b=this.getOption('templateHelpers');b=f._getValue(b,this);return c.extend(a,b);},normalizeUIKeys:function(a){var b=c.result(this,'_uiBindings');return f.normalizeUIKeys(a,b||c.result(this,'ui'));},normalizeUIValues:function(a,b){var d=c.result(this,'ui');var e=c.result(this,'_uiBindings');return f.normalizeUIValues(a,e||d,b);},configureTriggers:function(){if(!this.triggers)return;var a=this.normalizeUIKeys(c.result(this,'triggers'));return c.reduce(a,function(a,b,c){a[c]=this._buildViewTrigger(b);return a;},{},this);},delegateEvents:function(a){this._delegateDOMEvents(a);this.bindEntityEvents(this.model,this.getOption('modelEvents'));this.bindEntityEvents(this.collection,this.getOption('collectionEvents'));c.each(this._behaviors,function(a){a.bindEntityEvents(this.model,a.getOption('modelEvents'));a.bindEntityEvents(this.collection,a.getOption('collectionEvents'));},this);return this;},_delegateDOMEvents:function(a){var d=f._getValue(a||this.events,this);d=this.normalizeUIKeys(d);if(c.isUndefined(a))this.events=d;var e={};var g=c.result(this,'behaviorEvents')||{};var h=this.configureTriggers();var i=c.result(this,'behaviorTriggers')||{};c.extend(e,g,d,h,i);b.View.prototype.delegateEvents.call(this,e);},undelegateEvents:function(){b.View.prototype.undelegateEvents.apply(this,arguments);this.unbindEntityEvents(this.model,this.getOption('modelEvents'));this.unbindEntityEvents(this.collection,this.getOption('collectionEvents'));c.each(this._behaviors,function(a){a.unbindEntityEvents(this.model,a.getOption('modelEvents'));a.unbindEntityEvents(this.collection,a.getOption('collectionEvents'));},this);return this;},_ensureViewIsIntact:function(){if(this.isDestroyed)throw new f.Error({name:'ViewDestroyedError',message:'View (cid: "'+this.cid+'") has already been destroyed and cannot be used.'});},destroy:function(){if(this.isDestroyed)return this;var a=c.toArray(arguments);this.triggerMethod.apply(this,['before:destroy'].concat(a));this.isDestroyed=true;this.triggerMethod.apply(this,['destroy'].concat(a));this.unbindUIElements();this.isRendered=false;this.remove();c.invoke(this._behaviors,'destroy',a);return this;},bindUIElements:function(){this._bindUIElements();c.invoke(this._behaviors,this._bindUIElements);},_bindUIElements:function(){if(!this.ui)return;if(!this._uiBindings)this._uiBindings=this.ui;var a=c.result(this,'_uiBindings');this.ui={};c.each(a,function(a,b){this.ui[b]=this.$(a);},this);},unbindUIElements:function(){this._unbindUIElements();c.invoke(this._behaviors,this._unbindUIElements);},_unbindUIElements:function(){if(!this.ui||!this._uiBindings)return;c.each(this.ui,function(a,b){delete this.ui[b];},this);this.ui=this._uiBindings;delete this._uiBindings;},_buildViewTrigger:function(a){var b=c.isObject(a);var d=c.defaults({},(b?a:{}),{preventDefault:true,stopPropagation:true});var e=b?d.event:a;return function(a){if(a){if(a.preventDefault&&d.preventDefault)a.preventDefault();if(a.stopPropagation&&d.stopPropagation)a.stopPropagation();}var b={view:this,model:this.model,collection:this.collection};this.triggerMethod(e,b);};},setElement:function(){var a=b.View.prototype.setElement.apply(this,arguments);c.invoke(this._behaviors,'proxyViewProperties',this);return a;},triggerMethod:function(){var a=f._triggerMethod(this,arguments);this._triggerEventOnBehaviors(arguments);this._triggerEventOnParentLayout(arguments[0],c.rest(arguments));return a;},_triggerEventOnBehaviors:function(a){var b=f._triggerMethod;var c=this._behaviors;for(var d=0,e=c&&c.length;d<e;d++)b(c[d],a);},_triggerEventOnParentLayout:function(a,b){var d=this._parentLayoutView();if(!d)return;var e=f.getOption(d,'childViewEventPrefix');var g=e+':'+a;f._triggerMethod(d,[g,this].concat(b));var h=f.getOption(d,'childEvents');var i=d.normalizeMethods(h);if(!!i&&c.isFunction(i[a]))i[a].apply(d,[this].concat(b));},_getImmediateChildren:function(){return [];},_getNestedViews:function(){var a=this._getImmediateChildren();if(!a.length)return a;return c.reduce(a,function(a,b){if(!b._getNestedViews)return a;return a.concat(b._getNestedViews());},a);},_getAncestors:function(){var a=[];var b=this._parent;while(b){a.push(b);b=b._parent;}return a;},_parentLayoutView:function(){var a=this._getAncestors();return c.find(a,function(a){return a instanceof f.LayoutView;});},normalizeMethods:f.normalizeMethods,mergeOptions:f.mergeOptions,getOption:f.proxyGetOption,bindEntityEvents:f.proxyBindEntityEvents,unbindEntityEvents:f.proxyUnbindEntityEvents});f.ItemView=f.View.extend({constructor:function(){f.View.apply(this,arguments);},serializeData:function(){if(!this.model&&!this.collection)return{};var a=[this.model||this.collection];if(arguments.length)a.push.apply(a,arguments);if(this.model)return this.serializeModel.apply(this,a);else return{items:this.serializeCollection.apply(this,a)};},serializeCollection:function(a){return a.toJSON.apply(a,c.rest(arguments));},render:function(){this._ensureViewIsIntact();this.triggerMethod('before:render',this);this._renderTemplate();this.isRendered=true;this.bindUIElements();this.triggerMethod('render',this);return this;},_renderTemplate:function(){var a=this.getTemplate();if(a===false)return;if(!a)throw new f.Error({name:'UndefinedTemplateError',message:'Cannot render the template since it is null or undefined.'});var b=this.mixinTemplateHelpers(this.serializeData());var c=f.Renderer.render(a,b,this);this.attachElContent(c);return this;},attachElContent:function(a){this.$el.html(a);return this;}});f.CollectionView=f.View.extend({childViewEventPrefix:'childview',sort:true,constructor:function(a){this.once('render',this._initialEvents);this._initChildViewStorage();f.View.apply(this,arguments);this.on({'before:show':this._onBeforeShowCalled,'show':this._onShowCalled,'before:attach':this._onBeforeAttachCalled,'attach':this._onAttachCalled});this.initRenderBuffer();},initRenderBuffer:function(){this._bufferedChildren=[];},startBuffering:function(){this.initRenderBuffer();this.isBuffering=true;},endBuffering:function(){var a=this._isShown&&f.isNodeAttached(this.el);var b;this.isBuffering=false;if(this._isShown)this._triggerMethodMany(this._bufferedChildren,this,'before:show');if(a&&this._triggerBeforeAttach){b=this._getNestedViews();this._triggerMethodMany(b,this,'before:attach');}this.attachBuffer(this,this._createBuffer());if(a&&this._triggerAttach){b=this._getNestedViews();this._triggerMethodMany(b,this,'attach');}if(this._isShown)this._triggerMethodMany(this._bufferedChildren,this,'show');this.initRenderBuffer();},_triggerMethodMany:function(a,b,d){var e=c.drop(arguments,3);c.each(a,function(a){f.triggerMethodOn.apply(a,[a,d,a,b].concat(e));});},_initialEvents:function(){if(this.collection){this.listenTo(this.collection,'add',this._onCollectionAdd);this.listenTo(this.collection,'remove',this._onCollectionRemove);this.listenTo(this.collection,'reset',this.render);if(this.getOption('sort'))this.listenTo(this.collection,'sort',this._sortViews);}},_onCollectionAdd:function(a,b,d){var e;if(d.at!==undefined)e=d.at;else e=c.indexOf(this._filteredSortedModels(),a);if(this._shouldAddChild(a,e)){this.destroyEmptyView();var f=this.getChildView(a);this.addChild(a,f,e);}},_onCollectionRemove:function(a){var b=this.children.findByModel(a);this.removeChildView(b);this.checkEmpty();},_onBeforeShowCalled:function(){this._triggerBeforeAttach=this._triggerAttach=false;this.children.each(function(a){f.triggerMethodOn(a,'before:show',a);});},_onShowCalled:function(){this.children.each(function(a){f.triggerMethodOn(a,'show',a);});},_onBeforeAttachCalled:function(){this._triggerBeforeAttach=true;},_onAttachCalled:function(){this._triggerAttach=true;},render:function(){this._ensureViewIsIntact();this.triggerMethod('before:render',this);this._renderChildren();this.isRendered=true;this.triggerMethod('render',this);return this;},reorder:function(){var a=this.children;var b=this._filteredSortedModels();var d=c.find(b,function(b){return !a.findByModel(b);});if(d)this.render();else{var e=c.map(b,function(b,c){var d=a.findByModel(b);d._index=c;return d.el;});this.triggerMethod('before:reorder');this._appendReorderedChildren(e);this.triggerMethod('reorder');}},resortView:function(){if(f.getOption(this,'reorderOnSort'))this.reorder();else this.render();},_sortViews:function(){var a=this._filteredSortedModels();var b=c.find(a,function(a,b){var c=this.children.findByModel(a);return !c||c._index!==b;},this);if(b)this.resortView();},_emptyViewIndex:-1,_appendReorderedChildren:function(a){this.$el.append(a);},_renderChildren:function(){this.destroyEmptyView();this.destroyChildren({checkEmpty:false});if(this.isEmpty(this.collection))this.showEmptyView();else{this.triggerMethod('before:render:collection',this);this.startBuffering();this.showCollection();this.endBuffering();this.triggerMethod('render:collection',this);if(this.children.isEmpty())this.showEmptyView();}},showCollection:function(){var a;var b=this._filteredSortedModels();c.each(b,function(b,c){a=this.getChildView(b);this.addChild(b,a,c);},this);},_filteredSortedModels:function(){var a;var b=this.getViewComparator();if(b)if(c.isString(b)||b.length===1)a=this.collection.sortBy(b,this);else a=c.clone(this.collection.models).sort(c.bind(b,this));else a=this.collection.models;if(this.getOption('filter'))a=c.filter(a,function(a,b){return this._shouldAddChild(a,b);},this);return a;},showEmptyView:function(){var a=this.getEmptyView();if(a&&!this._showingEmptyView){this.triggerMethod('before:render:empty');this._showingEmptyView=true;var c=new b.Model();this.addEmptyView(c,a);this.triggerMethod('render:empty');}},destroyEmptyView:function(){if(this._showingEmptyView){this.triggerMethod('before:remove:empty');this.destroyChildren();delete this._showingEmptyView;this.triggerMethod('remove:empty');}},getEmptyView:function(){return this.getOption('emptyView');},addEmptyView:function(a,b){var d=this._isShown&&!this.isBuffering&&f.isNodeAttached(this.el);var e;var g=this.getOption('emptyViewOptions')||this.getOption('childViewOptions');if(c.isFunction(g))g=g.call(this,a,this._emptyViewIndex);var h=this.buildChildView(a,b,g);h._parent=this;this.proxyChildEvents(h);if(this._isShown)f.triggerMethodOn(h,'before:show',h);this.children.add(h);if(d&&this._triggerBeforeAttach){e=[h].concat(h._getNestedViews());h.once('render',function(){this._triggerMethodMany(e,this,'before:attach');},this);}this.renderChildView(h,this._emptyViewIndex);if(d&&this._triggerAttach){e=[h].concat(h._getNestedViews());this._triggerMethodMany(e,this,'attach');}if(this._isShown)f.triggerMethodOn(h,'show',h);},getChildView:function(a){var b=this.getOption('childView');if(!b)throw new f.Error({name:'NoChildViewError',message:'A "childView" must be specified'});return b;},addChild:function(a,b,c){var d=this.getOption('childViewOptions');d=f._getValue(d,this,[a,c]);var e=this.buildChildView(a,b,d);this._updateIndices(e,true,c);this.triggerMethod('before:add:child',e);this._addChildView(e,c);this.triggerMethod('add:child',e);e._parent=this;return e;},_updateIndices:function(a,b,c){if(!this.getOption('sort'))return;if(b)a._index=c;this.children.each(function(c){if(c._index>=a._index)c._index+=b?1:-1;});},_addChildView:function(a,b){var c=this._isShown&&!this.isBuffering&&f.isNodeAttached(this.el);var d;this.proxyChildEvents(a);if(this._isShown&&!this.isBuffering)f.triggerMethodOn(a,'before:show',a);this.children.add(a);if(c&&this._triggerBeforeAttach){d=[a].concat(a._getNestedViews());a.once('render',function(){this._triggerMethodMany(d,this,'before:attach');},this);}this.renderChildView(a,b);if(c&&this._triggerAttach){d=[a].concat(a._getNestedViews());this._triggerMethodMany(d,this,'attach');}if(this._isShown&&!this.isBuffering)f.triggerMethodOn(a,'show',a);},renderChildView:function(a,b){a.render();this.attachHtml(this,a,b);return a;},buildChildView:function(a,b,d){var e=c.extend({model:a},d);return new b(e);},removeChildView:function(a){if(a){this.triggerMethod('before:remove:child',a);if(a.destroy)a.destroy();else if(a.remove)a.remove();delete a._parent;this.stopListening(a);this.children.remove(a);this.triggerMethod('remove:child',a);this._updateIndices(a,false);}return a;},isEmpty:function(){return !this.collection||this.collection.length===0;},checkEmpty:function(){if(this.isEmpty(this.collection))this.showEmptyView();},attachBuffer:function(a,b){a.$el.append(b);},_createBuffer:function(){var a=document.createDocumentFragment();c.each(this._bufferedChildren,function(b){a.appendChild(b.el);});return a;},attachHtml:function(a,b,c){if(a.isBuffering)a._bufferedChildren.splice(c,0,b);else if(!a._insertBefore(b,c))a._insertAfter(b);},_insertBefore:function(a,b){var c;var d=this.getOption('sort')&&(b<this.children.length-1);if(d)c=this.children.find(function(a){return a._index===b+1;});if(c){c.$el.before(a.el);return true;}return false;},_insertAfter:function(a){this.$el.append(a.el);},_initChildViewStorage:function(){this.children=new b.ChildViewContainer();},destroy:function(){if(this.isDestroyed)return this;this.triggerMethod('before:destroy:collection');this.destroyChildren({checkEmpty:false});this.triggerMethod('destroy:collection');return f.View.prototype.destroy.apply(this,arguments);},destroyChildren:function(a){var b=a||{};var d=true;var e=this.children.map(c.identity);if(!c.isUndefined(b.checkEmpty))d=b.checkEmpty;this.children.each(this.removeChildView,this);if(d)this.checkEmpty();return e;},_shouldAddChild:function(a,b){var d=this.getOption('filter');return !c.isFunction(d)||d.call(this,a,b,this.collection);},proxyChildEvents:function(a){var b=this.getOption('childViewEventPrefix');this.listenTo(a,'all',function(){var d=c.toArray(arguments);var e=d[0];var f=this.normalizeMethods(c.result(this,'childEvents'));d[0]=b+':'+e;d.splice(1,0,a);if(typeof f!=='undefined'&&c.isFunction(f[e]))f[e].apply(this,d.slice(1));this.triggerMethod.apply(this,d);});},_getImmediateChildren:function(){return c.values(this.children._views);},getViewComparator:function(){return this.getOption('viewComparator');}});f.CompositeView=f.CollectionView.extend({constructor:function(){f.CollectionView.apply(this,arguments);},_initialEvents:function(){if(this.collection){this.listenTo(this.collection,'add',this._onCollectionAdd);this.listenTo(this.collection,'remove',this._onCollectionRemove);this.listenTo(this.collection,'reset',this._renderChildren);if(this.getOption('sort'))this.listenTo(this.collection,'sort',this._sortViews);}},getChildView:function(a){var b=this.getOption('childView')||this.constructor;return b;},serializeData:function(){var a={};if(this.model)a=c.partial(this.serializeModel,this.model).apply(this,arguments);return a;},render:function(){this._ensureViewIsIntact();this._isRendering=true;this.resetChildViewContainer();this.triggerMethod('before:render',this);this._renderTemplate();this._renderChildren();this._isRendering=false;this.isRendered=true;this.triggerMethod('render',this);return this;},_renderChildren:function(){if(this.isRendered||this._isRendering)f.CollectionView.prototype._renderChildren.call(this);},_renderTemplate:function(){var a={};a=this.serializeData();a=this.mixinTemplateHelpers(a);this.triggerMethod('before:render:template');var b=this.getTemplate();var c=f.Renderer.render(b,a,this);this.attachElContent(c);this.bindUIElements();this.triggerMethod('render:template');},attachElContent:function(a){this.$el.html(a);return this;},attachBuffer:function(a,b){var c=this.getChildViewContainer(a);c.append(b);},_insertAfter:function(a){var b=this.getChildViewContainer(this,a);b.append(a.el);},_appendReorderedChildren:function(a){var b=this.getChildViewContainer(this);b.append(a);},getChildViewContainer:function(a,b){if(!!a.$childViewContainer)return a.$childViewContainer;var c;var d=f.getOption(a,'childViewContainer');if(d){var e=f._getValue(d,a);if(e.charAt(0)==='@'&&a.ui)c=a.ui[e.substr(4)];else c=a.$(e);if(c.length<=0)throw new f.Error({name:'ChildViewContainerMissingError',message:'The specified "childViewContainer" was not found: '+a.childViewContainer});}else c=a.$el;a.$childViewContainer=c;return c;},resetChildViewContainer:function(){if(this.$childViewContainer)this.$childViewContainer=undefined;}});f.LayoutView=f.ItemView.extend({regionClass:f.Region,options:{destroyImmediate:false},childViewEventPrefix:'childview',constructor:function(a){a=a||{};this._firstRender=true;this._initializeRegions(a);f.ItemView.call(this,a);},render:function(){this._ensureViewIsIntact();if(this._firstRender)this._firstRender=false;else this._reInitializeRegions();return f.ItemView.prototype.render.apply(this,arguments);},destroy:function(){if(this.isDestroyed)return this;if(this.getOption('destroyImmediate')===true)this.$el.remove();this.regionManager.destroy();return f.ItemView.prototype.destroy.apply(this,arguments);},showChildView:function(a,b){return this.getRegion(a).show(b);},getChildView:function(a){return this.getRegion(a).currentView;},addRegion:function(a,b){var c={};c[a]=b;return this._buildRegions(c)[a];},addRegions:function(a){this.regions=c.extend({},this.regions,a);return this._buildRegions(a);},removeRegion:function(a){delete this.regions[a];return this.regionManager.removeRegion(a);},getRegion:function(a){return this.regionManager.get(a);},getRegions:function(){return this.regionManager.getRegions();},_buildRegions:function(a){var b={regionClass:this.getOption('regionClass'),parentEl:c.partial(c.result,this,'el')};return this.regionManager.addRegions(a,b);},_initializeRegions:function(a){var b;this._initRegionManager();b=f._getValue(this.regions,this,[a])||{};var d=this.getOption.call(a,'regions');d=f._getValue(d,this,[a]);c.extend(b,d);b=this.normalizeUIValues(b,['selector','el']);this.addRegions(b);},_reInitializeRegions:function(){this.regionManager.invoke('reset');},getRegionManager:function(){return new f.RegionManager();},_initRegionManager:function(){this.regionManager=this.getRegionManager();this.regionManager._parent=this;this.listenTo(this.regionManager,'before:add:region',function(a){this.triggerMethod('before:add:region',a);});this.listenTo(this.regionManager,'add:region',function(a,b){this[a]=b;this.triggerMethod('add:region',a,b);});this.listenTo(this.regionManager,'before:remove:region',function(a){this.triggerMethod('before:remove:region',a);});this.listenTo(this.regionManager,'remove:region',function(a,b){delete this[a];this.triggerMethod('remove:region',a,b);});},_getImmediateChildren:function(){return c.chain(this.regionManager.getRegions()).pluck('currentView').compact().value();}});f.Behavior=f.Object.extend({constructor:function(a,b){this.view=b;this.defaults=c.result(this,'defaults')||{};this.options=c.extend({},this.defaults,a);this.ui=c.extend({},c.result(b,'ui'),c.result(this,'ui'));f.Object.apply(this,arguments);},$:function(){return this.view.$.apply(this.view,arguments);},destroy:function(){this.stopListening();return this;},proxyViewProperties:function(a){this.$el=a.$el;this.el=a.el;}});f.Behaviors=(function(a,b){var c=/^(\S+)\s*(.*)$/;function d(a,c){if(!b.isObject(a.behaviors))return{};c=d.parseBehaviors(a,c||b.result(a,'behaviors'));d.wrap(a,c,b.keys(e));return c;}var e={behaviorTriggers:function(a,b){var c=new f(this,b);return c.buildBehaviorTriggers();},behaviorEvents:function(d,e){var f={};b.each(e,function(d,e){var h={};var i=b.clone(b.result(d,'events'))||{};i=a.normalizeUIKeys(i,g(d));var j=0;b.each(i,function(a,f){var g=f.match(c);var i=g[1]+'.'+[this.cid,e,j++,' '].join('');var k=g[2];var l=i+k;var m=b.isFunction(a)?a:d[a];h[l]=b.bind(m,d);},this);f=b.extend(f,h);},this);return f;}};b.extend(d,{behaviorsLookup:function(){throw new a.Error({message:'You must define where your behaviors are stored.',url:'marionette.behaviors.html#behaviorslookup'});},getBehaviorClass:function(b,c){if(b.behaviorClass)return b.behaviorClass;return a._getValue(d.behaviorsLookup,this,[b,c])[c];},parseBehaviors:function(a,c){return b.chain(c).map(function(c,e){var f=d.getBehaviorClass(c,e);var g=new f(c,a);var h=d.parseBehaviors(a,b.result(g,'behaviors'));return [g].concat(h);}).flatten().value();},wrap:function(a,c,d){b.each(d,function(d){a[d]=b.partial(e[d],a[d],c);});}});function f(a,b){this._view=a;this._behaviors=b;this._triggers={};}b.extend(f.prototype,{buildBehaviorTriggers:function(){b.each(this._behaviors,this._buildTriggerHandlersForBehavior,this);return this._triggers;},_buildTriggerHandlersForBehavior:function(c,d){var e=b.clone(b.result(c,'triggers'))||{};e=a.normalizeUIKeys(e,g(c));b.each(e,b.bind(this._setHandlerForBehavior,this,c,d));},_setHandlerForBehavior:function(a,b,c,d){var e=d.replace(/^\S+/,function(a){return a+'.'+'behaviortriggers'+b;});this._triggers[e]=this._view._buildViewTrigger(c);}});function g(a){return a._uiBindings||a.ui;}return d;})(f,c);f.AppRouter=b.Router.extend({constructor:function(a){this.options=a||{};b.Router.apply(this,arguments);var c=this.getOption('appRoutes');var d=this._getController();this.processAppRoutes(d,c);this.on('route',this._processOnRoute,this);},appRoute:function(a,b){var c=this._getController();this._addAppRoute(c,a,b);},_processOnRoute:function(a,b){if(c.isFunction(this.onRoute)){var d=c.invert(this.getOption('appRoutes'))[a];this.onRoute(a,d,b);}},processAppRoutes:function(a,b){if(!b)return;var d=c.keys(b).reverse();c.each(d,function(c){this._addAppRoute(a,c,b[c]);},this);},_getController:function(){return this.getOption('controller');},_addAppRoute:function(a,b,d){var e=a[d];if(!e)throw new f.Error('Method "'+d+'" was not found on the controller');this.route(b,d,c.bind(e,a));},mergeOptions:f.mergeOptions,getOption:f.proxyGetOption,triggerMethod:f.triggerMethod,bindEntityEvents:f.proxyBindEntityEvents,unbindEntityEvents:f.proxyUnbindEntityEvents});f.Application=f.Object.extend({constructor:function(a){this._initializeRegions(a);this._initCallbacks=new f.Callbacks();this.submodules={};c.extend(this,a);this._initChannel();f.Object.call(this,a);},execute:function(){this.commands.execute.apply(this.commands,arguments);},request:function(){return this.reqres.request.apply(this.reqres,arguments);},addInitializer:function(a){this._initCallbacks.add(a);},start:function(a){this.triggerMethod('before:start',a);this._initCallbacks.run(a,this);this.triggerMethod('start',a);},addRegions:function(a){return this._regionManager.addRegions(a);},emptyRegions:function(){return this._regionManager.emptyRegions();},removeRegion:function(a){return this._regionManager.removeRegion(a);},getRegion:function(a){return this._regionManager.get(a);},getRegions:function(){return this._regionManager.getRegions();},module:function(a,b){var d=f.Module.getClass(b);var e=c.toArray(arguments);e.unshift(this);return d.create.apply(d,e);},getRegionManager:function(){return new f.RegionManager();},_initializeRegions:function(a){var b=c.isFunction(this.regions)?this.regions(a):this.regions||{};this._initRegionManager();var d=f.getOption(a,'regions');if(c.isFunction(d))d=d.call(this,a);c.extend(b,d);this.addRegions(b);return this;},_initRegionManager:function(){this._regionManager=this.getRegionManager();this._regionManager._parent=this;this.listenTo(this._regionManager,'before:add:region',function(){f._triggerMethod(this,'before:add:region',arguments);});this.listenTo(this._regionManager,'add:region',function(a,b){this[a]=b;f._triggerMethod(this,'add:region',arguments);});this.listenTo(this._regionManager,'before:remove:region',function(){f._triggerMethod(this,'before:remove:region',arguments);});this.listenTo(this._regionManager,'remove:region',function(a){delete this[a];f._triggerMethod(this,'remove:region',arguments);});},_initChannel:function(){this.channelName=c.result(this,'channelName')||'global';this.channel=c.result(this,'channel')||b.Wreqr.radio.channel(this.channelName);this.vent=c.result(this,'vent')||this.channel.vent;this.commands=c.result(this,'commands')||this.channel.commands;this.reqres=c.result(this,'reqres')||this.channel.reqres;}});f.Module=function(a,b,d){this.moduleName=a;this.options=c.extend({},this.options,d);this.initialize=d.initialize||this.initialize;this.submodules={};this._setupInitializersAndFinalizers();this.app=b;if(c.isFunction(this.initialize))this.initialize(a,b,this.options);};f.Module.extend=f.extend;c.extend(f.Module.prototype,b.Events,{startWithParent:true,initialize:function(){},addInitializer:function(a){this._initializerCallbacks.add(a);},addFinalizer:function(a){this._finalizerCallbacks.add(a);},start:function(a){if(this._isInitialized)return;c.each(this.submodules,function(b){if(b.startWithParent)b.start(a);});this.triggerMethod('before:start',a);this._initializerCallbacks.run(a,this);this._isInitialized=true;this.triggerMethod('start',a);},stop:function(){if(!this._isInitialized)return;this._isInitialized=false;this.triggerMethod('before:stop');c.invoke(this.submodules,'stop');this._finalizerCallbacks.run(undefined,this);this._initializerCallbacks.reset();this._finalizerCallbacks.reset();this.triggerMethod('stop');},addDefinition:function(a,b){this._runModuleDefinition(a,b);},_runModuleDefinition:function(a,d){if(!a)return;var e=c.flatten([this,this.app,b,f,b.$,c,d]);a.apply(this,e);},_setupInitializersAndFinalizers:function(){this._initializerCallbacks=new f.Callbacks();this._finalizerCallbacks=new f.Callbacks();},triggerMethod:f.triggerMethod});c.extend(f.Module,{create:function(a,b,d){var e=a;var f=c.drop(arguments,3);b=b.split('.');var g=b.length;var h=[];h[g-1]=d;c.each(b,function(b,c){var g=e;e=this._getModule(g,b,a,d);this._addModuleDefinition(g,e,h[c],f);},this);return e;},_getModule:function(a,b,d,e,f){var g=c.extend({},e);var h=this.getClass(e);var i=a[b];if(!i){i=new h(b,d,g);a[b]=i;a.submodules[b]=i;}return i;},getClass:function(a){var b=f.Module;if(!a)return b;if(a.prototype instanceof b)return a;return a.moduleClass||b;},_addModuleDefinition:function(a,b,c,d){var e=this._getDefine(c);var f=this._getStartWithParent(c,b);if(e)b.addDefinition(e,d);this._addStartWithParent(a,b,f);},_getStartWithParent:function(a,b){var d;if(c.isFunction(a)&&(a.prototype instanceof f.Module)){d=b.constructor.prototype.startWithParent;return c.isUndefined(d)?true:d;}if(c.isObject(a)){d=a.startWithParent;return c.isUndefined(d)?true:d;}return true;},_getDefine:function(a){if(c.isFunction(a)&&!(a.prototype instanceof f.Module))return a;if(c.isObject(a))return a.define;return null;},_addStartWithParent:function(a,b,c){b.startWithParent=b.startWithParent&&c;if(!b.startWithParent||!!b.startWithParentIsConfigured)return;b.startWithParentIsConfigured=true;a.addInitializer(function(a){if(b.startWithParent)b.start(a);});}});return f;}));(function(a){if(typeof define==='function'&&define.amd)define(['underscore','backbone','exports'],a);else if(typeof exports==='object')a(require('underscore'),require('backbone'),exports);else a(_,Backbone,{});}(function(a,b,c){c._handlers=[];c.addHandler=function(b){b=a.map(a.flatten([b]),function(b){return a.extend({updateModel:true,updateView:true,updateMethod:'text'},b);});this._handlers=this._handlers.concat(b);};c.ViewMixin={_modelBindings:null,unstickit:function(b,c){if(a.isObject(c)){a.each(a.keys(c),function(a){this.unstickit(b,a);},this);return;}var d=[],e=[];a.each(this._modelBindings,function(a,f){if(b&&a.model!==b)return;if(c&&a.config.selector!=c)return;e.push(a.config._destroy);a.model.off(a.event,a.fn);d.push(a.model);delete this._modelBindings[f];},this);a.invoke(a.uniq(d),'trigger','stickit:unstuck',this.cid);a.each(a.uniq(e),function(a){a.call(this);},this);this._modelBindings=a.compact(this._modelBindings);this.$el.off('.stickit'+(b?'.'+b.cid:''),c);},stickit:function(b,c){var d=b||this.model,e=c||a.result(this,"bindings")||{};this._modelBindings||(this._modelBindings=[]);this.addBinding(d,e);var f=this.remove;if(!f.stickitWrapped)this.remove=function(){var a=this;this.unstickit();if(f)a=f.apply(this,arguments);return a;};this.remove.stickitWrapped=true;},addBinding:function(b,c,d){var f,o,p,q,r,s=b||this.model,t='.stickit.'+s.cid,u=d||{},v=a.uniqueId();if(a.isString(c))r=c;else{var w=c;a.each(w,function(a,b){this.addBinding(s,b,w[b]);},this);return;}f=r===':el'?this.$el:this.$(r);this.unstickit(s,r);if(!f.length)return;if(a.isString(u))u={observe:u};if(a.isFunction(u.observe))u.observe=u.observe.call(this);q=k(f,u);q.selector=r;p=q.observe;q.bindId=v;q.view=this;o=a.extend({stickitChange:q},q.setOptions);q._destroy=function(){e(this,q.destroy,f,s,q);};l(this,f,q,s,p);m(this,f,q,s,p);if(p){a.each(q.events,function(b){var c=b+t;var d=function(b){var c=q.getVal.call(this,f,b,q,a.rest(arguments));if(g(this,q.updateModel,c,b,q))i(s,p,c,o,this,q);};d=a.bind(d,this);if(r===':el')this.$el.on(c,d);else this.$el.on(c,r,d);},this);a.each(a.flatten([p]),function(a){h(s,this,'change:'+a,q,function(a,b,c){var d=c&&c.stickitChange&&c.stickitChange.bindId||null;if(d!==v)n(this,f,q,j(a,p,q,this),a);});},this);n(this,f,q,j(s,p,q,this),s,true);}e(this,q.initialize,f,s,q);}};a.extend(b.View.prototype,c.ViewMixin);var d=function(b,c){var d=(c||'').split('.');var e=a.reduce(d,function(a,b){return a[b];},b);return e==null?b:e;};var e=function(b,c){if(c)return(a.isString(c)?d(b,c):c).apply(b,a.rest(arguments,2));};var f=function(a){return a.find('option').not(function(){return !this.selected;});};var g=function(b,c){if(a.isBoolean(c))return c;else if(a.isFunction(c)||a.isString(c))return e.apply(this,arguments);return false;};var h=function(a,b,c,d,e){a.on(c,e,b);b._modelBindings.push({model:a,event:c,fn:e,config:d});};var i=function(b,c,d,f,g,h){var i={};if(h.onSet)d=e(g,h.onSet,d,h);if(h.set)e(g,h.set,c,d,f,h);else{i[c]=d;if(a.isArray(c)&&a.isArray(d))i=a.reduce(c,function(b,c,e){b[c]=a.has(d,e)?d[e]:null;return b;},{});b.set(i,f);}};var j=function(b,c,d,f){var g,h=function(a){return b[d.escape?'escape':'get'](a);},i=function(a){return a==null?'':a;};g=a.isArray(c)?a.map(c,h):h(c);if(d.onGet)g=e(f,d.onGet,g,d);return a.isArray(g)?a.map(g,i):i(g);};var k=c.getConfiguration=function(b,d){var e=[{updateModel:false,updateMethod:'text',update:function(a,b,c,d){if(a[d.updateMethod])a[d.updateMethod](b);},getVal:function(a,b,c){return a[c.updateMethod]();}}];e=e.concat(a.filter(c._handlers,function(a){return b.is(a.selector);}));e.push(d);var f=a.extend.apply(a,e);if(f.visible&&!a.has(f,'updateView'))f.updateView=false;else if(!a.has(f,'updateView'))f.updateView=true;return f;};var l=function(b,c,d,e,f){var g=['autofocus','autoplay','async','checked','controls','defer','disabled','hidden','indeterminate','loop','multiple','open','readonly','required','scoped','selected'];a.each(d.attributes||[],function(i){var k='',l,m;i=a.clone(i);l=i.observe||(i.observe=f),m=function(){var d=a.indexOf(g,i.name,true)>-1?'prop':'attr',f=j(e,l,i,b);if(i.name==='class'){c.removeClass(k).addClass(f);k=f;}else c[d](i.name,f);};a.each(a.flatten([l]),function(a){h(e,b,'change:'+a,d,m);});m();});};var m=function(b,c,d,f,g){if(d.visible==null)return;var i=function(){var h=d.visible,i=d.visibleFn,k=j(f,g,d,b),l=!!k;if(a.isFunction(h)||a.isString(h))l=!!e(b,h,k,d);if(i)e(b,i,c,l,d);else c.toggle(l);};a.each(a.flatten([g]),function(a){h(f,b,'change:'+a,d,i);});i();};var n=function(a,b,c,d,f,h){if(!g(a,c.updateView,d,c))return;e(a,c.update,b,d,f,c);if(!h)e(a,c.afterUpdate,b,d,c);};c.addHandler([{selector:'[contenteditable="true"]',updateMethod:'html',events:['input','change']},{selector:'input',events:['propertychange','input','change'],update:function(a,b){a.val(b);},getVal:function(a){return a.val();}},{selector:'textarea',events:['propertychange','input','change'],update:function(a,b){a.val(b);},getVal:function(a){return a.val();}},{selector:'input[type="radio"]',events:['change'],update:function(a,b){a.filter('[value="'+b+'"]').prop('checked',true);},getVal:function(a){return a.filter(':checked').val();}},{selector:'input[type="checkbox"]',events:['change'],update:function(c,d,e,f){if(c.length>1){d||(d=[]);c.each(function(c,e){var f=b.$(e);var g=a.indexOf(d,f.val())>-1;f.prop('checked',g);});}else{var g=a.isBoolean(d)?d:d===c.val();c.prop('checked',g);}},getVal:function(c){var d;if(c.length>1){d=a.reduce(c,function(a,c){var d=b.$(c);if(d.prop('checked'))a.push(d.val());return a;},[]);}else{d=c.prop('checked');var e=c.val();if(e!=='on'&&e!=null)d=d?c.val():null;}return d;}},{selector:'select',events:['change'],update:function(c,f,g,h){var i,j=h.selectOptions,k=j&&j.collection||undefined,l=c.prop('multiple');if(!j){j={};var m=function(a){return a.map(function(){return{value:this.value,label:this.text};}).get();};if(c.find('optgroup').length){k={opt_labels:[]};if(c.find('> option').length){k.opt_labels.push(undefined);a.each(c.find('> option'),function(a){k[undefined]=m(b.$(a));});}a.each(c.find('optgroup'),function(a){var c=b.$(a).attr('label');k.opt_labels.push(c);k[c]=m(b.$(a).find('option'));});}else k=m(c.find('option'));}j.valuePath=j.valuePath||'value';j.labelPath=j.labelPath||'label';var n=function(c,e,f){a.each(c,function(c){var g=b.$('<option/>'),h=c;var i=function(b,c){g.text(b);h=c;g.data('stickit_bind_val',h);if(!a.isArray(h)&&!a.isObject(h))g.val(h);};if(c==='__default__')i(j.defaultOption.label,j.defaultOption.value);else i(d(c,j.labelPath),d(c,j.valuePath));if(!l&&h!=null&&f!=null&&h===f||(a.isObject(f)&&a.isEqual(h,f)))g.prop('selected',true);else if(l&&a.isArray(f))a.each(f,function(b){if(a.isObject(b))b=d(b,j.valuePath);if(b===h||(a.isObject(b)&&a.isEqual(h,b)))g.prop('selected',true);});e.append(g);});};c.find('*').remove();var o=function(a,b){var c=window;if(b.indexOf('this.')===0)c=a;b=b.replace(/^[a-z]*\.(.+)$/,'$1');return d(c,b);};if(a.isString(k))i=o(this,k);else if(a.isFunction(k))i=e(this,k,c,h);else i=k;if(i instanceof b.Collection)i=i.toJSON();if(j.defaultOption)n(["__default__"],c);if(a.isArray(i))n(i,c,f);else if(i.opt_labels)a.each(i.opt_labels,function(a){var d=b.$('<optgroup/>').attr('label',a);n(i[a],d,f);c.append(d);});else{var p=[],q;for(var r in i){q={};q[j.valuePath]=r;q[j.labelPath]=i[r];p.push(q);}n(a.sortBy(p,j.comparator||j.labelPath),c,f);}},getVal:function(a){var c;if(a.prop('multiple'))c=b.$(f(a).map(function(){return b.$(this).data('stickit_bind_val');})).get();else c=f(a).data('stickit_bind_val');return c;}}]);b.Stickit=c;return b.Stickit;}));(function(a,b,c){'use strict';if(typeof exports==='object')module.exports=b(require('underscore'),require('backbone'));else if(typeof define==='function'&&define.amd)define(['underscore','backbone'],function(d,e){d=d===c?a._:d;e=e===c?a.Backbone:e;return(a.returnExportsGlobal=b(d,e,a));});else a.returnExportsGlobal=b(a._,a.Backbone);}(this,function(a,b,c,d){'use strict';b=b===d?c.Backbone:b;a=a===d?c._:a;var e=function(){},f=b.Model.prototype.get,g=b.Model.prototype.set,h=b.Model.prototype.toJSON;e.prototype.mutators={};e.prototype.get=function(b){var c=this.mutators!==d;if(c===true&&a.isFunction(this.mutators[b])===true)return this.mutators[b].call(this);if(c===true&&a.isObject(this.mutators[b])===true&&a.isFunction(this.mutators[b].get)===true)return this.mutators[b].get.call(this);return f.call(this,b);};e.prototype.set=function(b,c,e){var f=this.mutators!==d,h=null,i=null;h=g.call(this,b,c,e);if(a.isObject(b)||b===null){i=b;e=c;}else{i={};i[b]=c;}if(f===true&&a.isObject(this.mutators[b])===true)if(a.isFunction(this.mutators[b].set)===true)h=this.mutators[b].set.call(this,b,i[b],e,a.bind(g,this));else if(a.isFunction(this.mutators[b]))h=this.mutators[b].call(this,b,i[b],e,a.bind(g,this));if(f===true&&a.isObject(i))a.each(i,a.bind(function(b,c){if(a.isObject(this.mutators[c])===true){var f=this.mutators[c];if(a.isFunction(f.set))f=f.set;if(a.isFunction(f)){if(e===d||(a.isObject(e)===true&&e.silent!==true&&(e.mutators!==d&&e.mutators.silent!==true)))this.trigger('mutators:set:'+c);f.call(this,c,b,e,a.bind(g,this));}}},this));return h;};e.prototype.toJSON=function(b){var c=h.call(this),d,e;a.each(this.mutators,a.bind(function(f,g){if(a.isObject(this.mutators[g])===true&&a.isFunction(this.mutators[g].get)){d=a.has(b||{},'emulateHTTP');e=this.mutators[g].transient;if(!d||!e)c[g]=a.bind(this.mutators[g].get,this)();}else if(a.isFunction(this.mutators[g]))c[g]=a.bind(this.mutators[g],this)();},this));return c;};e.prototype.escape=function(b){var c=this.get(b);return a.escape(c==null?'':''+c);};a.extend(b.Model.prototype,e.prototype);b.Mutators=e;return e;}));;(function(a){var b=document.createElement('div'),c=b.getElementsByTagName('i'),d=a(document.documentElement);b.innerHTML='<!--[if lte IE 8]><i></i><![endif]-->';if(c[0])d.addClass('ie-lte8');if(!('querySelector' in document)||(window.blackberry&&!window.WebKitPoint)||window.operamini)return;else{d.addClass('tablesaw-enhanced');a(function(){a(document).trigger("enhance.tablesaw");});}})(jQuery);if(typeof Tablesaw==="undefined")Tablesaw={i18n:{modes:['Stack','Swipe','Toggle'],columns:'Col<span class=\"a11y-sm\">umn</span>s',columnBtnText:'Columns',columnsDialogError:'No eligible columns.',sort:'Sort'}};if(!Tablesaw.config)Tablesaw.config={};;(function(a){var b="table",c={toolbar:"tablesaw-bar"},d={create:"tablesawcreate",destroy:"tablesawdestroy",refresh:"tablesawrefresh"},e="stack",f="table[data-tablesaw-mode],table[data-tablesaw-sortable]";var g=function(b){if(!b)throw new Error("Tablesaw requires an element.");this.table=b;this.$table=a(b);this.mode=this.$table.attr("data-tablesaw-mode")||e;this.init();};g.prototype.init=function(){if(!this.$table.attr("id"))this.$table.attr("id",b+"-"+Math.round(Math.random()*10000));this.createToolbar();var a=this._initCells();this.$table.trigger(d.create,[this,a]);};g.prototype._initCells=function(){var b,c=this.table.querySelectorAll("thead tr"),d=this;a(c).each(function(){var e=0;a(this).children().each(function(){var f=parseInt(this.getAttribute("colspan"),10),g=":nth-child("+(e+1)+")";b=e+1;if(f)for(var h=0;h<f-1;h++){e++;g+=", :nth-child("+(e+1)+")";}this.cells=d.$table.find("tr").not(a(c).eq(0)).not(this).children(g);e++;});});return b;};g.prototype.refresh=function(){this._initCells();this.$table.trigger(d.refresh);};g.prototype.createToolbar=function(){var b=this.$table.prev('.'+c.toolbar);if(!b.length)b=a('<div>').addClass(c.toolbar).insertBefore(this.$table);this.$toolbar=b;if(this.mode)this.$toolbar.addClass('mode-'+this.mode);};g.prototype.destroy=function(){this.$table.prev('.'+c.toolbar).each(function(){this.className=this.className.replace(/\bmode\-\w*\b/gi,'');});var e=this.$table.attr('id');a(document).unbind("."+e);a(window).unbind("."+e);this.$table.trigger(d.destroy,[this]);this.$table.removeAttr('data-tablesaw-mode');this.$table.removeData(b);};a.fn[b]=function(){return this.each(function(){var c=a(this);if(c.data(b))return;var d=new g(this);c.data(b,d);});};a(document).on("enhance.tablesaw",function(c){a(c.target).find(f)[b]();});}(jQuery));;(function(a,b,c){var d={stackTable:'tablesaw-stack',cellLabels:'tablesaw-cell-label',cellContentLabels:'tablesaw-cell-content'};var e={obj:'tablesaw-stack'};var f={labelless:'data-tablesaw-no-labels',hideempty:'data-tablesaw-hide-empty'};var g=function(a){this.$table=b(a);this.labelless=this.$table.is('['+f.labelless+']');this.hideempty=this.$table.is('['+f.hideempty+']');if(!this.labelless)this.allHeaders=this.$table.find("th");this.$table.data(e.obj,this);};g.prototype.init=function(a){this.$table.addClass(d.stackTable);if(this.labelless)return;var c=b(this.allHeaders);var e=this.hideempty;c.each(function(){var c=b(this),g=b(this.cells).filter(function(){return !b(this).parent().is("["+f.labelless+"]")&&(!e||!b(this).is(":empty"));}),h=g.not(this).filter("thead th").length&&" tablesaw-cell-label-top",i=c.find(".tablesaw-sortable-btn"),j=i.length?i.html():c.html();if(j!=="")if(h){var k=parseInt(b(this).attr("colspan"),10),l="";if(k)l="td:nth-child("+k+"n + "+a+")";g.filter(l).prepend("<b class='"+d.cellLabels+h+"'>"+j+"</b>");}else{g.wrapInner("<span class='"+d.cellContentLabels+"'></span>");g.prepend("<b class='"+d.cellLabels+"'>"+j+"</b>");}});};g.prototype.destroy=function(){this.$table.removeClass(d.stackTable);this.$table.find('.'+d.cellLabels).remove();this.$table.find('.'+d.cellContentLabels).each(function(){b(this).replaceWith(this.childNodes);});};b(document).on("tablesawcreate",function(a,b,c){if(b.mode==='stack'){var d=new g(b.table);d.init(c);}});b(document).on("tablesawdestroy",function(a,c){if(c.mode==='stack')b(c.table).data(e.obj).destroy();});}(this,jQuery));;(function(a){var b="tablesawbtn",c=".btn",d={_create:function(){return a(this).each(function(){a(this).trigger("beforecreate."+b)[b]("_init").trigger("create."+b);});},_init:function(){var c=a(this),d=this.getElementsByTagName("select")[0];if(d)a(this).addClass("btn-select")[b]("_select",d);return c;},_select:function(b){var c=function(b,c){var d=a(c).find("option"),e,f,g;d.each(function(){var a=this;if(a.selected)e=document.createTextNode(a.text);});g=b.childNodes;if(d.length>0)for(var h=0,i=g.length;h<i;h++){f=g[h];if(f&&f.nodeType===3)b.replaceChild(e,f);}};c(this,b);a(this).bind("change refresh",function(){c(this,b);});}};a.fn[b]=function(c,d,e,f){return this.each(function(){if(c&&typeof c==="string")return a.fn[b].prototype[c].call(this,d,e,f);if(a(this).data(b+"active"))return a(this);a(this).data(b+"active",true);a.fn[b].prototype._create.call(this);});};a.extend(a.fn[b].prototype,d);a(document).on("enhance",function(d){a(c,d.target)[b]();});}(jQuery));;(function(a,b,c){var d=function(a){this.$table=b(a);this.classes={columnToggleTable:'tablesaw-columntoggle',columnBtnContain:'tablesaw-columntoggle-btnwrap tablesaw-advance',columnBtn:'tablesaw-columntoggle-btn tablesaw-nav-btn down',popup:'tablesaw-columntoggle-popup',priorityPrefix:'tablesaw-priority-',toolbar:'tablesaw-bar'};this.headers=this.$table.find('tr:first > th');this.$table.data('tablesaw-coltoggle',this);};d.prototype.init=function(){var a,c,d,e,f,g,h=this;this.$table.addClass(this.classes.columnToggleTable);a=this.$table.attr("id");c=a+"-popup";g=b("<div class='"+this.classes.columnBtnContain+"'></div>");d=b("<a href='#"+c+"' class='btn btn-micro "+this.classes.columnBtn+"' data-popup-link>"+"<span>"+Tablesaw.i18n.columnBtnText+"</span></a>");e=b("<div class='dialog-table-coltoggle "+this.classes.popup+"' id='"+c+"'></div>");f=b("<div class='btn-group'></div>");var i=false;b(this.headers).not("td").each(function(){var a=b(this),c=a.attr("data-tablesaw-priority"),d=a.add(this.cells);if(c&&c!=="persist"){d.addClass(h.classes.priorityPrefix+c);b("<label><input type='checkbox' checked>"+a.text()+"</label>").appendTo(f).children(0).data("cells",d);i=true;}});if(!i)f.append('<label>'+Tablesaw.i18n.columnsDialogError+'</label>');f.appendTo(e);f.find('input[type="checkbox"]').on("change",function(a){var c=a.target.checked;b(a.target).data("cells").toggleClass("tablesaw-cell-hidden",!c).toggleClass("tablesaw-cell-visible",c);h.$table.trigger('tablesawcolumns');});d.appendTo(g);g.appendTo(this.$table.prev('.'+this.classes.toolbar));var j;function k(){g.addClass('visible');d.removeClass('down').addClass('up');b(document).unbind('click.'+a,l);window.clearTimeout(j);j=window.setTimeout(function(){b(document).one('click.'+a,l);},15);}function l(c){if(c&&b(c.target).closest("."+h.classes.popup).length)return;b(document).unbind('click.'+a);d.removeClass('up').addClass('down');g.removeClass('visible');}d.on("click.tablesaw",function(a){a.preventDefault();if(!g.is(".visible"))k();else l();});e.appendTo(g);this.$menu=f;b(window).on("resize."+a,function(){h.refreshToggle();});this.refreshToggle();};d.prototype.refreshToggle=function(){this.$menu.find("input").each(function(){var a=b(this);this.checked=a.data("cells").eq(0).css("display")==="table-cell";});};d.prototype.refreshPriority=function(){var a=this;b(this.headers).not("td").each(function(){var c=b(this),d=c.attr("data-tablesaw-priority"),e=c.add(this.cells);if(d&&d!=="persist")e.addClass(a.classes.priorityPrefix+d);});};d.prototype.destroy=function(){this.$table.removeClass(this.classes.columnToggleTable);this.$table.find('th, td').each(function(){var a=b(this);a.removeClass('tablesaw-cell-hidden').removeClass('tablesaw-cell-visible');this.className=this.className.replace(/\bui\-table\-priority\-\d\b/g,'');});};b(document).on("tablesawcreate",function(a,b){if(b.mode==='columntoggle'){var c=new d(b.table);c.init();}});b(document).on("tablesawdestroy",function(a,c){if(c.mode==='columntoggle')b(c.table).data('tablesaw-coltoggle').destroy();});}(this,jQuery));;(function(a,b,c){b.extend(Tablesaw.config,{swipe:{horizontalThreshold:15,verticalThreshold:30}});function d(c){var d=b("<div class='tablesaw-advance'></div>"),e=b("<a href='#' class='tablesaw-nav-btn btn btn-micro left' title='Previous Column'></a>").appendTo(d),f=b("<a href='#' class='tablesaw-nav-btn btn btn-micro right' title='Next Column'></a>").appendTo(d),g='disabled',h='tablesaw-fix-persist',i=c.find("thead th"),j=i.not('[data-tablesaw-priority="persist"]'),k=[],l=b(document.head||'head'),m=c.attr('id'),n=b('html').is('.ie-lte8');if(!i.length)throw new Error("tablesaw swipe: no header cells found. Are you using <th> inside of <thead>?");c.css('width','auto');i.each(function(){k.push(b(this).outerWidth());});c.css('width','');d.appendTo(c.prev('.tablesaw-bar'));c.addClass("tablesaw-swipe");if(!m){m='tableswipe-'+Math.round(Math.random()*10000);c.attr('id',m);}function o(a){return b(a.cells).add(a);}function p(a){o(a).removeClass('tablesaw-cell-hidden');}function q(a){o(a).addClass('tablesaw-cell-hidden');}function r(a){o(a).addClass('tablesaw-cell-persist');}function s(a){return b(a).is('[data-tablesaw-priority="persist"]');}function t(){c.removeClass(h);b('#'+m+'-persist').remove();}function u(){var a='#'+m+'.tablesaw-swipe ',d=[],e=c.width(),f=[],g;i.each(function(c){var g;if(s(this)){g=b(this).outerWidth();if(g<e*0.75){f.push(c+'-'+g);d.push(a+' .tablesaw-cell-persist:nth-child('+(c+1)+') { width: '+g+'px; }');}}});g=f.join('_');c.addClass(h);var j=b('#'+m+'-persist');if(!j.length||j.data('hash')!==g){j.remove();if(d.length)b('<style>'+d.join("\n")+'</style>').attr('id',m+'-persist').data('hash',g).appendTo(l);}}function v(){var a=[],c;j.each(function(d){var e=b(this),f=e.css("display")==="none"||e.is(".tablesaw-cell-hidden");if(!f&&!c){c=true;a[0]=d;}else if(f&&c){a[1]=d;return false;}});return a;}function w(){var a=v();return [a[1]-1,a[0]-1];}function x(a){return a?v():w();}function y(a){return a[1]>-1&&a[1]<j.length;}function z(){var b=c.attr("data-tablesaw-swipe-media");return !b||("matchMedia" in a)&&a.matchMedia(b).matches;}function A(){if(!z())return;var a=20,d=c.parent().width(),e=[],f=0,g=[],h=i.length;i.each(function(c){var i=b(this),j=i.is('[data-tablesaw-priority="persist"]');e.push(j);f+=k[c]+(j?0:a);g.push(f);if(j||f>d)h--;});var j=h===0;i.each(function(a){if(e[a]){r(this);return;}if(g[a]<=d||j){j=false;p(this);}else q(this);});if(!n)t();c.trigger('tablesawcolumns');}function B(a){var b=x(a);if(y(b)){if(isNaN(b[0]))if(a)b[0]=0;else b[0]=j.length-1;if(!n)u();q(j.get(b[0]));p(j.get(b[1]));c.trigger('tablesawcolumns');}}e.add(f).click(function(a){B(!!b(a.target).closest(f).length);a.preventDefault();});function C(a,b){return(a.touches||a.originalEvent.touches)[0][b];}c.bind("touchstart.swipetoggle",function(c){var d=C(c,'pageX'),e=C(c,'pageY'),f,g;b(a).off("resize",A);b(this).bind("touchmove",function(a){f=C(a,'pageX');g=C(a,'pageY');var b=Tablesaw.config.swipe;if(Math.abs(f-d)>b.horizontalThreshold&&Math.abs(g-e)<b.verticalThreshold)a.preventDefault();}).bind("touchend.swipetoggle",function(){var c=Tablesaw.config.swipe;if(Math.abs(g-e)<c.verticalThreshold){if(f-d<-1*c.horizontalThreshold)B(true);if(f-d>c.horizontalThreshold)B(false);}window.setTimeout(function(){b(a).on("resize",A);},300);b(this).unbind("touchmove touchend");});}).bind("tablesawcolumns.swipetoggle",function(){e[y(w())?"removeClass":"addClass"](g);f[y(v())?"removeClass":"addClass"](g);}).bind("tablesawnext.swipetoggle",function(){B(true);}).bind("tablesawprev.swipetoggle",function(){B(false);}).bind("tablesawdestroy.swipetoggle",function(){var c=b(this);c.removeClass('tablesaw-swipe');c.prev('.tablesaw-bar').find('.tablesaw-advance').remove();b(a).off("resize",A);c.unbind(".swipetoggle");});A();b(a).on("resize",A);}b(document).on("tablesawcreate",function(a,b){if(b.mode==='swipe')d(b.$table);});}(this,jQuery));;(function(a){function b(b){return a.map(b.childNodes,function(b){var c=a(b);if(c.is('input, select'))return c.val();else if(c.hasClass('tablesaw-cell-label'))return;return a.trim(c.text());}).join('');}var c="tablesaw-sortable",d="table[data-"+c+"]",e="[data-"+c+"-switch]",f={defaultCol:"data-tablesaw-sortable-default-col"},g={head:c+"-head",ascend:c+"-ascending",descend:c+"-descending",switcher:c+"-switch",tableToolbar:'tablesaw-toolbar',sortButton:c+"-btn"},h={_create:function(b){return a(this).each(function(){var d=a(this).data("init"+c);if(d)return false;a(this).data("init"+c,true).trigger("beforecreate."+c)[c]("_init",b).trigger("create."+c);});},_init:function(){var d=a(this),h,i;var j=function(){d.addClass(c);},k=function(b){a.each(b,function(b,c){a(c).addClass(g.head);});},l=function(b,c){a.each(b,function(b,d){var e=a("<button class='"+g.sortButton+"'/>");e.bind("click",{col:d},c);a(d).wrapInner(e);});},m=function(b){a.each(b,function(b,c){var d=a(c);d.removeAttr(f.defaultCol);d.removeClass(g.ascend);d.removeClass(g.descend);});},n=function(b){if(a(b.target).is('a[href]'))return;b.stopPropagation();var e=a(this).parent(),f=b.data.col,j=h.index(e);m(e.siblings());if(e.hasClass(g.descend)){d[c]("sortBy",f,true);j+='_asc';}else{d[c]("sortBy",f);j+='_desc';}if(i)i.find('select').val(j).trigger('refresh');b.preventDefault();},o=function(b){a.each(b,function(b,c){var d=a(c);if(d.is("["+f.defaultCol+"]"))if(!d.hasClass(g.descend))d.addClass(g.ascend);});},p=function(e){i=a('<div>').addClass(g.switcher).addClass(g.tableToolbar).html(function(){var c=['<label>'+Tablesaw.i18n.sort+':'];c.push('<span class="btn btn-small">&#160;<select>');e.each(function(d){var e=a(this),h=e.is("["+f.defaultCol+"]"),i=e.hasClass(g.descend),j=false;a(this.cells).slice(0,3).each(function(){if(!isNaN(parseInt(b(this),10))){j=true;return false;}});c.push('<option'+(h&&!i?' selected':'')+' value="'+d+'_asc">'+e.text()+' '+(j?'↑':'(A-Z)')+'</option>');c.push('<option'+(h&&i?' selected':'')+' value="'+d+'_desc">'+e.text()+' '+(j?'↓':'(Z-A)')+'</option>');});c.push('</select></span></label>');return c.join('');});var h=d.prev('.tablesaw-bar'),j=h.children().eq(0);if(j.length)i.insertBefore(j);else i.appendTo(h);i.find('.btn').tablesawbtn();i.find('select').on('change',function(){var b=a(this).val().split('_'),f=e.eq(b[0]);m(f.siblings());d[c]('sortBy',f.get(0),b[1]==='asc');});};j();h=d.find("thead th[data-"+c+"-col]");k(h);l(h,n);o(h);if(d.is(e))p(h,d.find('tbody tr:nth-child(-n+3)'));},getColumnNumber:function(b){return a(b).prevAll().length;},getTableRows:function(){return a(this).find("tbody tr");},sortRows:function(c,d,e,f){var g,h,i;var j=function(c){var e=[];a.each(c,function(c,f){e.push({cell:b(a(f).children().get(d)),rowNum:c});});return e;},k=function(a,b){var c,d=/[^\-\+\d\.]/g;if(a)c=function(a,c){if(b||!isNaN(parseFloat(a.cell)))return parseFloat(a.cell.replace(d,''))-parseFloat(c.cell.replace(d,''));else return a.cell.toLowerCase()>c.cell.toLowerCase()?1:-1;};else c=function(a,c){if(b||!isNaN(parseFloat(a.cell)))return parseFloat(c.cell.replace(d,''))-parseFloat(a.cell.replace(d,''));else return a.cell.toLowerCase()<c.cell.toLowerCase()?1:-1;};return c;},l=function(a,b){var c=[],d,e,f;for(d=0,e=a.length;d<e;d++){f=a[d].rowNum;c.push(b[f]);}return c;};g=j(c);var m=a(f).data('tablesaw-sort');h=(m&&typeof m==="function"?m(e):false)||k(e,a(f).is('[data-sortable-numeric]'));i=g.sort(h);c=l(i,c);return c;},replaceTableRows:function(b){var c=a(this),d=c.find("tbody");d.html(b);},makeColDefault:function(b,c){var d=a(b);d.attr(f.defaultCol,"true");if(c){d.removeClass(g.descend);d.addClass(g.ascend);}else{d.removeClass(g.ascend);d.addClass(g.descend);}},sortBy:function(b,d){var e=a(this),f,g;f=e[c]("getColumnNumber",b);g=e[c]("getTableRows");g=e[c]("sortRows",g,f,d,b);e[c]("replaceTableRows",g);e[c]("makeColDefault",b,d);}};a.fn[c]=function(b){var d=Array.prototype.slice.call(arguments,1),e;if(b&&typeof b==="string"){e=a.fn[c].prototype[b].apply(this[0],d);return(typeof e!=="undefined")?e:a(this);}if(!a(this).data(c+"data")){a(this).data(c+"active",true);a.fn[c].prototype._create.call(this,b);}return a(this);};a.extend(a.fn[c].prototype,h);a(document).on("tablesawcreate",function(a,b){if(b.$table.is(d))b.$table[c]();});}(jQuery));;(function(a,b,c){var d={attr:{init:'data-tablesaw-minimap'}};function e(c){var e=b('<div class="tablesaw-advance minimap">'),f=b('<ul class="tablesaw-advance-dots">').appendTo(e),g='tablesaw-advance-dots-hide',h=c.find('thead th');h.each(function(){f.append('<li><i></i></li>');});e.appendTo(c.prev('.tablesaw-bar'));function i(b){var c=b.attr(d.attr.init);return !c||a.matchMedia&&a.matchMedia(c).matches;}function j(){if(!i(c)){e.hide();return;}e.show();var a=f.find("li").removeClass(g);c.find("thead th").each(function(c){if(b(this).css("display")==="none")a.eq(c).addClass(g);});}j();b(a).on("resize",j);c.bind("tablesawcolumns.minimap",function(){j();}).bind("tablesawdestroy.minimap",function(){var c=b(this);c.prev('.tablesaw-bar').find('.tablesaw-advance').remove();b(a).off("resize",j);c.unbind(".minimap");});}b(document).on("tablesawcreate",function(a,b){if((b.mode==='swipe'||b.mode==='columntoggle')&&b.$table.is('[ '+d.attr.init+']'))e(b.$table);});}(this,jQuery));;(function(a,b){var c={selectors:{init:'table[data-tablesaw-mode-switch]'},attributes:{excludeMode:'data-tablesaw-mode-exclude'},classes:{main:'tablesaw-modeswitch',toolbar:'tablesaw-toolbar'},modes:['stack','swipe','columntoggle'],init:function(a){var d=b(a),e=d.attr(c.attributes.excludeMode),f=d.prev('.tablesaw-bar'),g='',h=b('<div>').addClass(c.classes.main+' '+c.classes.toolbar).html(function(){var a=['<label>'+Tablesaw.i18n.columns+':'],b=d.attr('data-tablesaw-mode'),f;a.push('<span class="btn btn-small">&#160;<select>');for(var h=0,i=c.modes.length;h<i;h++){if(e&&e.toLowerCase()===c.modes[h])continue;f=b===c.modes[h];if(f)g=c.modes[h];a.push('<option'+(f?' selected':'')+' value="'+c.modes[h]+'">'+Tablesaw.i18n.modes[h]+'</option>');}a.push('</select></span></label>');return a.join('');});var i=f.find('.tablesaw-advance').eq(0);if(i.length)h.insertBefore(i);else h.appendTo(f);h.find('.btn').tablesawbtn();h.find('select').bind('change',c.onModeChange);},onModeChange:function(){var a=b(this),d=a.closest('.'+c.classes.main),e=a.closest('.tablesaw-bar').nextUntil(e).eq(0),f=a.val();d.remove();e.data('table').destroy();e.attr('data-tablesaw-mode',f);e.table();}};b(a.document).on("tablesawcreate",function(a,b){if(b.$table.is(c.selectors.init))c.init(b.table);});})(this,jQuery);;(function(a,b,c){'use strict';var d='stickyTableHeaders',e=0,f={fixedOffset:0,leftOffset:0,scrollableArea:b};function g(c,g){var h=this;h.$el=a(c);h.el=c;h.id=e++;h.$window=a(b);h.$document=a(document);h.$el.bind('destroyed',a.proxy(h.teardown,h));h.$clonedHeader=null;h.$originalHeader=null;h.isSticky=false;h.hasBeenSticky=false;h.leftOffset=null;h.topOffset=null;h.init=function(){h.$el.each(function(){var b=a(this);b.css('padding',0);h.$originalHeader=a('thead:first',this);h.$clonedHeader=h.$originalHeader.clone();b.trigger('clonedHeader.'+d,[h.$clonedHeader]);h.$clonedHeader.addClass('tableFloatingHeader');h.$clonedHeader.css('display','none');h.$originalHeader.addClass('tableFloatingHeaderOriginal');h.$originalHeader.after(h.$clonedHeader);h.$printStyle=a('<style type="text/css" media="print">'+'.tableFloatingHeader{display:none !important;}'+'.tableFloatingHeaderOriginal{position:static !important;}'+'</style>');a('head').append(h.$printStyle);});h.setOptions(g);h.updateWidth();h.toggleHeaders();h.bind();};h.destroy=function(){h.$el.unbind('destroyed',h.teardown);h.teardown();};h.teardown=function(){if(h.isSticky)h.$originalHeader.css('position','static');a.removeData(h.el,'plugin_'+d);h.unbind();h.$clonedHeader.remove();h.$originalHeader.removeClass('tableFloatingHeaderOriginal');h.$originalHeader.css('visibility','visible');h.$printStyle.remove();h.el=null;h.$el=null;};h.bind=function(){h.$scrollableArea.on('scroll.'+d,h.toggleHeaders);if(!h.isWindowScrolling){h.$window.on('scroll.'+d+h.id,h.setPositionValues);h.$window.on('resize.'+d+h.id,h.toggleHeaders);}h.$scrollableArea.on('resize.'+d,h.toggleHeaders);h.$scrollableArea.on('resize.'+d,h.updateWidth);};h.unbind=function(){h.$scrollableArea.off('.'+d,h.toggleHeaders);if(!h.isWindowScrolling){h.$window.off('.'+d+h.id,h.setPositionValues);h.$window.off('.'+d+h.id,h.toggleHeaders);}h.$scrollableArea.off('.'+d,h.updateWidth);};h.toggleHeaders=function(){if(h.$el)h.$el.each(function(){var b=a(this),c,d=h.isWindowScrolling?(isNaN(h.options.fixedOffset)?h.options.fixedOffset.outerHeight():h.options.fixedOffset):h.$scrollableArea.offset().top+(!isNaN(h.options.fixedOffset)?h.options.fixedOffset:0),e=b.offset(),f=h.$scrollableArea.scrollTop()+d,g=h.$scrollableArea.scrollLeft(),i=h.isWindowScrolling?f>e.top:d>e.top,j=(h.isWindowScrolling?f:0)<(e.top+b.height()-h.$clonedHeader.height()-(h.isWindowScrolling?0:d));if(i&&j){c=e.left-g+h.options.leftOffset;h.$originalHeader.css({'position':'fixed','margin-top':0,'left':c,'z-index':3});h.leftOffset=c;h.topOffset=d;h.$clonedHeader.css('display','');if(!h.isSticky){h.isSticky=true;h.updateWidth();}h.setPositionValues();}else if(h.isSticky){h.$originalHeader.css('position','static');h.$clonedHeader.css('display','none');h.isSticky=false;h.resetWidth(a('td,th',h.$clonedHeader),a('td,th',h.$originalHeader));}});};h.setPositionValues=function(){var a=h.$window.scrollTop(),b=h.$window.scrollLeft();if(!h.isSticky||a<0||a+h.$window.height()>h.$document.height()||b<0||b+h.$window.width()>h.$document.width())return;h.$originalHeader.css({'top':h.topOffset-(h.isWindowScrolling?0:a),'left':h.leftOffset-(h.isWindowScrolling?0:b)});};h.updateWidth=function(){if(!h.isSticky)return;if(!h.$originalHeaderCells)h.$originalHeaderCells=a('th,td',h.$originalHeader);if(!h.$clonedHeaderCells)h.$clonedHeaderCells=a('th,td',h.$clonedHeader);var b=h.getWidth(h.$clonedHeaderCells);h.setWidth(b,h.$clonedHeaderCells,h.$originalHeaderCells);h.$originalHeader.css('width',h.$clonedHeader.width());};h.getWidth=function(c){var d=[];c.each(function(c){var e,f=a(this);if(f.css('box-sizing')==='border-box')e=f.outerWidth();else{var g=a('th',h.$originalHeader);if(g.css('border-collapse')==='collapse')if(b.getComputedStyle)e=parseFloat(b.getComputedStyle(this,null).width);else{var i=parseFloat(f.css('padding-left'));var j=parseFloat(f.css('padding-right'));var k=parseFloat(f.css('border-width'));e=f.outerWidth()-i-j-k;}else e=f.width();}d[c]=e;});return d;};h.setWidth=function(a,b,c){b.each(function(b){var d=a[b];c.eq(b).css({'min-width':d,'max-width':d});});};h.resetWidth=function(b,c){b.each(function(b){var d=a(this);c.eq(b).css({'min-width':d.css('min-width'),'max-width':d.css('max-width')});});};h.setOptions=function(c){h.options=a.extend({},f,c);h.$scrollableArea=a(h.options.scrollableArea);h.isWindowScrolling=h.$scrollableArea[0]===b;};h.updateOptions=function(a){h.setOptions(a);h.unbind();h.bind();h.updateWidth();h.toggleHeaders();};h.init();}a.fn[d]=function(b){return this.each(function(){var c=a.data(this,'plugin_'+d);if(c)if(typeof b==='string')c[b].apply(c);else c.updateOptions(b);else if(b!=='destroy')a.data(this,'plugin_'+d,new g(this,b));});};})(jQuery,window);(function(a){'use strict';if(!a)return;var b=(function(){var b=a.document.createTextNode('');if(b.ownerDocument!==a.document&&typeof a.wrap==='function'&&a.wrap(b)===b)return a.wrap(a);return a;}()),c=b.document,d=b.DocumentFragment||L,e=b.SVGElement||L,f=b.SVGSVGElement||L,g=b.SVGElementInstance||L,h=b.HTMLElement||b.Element,i=(b.PointerEvent||b.MSPointerEvent),j,k=Math.hypot||function(a,b){return Math.sqrt(a*a+b*b);},l={},m=[],n=[],o=[],p=false,q={},r={base:{accept:null,actionChecker:null,styleCursor:true,preventDefault:'auto',origin:{x:0,y:0},deltaSource:'page',allowFrom:null,ignoreFrom:null,_context:c,dropChecker:null},drag:{enabled:false,manualStart:true,max:Infinity,maxPerElement:1,snap:null,restrict:null,inertia:null,autoScroll:null,axis:'xy'},drop:{enabled:false,accept:null,overlap:'pointer'},resize:{enabled:false,manualStart:false,max:Infinity,maxPerElement:1,snap:null,restrict:null,inertia:null,autoScroll:null,square:false,preserveAspectRatio:false,axis:'xy',margin:NaN,edges:null,invert:'none'},gesture:{manualStart:false,enabled:false,max:Infinity,maxPerElement:1,restrict:null},perAction:{manualStart:false,max:Infinity,maxPerElement:1,snap:{enabled:false,endOnly:false,range:Infinity,targets:null,offsets:null,relativePoints:null},restrict:{enabled:false,endOnly:false},autoScroll:{enabled:false,container:null,margin:60,speed:300},inertia:{enabled:false,resistance:10,minSpeed:100,endSpeed:10,allowResume:true,zeroResumeDelta:true,smoothEndDuration:300}},_holdDuration:600},s={interaction:null,i:null,x:0,y:0,scroll:function(){var a=s.interaction.target.options[s.interaction.prepared.name].autoScroll,b=a.container||ak(s.interaction.element),c=new Date().getTime(),d=(c-s.prevTimeX)/1000,e=(c-s.prevTimeY)/1000,f,g,h,i;if(a.velocity){f=a.velocity.x;g=a.velocity.y;}else f=g=a.speed;h=f*d;i=g*e;if(h>=1||i>=1){if(N(b))b.scrollBy(s.x*h,s.y*i);else if(b){b.scrollLeft+=s.x*h;b.scrollTop+=s.y*i;}if(h>=1)s.prevTimeX=c;if(i>=1)s.prevTimeY=c;}if(s.isScrolling){J(s.i);s.i=I(s.scroll);}},isScrolling:false,prevTimeX:0,prevTimeY:0,start:function(a){s.isScrolling=true;J(s.i);s.interaction=a;s.prevTimeX=new Date().getTime();s.prevTimeY=new Date().getTime();s.i=I(s.scroll);},stop:function(){s.isScrolling=false;J(s.i);}},t=(('ontouchstart' in b)||b.DocumentTouch&&c instanceof b.DocumentTouch),u=!!i,v=t||u?20:10,w=1,x=0,y=Infinity,z=(c.all&&!b.atob)?{drag:'move',resizex:'e-resize',resizey:'s-resize',resizexy:'se-resize',resizetop:'n-resize',resizeleft:'w-resize',resizebottom:'s-resize',resizeright:'e-resize',resizetopleft:'se-resize',resizebottomright:'se-resize',resizetopright:'ne-resize',resizebottomleft:'ne-resize',gesture:''}:{drag:'move',resizex:'ew-resize',resizey:'ns-resize',resizexy:'nwse-resize',resizetop:'ns-resize',resizeleft:'ew-resize',resizebottom:'ns-resize',resizeright:'ew-resize',resizetopleft:'nwse-resize',resizebottomright:'nwse-resize',resizetopright:'nesw-resize',resizebottomleft:'nesw-resize',gesture:''},A={drag:true,resize:true,gesture:true},B='onmousewheel' in c?'mousewheel':'wheel',C=['dragstart','dragmove','draginertiastart','dragend','dragenter','dragleave','dropactivate','dropdeactivate','dropmove','drop','resizestart','resizemove','resizeinertiastart','resizeend','gesturestart','gesturemove','gestureinertiastart','gestureend','down','move','up','cancel','tap','doubletap','hold'],D={},E=navigator.appName=='Opera'&&t&&navigator.userAgent.match('Presto'),F=(/iP(hone|od|ad)/.test(navigator.platform)&&/OS 7[^\d]/.test(navigator.appVersion)),G='matches' in Element.prototype?'matches':'webkitMatchesSelector' in Element.prototype?'webkitMatchesSelector':'mozMatchesSelector' in Element.prototype?'mozMatchesSelector':'oMatchesSelector' in Element.prototype?'oMatchesSelector':'msMatchesSelector',H,I=a.requestAnimationFrame,J=a.cancelAnimationFrame,K=(function(){var a=('attachEvent' in b)&&!('addEventListener' in b),c=a?'attachEvent':'addEventListener',d=a?'detachEvent':'removeEventListener',e=a?'on':'',f=[],g=[],h=[];function i(b,d,i,j){var n=bi(f,b),o=g[n];if(!o){o={events:{},typeCount:0};n=f.push(b)-1;g.push(o);h.push((a?{supplied:[],wrapped:[],useCount:[]}:null));}if(!o.events[d]){o.events[d]=[];o.typeCount++;}if(!bj(o.events[d],i)){var p;if(a){var q=h[n],r=bi(q.supplied,i);var s=q.wrapped[r]||function(a){if(!a.immediatePropagationStopped){a.target=a.srcElement;a.currentTarget=b;a.preventDefault=a.preventDefault||k;a.stopPropagation=a.stopPropagation||l;a.stopImmediatePropagation=a.stopImmediatePropagation||m;if(/mouse|click/.test(a.type)){a.pageX=a.clientX+ak(b).document.documentElement.scrollLeft;a.pageY=a.clientY+ak(b).document.documentElement.scrollTop;}i(a);}};p=b[c](e+d,s,Boolean(j));if(r===-1){q.supplied.push(i);q.wrapped.push(s);q.useCount.push(1);}else q.useCount[r]++;}else p=b[c](d,i,j||false);o.events[d].push(i);return p;}}function j(b,c,i,k){var l,m=bi(f,b),n=g[m],o,p,q=i;if(!n||!n.events)return;if(a){o=h[m];p=bi(o.supplied,i);q=o.wrapped[p];}if(c==='all'){for(c in n.events)if(n.events.hasOwnProperty(c))j(b,c,'all');return;}if(n.events[c]){var r=n.events[c].length;if(i==='all'){for(l=0;l<r;l++)j(b,c,n.events[c][l],Boolean(k));return;}else for(l=0;l<r;l++)if(n.events[c][l]===i){b[d](e+c,q,k||false);n.events[c].splice(l,1);if(a&&o){o.useCount[p]--;if(o.useCount[p]===0){o.supplied.splice(p,1);o.wrapped.splice(p,1);o.useCount.splice(p,1);}}break;}if(n.events[c]&&n.events[c].length===0){n.events[c]=null;n.typeCount--;}}if(!n.typeCount){g.splice(m,1);f.splice(m,1);h.splice(m,1);}}function k(){this.returnValue=false;}function l(){this.cancelBubble=true;}function m(){this.cancelBubble=true;this.immediatePropagationStopped=true;}return{add:i,remove:j,useAttachEvent:a,_elements:f,_targets:g,_attachedListeners:h};}());function L(){}function M(a){if(!a||(typeof a!=='object'))return false;var c=ak(a)||b;return(/object|function/.test(typeof c.Element)?a instanceof c.Element:a.nodeType===1&&typeof a.nodeName==="string");}function N(a){return a===b||!!(a&&a.Window)&&(a instanceof a.Window);}function O(a){return !!a&&a instanceof d;}function P(a){return Q(a)&&(typeof a.length!==undefined)&&R(a.splice);}function Q(a){return !!a&&(typeof a==='object');}function R(a){return typeof a==='function';}function S(a){return typeof a==='number';}function T(a){return typeof a==='boolean';}function U(a){return typeof a==='string';}function V(a){if(!U(a))return false;c.querySelector(a);return true;}function W(a,b){for(var c in b)a[c]=b[c];return a;}var X={webkit:/(Movement[XY]|Radius[XY]|RotationAngle|Force)$/};function Y(a,b){for(var c in b){var d=false;for(var e in X)if(c.indexOf(e)===0&&X[e].test(c)){d=true;break;}if(!d)a[c]=b[c];}return a;}function Z(a,b){a.page=a.page||{};a.page.x=b.page.x;a.page.y=b.page.y;a.client=a.client||{};a.client.x=b.client.x;a.client.y=b.client.y;a.timeStamp=b.timeStamp;}function ab(a,b,c){var d=(b.length>1?ao(b):b[0]);af(d,l,c);a.page.x=l.x;a.page.y=l.y;ag(d,l,c);a.client.x=l.x;a.client.y=l.y;a.timeStamp=new Date().getTime();}function ac(a,b,c){a.page.x=c.page.x-b.page.x;a.page.y=c.page.y-b.page.y;a.client.x=c.client.x-b.client.x;a.client.y=c.client.y-b.client.y;a.timeStamp=new Date().getTime()-b.timeStamp;var d=Math.max(a.timeStamp/1000,0.001);a.page.speed=k(a.page.x,a.page.y)/d;a.page.vx=a.page.x/d;a.page.vy=a.page.y/d;a.client.speed=k(a.client.x,a.page.y)/d;a.client.vx=a.client.x/d;a.client.vy=a.client.y/d;}function ad(a){return(a instanceof b.Event||(t&&b.Touch&&a instanceof b.Touch));}function ae(a,b,c){c=c||{};a=a||'page';c.x=b[a+'X'];c.y=b[a+'Y'];return c;}function af(a,c){c=c||{};if(E&&ad(a)){ae('screen',a,c);c.x+=b.scrollX;c.y+=b.scrollY;}else ae('page',a,c);return c;}function ag(a,b){b=b||{};if(E&&ad(a))ae('screen',a,b);else ae('client',a,b);return b;}function ah(a){a=a||b;return{x:a.scrollX||a.document.documentElement.scrollLeft,y:a.scrollY||a.document.documentElement.scrollTop};}function ai(a){return S(a.pointerId)?a.pointerId:a.identifier;}function aj(a){return(a instanceof g?a.correspondingUseElement:a);}function ak(a){if(N(a))return a;var c=(a.ownerDocument||a);return c.defaultView||c.parentWindow||b;}function al(a){var b=(a instanceof e?a.getBoundingClientRect():a.getClientRects()[0]);return b&&{left:b.left,right:b.right,top:b.top,bottom:b.bottom,width:b.width||b.right-b.left,height:b.height||b.bottom-b.top};}function am(a){var b=al(a);if(!F&&b){var c=ah(ak(a));b.left+=c.x;b.right+=c.x;b.top+=c.y;b.bottom+=c.y;}return b;}function an(a){var b=[];if(P(a)){b[0]=a[0];b[1]=a[1];}else if(a.type==='touchend'){if(a.touches.length===1){b[0]=a.touches[0];b[1]=a.changedTouches[0];}else if(a.touches.length===0){b[0]=a.changedTouches[0];b[1]=a.changedTouches[1];}}else{b[0]=a.touches[0];b[1]=a.touches[1];}return b;}function ao(a){var b={pageX:0,pageY:0,clientX:0,clientY:0,screenX:0,screenY:0};var c;for(var d=0;d<a.length;d++)for(c in b)b[c]+=a[d][c];for(c in b)b[c]/=a.length;return b;}function ap(a){if(!a.length&&!(a.touches&&a.touches.length>1))return;var b=an(a),c=Math.min(b[0].pageX,b[1].pageX),d=Math.min(b[0].pageY,b[1].pageY),e=Math.max(b[0].pageX,b[1].pageX),f=Math.max(b[0].pageY,b[1].pageY);return{x:c,y:d,left:c,top:d,width:e-c,height:f-d};}function aq(a,b){b=b||r.deltaSource;var c=b+'X',d=b+'Y',e=an(a);var f=e[0][c]-e[1][c],g=e[0][d]-e[1][d];return k(f,g);}function ar(a,b,c){c=c||r.deltaSource;var d=c+'X',e=c+'Y',f=an(a),g=f[0][d]-f[1][d],h=f[0][e]-f[1][e],i=180*Math.atan(h/g)/Math.PI;if(S(b)){var j=i-b,k=j%360;if(k>315)i-=360+(i/360)|0*360;else if(k>135)i-=180+(i/360)|0*360;else if(k<-315)i+=360+(i/360)|0*360;else if(k<-135)i+=180+(i/360)|0*360;}return i;}function as(a,b){var c=a?a.options.origin:r.origin;if(c==='parent')c=ay(b);else if(c==='self')c=a.getRect(b);else if(V(c))c=ax(b,c)||{x:0,y:0};if(R(c))c=c(a&&b);if(M(c))c=am(c);c.x=('x' in c)?c.x:c.left;c.y=('y' in c)?c.y:c.top;return c;}function at(a,b,c,d){var e=1-a;return e*e*b+2*e*a*c+a*a*d;}function au(a,b,c,d,e,f,g){return{x:at(g,a,c,e),y:at(g,b,d,f)};}function av(a,b,c,d){a/=d;return -c*a*(a-2)+b;}function aw(a,b){while(b){if(b===a)return true;b=b.parentNode;}return false;}function ax(a,b){var c=ay(a);while(M(c)){if(bk(c,b))return c;c=ay(c);}return null;}function ay(a){var b=a.parentNode;if(O(b)){while((b=b.host)&&O(b)){}return b;}return b;}function az(a,b){return a._context===b.ownerDocument||aw(a._context,b);}function aA(a,b,c){var d=a.options.ignoreFrom;if(!d||!M(c))return false;if(U(d))return bl(c,d,b);else if(M(d))return aw(d,c);return false;}function aB(a,b,c){var d=a.options.allowFrom;if(!d)return true;if(!M(c))return false;if(U(d))return bl(c,d,b);else if(M(d))return aw(d,c);return false;}function aC(a,b){if(!b)return false;var c=b.options.drag.axis;return(a==='xy'||c==='xy'||c===a);}function aD(a,b){var c=a.options;if(/^resize/.test(b))b='resize';return c[b].snap&&c[b].snap.enabled;}function aE(a,b){var c=a.options;if(/^resize/.test(b))b='resize';return c[b].restrict&&c[b].restrict.enabled;}function aF(a,b){var c=a.options;if(/^resize/.test(b))b='resize';return c[b].autoScroll&&c[b].autoScroll.enabled;}function aG(a,b,c){var d=a.options,e=d[c.name].max,f=d[c.name].maxPerElement,g=0,h=0,i=0;for(var j=0,k=o.length;j<k;j++){var l=o[j],m=l.prepared.name,n=l.interacting();if(!n)continue;g++;if(g>=y)return false;if(l.target!==a)continue;h+=(m===c.name)|0;if(h>=e)return false;if(l.element===b){i++;if(m!==c.name||i>=f)return false;}}return y>0;}function aH(a){var b,c=a[0],d=c?0:-1,g,i=[],j=[],k,l,m;for(l=1;l<a.length;l++){b=a[l];if(!b||b===c)continue;if(!c){c=b;d=l;continue;}if(b.parentNode===b.ownerDocument)continue;else if(c.parentNode===b.ownerDocument){c=b;d=l;continue;}if(!i.length){g=c;while(g.parentNode&&g.parentNode!==g.ownerDocument){i.unshift(g);g=g.parentNode;}}if(c instanceof h&&b instanceof e&&!(b instanceof f)){if(b===c.parentNode)continue;g=b.ownerSVGElement;}else g=b;j=[];while(g.parentNode!==g.ownerDocument){j.unshift(g);g=g.parentNode;}m=0;while(j[m]&&j[m]===i[m])m++;var n=[j[m-1],j[m],i[m]];k=n[0].lastChild;while(k){if(k===n[1]){c=b;d=l;i=[];break;}else if(k===n[2])break;k=k.previousSibling;}}return d;}function aI(){this.target=null;this.element=null;this.dropTarget=null;this.dropElement=null;this.prevDropTarget=null;this.prevDropElement=null;this.prepared={name:null,axis:null,edges:null};this.matches=[];this.matchElements=[];this.inertiaStatus={active:false,smoothEnd:false,ending:false,startEvent:null,upCoords:{},xe:0,ye:0,sx:0,sy:0,t0:0,vx0:0,vys:0,duration:0,resumeDx:0,resumeDy:0,lambda_v0:0,one_ve_v0:0,i:null};if(R(Function.prototype.bind)){this.boundInertiaFrame=this.inertiaFrame.bind(this);this.boundSmoothEndFrame=this.smoothEndFrame.bind(this);}else{var a=this;this.boundInertiaFrame=function(){return a.inertiaFrame();};this.boundSmoothEndFrame=function(){return a.smoothEndFrame();};}this.activeDrops={dropzones:[],elements:[],rects:[]};this.pointers=[];this.pointerIds=[];this.downTargets=[];this.downTimes=[];this.holdTimers=[];this.prevCoords={page:{x:0,y:0},client:{x:0,y:0},timeStamp:0};this.curCoords={page:{x:0,y:0},client:{x:0,y:0},timeStamp:0};this.startCoords={page:{x:0,y:0},client:{x:0,y:0},timeStamp:0};this.pointerDelta={page:{x:0,y:0,vx:0,vy:0,speed:0},client:{x:0,y:0,vx:0,vy:0,speed:0},timeStamp:0};this.downEvent=null;this.downPointer={};this._eventTarget=null;this._curEventTarget=null;this.prevEvent=null;this.tapTime=0;this.prevTap=null;this.startOffset={left:0,right:0,top:0,bottom:0};this.restrictOffset={left:0,right:0,top:0,bottom:0};this.snapOffsets=[];this.gesture={start:{x:0,y:0},startDistance:0,prevDistance:0,distance:0,scale:1,startAngle:0,prevAngle:0};this.snapStatus={x:0,y:0,dx:0,dy:0,realX:0,realY:0,snappedX:0,snappedY:0,targets:[],locked:false,changed:false};this.restrictStatus={dx:0,dy:0,restrictedX:0,restrictedY:0,snap:null,restricted:false,changed:false};this.restrictStatus.snap=this.snapStatus;this.pointerIsDown=false;this.pointerWasMoved=false;this.gesturing=false;this.dragging=false;this.resizing=false;this.resizeAxes='xy';this.mouse=false;o.push(this);}aI.prototype={getPageXY:function(a,b){return af(a,b,this);},getClientXY:function(a,b){return ag(a,b,this);},setEventXY:function(a,b){return ab(a,b,this);},pointerOver:function(a,b,c){if(this.prepared.name||!this.mouse)return;var d=[],e=[],f=this.element;this.addPointer(a);if(this.target&&(aA(this.target,this.element,c)||!aB(this.target,this.element,c))){this.target=null;this.element=null;this.matches=[];this.matchElements=[];}var g=n.get(c),h=(g&&!aA(g,c,c)&&aB(g,c,c)&&aQ(g.getAction(a,b,this,c),g));if(h&&!aG(g,c,h))h=null;function k(a,b){if(a&&az(a,c)&&!aA(a,c,c)&&aB(a,c,c)&&bk(c,b)){d.push(a);e.push(c);}}if(h){this.target=g;this.element=c;this.matches=[];this.matchElements=[];}else{n.forEachSelector(k);if(this.validateSelector(a,b,d,e)){this.matches=d;this.matchElements=e;this.pointerHover(a,b,this.matches,this.matchElements);K.add(c,i?j.move:'mousemove',aR.pointerHover);}else if(this.target)if(aw(f,c)){this.pointerHover(a,b,this.matches,this.matchElements);K.add(this.element,i?j.move:'mousemove',aR.pointerHover);}else{this.target=null;this.element=null;this.matches=[];this.matchElements=[];}}},pointerHover:function(a,b,c,d,e,f){var g=this.target;if(!this.prepared.name&&this.mouse){var h;this.setEventXY(this.curCoords,[a]);if(e)h=this.validateSelector(a,b,e,f);else if(g)h=aQ(g.getAction(this.pointers[0],b,this,this.element),this.target);if(g&&g.options.styleCursor)if(h)g._doc.documentElement.style.cursor=aN(h);else g._doc.documentElement.style.cursor='';}else if(this.prepared.name)this.checkAndPreventDefault(b,g,this.element);},pointerOut:function(a,b,c){if(this.prepared.name)return;if(!n.get(c))K.remove(c,i?j.move:'mousemove',aR.pointerHover);if(this.target&&this.target.options.styleCursor&&!this.interacting())this.target._doc.documentElement.style.cursor='';},selectorDown:function(a,b,c,d){var e=this,f=K.useAttachEvent?W({},b):b,g=c,h=this.addPointer(a),i;this.holdTimers[h]=setTimeout(function(){e.pointerHold(K.useAttachEvent?f:a,f,c,d);},r._holdDuration);this.pointerIsDown=true;if(this.inertiaStatus.active&&this.target.selector)while(M(g)){if(g===this.element&&aQ(this.target.getAction(a,b,this,this.element),this.target).name===this.prepared.name){J(this.inertiaStatus.i);this.inertiaStatus.active=false;this.collectEventTargets(a,b,c,'down');return;}g=ay(g);}if(this.interacting()){this.collectEventTargets(a,b,c,'down');return;}function j(a,b,d){var f=H?d.querySelectorAll(b):undefined;if(az(a,g)&&!aA(a,g,c)&&aB(a,g,c)&&bk(g,b,f)){e.matches.push(a);e.matchElements.push(g);}}this.setEventXY(this.curCoords,[a]);this.downEvent=b;while(M(g)&&!i){this.matches=[];this.matchElements=[];n.forEachSelector(j);i=this.validateSelector(a,b,this.matches,this.matchElements);g=ay(g);}if(i){this.prepared.name=i.name;this.prepared.axis=i.axis;this.prepared.edges=i.edges;this.collectEventTargets(a,b,c,'down');return this.pointerDown(a,b,c,d,i);}else{this.downTimes[h]=new Date().getTime();this.downTargets[h]=c;Y(this.downPointer,a);Z(this.prevCoords,this.curCoords);this.pointerWasMoved=false;}this.collectEventTargets(a,b,c,'down');},pointerDown:function(a,b,c,d,e){if(!e&&!this.inertiaStatus.active&&this.pointerWasMoved&&this.prepared.name){this.checkAndPreventDefault(b,this.target,this.element);return;}this.pointerIsDown=true;this.downEvent=b;var f=this.addPointer(a),g;if(this.pointerIds.length>1&&this.target._element===this.element){var h=aQ(e||this.target.getAction(a,b,this,this.element),this.target);if(aG(this.target,this.element,h))g=h;this.prepared.name=null;}else if(!this.prepared.name){var i=n.get(d);if(i&&!aA(i,d,c)&&aB(i,d,c)&&(g=aQ(e||i.getAction(a,b,this,d),i,c))&&aG(i,d,g)){this.target=i;this.element=d;}}var j=this.target,k=j&&j.options;if(j&&(e||!this.prepared.name)){g=g||aQ(e||j.getAction(a,b,this,d),j,this.element);this.setEventXY(this.startCoords,this.pointers);if(!g)return;if(k.styleCursor)j._doc.documentElement.style.cursor=aN(g);this.resizeAxes=g.name==='resize'?g.axis:null;if(g==='gesture'&&this.pointerIds.length<2)g=null;this.prepared.name=g.name;this.prepared.axis=g.axis;this.prepared.edges=g.edges;this.snapStatus.snappedX=this.snapStatus.snappedY=this.restrictStatus.restrictedX=this.restrictStatus.restrictedY=NaN;this.downTimes[f]=new Date().getTime();this.downTargets[f]=c;Y(this.downPointer,a);Z(this.prevCoords,this.startCoords);this.pointerWasMoved=false;this.checkAndPreventDefault(b,j,this.element);}else if(this.inertiaStatus.active&&d===this.element&&aQ(j.getAction(a,b,this,this.element),j).name===this.prepared.name){J(this.inertiaStatus.i);this.inertiaStatus.active=false;this.checkAndPreventDefault(b,j,this.element);}},setModifications:function(a,b){var c=this.target,d=true,e=aD(c,this.prepared.name)&&(!c.options[this.prepared.name].snap.endOnly||b),f=aE(c,this.prepared.name)&&(!c.options[this.prepared.name].restrict.endOnly||b);if(e)this.setSnapping(a);else this.snapStatus.locked=false;if(f)this.setRestriction(a);else this.restrictStatus.restricted=false;if(e&&this.snapStatus.locked&&!this.snapStatus.changed)d=f&&this.restrictStatus.restricted&&this.restrictStatus.changed;else if(f&&this.restrictStatus.restricted&&!this.restrictStatus.changed)d=false;return d;},setStartOffsets:function(a,b,c){var d=b.getRect(c),e=as(b,c),f=b.options[this.prepared.name].snap,g=b.options[this.prepared.name].restrict,h,i;if(d){this.startOffset.left=this.startCoords.page.x-d.left;this.startOffset.top=this.startCoords.page.y-d.top;this.startOffset.right=d.right-this.startCoords.page.x;this.startOffset.bottom=d.bottom-this.startCoords.page.y;if('width' in d)h=d.width;else h=d.right-d.left;if('height' in d)i=d.height;else i=d.bottom-d.top;}else this.startOffset.left=this.startOffset.top=this.startOffset.right=this.startOffset.bottom=0;this.snapOffsets.splice(0);var j=f&&f.offset==='startCoords'?{x:this.startCoords.page.x-e.x,y:this.startCoords.page.y-e.y}:f&&f.offset||{x:0,y:0};if(d&&f&&f.relativePoints&&f.relativePoints.length)for(var k=0;k<f.relativePoints.length;k++)this.snapOffsets.push({x:this.startOffset.left-(h*f.relativePoints[k].x)+j.x,y:this.startOffset.top-(i*f.relativePoints[k].y)+j.y});else this.snapOffsets.push(j);if(d&&g.elementRect){this.restrictOffset.left=this.startOffset.left-(h*g.elementRect.left);this.restrictOffset.top=this.startOffset.top-(i*g.elementRect.top);this.restrictOffset.right=this.startOffset.right-(h*(1-g.elementRect.right));this.restrictOffset.bottom=this.startOffset.bottom-(i*(1-g.elementRect.bottom));}else this.restrictOffset.left=this.restrictOffset.top=this.restrictOffset.right=this.restrictOffset.bottom=0;},start:function(a,b,c){if(this.interacting()||!this.pointerIsDown||this.pointerIds.length<(a.name==='gesture'?2:1))return;if(bi(o,this)===-1)o.push(this);if(!this.prepared.name)this.setEventXY(this.startCoords);this.prepared.name=a.name;this.prepared.axis=a.axis;this.prepared.edges=a.edges;this.target=b;this.element=c;this.setStartOffsets(a.name,b,c);this.setModifications(this.startCoords.page);this.prevEvent=this[this.prepared.name+'Start'](this.downEvent);},pointerMove:function(a,b,c,d,e){if(this.inertiaStatus.active){var f=this.inertiaStatus.upCoords.page;var g=this.inertiaStatus.upCoords.client;var h={pageX:f.x+this.inertiaStatus.sx,pageY:f.y+this.inertiaStatus.sy,clientX:g.x+this.inertiaStatus.sx,clientY:g.y+this.inertiaStatus.sy};this.setEventXY(this.curCoords,[h]);}else{this.recordPointer(a);this.setEventXY(this.curCoords,this.pointers);}var i=(this.curCoords.page.x===this.prevCoords.page.x&&this.curCoords.page.y===this.prevCoords.page.y&&this.curCoords.client.x===this.prevCoords.client.x&&this.curCoords.client.y===this.prevCoords.client.y);var j,l,m=this.mouse?0:bi(this.pointerIds,ai(a));if(this.pointerIsDown&&!this.pointerWasMoved){j=this.curCoords.client.x-this.startCoords.client.x;l=this.curCoords.client.y-this.startCoords.client.y;this.pointerWasMoved=k(j,l)>w;}if(!i&&(!this.pointerIsDown||this.pointerWasMoved)){if(this.pointerIsDown)clearTimeout(this.holdTimers[m]);this.collectEventTargets(a,b,c,'move');}if(!this.pointerIsDown)return;if(i&&this.pointerWasMoved&&!e){this.checkAndPreventDefault(b,this.target,this.element);return;}ac(this.pointerDelta,this.prevCoords,this.curCoords);if(!this.prepared.name)return;if(this.pointerWasMoved&&(!this.inertiaStatus.active||(a instanceof aL&&/inertiastart/.test(a.type)))){if(!this.interacting()){ac(this.pointerDelta,this.prevCoords,this.curCoords);if(this.prepared.name==='drag'){var o=Math.abs(j),p=Math.abs(l),q=this.target.options.drag.axis,r=(o>p?'x':o<p?'y':'xy');if(r!=='xy'&&q!=='xy'&&q!==r){this.prepared.name=null;var s=c;while(M(s)){var t=n.get(s);if(t&&t!==this.target&&!t.options.drag.manualStart&&t.getAction(this.downPointer,this.downEvent,this,s).name==='drag'&&aC(r,t)){this.prepared.name='drag';this.target=t;this.element=s;break;}s=ay(s);}if(!this.prepared.name){var u=this;var v=function(a,b,d){var e=H?d.querySelectorAll(b):undefined;if(a===u.target)return;if(az(a,c)&&!a.options.drag.manualStart&&!aA(a,s,c)&&aB(a,s,c)&&bk(s,b,e)&&a.getAction(u.downPointer,u.downEvent,u,s).name==='drag'&&aC(r,a)&&aG(a,s,'drag'))return a;};s=c;while(M(s)){var x=n.forEachSelector(v);if(x){this.prepared.name='drag';this.target=x;this.element=s;break;}s=ay(s);}}}}}var y=!!this.prepared.name&&!this.interacting();if(y&&(this.target.options[this.prepared.name].manualStart||!aG(this.target,this.element,this.prepared))){this.stop(b);return;}if(this.prepared.name&&this.target){if(y)this.start(this.prepared,this.target,this.element);var z=this.setModifications(this.curCoords.page,e);if(z||y)this.prevEvent=this[this.prepared.name+'Move'](b);this.checkAndPreventDefault(b,this.target,this.element);}}Z(this.prevCoords,this.curCoords);if(this.dragging||this.resizing)this.autoScrollMove(a);},dragStart:function(a){var b=new aL(this,a,'drag','start',this.element);this.dragging=true;this.target.fire(b);this.activeDrops.dropzones=[];this.activeDrops.elements=[];this.activeDrops.rects=[];if(!this.dynamicDrop)this.setActiveDrops(this.element);var c=this.getDropEvents(a,b);if(c.activate)this.fireActiveDrops(c.activate);return b;},dragMove:function(a){var b=this.target,c=new aL(this,a,'drag','move',this.element),d=this.element,e=this.getDrop(c,a,d);this.dropTarget=e.dropzone;this.dropElement=e.element;var f=this.getDropEvents(a,c);b.fire(c);if(f.leave)this.prevDropTarget.fire(f.leave);if(f.enter)this.dropTarget.fire(f.enter);if(f.move)this.dropTarget.fire(f.move);this.prevDropTarget=this.dropTarget;this.prevDropElement=this.dropElement;return c;},resizeStart:function(a){var b=new aL(this,a,'resize','start',this.element);if(this.prepared.edges){var c=this.target.getRect(this.element);if(this.target.options.resize.square||this.target.options.resize.preserveAspectRatio){var d=W({},this.prepared.edges);d.top=d.top||(d.left&&!d.bottom);d.left=d.left||(d.top&&!d.right);d.bottom=d.bottom||(d.right&&!d.top);d.right=d.right||(d.bottom&&!d.left);this.prepared._linkedEdges=d;}else this.prepared._linkedEdges=null;if(this.target.options.resize.preserveAspectRatio)this.resizeStartAspectRatio=c.width/c.height;this.resizeRects={start:c,current:W({},c),restricted:W({},c),previous:W({},c),delta:{left:0,right:0,width:0,top:0,bottom:0,height:0}};b.rect=this.resizeRects.restricted;b.deltaRect=this.resizeRects.delta;}this.target.fire(b);this.resizing=true;return b;},resizeMove:function(a){var b=new aL(this,a,'resize','move',this.element);var c=this.prepared.edges,d=this.target.options.resize.invert,e=d==='reposition'||d==='negate';if(c){var f=b.dx,g=b.dy,h=this.resizeRects.start,i=this.resizeRects.current,j=this.resizeRects.restricted,k=this.resizeRects.delta,l=W(this.resizeRects.previous,j),m=c;if(this.target.options.resize.preserveAspectRatio){var n=this.resizeStartAspectRatio;c=this.prepared._linkedEdges;if((m.left&&m.bottom)||(m.right&&m.top))g=-f/n;else if(m.left||m.right)g=f/n;else if(m.top||m.bottom)f=g*n;}else if(this.target.options.resize.square){c=this.prepared._linkedEdges;if((m.left&&m.bottom)||(m.right&&m.top))g=-f;else if(m.left||m.right)g=f;else if(m.top||m.bottom)f=g;}if(c.top)i.top+=g;if(c.bottom)i.bottom+=g;if(c.left)i.left+=f;if(c.right)i.right+=f;if(e){W(j,i);if(d==='reposition'){var o;if(j.top>j.bottom){o=j.top;j.top=j.bottom;j.bottom=o;}if(j.left>j.right){o=j.left;j.left=j.right;j.right=o;}}}else{j.top=Math.min(i.top,h.bottom);j.bottom=Math.max(i.bottom,h.top);j.left=Math.min(i.left,h.right);j.right=Math.max(i.right,h.left);}j.width=j.right-j.left;j.height=j.bottom-j.top;for(var p in j)k[p]=j[p]-l[p];b.edges=this.prepared.edges;b.rect=j;b.deltaRect=k;}this.target.fire(b);return b;},gestureStart:function(a){var b=new aL(this,a,'gesture','start',this.element);b.ds=0;this.gesture.startDistance=this.gesture.prevDistance=b.distance;this.gesture.startAngle=this.gesture.prevAngle=b.angle;this.gesture.scale=1;this.gesturing=true;this.target.fire(b);return b;},gestureMove:function(a){if(!this.pointerIds.length)return this.prevEvent;var b;b=new aL(this,a,'gesture','move',this.element);b.ds=b.scale-this.gesture.scale;this.target.fire(b);this.gesture.prevAngle=b.angle;this.gesture.prevDistance=b.distance;if(b.scale!==Infinity&&b.scale!==null&&b.scale!==undefined&&!isNaN(b.scale))this.gesture.scale=b.scale;return b;},pointerHold:function(a,b,c){this.collectEventTargets(a,b,c,'hold');},pointerUp:function(a,b,c,d){var e=this.mouse?0:bi(this.pointerIds,ai(a));clearTimeout(this.holdTimers[e]);this.collectEventTargets(a,b,c,'up');this.collectEventTargets(a,b,c,'tap');this.pointerEnd(a,b,c,d);this.removePointer(a);},pointerCancel:function(a,b,c,d){var e=this.mouse?0:bi(this.pointerIds,ai(a));clearTimeout(this.holdTimers[e]);this.collectEventTargets(a,b,c,'cancel');this.pointerEnd(a,b,c,d);this.removePointer(a);},ie8Dblclick:function(a,b,c){if(this.prevTap&&b.clientX===this.prevTap.clientX&&b.clientY===this.prevTap.clientY&&c===this.prevTap.target){this.downTargets[0]=c;this.downTimes[0]=new Date().getTime();this.collectEventTargets(a,b,c,'tap');}},pointerEnd:function(a,b,c,d){var e,f=this.target,g=f&&f.options,h=g&&this.prepared.name&&g[this.prepared.name].inertia,i=this.inertiaStatus;if(this.interacting()){if(i.active&&!i.ending)return;var j,k=new Date().getTime(),l=false,m=false,n=false,o=aD(f,this.prepared.name)&&g[this.prepared.name].snap.endOnly,p=aE(f,this.prepared.name)&&g[this.prepared.name].restrict.endOnly,q=0,r=0,s;if(this.dragging)if(g.drag.axis==='x')j=Math.abs(this.pointerDelta.client.vx);else if(g.drag.axis==='y')j=Math.abs(this.pointerDelta.client.vy);else j=this.pointerDelta.client.speed;else j=this.pointerDelta.client.speed;l=(h&&h.enabled&&this.prepared.name!=='gesture'&&b!==i.startEvent);m=(l&&(k-this.curCoords.timeStamp)<50&&j>h.minSpeed&&j>h.endSpeed);if(l&&!m&&(o||p)){var t={};t.snap=t.restrict=t;if(o){this.setSnapping(this.curCoords.page,t);if(t.locked){q+=t.dx;r+=t.dy;}}if(p){this.setRestriction(this.curCoords.page,t);if(t.restricted){q+=t.dx;r+=t.dy;}}if(q||r)n=true;}if(m||n){Z(i.upCoords,this.curCoords);this.pointers[0]=i.startEvent=s=new aL(this,b,this.prepared.name,'inertiastart',this.element);i.t0=k;f.fire(i.startEvent);if(m){i.vx0=this.pointerDelta.client.vx;i.vy0=this.pointerDelta.client.vy;i.v0=j;this.calcInertia(i);var u=W({},this.curCoords.page),v=as(f,this.element),w;u.x=u.x+i.xe-v.x;u.y=u.y+i.ye-v.y;w={useStatusXY:true,x:u.x,y:u.y,dx:0,dy:0,snap:null};w.snap=w;q=r=0;if(o){var x=this.setSnapping(this.curCoords.page,w);if(x.locked){q+=x.dx;r+=x.dy;}}if(p){var y=this.setRestriction(this.curCoords.page,w);if(y.restricted){q+=y.dx;r+=y.dy;}}i.modifiedXe+=q;i.modifiedYe+=r;i.i=I(this.boundInertiaFrame);}else{i.smoothEnd=true;i.xe=q;i.ye=r;i.sx=i.sy=0;i.i=I(this.boundSmoothEndFrame);}i.active=true;return;}if(o||p)this.pointerMove(a,b,c,d,true);}if(this.dragging){e=new aL(this,b,'drag','end',this.element);var z=this.element,A=this.getDrop(e,b,z);this.dropTarget=A.dropzone;this.dropElement=A.element;var B=this.getDropEvents(b,e);if(B.leave)this.prevDropTarget.fire(B.leave);if(B.enter)this.dropTarget.fire(B.enter);if(B.drop)this.dropTarget.fire(B.drop);if(B.deactivate)this.fireActiveDrops(B.deactivate);f.fire(e);}else if(this.resizing){e=new aL(this,b,'resize','end',this.element);f.fire(e);}else if(this.gesturing){e=new aL(this,b,'gesture','end',this.element);f.fire(e);}this.stop(b);},collectDrops:function(a){var b=[],c=[],d;a=a||this.element;for(d=0;d<n.length;d++){if(!n[d].options.drop.enabled)continue;var e=n[d],f=e.options.drop.accept;if((M(f)&&f!==a)||(U(f)&&!bk(a,f)))continue;var g=e.selector?e._context.querySelectorAll(e.selector):[e._element];for(var h=0,i=g.length;h<i;h++){var j=g[h];if(j===a)continue;b.push(e);c.push(j);}}return{dropzones:b,elements:c};},fireActiveDrops:function(a){var b,c,d,e;for(b=0;b<this.activeDrops.dropzones.length;b++){c=this.activeDrops.dropzones[b];d=this.activeDrops.elements[b];if(d!==e){a.target=d;c.fire(a);}e=d;}},setActiveDrops:function(a){var b=this.collectDrops(a,true);this.activeDrops.dropzones=b.dropzones;this.activeDrops.elements=b.elements;this.activeDrops.rects=[];for(var c=0;c<this.activeDrops.dropzones.length;c++)this.activeDrops.rects[c]=this.activeDrops.dropzones[c].getRect(this.activeDrops.elements[c]);},getDrop:function(a,b,c){var d=[];if(p)this.setActiveDrops(c);for(var e=0;e<this.activeDrops.dropzones.length;e++){var f=this.activeDrops.dropzones[e],g=this.activeDrops.elements[e],h=this.activeDrops.rects[e];d.push(f.dropCheck(a,b,this.target,c,g,h)?g:null);}var i=aH(d),j=this.activeDrops.dropzones[i]||null,k=this.activeDrops.elements[i]||null;return{dropzone:j,element:k};},getDropEvents:function(a,b){var c={enter:null,leave:null,activate:null,deactivate:null,move:null,drop:null};if(this.dropElement!==this.prevDropElement){if(this.prevDropTarget){c.leave={target:this.prevDropElement,dropzone:this.prevDropTarget,relatedTarget:b.target,draggable:b.interactable,dragEvent:b,interaction:this,timeStamp:b.timeStamp,type:'dragleave'};b.dragLeave=this.prevDropElement;b.prevDropzone=this.prevDropTarget;}if(this.dropTarget){c.enter={target:this.dropElement,dropzone:this.dropTarget,relatedTarget:b.target,draggable:b.interactable,dragEvent:b,interaction:this,timeStamp:b.timeStamp,type:'dragenter'};b.dragEnter=this.dropElement;b.dropzone=this.dropTarget;}}if(b.type==='dragend'&&this.dropTarget){c.drop={target:this.dropElement,dropzone:this.dropTarget,relatedTarget:b.target,draggable:b.interactable,dragEvent:b,interaction:this,timeStamp:b.timeStamp,type:'drop'};b.dropzone=this.dropTarget;}if(b.type==='dragstart')c.activate={target:null,dropzone:null,relatedTarget:b.target,draggable:b.interactable,dragEvent:b,interaction:this,timeStamp:b.timeStamp,type:'dropactivate'};if(b.type==='dragend')c.deactivate={target:null,dropzone:null,relatedTarget:b.target,draggable:b.interactable,dragEvent:b,interaction:this,timeStamp:b.timeStamp,type:'dropdeactivate'};if(b.type==='dragmove'&&this.dropTarget){c.move={target:this.dropElement,dropzone:this.dropTarget,relatedTarget:b.target,draggable:b.interactable,dragEvent:b,interaction:this,dragmove:b,timeStamp:b.timeStamp,type:'dropmove'};b.dropzone=this.dropTarget;}return c;},currentAction:function(){return(this.dragging&&'drag')||(this.resizing&&'resize')||(this.gesturing&&'gesture')||null;},interacting:function(){return this.dragging||this.resizing||this.gesturing;},clearTargets:function(){this.target=this.element=null;this.dropTarget=this.dropElement=this.prevDropTarget=this.prevDropElement=null;},stop:function(a){if(this.interacting()){s.stop();this.matches=[];this.matchElements=[];var b=this.target;if(b.options.styleCursor)b._doc.documentElement.style.cursor='';if(a&&R(a.preventDefault))this.checkAndPreventDefault(a,b,this.element);if(this.dragging)this.activeDrops.dropzones=this.activeDrops.elements=this.activeDrops.rects=null;}this.clearTargets();this.pointerIsDown=this.snapStatus.locked=this.dragging=this.resizing=this.gesturing=false;this.prepared.name=this.prevEvent=null;this.inertiaStatus.resumeDx=this.inertiaStatus.resumeDy=0;for(var c=0;c<this.pointers.length;c++)if(bi(this.pointerIds,ai(this.pointers[c]))===-1)this.pointers.splice(c,1);},inertiaFrame:function(){var a=this.inertiaStatus,b=this.target.options[this.prepared.name].inertia,c=b.resistance,d=new Date().getTime()/1000-a.t0;if(d<a.te){var e=1-(Math.exp(-c*d)-a.lambda_v0)/a.one_ve_v0;if(a.modifiedXe===a.xe&&a.modifiedYe===a.ye){a.sx=a.xe*e;a.sy=a.ye*e;}else{var f=au(0,0,a.xe,a.ye,a.modifiedXe,a.modifiedYe,e);a.sx=f.x;a.sy=f.y;}this.pointerMove(a.startEvent,a.startEvent);a.i=I(this.boundInertiaFrame);}else{a.ending=true;a.sx=a.modifiedXe;a.sy=a.modifiedYe;this.pointerMove(a.startEvent,a.startEvent);this.pointerEnd(a.startEvent,a.startEvent);a.active=a.ending=false;}},smoothEndFrame:function(){var a=this.inertiaStatus,b=new Date().getTime()-a.t0,c=this.target.options[this.prepared.name].inertia.smoothEndDuration;if(b<c){a.sx=av(b,0,a.xe,c);a.sy=av(b,0,a.ye,c);this.pointerMove(a.startEvent,a.startEvent);a.i=I(this.boundSmoothEndFrame);}else{a.ending=true;a.sx=a.xe;a.sy=a.ye;this.pointerMove(a.startEvent,a.startEvent);this.pointerEnd(a.startEvent,a.startEvent);a.smoothEnd=a.active=a.ending=false;}},addPointer:function(a){var b=ai(a),c=this.mouse?0:bi(this.pointerIds,b);if(c===-1)c=this.pointerIds.length;this.pointerIds[c]=b;this.pointers[c]=a;return c;},removePointer:function(a){var b=ai(a),c=this.mouse?0:bi(this.pointerIds,b);if(c===-1)return;this.pointers.splice(c,1);this.pointerIds.splice(c,1);this.downTargets.splice(c,1);this.downTimes.splice(c,1);this.holdTimers.splice(c,1);},recordPointer:function(a){var b=this.mouse?0:bi(this.pointerIds,ai(a));if(b===-1)return;this.pointers[b]=a;},collectEventTargets:function(a,b,c,d){var e=this.mouse?0:bi(this.pointerIds,ai(a));if(d==='tap'&&(this.pointerWasMoved||!(this.downTargets[e]&&this.downTargets[e]===c)))return;var f=[],g=[],h=c;function i(a,b,e){var i=H?e.querySelectorAll(b):undefined;if(a._iEvents[d]&&M(h)&&az(a,h)&&!aA(a,h,c)&&aB(a,h,c)&&bk(h,b,i)){f.push(a);g.push(h);}}while(h){if(bc.isSet(h)&&bc(h)._iEvents[d]){f.push(bc(h));g.push(h);}n.forEachSelector(i);h=ay(h);}if(f.length||d==='tap')this.firePointers(a,b,c,f,g,d);},firePointers:function(a,b,c,d,e,f){var g=this.mouse?0:bi(this.pointerIds,ai(a)),h={},i,j,k;if(f==='doubletap')h=a;else{Y(h,b);if(b!==a)Y(h,a);h.preventDefault=aM;h.stopPropagation=aL.prototype.stopPropagation;h.stopImmediatePropagation=aL.prototype.stopImmediatePropagation;h.interaction=this;h.timeStamp=new Date().getTime();h.originalEvent=b;h.originalPointer=a;h.type=f;h.pointerId=ai(a);h.pointerType=this.mouse?'mouse':!u?'touch':U(a.pointerType)?a.pointerType:[,,'touch','pen','mouse'][a.pointerType];}if(f==='tap'){h.dt=h.timeStamp-this.downTimes[g];j=h.timeStamp-this.tapTime;k=!!(this.prevTap&&this.prevTap.type!=='doubletap'&&this.prevTap.target===h.target&&j<500);h.double=k;this.tapTime=h.timeStamp;}for(i=0;i<d.length;i++){h.currentTarget=e[i];h.interactable=d[i];d[i].fire(h);if(h.immediatePropagationStopped||(h.propagationStopped&&e[i+1]!==h.currentTarget))break;}if(k){var l={};W(l,h);l.dt=j;l.type='doubletap';this.collectEventTargets(l,b,c,'doubletap');this.prevTap=l;}else if(f==='tap')this.prevTap=h;},validateSelector:function(a,b,c,d){for(var e=0,f=c.length;e<f;e++){var g=c[e],h=d[e],i=aQ(g.getAction(a,b,this,h),g);if(i&&aG(g,h,i)){this.target=g;this.element=h;return i;}}},setSnapping:function(a,b){var c=this.target.options[this.prepared.name].snap,d=[],e,f,g;b=b||this.snapStatus;if(b.useStatusXY)f={x:b.x,y:b.y};else{var h=as(this.target,this.element);f=W({},a);f.x-=h.x;f.y-=h.y;}b.realX=f.x;b.realY=f.y;f.x=f.x-this.inertiaStatus.resumeDx;f.y=f.y-this.inertiaStatus.resumeDy;var i=c.targets?c.targets.length:0;for(var j=0;j<this.snapOffsets.length;j++){var l={x:f.x-this.snapOffsets[j].x,y:f.y-this.snapOffsets[j].y};for(g=0;g<i;g++){if(R(c.targets[g]))e=c.targets[g](l.x,l.y,this);else e=c.targets[g];if(!e)continue;d.push({x:S(e.x)?(e.x+this.snapOffsets[j].x):l.x,y:S(e.y)?(e.y+this.snapOffsets[j].y):l.y,range:S(e.range)?e.range:c.range});}}var m={target:null,inRange:false,distance:0,range:0,dx:0,dy:0};for(g=0,i=d.length;g<i;g++){e=d[g];var n=e.range,o=e.x-f.x,p=e.y-f.y,q=k(o,p),r=q<=n;if(n===Infinity&&m.inRange&&m.range!==Infinity)r=false;if(!m.target||(r?(m.inRange&&n!==Infinity?q/n<m.distance/m.range:(n===Infinity&&m.range!==Infinity)||q<m.distance):(!m.inRange&&q<m.distance))){if(n===Infinity)r=true;m.target=e;m.distance=q;m.range=n;m.inRange=r;m.dx=o;m.dy=p;b.range=n;}}var s;if(m.target){s=(b.snappedX!==m.target.x||b.snappedY!==m.target.y);b.snappedX=m.target.x;b.snappedY=m.target.y;}else{s=true;b.snappedX=NaN;b.snappedY=NaN;}b.dx=m.dx;b.dy=m.dy;b.changed=(s||(m.inRange&&!b.locked));b.locked=m.inRange;return b;},setRestriction:function(a,b){var c=this.target,d=c&&c.options[this.prepared.name].restrict,e=d&&d.restriction,f;if(!e)return b;b=b||this.restrictStatus;f=b.useStatusXY?f={x:b.x,y:b.y}:f=W({},a);if(b.snap&&b.snap.locked){f.x+=b.snap.dx||0;f.y+=b.snap.dy||0;}f.x-=this.inertiaStatus.resumeDx;f.y-=this.inertiaStatus.resumeDy;b.dx=0;b.dy=0;b.restricted=false;var g,h,i;if(U(e)){if(e==='parent')e=ay(this.element);else if(e==='self')e=c.getRect(this.element);else e=ax(this.element,e);if(!e)return b;}if(R(e))e=e(f.x,f.y,this.element);if(M(e))e=am(e);g=e;if(!e){h=f.x;i=f.y;}else if('x' in e&&'y' in e){h=Math.max(Math.min(g.x+g.width-this.restrictOffset.right,f.x),g.x+this.restrictOffset.left);i=Math.max(Math.min(g.y+g.height-this.restrictOffset.bottom,f.y),g.y+this.restrictOffset.top);}else{h=Math.max(Math.min(g.right-this.restrictOffset.right,f.x),g.left+this.restrictOffset.left);i=Math.max(Math.min(g.bottom-this.restrictOffset.bottom,f.y),g.top+this.restrictOffset.top);}b.dx=h-f.x;b.dy=i-f.y;b.changed=b.restrictedX!==h||b.restrictedY!==i;b.restricted=!!(b.dx||b.dy);b.restrictedX=h;b.restrictedY=i;return b;},checkAndPreventDefault:function(a,b,c){if(!(b=b||this.target))return;var d=b.options,e=d.preventDefault;if(e==='auto'&&c&&!/^(input|select|textarea)$/i.test(a.target.nodeName)){if(/down|start/i.test(a.type)&&this.prepared.name==='drag'&&d.drag.axis!=='xy')return;if(d[this.prepared.name]&&d[this.prepared.name].manualStart&&!this.interacting())return;a.preventDefault();return;}if(e==='always'){a.preventDefault();return;}},calcInertia:function(a){var b=this.target.options[this.prepared.name].inertia,c=b.resistance,d=-Math.log(b.endSpeed/a.v0)/c;a.x0=this.prevEvent.pageX;a.y0=this.prevEvent.pageY;a.t0=a.startEvent.timeStamp/1000;a.sx=a.sy=0;a.modifiedXe=a.xe=(a.vx0-d)/c;a.modifiedYe=a.ye=(a.vy0-d)/c;a.te=d;a.lambda_v0=c/a.v0;a.one_ve_v0=1-b.endSpeed/a.v0;},autoScrollMove:function(a){if(!(this.interacting()&&aF(this.target,this.prepared.name)))return;if(this.inertiaStatus.active){s.x=s.y=0;return;}var b,c,d,e,f=this.target.options[this.prepared.name].autoScroll,g=f.container||ak(this.element);if(N(g)){e=a.clientX<s.margin;b=a.clientY<s.margin;c=a.clientX>g.innerWidth-s.margin;d=a.clientY>g.innerHeight-s.margin;}else{var h=al(g);e=a.clientX<h.left+s.margin;b=a.clientY<h.top+s.margin;c=a.clientX>h.right-s.margin;d=a.clientY>h.bottom-s.margin;}s.x=(c?1:e?-1:0);s.y=(d?1:b?-1:0);if(!s.isScrolling){s.margin=f.margin;s.speed=f.speed;s.start(this);}},_updateEventTargets:function(a,b){this._eventTarget=a;this._curEventTarget=b;}};function aJ(a,b,c){var d=0,e=o.length,f=(/mouse/i.test(a.pointerType||b)||a.pointerType===4),g;var h=ai(a);if(/down|start/i.test(b))for(d=0;d<e;d++){g=o[d];var i=c;if(g.inertiaStatus.active&&g.target.options[g.prepared.name].inertia.allowResume&&(g.mouse===f))while(i){if(i===g.element)return g;i=ay(i);}}if(f||!(t||u)){for(d=0;d<e;d++)if(o[d].mouse&&!o[d].inertiaStatus.active)return o[d];for(d=0;d<e;d++)if(o[d].mouse&&!(/down/.test(b)&&o[d].inertiaStatus.active))return g;g=new aI();g.mouse=true;return g;}for(d=0;d<e;d++)if(bj(o[d].pointerIds,h))return o[d];if(/up|end|out/i.test(b))return null;for(d=0;d<e;d++){g=o[d];if((!g.prepared.name||(g.target.options.gesture.enabled))&&!g.interacting()&&!(!f&&g.mouse))return g;}return new aI();}function aK(a){return(function(b){var c,d=aj(b.path?b.path[0]:b.target),e=aj(b.currentTarget),f;if(t&&/touch/.test(b.type)){x=new Date().getTime();for(f=0;f<b.changedTouches.length;f++){var g=b.changedTouches[f];c=aJ(g,b.type,d);if(!c)continue;c._updateEventTargets(d,e);c[a](g,b,d,e);}}else{if(!u&&/mouse/.test(b.type)){for(f=0;f<o.length;f++)if(!o[f].mouse&&o[f].pointerIsDown)return;if(new Date().getTime()-x<500)return;}c=aJ(b,b.type,d);if(!c)return;c._updateEventTargets(d,e);c[a](b,b,d,e);}});}function aL(a,b,c,d,e,f){var g,h,i=a.target,j=a.snapStatus,l=a.restrictStatus,m=a.pointers,n=(i&&i.options||r).deltaSource,o=n+'X',p=n+'Y',q=i?i.options:r,s=as(i,e),t=d==='start',u=d==='end',v=t?a.startCoords:a.curCoords;e=e||a.element;h=W({},v.page);g=W({},v.client);h.x-=s.x;h.y-=s.y;g.x-=s.x;g.y-=s.y;var w=q[c].snap&&q[c].snap.relativePoints;if(aD(i,c)&&!(t&&w&&w.length)){this.snap={range:j.range,locked:j.locked,x:j.snappedX,y:j.snappedY,realX:j.realX,realY:j.realY,dx:j.dx,dy:j.dy};if(j.locked){h.x+=j.dx;h.y+=j.dy;g.x+=j.dx;g.y+=j.dy;}}if(aE(i,c)&&!(t&&q[c].restrict.elementRect)&&l.restricted){h.x+=l.dx;h.y+=l.dy;g.x+=l.dx;g.y+=l.dy;this.restrict={dx:l.dx,dy:l.dy};}this.pageX=h.x;this.pageY=h.y;this.clientX=g.x;this.clientY=g.y;this.x0=a.startCoords.page.x-s.x;this.y0=a.startCoords.page.y-s.y;this.clientX0=a.startCoords.client.x-s.x;this.clientY0=a.startCoords.client.y-s.y;this.ctrlKey=b.ctrlKey;this.altKey=b.altKey;this.shiftKey=b.shiftKey;this.metaKey=b.metaKey;this.button=b.button;this.buttons=b.buttons;this.target=e;this.t0=a.downTimes[0];this.type=c+(d||'');this.interaction=a;this.interactable=i;var x=a.inertiaStatus;if(x.active)this.detail='inertia';if(f)this.relatedTarget=f;if(u)if(n==='client'){this.dx=g.x-a.startCoords.client.x;this.dy=g.y-a.startCoords.client.y;}else{this.dx=h.x-a.startCoords.page.x;this.dy=h.y-a.startCoords.page.y;}else if(t){this.dx=0;this.dy=0;}else if(d==='inertiastart'){this.dx=a.prevEvent.dx;this.dy=a.prevEvent.dy;}else if(n==='client'){this.dx=g.x-a.prevEvent.clientX;this.dy=g.y-a.prevEvent.clientY;}else{this.dx=h.x-a.prevEvent.pageX;this.dy=h.y-a.prevEvent.pageY;}if(a.prevEvent&&a.prevEvent.detail==='inertia'&&!x.active&&q[c].inertia&&q[c].inertia.zeroResumeDelta){x.resumeDx+=this.dx;x.resumeDy+=this.dy;this.dx=this.dy=0;}if(c==='resize'&&a.resizeAxes){if(q.resize.square){if(a.resizeAxes==='y')this.dx=this.dy;else this.dy=this.dx;this.axes='xy';}else{this.axes=a.resizeAxes;if(a.resizeAxes==='x')this.dy=0;else if(a.resizeAxes==='y')this.dx=0;}}else if(c==='gesture'){this.touches=[m[0],m[1]];if(t){this.distance=aq(m,n);this.box=ap(m);this.scale=1;this.ds=0;this.angle=ar(m,undefined,n);this.da=0;}else if(u||b instanceof aL){this.distance=a.prevEvent.distance;this.box=a.prevEvent.box;this.scale=a.prevEvent.scale;this.ds=this.scale-1;this.angle=a.prevEvent.angle;this.da=this.angle-a.gesture.startAngle;}else{this.distance=aq(m,n);this.box=ap(m);this.scale=this.distance/a.gesture.startDistance;this.angle=ar(m,a.gesture.prevAngle,n);this.ds=this.scale-a.gesture.prevScale;this.da=this.angle-a.gesture.prevAngle;}}if(t){this.timeStamp=a.downTimes[0];this.dt=0;this.duration=0;this.speed=0;this.velocityX=0;this.velocityY=0;}else if(d==='inertiastart'){this.timeStamp=a.prevEvent.timeStamp;this.dt=a.prevEvent.dt;this.duration=a.prevEvent.duration;this.speed=a.prevEvent.speed;this.velocityX=a.prevEvent.velocityX;this.velocityY=a.prevEvent.velocityY;}else{this.timeStamp=new Date().getTime();this.dt=this.timeStamp-a.prevEvent.timeStamp;this.duration=this.timeStamp-a.downTimes[0];if(b instanceof aL){var y=this[o]-a.prevEvent[o],z=this[p]-a.prevEvent[p],A=this.dt/1000;this.speed=k(y,z)/A;this.velocityX=y/A;this.velocityY=z/A;}else{this.speed=a.pointerDelta[n].speed;this.velocityX=a.pointerDelta[n].vx;this.velocityY=a.pointerDelta[n].vy;}}if((u||d==='inertiastart')&&a.prevEvent.speed>600&&this.timeStamp-a.prevEvent.timeStamp<150){var B=180*Math.atan2(a.prevEvent.velocityY,a.prevEvent.velocityX)/Math.PI,C=22.5;if(B<0)B+=360;var D=135-C<=B&&B<225+C,E=225-C<=B&&B<315+C,F=!D&&(315-C<=B||B<45+C),G=!E&&45-C<=B&&B<135+C;this.swipe={up:E,down:G,left:D,right:F,angle:B,speed:a.prevEvent.speed,velocity:{x:a.prevEvent.velocityX,y:a.prevEvent.velocityY}};}}aL.prototype={preventDefault:L,stopImmediatePropagation:function(){this.immediatePropagationStopped=this.propagationStopped=true;},stopPropagation:function(){this.propagationStopped=true;}};function aM(){this.originalEvent.preventDefault();}function aN(a){var b='';if(a.name==='drag')b=z.drag;if(a.name==='resize')if(a.axis)b=z[a.name+a.axis];else if(a.edges){var c='resize',d=['top','bottom','left','right'];for(var e=0;e<4;e++)if(a.edges[d[e]])c+=d[e];b=z[c];}return b;}function aO(a,b,c,d,e,f,g){if(!b)return false;if(b===true){var h=S(f.width)?f.width:f.right-f.left,i=S(f.height)?f.height:f.bottom-f.top;if(h<0)if(a==='left')a='right';else if(a==='right')a='left';if(i<0)if(a==='top')a='bottom';else if(a==='bottom')a='top';if(a==='left')return c.x<((h>=0?f.left:f.right)+g);if(a==='top')return c.y<((i>=0?f.top:f.bottom)+g);if(a==='right')return c.x>((h>=0?f.right:f.left)-g);if(a==='bottom')return c.y>((i>=0?f.bottom:f.top)-g);}if(!M(d))return false;return M(b)?b===d:bl(d,b,e);}function aP(a,b,c){var d=this.getRect(c),e=false,f=null,g=null,h,i=W({},b.curCoords.page),j=this.options;if(!d)return null;if(A.resize&&j.resize.enabled){var k=j.resize;h={left:false,right:false,top:false,bottom:false};if(Q(k.edges)){for(var l in h)h[l]=aO(l,k.edges[l],i,b._eventTarget,c,d,k.margin||v);h.left=h.left&&!h.right;h.top=h.top&&!h.bottom;e=h.left||h.right||h.top||h.bottom;}else{var m=j.resize.axis!=='y'&&i.x>(d.right-v),n=j.resize.axis!=='x'&&i.y>(d.bottom-v);e=m||n;g=(m?'x':'')+(n?'y':'');}}f=e?'resize':A.drag&&j.drag.enabled?'drag':null;if(A.gesture&&b.pointerIds.length>=2&&!(b.dragging||b.resizing))f='gesture';if(f)return{name:f,axis:g,edges:h};return null;}function aQ(a,b){if(!Q(a))return null;var c=a.name,d=b.options;if(((c==='resize'&&d.resize.enabled)||(c==='drag'&&d.drag.enabled)||(c==='gesture'&&d.gesture.enabled))&&A[c]){if(c==='resize'||c==='resizeyx')c='resizexy';return a;}return null;}var aR={},aS=['dragStart','dragMove','resizeStart','resizeMove','gestureStart','gestureMove','pointerOver','pointerOut','pointerHover','selectorDown','pointerDown','pointerMove','pointerUp','pointerCancel','pointerEnd','addPointer','removePointer','recordPointer','autoScrollMove'];for(var aT=0,aU=aS.length;aT<aU;aT++){var aV=aS[aT];aR[aV]=aK(aV);}function aW(a,b){var c={},d=q[a.type],e=aj(a.path?a.path[0]:a.target),f=e;b=b?true:false;for(var g in a)c[g]=a[g];c.originalEvent=a;c.preventDefault=aM;while(M(f)){for(var h=0;h<d.selectors.length;h++){var i=d.selectors[h],j=d.contexts[h];if(bk(f,i)&&aw(j,e)&&aw(j,f)){var k=d.listeners[h];c.currentTarget=f;for(var l=0;l<k.length;l++)if(k[l][1]===b)k[l][0](c);}}f=ay(f);}}function aX(a){return aW.call(this,a,true);}n.indexOfElement=function aY(a,b){b=b||c;for(var d=0;d<this.length;d++){var e=this[d];if((e.selector===a&&(e._context===b))||(!e.selector&&e._element===a))return d;}return -1;};n.get=function aZ(a,b){return this[this.indexOfElement(a,b&&b.context)];};n.forEachSelector=function(a){for(var b=0;b<this.length;b++){var c=this[b];if(!c.selector)continue;var d=a(c,c.selector,c._context,b,this);if(d!==undefined)return d;}};function bc(a,b){return n.get(a,b)||new bd(a,b);}function bd(a,c){this._element=a;this._iEvents=this._iEvents||{};var d;if(V(a)){this.selector=a;var e=c&&c.context;d=e?ak(e):b;if(e&&(d.Node?e instanceof d.Node:(M(e)||e===d.document)))this._context=e;}else{d=ak(a);if(M(a,d))if(i){K.add(this._element,j.down,aR.pointerDown);K.add(this._element,j.move,aR.pointerHover);}else{K.add(this._element,'mousedown',aR.pointerDown);K.add(this._element,'mousemove',aR.pointerHover);K.add(this._element,'touchstart',aR.pointerDown);K.add(this._element,'touchmove',aR.pointerHover);}}this._doc=d.document;if(!bj(m,this._doc))bh(this._doc);n.push(this);this.set(c);}bd.prototype={setOnEvents:function(a,b){if(a==='drop'){if(R(b.ondrop))this.ondrop=b.ondrop;if(R(b.ondropactivate))this.ondropactivate=b.ondropactivate;if(R(b.ondropdeactivate))this.ondropdeactivate=b.ondropdeactivate;if(R(b.ondragenter))this.ondragenter=b.ondragenter;if(R(b.ondragleave))this.ondragleave=b.ondragleave;if(R(b.ondropmove))this.ondropmove=b.ondropmove;}else{a='on'+a;if(R(b.onstart))this[a+'start']=b.onstart;if(R(b.onmove))this[a+'move']=b.onmove;if(R(b.onend))this[a+'end']=b.onend;if(R(b.oninertiastart))this[a+'inertiastart']=b.oninertiastart;}return this;},draggable:function(a){if(Q(a)){this.options.drag.enabled=a.enabled===false?false:true;this.setPerAction('drag',a);this.setOnEvents('drag',a);if(/^x$|^y$|^xy$/.test(a.axis))this.options.drag.axis=a.axis;else if(a.axis===null)delete this.options.drag.axis;return this;}if(T(a)){this.options.drag.enabled=a;return this;}return this.options.drag;},setPerAction:function(a,b){for(var c in b)if(c in r[a])if(Q(b[c])){this.options[a][c]=W(this.options[a][c]||{},b[c]);if(Q(r.perAction[c])&&'enabled' in r.perAction[c])this.options[a][c].enabled=b[c].enabled===false?false:true;}else if(T(b[c])&&Q(r.perAction[c]))this.options[a][c].enabled=b[c];else if(b[c]!==undefined)this.options[a][c]=b[c];},dropzone:function(a){if(Q(a)){this.options.drop.enabled=a.enabled===false?false:true;this.setOnEvents('drop',a);if(/^(pointer|center)$/.test(a.overlap))this.options.drop.overlap=a.overlap;else if(S(a.overlap))this.options.drop.overlap=Math.max(Math.min(1,a.overlap),0);if('accept' in a)this.options.drop.accept=a.accept;if('checker' in a)this.options.drop.checker=a.checker;return this;}if(T(a)){this.options.drop.enabled=a;return this;}return this.options.drop;},dropCheck:function(a,b,c,d,e,f){var g=false;if(!(f=f||this.getRect(e)))return(this.options.drop.checker?this.options.drop.checker(a,b,g,this,e,c,d):false);var h=this.options.drop.overlap;if(h==='pointer'){var i=af(a),j=as(c,d),k,l;i.x+=j.x;i.y+=j.y;k=(i.x>f.left)&&(i.x<f.right);l=(i.y>f.top)&&(i.y<f.bottom);g=k&&l;}var m=c.getRect(d);if(h==='center'){var n=m.left+m.width/2,o=m.top+m.height/2;g=n>=f.left&&n<=f.right&&o>=f.top&&o<=f.bottom;}if(S(h)){var p=(Math.max(0,Math.min(f.right,m.right)-Math.max(f.left,m.left))*Math.max(0,Math.min(f.bottom,m.bottom)-Math.max(f.top,m.top))),q=p/(m.width*m.height);g=q>=h;}if(this.options.drop.checker)g=this.options.drop.checker(a,b,g,this,e,c,d);return g;},dropChecker:function(a){if(R(a)){this.options.drop.checker=a;return this;}if(a===null){delete this.options.getRect;return this;}return this.options.drop.checker;},accept:function(a){if(M(a)){this.options.drop.accept=a;return this;}if(V(a)){this.options.drop.accept=a;return this;}if(a===null){delete this.options.drop.accept;return this;}return this.options.drop.accept;},resizable:function(a){if(Q(a)){this.options.resize.enabled=a.enabled===false?false:true;this.setPerAction('resize',a);this.setOnEvents('resize',a);if(/^x$|^y$|^xy$/.test(a.axis))this.options.resize.axis=a.axis;else if(a.axis===null)this.options.resize.axis=r.resize.axis;if(T(a.preserveAspectRatio))this.options.resize.preserveAspectRatio=a.preserveAspectRatio;else if(T(a.square))this.options.resize.square=a.square;return this;}if(T(a)){this.options.resize.enabled=a;return this;}return this.options.resize;},squareResize:function(a){if(T(a)){this.options.resize.square=a;return this;}if(a===null){delete this.options.resize.square;return this;}return this.options.resize.square;},gesturable:function(a){if(Q(a)){this.options.gesture.enabled=a.enabled===false?false:true;this.setPerAction('gesture',a);this.setOnEvents('gesture',a);return this;}if(T(a)){this.options.gesture.enabled=a;return this;}return this.options.gesture;},autoScroll:function(a){if(Q(a))a=W({actions:['drag','resize']},a);else if(T(a))a={actions:['drag','resize'],enabled:a};return this.setOptions('autoScroll',a);},snap:function(a){var b=this.setOptions('snap',a);if(b===this)return this;return b.drag;},setOptions:function(a,b){var c=b&&P(b.actions)?b.actions:['drag'];var d;if(Q(b)||T(b)){for(d=0;d<c.length;d++){var e=/resize/.test(c[d])?'resize':c[d];if(!Q(this.options[e]))continue;var f=this.options[e][a];if(Q(b)){W(f,b);f.enabled=b.enabled===false?false:true;if(a==='snap'){if(f.mode==='grid')f.targets=[bc.createSnapGrid(W({offset:f.gridOffset||{x:0,y:0}},f.grid||{}))];else if(f.mode==='anchor')f.targets=f.anchors;else if(f.mode==='path')f.targets=f.paths;if('elementOrigin' in b)f.relativePoints=[b.elementOrigin];}}else if(T(b))f.enabled=b;}return this;}var g={},h=['drag','resize','gesture'];for(d=0;d<h.length;d++)if(a in r[h[d]])g[h[d]]=this.options[h[d]][a];return g;},inertia:function(a){var b=this.setOptions('inertia',a);if(b===this)return this;return b.drag;},getAction:function(a,b,c,d){var e=this.defaultActionChecker(a,c,d);if(this.options.actionChecker)return this.options.actionChecker(a,b,e,this,d,c);return e;},defaultActionChecker:aP,actionChecker:function(a){if(R(a)){this.options.actionChecker=a;return this;}if(a===null){delete this.options.actionChecker;return this;}return this.options.actionChecker;},getRect:function be(a){a=a||this._element;if(this.selector&&!(M(a)))a=this._context.querySelector(this.selector);return am(a);},rectChecker:function(a){if(R(a)){this.getRect=a;return this;}if(a===null){delete this.options.getRect;return this;}return this.getRect;},styleCursor:function(a){if(T(a)){this.options.styleCursor=a;return this;}if(a===null){delete this.options.styleCursor;return this;}return this.options.styleCursor;},preventDefault:function(a){if(/^(always|never|auto)$/.test(a)){this.options.preventDefault=a;return this;}if(T(a)){this.options.preventDefault=a?'always':'never';return this;}return this.options.preventDefault;},origin:function(a){if(V(a)){this.options.origin=a;return this;}else if(Q(a)){this.options.origin=a;return this;}return this.options.origin;},deltaSource:function(a){if(a==='page'||a==='client'){this.options.deltaSource=a;return this;}return this.options.deltaSource;},restrict:function(a){if(!Q(a))return this.setOptions('restrict',a);var b=['drag','resize','gesture'],c;for(var d=0;d<b.length;d++){var e=b[d];if(e in a){var f=W({actions:[e],restriction:a[e]},a);c=this.setOptions('restrict',f);}}return c;},context:function(){return this._context;},_context:c,ignoreFrom:function(a){if(V(a)){this.options.ignoreFrom=a;return this;}if(M(a)){this.options.ignoreFrom=a;return this;}return this.options.ignoreFrom;},allowFrom:function(a){if(V(a)){this.options.allowFrom=a;return this;}if(M(a)){this.options.allowFrom=a;return this;}return this.options.allowFrom;},element:function(){return this._element;},fire:function(a){if(!(a&&a.type)||!bj(C,a.type))return this;var b,c,d,e='on'+a.type,f='';if(a.type in this._iEvents){b=this._iEvents[a.type];for(c=0,d=b.length;c<d&&!a.immediatePropagationStopped;c++){f=b[c].name;b[c](a);}}if(R(this[e])){f=this[e].name;this[e](a);}if(a.type in D&&(b=D[a.type]))for(c=0,d=b.length;c<d&&!a.immediatePropagationStopped;c++){f=b[c].name;b[c](a);}return this;},on:function(a,b,c){var d;if(U(a)&&a.search(' ')!==-1)a=a.trim().split(/ +/);if(P(a)){for(d=0;d<a.length;d++)this.on(a[d],b,c);return this;}if(Q(a)){for(var e in a)this.on(e,a[e],b);return this;}if(a==='wheel')a=B;c=c?true:false;if(bj(C,a))if(!(a in this._iEvents))this._iEvents[a]=[b];else this._iEvents[a].push(b);else if(this.selector){if(!q[a]){q[a]={selectors:[],contexts:[],listeners:[]};for(d=0;d<m.length;d++){K.add(m[d],a,aW);K.add(m[d],a,aX,true);}}var f=q[a],g;for(g=f.selectors.length-1;g>=0;g--)if(f.selectors[g]===this.selector&&f.contexts[g]===this._context)break;if(g===-1){g=f.selectors.length;f.selectors.push(this.selector);f.contexts.push(this._context);f.listeners.push([]);}f.listeners[g].push([b,c]);}else K.add(this._element,a,b,c);return this;},off:function(a,b,c){var d;if(U(a)&&a.search(' ')!==-1)a=a.trim().split(/ +/);if(P(a)){for(d=0;d<a.length;d++)this.off(a[d],b,c);return this;}if(Q(a)){for(var e in a)this.off(e,a[e],b);return this;}var f,g=-1;c=c?true:false;if(a==='wheel')a=B;if(bj(C,a)){f=this._iEvents[a];if(f&&(g=bi(f,b))!==-1)this._iEvents[a].splice(g,1);}else if(this.selector){var h=q[a],i=false;if(!h)return this;for(g=h.selectors.length-1;g>=0;g--)if(h.selectors[g]===this.selector&&h.contexts[g]===this._context){var j=h.listeners[g];for(d=j.length-1;d>=0;d--){var k=j[d][0],l=j[d][1];if(k===b&&l===c){j.splice(d,1);if(!j.length){h.selectors.splice(g,1);h.contexts.splice(g,1);h.listeners.splice(g,1);K.remove(this._context,a,aW);K.remove(this._context,a,aX,true);if(!h.selectors.length)q[a]=null;}i=true;break;}}if(i)break;}}else K.remove(this._element,a,b,c);return this;},set:function(a){if(!Q(a))a={};this.options=W({},r.base);var b,c=['drag','drop','resize','gesture'],d=['draggable','dropzone','resizable','gesturable'],e=W(W({},r.perAction),a[f]||{});for(b=0;b<c.length;b++){var f=c[b];this.options[f]=W({},r[f]);this.setPerAction(f,e);this[d[b]](a[f]);}var g=['accept','actionChecker','allowFrom','deltaSource','dropChecker','ignoreFrom','origin','preventDefault','rectChecker','styleCursor'];for(b=0,aU=g.length;b<aU;b++){var h=g[b];this.options[h]=r.base[h];if(h in a)this[h](a[h]);}return this;},unset:function(){K.remove(this._element,'all');if(!U(this.selector)){K.remove(this,'all');if(this.options.styleCursor)this._element.style.cursor='';}else for(var a in q){var b=q[a];for(var c=0;c<b.selectors.length;c++){if(b.selectors[c]===this.selector&&b.contexts[c]===this._context){b.selectors.splice(c,1);b.contexts.splice(c,1);b.listeners.splice(c,1);if(!b.selectors.length)q[a]=null;}K.remove(this._context,a,aW);K.remove(this._context,a,aX,true);break;}}this.dropzone(false);n.splice(bi(n,this),1);return bc;}};function bf(a,c){var d=false;return function(){if(!d){b.console.warn(c);d=true;}return a.apply(this,arguments);};}bd.prototype.snap=bf(bd.prototype.snap,'Interactable#snap is deprecated. See the new documentation for snapping at http://interactjs.io/docs/snapping');bd.prototype.restrict=bf(bd.prototype.restrict,'Interactable#restrict is deprecated. See the new documentation for resticting at http://interactjs.io/docs/restriction');bd.prototype.inertia=bf(bd.prototype.inertia,'Interactable#inertia is deprecated. See the new documentation for inertia at http://interactjs.io/docs/inertia');bd.prototype.autoScroll=bf(bd.prototype.autoScroll,'Interactable#autoScroll is deprecated. See the new documentation for autoScroll at http://interactjs.io/docs/#autoscroll');bd.prototype.squareResize=bf(bd.prototype.squareResize,'Interactable#squareResize is deprecated. See http://interactjs.io/docs/#resize-square');bd.prototype.accept=bf(bd.prototype.accept,'Interactable#accept is deprecated. use Interactable#dropzone({ accept: target }) instead');bd.prototype.dropChecker=bf(bd.prototype.dropChecker,'Interactable#dropChecker is deprecated. use Interactable#dropzone({ dropChecker: checkerFunction }) instead');bd.prototype.context=bf(bd.prototype.context,'Interactable#context as a method is deprecated. It will soon be a DOM Node instead');bc.isSet=function(a,b){return n.indexOfElement(a,b&&b.context)!==-1;};bc.on=function(a,b,d){if(U(a)&&a.search(' ')!==-1)a=a.trim().split(/ +/);if(P(a)){for(var e=0;e<a.length;e++)bc.on(a[e],b,d);return bc;}if(Q(a)){for(var f in a)bc.on(f,a[f],b);return bc;}if(bj(C,a))if(!D[a])D[a]=[b];else D[a].push(b);else K.add(c,a,b,d);return bc;};bc.off=function(a,b,d){if(U(a)&&a.search(' ')!==-1)a=a.trim().split(/ +/);if(P(a)){for(var e=0;e<a.length;e++)bc.off(a[e],b,d);return bc;}if(Q(a)){for(var f in a)bc.off(f,a[f],b);return bc;}if(!bj(C,a))K.remove(c,a,b,d);else{var g;if(a in D&&(g=bi(D[a],b))!==-1)D[a].splice(g,1);}return bc;};bc.enableDragging=bf(function(a){if(a!==null&&a!==undefined){A.drag=a;return bc;}return A.drag;},'interact.enableDragging is deprecated and will soon be removed.');bc.enableResizing=bf(function(a){if(a!==null&&a!==undefined){A.resize=a;return bc;}return A.resize;},'interact.enableResizing is deprecated and will soon be removed.');bc.enableGesturing=bf(function(a){if(a!==null&&a!==undefined){A.gesture=a;return bc;}return A.gesture;},'interact.enableGesturing is deprecated and will soon be removed.');bc.eventTypes=C;bc.debug=function(){var a=o[0]||new aI();return{interactions:o,target:a.target,dragging:a.dragging,resizing:a.resizing,gesturing:a.gesturing,prepared:a.prepared,matches:a.matches,matchElements:a.matchElements,prevCoords:a.prevCoords,startCoords:a.startCoords,pointerIds:a.pointerIds,pointers:a.pointers,addPointer:aR.addPointer,removePointer:aR.removePointer,recordPointer:aR.recordPointer,snap:a.snapStatus,restrict:a.restrictStatus,inertia:a.inertiaStatus,downTime:a.downTimes[0],downEvent:a.downEvent,downPointer:a.downPointer,prevEvent:a.prevEvent,Interactable:bd,interactables:n,pointerIsDown:a.pointerIsDown,defaultOptions:r,defaultActionChecker:aP,actionCursors:z,dragMove:aR.dragMove,resizeMove:aR.resizeMove,gestureMove:aR.gestureMove,pointerUp:aR.pointerUp,pointerDown:aR.pointerDown,pointerMove:aR.pointerMove,pointerHover:aR.pointerHover,eventTypes:C,events:K,globalEvents:D,delegatedEvents:q,prefixedPropREs:X};};bc.getPointerAverage=ao;bc.getTouchBBox=ap;bc.getTouchDistance=aq;bc.getTouchAngle=ar;bc.getElementRect=am;bc.getElementClientRect=al;bc.matchesSelector=bk;bc.closest=ax;bc.margin=bf(function(a){if(S(a)){v=a;return bc;}return v;},'interact.margin is deprecated. Use interact(target).resizable({ margin: number }); instead.');bc.supportsTouch=function(){return t;};bc.supportsPointerEvent=function(){return u;};bc.stop=function(a){for(var b=o.length-1;b>=0;b--)o[b].stop(a);return bc;};bc.dynamicDrop=function(a){if(T(a)){p=a;return bc;}return p;};bc.pointerMoveTolerance=function(a){if(S(a)){w=a;return this;}return w;};bc.maxInteractions=function(a){if(S(a)){y=a;return this;}return y;};bc.createSnapGrid=function(a){return function(b,c){var d=0,e=0;if(Q(a.offset)){d=a.offset.x;e=a.offset.y;}var f=Math.round((b-d)/a.x),g=Math.round((c-e)/a.y),h=f*a.x+d,i=g*a.y+e;return{x:h,y:i,range:a.range};};};function bg(a){for(var b=0;b<o.length;b++)o[b].pointerEnd(a,a);}function bh(a){if(bj(m,a))return;var b=a.defaultView||a.parentWindow;for(var c in q){K.add(a,c,aW);K.add(a,c,aX,true);}if(i){if(i===b.MSPointerEvent)j={up:'MSPointerUp',down:'MSPointerDown',over:'mouseover',out:'mouseout',move:'MSPointerMove',cancel:'MSPointerCancel'};else j={up:'pointerup',down:'pointerdown',over:'pointerover',out:'pointerout',move:'pointermove',cancel:'pointercancel'};K.add(a,j.down,aR.selectorDown);K.add(a,j.move,aR.pointerMove);K.add(a,j.over,aR.pointerOver);K.add(a,j.out,aR.pointerOut);K.add(a,j.up,aR.pointerUp);K.add(a,j.cancel,aR.pointerCancel);K.add(a,j.move,aR.autoScrollMove);}else{K.add(a,'mousedown',aR.selectorDown);K.add(a,'mousemove',aR.pointerMove);K.add(a,'mouseup',aR.pointerUp);K.add(a,'mouseover',aR.pointerOver);K.add(a,'mouseout',aR.pointerOut);K.add(a,'touchstart',aR.selectorDown);K.add(a,'touchmove',aR.pointerMove);K.add(a,'touchend',aR.pointerUp);K.add(a,'touchcancel',aR.pointerCancel);K.add(a,'mousemove',aR.autoScrollMove);K.add(a,'touchmove',aR.autoScrollMove);}K.add(b,'blur',bg);try{if(b.frameElement){var d=b.frameElement.ownerDocument,e=d.defaultView;K.add(d,'mouseup',aR.pointerEnd);K.add(d,'touchend',aR.pointerEnd);K.add(d,'touchcancel',aR.pointerEnd);K.add(d,'pointerup',aR.pointerEnd);K.add(d,'MSPointerUp',aR.pointerEnd);K.add(e,'blur',bg);}}catch(f){bc.windowParentError=f;}K.add(a,'dragstart',function(a){for(var b=0;b<o.length;b++){var c=o[b];if(c.element&&(c.element===a.target||aw(c.element,a.target))){c.checkAndPreventDefault(a,c.target,c.element);return;}}});if(K.useAttachEvent){K.add(a,'selectstart',function(a){var b=o[0];if(b.currentAction())b.checkAndPreventDefault(a);});K.add(a,'dblclick',aK('ie8Dblclick'));}m.push(a);}bh(c);function bi(a,b){for(var c=0,d=a.length;c<d;c++)if(a[c]===b)return c;return -1;}function bj(a,b){return bi(a,b)!==-1;}function bk(c,d,e){if(H)return H(c,d,e);if(b!==a)d=d.replace(/\/deep\//g,' ');return c[G](d);}function bl(a,b,c){while(M(a)){if(bk(a,b))return true;a=ay(a);if(a===c)return bk(a,b);}return false;}if(!(G in Element.prototype)||!R(Element.prototype[G]))H=function(a,b,c){c=c||a.parentNode.querySelectorAll(b);for(var d=0,e=c.length;d<e;d++)if(c[d]===a)return true;return false;};(function(){var b=0,c=['ms','moz','webkit','o'];for(var d=0;d<c.length&&!a.requestAnimationFrame;++d){I=a[c[d]+'RequestAnimationFrame'];J=a[c[d]+'CancelAnimationFrame']||a[c[d]+'CancelRequestAnimationFrame'];}if(!I)I=function(a){var c=new Date().getTime(),d=Math.max(0,16-(c-b)),e=setTimeout(function(){a(c+d);},d);b=c+d;return e;};if(!J)J=function(a){clearTimeout(a);};}());if(typeof exports!=='undefined'){if(typeof module!=='undefined'&&module.exports)exports=module.exports=bc;exports.interact=bc;}else if(typeof define==='function'&&define.amd)define('interact',function(){return bc;});else a.interact=bc;}(typeof window==='undefined'?undefined:window));(function(a){"use strict";if(typeof define==='function'&&define.amd)define(['jquery'],a);else if(typeof exports=="object"&&typeof module=="object")module.exports=a(require('jquery'));else a(jQuery);})(function(a,b){"use strict";var c={beforeShow:n,move:n,change:n,show:n,hide:n,color:false,flat:false,showInput:false,allowEmpty:false,showButtons:true,clickoutFiresChange:true,showInitial:false,showPalette:false,showPaletteOnly:false,hideAfterPaletteSelect:false,togglePaletteOnly:false,showSelectionPalette:true,localStorageKey:false,appendTo:"body",maxSelectionSize:7,cancelText:"cancel",chooseText:"choose",togglePaletteMoreText:"more",togglePaletteLessText:"less",clearText:"Clear Color Selection",noColorSelectedText:"No Color Selected",preferredFormat:false,className:"",containerClassName:"",replacerClassName:"",showAlpha:false,theme:"sp-light",palette:[["#ffffff","#000000","#ff0000","#ff8000","#ffff00","#008000","#0000ff","#4b0082","#9400d3"]],selectionPalette:[],disabled:false,offset:null},d=[],e=!!/msie/i.exec(window.navigator.userAgent),f=(function(){function a(a,b){return !!~(''+a).indexOf(b);}var b=document.createElement('div');var c=b.style;c.cssText='background-color:rgba(0,0,0,.5)';return a(c.backgroundColor,'rgba')||a(c.backgroundColor,'hsla');})(),g=["<div class='sp-replacer'>","<div class='sp-preview'><div class='sp-preview-inner'></div></div>","<div class='sp-dd'>&#9660;</div>","</div>"].join(''),h=(function(){var a="";if(e)for(var b=1;b<=6;b++)a+="<div class='sp-"+b+"'></div>";return ["<div class='sp-container sp-hidden'>","<div class='sp-palette-container'>","<div class='sp-palette sp-thumb sp-cf'></div>","<div class='sp-palette-button-container sp-cf'>","<button type='button' class='sp-palette-toggle'></button>","</div>","</div>","<div class='sp-picker-container'>","<div class='sp-top sp-cf'>","<div class='sp-fill'></div>","<div class='sp-top-inner'>","<div class='sp-color'>","<div class='sp-sat'>","<div class='sp-val'>","<div class='sp-dragger'></div>","</div>","</div>","</div>","<div class='sp-clear sp-clear-display'>","</div>","<div class='sp-hue'>","<div class='sp-slider'></div>",a,"</div>","</div>","<div class='sp-alpha'><div class='sp-alpha-inner'><div class='sp-alpha-handle'></div></div></div>","</div>","<div class='sp-input-container sp-cf'>","<input class='sp-input' type='text' spellcheck='false'  />","</div>","<div class='sp-initial sp-thumb sp-cf'></div>","<div class='sp-button-container sp-cf'>","<a class='sp-cancel' href='#'></a>","<button type='button' class='sp-choose'></button>","</div>","</div>","</div>"].join("");})();function i(b,c,d,e){var g=[];for(var h=0;h<b.length;h++){var i=b[h];if(i){var j=tinycolor(i);var k=j.toHsl().l<0.5?"sp-thumb-el sp-thumb-dark":"sp-thumb-el sp-thumb-light";k+=(tinycolor.equals(c,i))?" sp-thumb-active":"";var l=j.toString(e.preferredFormat||"rgb");var m=f?("background-color:"+j.toRgbString()):"filter:"+j.toFilter();g.push('<span title="'+l+'" data-color="'+j.toRgbString()+'" class="'+k+'"><span class="sp-thumb-inner" style="'+m+';" /></span>');}else{var n='sp-clear-display';g.push(a('<div />').append(a('<span data-color="" style="background-color:transparent;" class="'+n+'"></span>').attr('title',e.noColorSelectedText)).html());}}return "<div class='sp-cf "+d+"'>"+g.join('')+"</div>";}function j(){for(var a=0;a<d.length;a++)if(d[a])d[a].hide();}function k(b,d){var e=a.extend({},c,b);e.callbacks={'move':p(e.move,d),'change':p(e.change,d),'show':p(e.show,d),'hide':p(e.hide,d),'beforeShow':p(e.beforeShow,d)};return e;}function l(c,l){var n=k(l,c),p=n.flat,t=n.showSelectionPalette,u=n.localStorageKey,v=n.theme,w=n.callbacks,x=r(aX,10),y=false,z=false,A=0,B=0,C=0,D=0,E=0,F=0,G=0,H=0,I=0,J=0,K=0,L=1,M=[],N=[],O={},P=n.selectionPalette.slice(0),Q=n.maxSelectionSize,R="sp-dragging",S=null;var T=c.ownerDocument,U=T.body,V=a(c),W=false,X=a(h,T).addClass(v),Y=X.find(".sp-picker-container"),Z=X.find(".sp-color"),ab=X.find(".sp-dragger"),ac=X.find(".sp-hue"),ad=X.find(".sp-slider"),ae=X.find(".sp-alpha-inner"),af=X.find(".sp-alpha"),ag=X.find(".sp-alpha-handle"),ah=X.find(".sp-input"),ai=X.find(".sp-palette"),aj=X.find(".sp-initial"),ak=X.find(".sp-cancel"),al=X.find(".sp-clear"),am=X.find(".sp-choose"),an=X.find(".sp-palette-toggle"),ao=V.is("input"),ap=ao&&V.attr("type")==="color"&&s(),aq=ao&&!p,ar=aq?a(g).addClass(v).addClass(n.className).addClass(n.replacerClassName):a([]),as=aq?ar:V,at=ar.find(".sp-preview-inner"),au=n.color||(ao&&V.val()),av=false,aw=n.preferredFormat,ax=!n.showButtons||n.clickoutFiresChange,ay=!au,az=n.allowEmpty&&!ap;function aA(){if(n.showPaletteOnly)n.showPalette=true;an.text(n.showPaletteOnly?n.togglePaletteMoreText:n.togglePaletteLessText);if(n.palette){M=n.palette.slice(0);N=a.isArray(M[0])?M:[M];O={};for(var b=0;b<N.length;b++)for(var c=0;c<N[b].length;c++){var d=tinycolor(N[b][c]).toRgbString();O[d]=true;}}X.toggleClass("sp-flat",p);X.toggleClass("sp-input-disabled",!n.showInput);X.toggleClass("sp-alpha-enabled",n.showAlpha);X.toggleClass("sp-clear-enabled",az);X.toggleClass("sp-buttons-disabled",!n.showButtons);X.toggleClass("sp-palette-buttons-disabled",!n.togglePaletteOnly);X.toggleClass("sp-palette-disabled",!n.showPalette);X.toggleClass("sp-palette-only",n.showPaletteOnly);X.toggleClass("sp-initial-disabled",!n.showInitial);X.addClass(n.className).addClass(n.containerClassName);aX();}function aB(){if(e)X.find("*:not(input)").attr("unselectable","on");aA();if(aq)V.after(ar).hide();if(!az)al.hide();if(p)V.after(X).hide();else{var b=n.appendTo==="parent"?V.parent():a(n.appendTo);if(b.length!==1)b=a("body");b.append(X);}aC();as.bind("click.spectrum touchstart.spectrum",function(b){if(!W)aK();b.stopPropagation();if(!a(b.target).is("input"))b.preventDefault();});if(V.is(":disabled")||(n.disabled===true))bd();X.click(o);ah.change(aJ);ah.bind("paste",function(){setTimeout(aJ,1);});ah.keydown(function(a){if(a.keyCode==13)aJ();});ak.text(n.cancelText);ak.bind("click.spectrum",function(a){a.stopPropagation();a.preventDefault();aP();aO();});al.attr("title",n.clearText);al.bind("click.spectrum",function(a){a.stopPropagation();a.preventDefault();ay=true;aT();if(p)aW(true);});am.text(n.chooseText);am.bind("click.spectrum",function(a){a.stopPropagation();a.preventDefault();if(e&&ah.is(":focus"))ah.trigger('change');if(aS()){aW(true);aO();}});an.text(n.showPaletteOnly?n.togglePaletteMoreText:n.togglePaletteLessText);an.bind("click.spectrum",function(a){a.stopPropagation();a.preventDefault();n.showPaletteOnly=!n.showPaletteOnly;if(!n.showPaletteOnly&&!p)X.css('left','-='+(Y.outerWidth(true)+5));aA();});q(af,function(a,b,c){L=(a/F);ay=false;if(c.shiftKey)L=Math.round(L*10)/10;aT();},aH,aI);q(ac,function(a,b){I=parseFloat(b/D);ay=false;if(!n.showAlpha)L=1;aT();},aH,aI);q(Z,function(a,b,c){if(!c.shiftKey)S=null;else if(!S){var d=J*A;var e=B-(K*B);var f=Math.abs(a-d)>Math.abs(b-e);S=f?"x":"y";}var g=!S||S==="x";var h=!S||S==="y";if(g)J=parseFloat(a/A);if(h)K=parseFloat((B-b)/B);ay=false;if(!n.showAlpha)L=1;aT();},aH,aI);if(!!au){aQ(au);aU();aw=n.preferredFormat||tinycolor(au).format;aD(au);}else aU();if(p)aL();function c(b){if(b.data&&b.data.ignore){aQ(a(b.target).closest(".sp-thumb-el").data("color"));aT();}else{aQ(a(b.target).closest(".sp-thumb-el").data("color"));aT();aW(true);if(n.hideAfterPaletteSelect)aO();}return false;}var d=e?"mousedown.spectrum":"click.spectrum touchstart.spectrum";ai.delegate(".sp-thumb-el",d,c);aj.delegate(".sp-thumb-el:nth-child(1)",d,{ignore:true},c);}function aC(){if(u&&window.localStorage){try{var b=window.localStorage[u].split(",#");if(b.length>1){delete window.localStorage[u];a.each(b,function(a,b){aD(b);});}}catch(c){}try{P=window.localStorage[u].split(";");}catch(c){}}}function aD(b){if(t){var c=tinycolor(b).toRgbString();if(!O[c]&&a.inArray(c,P)===-1){P.push(c);while(P.length>Q)P.shift();}if(u&&window.localStorage)try{window.localStorage[u]=P.join(";");}catch(d){}}}function aE(){var a=[];if(n.showPalette)for(var b=0;b<P.length;b++){var c=tinycolor(P[b]).toRgbString();if(!O[c])a.push(P[b]);}return a.reverse().slice(0,n.maxSelectionSize);}function aF(){var b=aR();var c=a.map(N,function(a,c){return i(a,b,"sp-palette-row sp-palette-row-"+c,n);});aC();if(P)c.push(i(aE(),b,"sp-palette-row sp-palette-row-selection",n));ai.html(c.join(""));}function aG(){if(n.showInitial){var a=av;var b=aR();aj.html(i([a,b],b,"sp-palette-row-initial",n));}}function aH(){if(B<=0||A<=0||D<=0)aX();z=true;X.addClass(R);S=null;V.trigger('dragstart.spectrum',[aR()]);}function aI(){z=false;X.removeClass(R);V.trigger('dragstop.spectrum',[aR()]);}function aJ(){var a=ah.val();if((a===null||a==="")&&az){aQ(null);aW(true);}else{var b=tinycolor(a);if(b.isValid()){aQ(b);aW(true);}else ah.addClass("sp-validation-error");}}function aK(){if(y)aO();else aL();}function aL(){var b=a.Event('beforeShow.spectrum');if(y){aX();return;}V.trigger(b,[aR()]);if(w.beforeShow(aR())===false||b.isDefaultPrevented())return;j();y=true;a(T).bind("keydown.spectrum",aM);a(T).bind("click.spectrum",aN);a(window).bind("resize.spectrum",x);ar.addClass("sp-active");X.removeClass("sp-hidden");aX();aU();av=aR();aG();w.show(av);V.trigger('show.spectrum',[av]);}function aM(a){if(a.keyCode===27)aO();}function aN(a){if(a.button==2)return;if(z)return;if(ax)aW(true);else aP();aO();}function aO(){if(!y||p)return;y=false;a(T).unbind("keydown.spectrum",aM);a(T).unbind("click.spectrum",aN);a(window).unbind("resize.spectrum",x);ar.removeClass("sp-active");X.addClass("sp-hidden");w.hide(aR());V.trigger('hide.spectrum',[aR()]);}function aP(){aQ(av,true);}function aQ(a,b){if(tinycolor.equals(a,aR())){aU();return;}var c,d;if(!a&&az)ay=true;else{ay=false;c=tinycolor(a);d=c.toHsv();I=(d.h%360)/360;J=d.s;K=d.v;L=d.a;}aU();if(c&&c.isValid()&&!b)aw=n.preferredFormat||c.getFormat();}function aR(a){a=a||{};if(az&&ay)return null;return tinycolor.fromRatio({h:I,s:J,v:K,a:Math.round(L*100)/100},{format:a.format||aw});}function aS(){return !ah.hasClass("sp-validation-error");}function aT(){aU();w.move(aR());V.trigger('move.spectrum',[aR()]);}function aU(){ah.removeClass("sp-validation-error");aV();var a=tinycolor.fromRatio({h:I,s:1,v:1});Z.css("background-color",a.toHexString());var b=aw;if(L<1&&!(L===0&&b==="name"))if(b==="hex"||b==="hex3"||b==="hex6"||b==="name")b="rgb";var c=aR({format:b}),d='';at.removeClass("sp-clear-display");at.css('background-color','transparent');if(!c&&az)at.addClass("sp-clear-display");else{var g=c.toHexString(),h=c.toRgbString();if(f||c.alpha===1)at.css("background-color",h);else{at.css("background-color","transparent");at.css("filter",c.toFilter());}if(n.showAlpha){var i=c.toRgb();i.a=0;var j=tinycolor(i).toRgbString();var k="linear-gradient(left, "+j+", "+g+")";if(e)ae.css("filter",tinycolor(j).toFilter({gradientType:1},g));else{ae.css("background","-webkit-"+k);ae.css("background","-moz-"+k);ae.css("background","-ms-"+k);ae.css("background","linear-gradient(to right, "+j+", "+g+")");}}d=c.toString(b);}if(n.showInput)ah.val(d);if(n.showPalette)aF();aG();}function aV(){var a=J;var b=K;if(az&&ay){ag.hide();ad.hide();ab.hide();}else{ag.show();ad.show();ab.show();var c=a*A;var d=B-(b*B);c=Math.max(-C,Math.min(A-C,c-C));d=Math.max(-C,Math.min(B-C,d-C));ab.css({"top":d+"px","left":c+"px"});var e=L*F;ag.css({"left":(e-(G/2))+"px"});var f=I*D;ad.css({"top":(f-H)+"px"});}}function aW(a){var b=aR(),c='',d=!tinycolor.equals(b,av);if(b){c=b.toString(aw);aD(b);}if(ao)V.val(c);if(a&&d){w.change(b);V.trigger('change',[b]);}}function aX(){if(!y)return;A=Z.width();B=Z.height();C=ab.height();E=ac.width();D=ac.height();H=ad.height();F=af.width();G=ag.width();if(!p){X.css("position","absolute");if(n.offset)X.offset(n.offset);else X.offset(m(X,as));}aV();if(n.showPalette)aF();V.trigger('reflow.spectrum');}function aY(){V.show();as.unbind("click.spectrum touchstart.spectrum");X.remove();ar.remove();d[bf.id]=null;}function aZ(c,d){if(c===b)return a.extend({},n);if(d===b)return n[c];n[c]=d;if(c==="preferredFormat")aw=n.preferredFormat;aA();}function bc(){W=false;V.attr("disabled",false);as.removeClass("sp-disabled");}function bd(){aO();W=true;V.attr("disabled",true);as.addClass("sp-disabled");}function be(a){n.offset=a;aX();}aB();var bf={show:aL,hide:aO,toggle:aK,reflow:aX,option:aZ,enable:bc,disable:bd,offset:be,set:function(a){aQ(a);aW();},get:aR,destroy:aY,container:X};bf.id=d.push(bf)-1;return bf;}function m(b,c){var d=0;var e=b.outerWidth();var f=b.outerHeight();var g=c.outerHeight();var h=b[0].ownerDocument;var i=h.documentElement;var j=i.clientWidth+a(h).scrollLeft();var k=i.clientHeight+a(h).scrollTop();var l=c.offset();l.top+=g;l.left-=Math.min(l.left,(l.left+e>j&&j>e)?Math.abs(l.left+e-j):0);l.top-=Math.min(l.top,((l.top+f>k&&k>f)?Math.abs(f+g-d):d));return l;}function n(){}function o(a){a.stopPropagation();}function p(a,b){var c=Array.prototype.slice;var d=c.call(arguments,2);return function(){return a.apply(b,d.concat(c.call(arguments)));};}function q(b,c,d,f){c=c||function(){};d=d||function(){};f=f||function(){};var g=document;var h=false;var i={};var j=0;var k=0;var l=('ontouchstart' in window);var m={};m.selectstart=n;m.dragstart=n;m["touchmove mousemove"]=o;m["touchend mouseup"]=q;function n(a){if(a.stopPropagation)a.stopPropagation();if(a.preventDefault)a.preventDefault();a.returnValue=false;}function o(a){if(h){if(e&&g.documentMode<9&&!a.button)return q();var d=a.originalEvent&&a.originalEvent.touches&&a.originalEvent.touches[0];var f=d&&d.pageX||a.pageX;var m=d&&d.pageY||a.pageY;var o=Math.max(0,Math.min(f-i.left,k));var p=Math.max(0,Math.min(m-i.top,j));if(l)n(a);c.apply(b,[o,p,a]);}}function p(c){var e=(c.which)?(c.which==3):(c.button==2);if(!e&&!h)if(d.apply(b,arguments)!==false){h=true;j=a(b).height();k=a(b).width();i=a(b).offset();a(g).bind(m);a(g.body).addClass("sp-dragging");o(c);n(c);}}function q(){if(h){a(g).unbind(m);a(g.body).removeClass("sp-dragging");setTimeout(function(){f.apply(b,arguments);},0);}h=false;}a(b).bind("touchstart mousedown",p);}function r(a,b,c){var d;return function(){var e=this,f=arguments;var g=function(){d=null;a.apply(e,f);};if(c)clearTimeout(d);if(c||!d)d=setTimeout(g,b);};}function s(){return a.fn.spectrum.inputTypeColorSupport();}var t="spectrum.id";a.fn.spectrum=function(b,c){if(typeof b=="string"){var e=this;var f=Array.prototype.slice.call(arguments,1);this.each(function(){var c=d[a(this).data(t)];if(c){var g=c[b];if(!g)throw new Error("Spectrum: no such method: '"+b+"'");if(b=="get")e=c.get();else if(b=="container")e=c.container;else if(b=="option")e=c.option.apply(c,f);else if(b=="destroy"){c.destroy();a(this).removeData(t);}else g.apply(c,f);}});return e;}return this.spectrum("destroy").each(function(){var c=a.extend({},b,a(this).data());var d=l(this,c);a(this).data(t,d.id);});};a.fn.spectrum.load=true;a.fn.spectrum.loadOpts={};a.fn.spectrum.draggable=q;a.fn.spectrum.defaults=c;a.fn.spectrum.inputTypeColorSupport=function s(){if(typeof s._cachedResult==="undefined"){var b=a("<input type='color'/>")[0];s._cachedResult=b.type==="color"&&b.value!=="";}return s._cachedResult;};a.spectrum={};a.spectrum.localization={};a.spectrum.palettes={};a.fn.spectrum.processNativeColorInputs=function(){var b=a("input[type=color]");if(b.length&&!s())b.spectrum({preferredFormat:"hex6"});};(function(){var a=/^[\s,#]+/,b=/\s+$/,c=0,d=Math,e=d.round,f=d.min,g=d.max,h=d.random;var i=function(a,b){a=a?a:'';b=b||{};if(a instanceof i)return a;if(!(this instanceof i))return new i(a,b);var d=j(a);this._originalInput=a,this._r=d.r,this._g=d.g,this._b=d.b,this._a=d.a,this._roundA=e(100*this._a)/100,this._format=b.format||d.format;this._gradientType=b.gradientType;if(this._r<1)this._r=e(this._r);if(this._g<1)this._g=e(this._g);if(this._b<1)this._b=e(this._b);this._ok=d.ok;this._tc_id=c++;};i.prototype={isDark:function(){return this.getBrightness()<128;},isLight:function(){return !this.isDark();},isValid:function(){return this._ok;},getOriginalInput:function(){return this._originalInput;},getFormat:function(){return this._format;},getAlpha:function(){return this._a;},getBrightness:function(){var a=this.toRgb();return(a.r*299+a.g*587+a.b*114)/1000;},setAlpha:function(a){this._a=H(a);this._roundA=e(100*this._a)/100;return this;},toHsv:function(){var a=n(this._r,this._g,this._b);return{h:a.h*360,s:a.s,v:a.v,a:this._a};},toHsvString:function(){var a=n(this._r,this._g,this._b);var b=e(a.h*360),c=e(a.s*100),d=e(a.v*100);return(this._a==1)?"hsv("+b+", "+c+"%, "+d+"%)":"hsva("+b+", "+c+"%, "+d+"%, "+this._roundA+")";},toHsl:function(){var a=l(this._r,this._g,this._b);return{h:a.h*360,s:a.s,l:a.l,a:this._a};},toHslString:function(){var a=l(this._r,this._g,this._b);var b=e(a.h*360),c=e(a.s*100),d=e(a.l*100);return(this._a==1)?"hsl("+b+", "+c+"%, "+d+"%)":"hsla("+b+", "+c+"%, "+d+"%, "+this._roundA+")";},toHex:function(a){return p(this._r,this._g,this._b,a);},toHexString:function(a){return '#'+this.toHex(a);},toHex8:function(){return q(this._r,this._g,this._b,this._a);},toHex8String:function(){return '#'+this.toHex8();},toRgb:function(){return{r:e(this._r),g:e(this._g),b:e(this._b),a:this._a};},toRgbString:function(){return(this._a==1)?"rgb("+e(this._r)+", "+e(this._g)+", "+e(this._b)+")":"rgba("+e(this._r)+", "+e(this._g)+", "+e(this._b)+", "+this._roundA+")";},toPercentageRgb:function(){return{r:e(I(this._r,255)*100)+"%",g:e(I(this._g,255)*100)+"%",b:e(I(this._b,255)*100)+"%",a:this._a};},toPercentageRgbString:function(){return(this._a==1)?"rgb("+e(I(this._r,255)*100)+"%, "+e(I(this._g,255)*100)+"%, "+e(I(this._b,255)*100)+"%)":"rgba("+e(I(this._r,255)*100)+"%, "+e(I(this._g,255)*100)+"%, "+e(I(this._b,255)*100)+"%, "+this._roundA+")";},toName:function(){if(this._a===0)return "transparent";if(this._a<1)return false;return F[p(this._r,this._g,this._b,true)]||false;},toFilter:function(a){var b='#'+q(this._r,this._g,this._b,this._a);var c=b;var d=this._gradientType?"GradientType = 1, ":"";if(a){var e=i(a);c=e.toHex8String();}return "progid:DXImageTransform.Microsoft.gradient("+d+"startColorstr="+b+",endColorstr="+c+")";},toString:function(a){var b=!!a;a=a||this._format;var c=false;var d=this._a<1&&this._a>=0;var e=!b&&d&&(a==="hex"||a==="hex6"||a==="hex3"||a==="name");if(e){if(a==="name"&&this._a===0)return this.toName();return this.toRgbString();}if(a==="rgb")c=this.toRgbString();if(a==="prgb")c=this.toPercentageRgbString();if(a==="hex"||a==="hex6")c=this.toHexString();if(a==="hex3")c=this.toHexString(true);if(a==="hex8")c=this.toHex8String();if(a==="name")c=this.toName();if(a==="hsl")c=this.toHslString();if(a==="hsv")c=this.toHsvString();return c||this.toHexString();},_applyModification:function(a,b){var c=a.apply(null,[this].concat([].slice.call(b)));this._r=c._r;this._g=c._g;this._b=c._b;this.setAlpha(c._a);return this;},lighten:function(){return this._applyModification(u,arguments);},brighten:function(){return this._applyModification(v,arguments);},darken:function(){return this._applyModification(w,arguments);},desaturate:function(){return this._applyModification(r,arguments);},saturate:function(){return this._applyModification(s,arguments);},greyscale:function(){return this._applyModification(t,arguments);},spin:function(){return this._applyModification(x,arguments);},_applyCombination:function(a,b){return a.apply(null,[this].concat([].slice.call(b)));},analogous:function(){return this._applyCombination(C,arguments);},complement:function(){return this._applyCombination(y,arguments);},monochromatic:function(){return this._applyCombination(D,arguments);},splitcomplement:function(){return this._applyCombination(B,arguments);},triad:function(){return this._applyCombination(z,arguments);},tetrad:function(){return this._applyCombination(A,arguments);}};i.fromRatio=function(a,b){if(typeof a=="object"){var c={};for(var d in a)if(a.hasOwnProperty(d))if(d==="a")c[d]=a[d];else c[d]=O(a[d]);a=c;}return i(a,b);};function j(a){var b={r:0,g:0,b:0};var c=1;var d=false;var e=false;if(typeof a=="string")a=S(a);if(typeof a=="object"){if(a.hasOwnProperty("r")&&a.hasOwnProperty("g")&&a.hasOwnProperty("b")){b=k(a.r,a.g,a.b);d=true;e=String(a.r).substr(-1)==="%"?"prgb":"rgb";}else if(a.hasOwnProperty("h")&&a.hasOwnProperty("s")&&a.hasOwnProperty("v")){a.s=O(a.s);a.v=O(a.v);b=o(a.h,a.s,a.v);d=true;e="hsv";}else if(a.hasOwnProperty("h")&&a.hasOwnProperty("s")&&a.hasOwnProperty("l")){a.s=O(a.s);a.l=O(a.l);b=m(a.h,a.s,a.l);d=true;e="hsl";}if(a.hasOwnProperty("a"))c=a.a;}c=H(c);return{ok:d,format:a.format||e,r:f(255,g(b.r,0)),g:f(255,g(b.g,0)),b:f(255,g(b.b,0)),a:c};}function k(a,b,c){return{r:I(a,255)*255,g:I(b,255)*255,b:I(c,255)*255};}function l(a,b,c){a=I(a,255);b=I(b,255);c=I(c,255);var d=g(a,b,c),e=f(a,b,c);var h,i,j=(d+e)/2;if(d==e)h=i=0;else{var k=d-e;i=j>0.5?k/(2-d-e):k/(d+e);switch(d){case a:h=(b-c)/k+(b<c?6:0);break;case b:h=(c-a)/k+2;break;case c:h=(a-b)/k+4;break;}h/=6;}return{h:h,s:i,l:j};}function m(a,b,c){var d,e,f;a=I(a,360);b=I(b,100);c=I(c,100);function g(a,b,c){if(c<0)c+=1;if(c>1)c-=1;if(c<1/6)return a+(b-a)*6*c;if(c<1/2)return b;if(c<2/3)return a+(b-a)*(2/3-c)*6;return a;}if(b===0)d=e=f=c;else{var h=c<0.5?c*(1+b):c+b-c*b;var i=2*c-h;d=g(i,h,a+1/3);e=g(i,h,a);f=g(i,h,a-1/3);}return{r:d*255,g:e*255,b:f*255};}function n(a,b,c){a=I(a,255);b=I(b,255);c=I(c,255);var d=g(a,b,c),e=f(a,b,c);var h,i,j=d;var k=d-e;i=d===0?0:k/d;if(d==e)h=0;else{switch(d){case a:h=(b-c)/k+(b<c?6:0);break;case b:h=(c-a)/k+2;break;case c:h=(a-b)/k+4;break;}h/=6;}return{h:h,s:i,v:j};}function o(a,b,c){a=I(a,360)*6;b=I(b,100);c=I(c,100);var e=d.floor(a),f=a-e,g=c*(1-b),h=c*(1-f*b),i=c*(1-(1-f)*b),j=e%6,k=[c,h,g,g,i,c][j],l=[i,c,c,h,g,g][j],m=[g,g,i,c,c,h][j];return{r:k*255,g:l*255,b:m*255};}function p(a,b,c,d){var f=[N(e(a).toString(16)),N(e(b).toString(16)),N(e(c).toString(16))];if(d&&f[0].charAt(0)==f[0].charAt(1)&&f[1].charAt(0)==f[1].charAt(1)&&f[2].charAt(0)==f[2].charAt(1))return f[0].charAt(0)+f[1].charAt(0)+f[2].charAt(0);return f.join("");}function q(a,b,c,d){var f=[N(P(d)),N(e(a).toString(16)),N(e(b).toString(16)),N(e(c).toString(16))];return f.join("");}i.equals=function(a,b){if(!a||!b)return false;return i(a).toRgbString()==i(b).toRgbString();};i.random=function(){return i.fromRatio({r:h(),g:h(),b:h()});};function r(a,b){b=(b===0)?0:(b||10);var c=i(a).toHsl();c.s-=b/100;c.s=J(c.s);return i(c);}function s(a,b){b=(b===0)?0:(b||10);var c=i(a).toHsl();c.s+=b/100;c.s=J(c.s);return i(c);}function t(a){return i(a).desaturate(100);}function u(a,b){b=(b===0)?0:(b||10);var c=i(a).toHsl();c.l+=b/100;c.l=J(c.l);return i(c);}function v(a,b){b=(b===0)?0:(b||10);var c=i(a).toRgb();c.r=g(0,f(255,c.r-e(255*-(b/100))));c.g=g(0,f(255,c.g-e(255*-(b/100))));c.b=g(0,f(255,c.b-e(255*-(b/100))));return i(c);}function w(a,b){b=(b===0)?0:(b||10);var c=i(a).toHsl();c.l-=b/100;c.l=J(c.l);return i(c);}function x(a,b){var c=i(a).toHsl();var d=(e(c.h)+b)%360;c.h=d<0?360+d:d;return i(c);}function y(a){var b=i(a).toHsl();b.h=(b.h+180)%360;return i(b);}function z(a){var b=i(a).toHsl();var c=b.h;return [i(a),i({h:(c+120)%360,s:b.s,l:b.l}),i({h:(c+240)%360,s:b.s,l:b.l})];}function A(a){var b=i(a).toHsl();var c=b.h;return [i(a),i({h:(c+90)%360,s:b.s,l:b.l}),i({h:(c+180)%360,s:b.s,l:b.l}),i({h:(c+270)%360,s:b.s,l:b.l})];}function B(a){var b=i(a).toHsl();var c=b.h;return [i(a),i({h:(c+72)%360,s:b.s,l:b.l}),i({h:(c+216)%360,s:b.s,l:b.l})];}function C(a,b,c){b=b||6;c=c||30;var d=i(a).toHsl();var e=360/c;var f=[i(a)];for(d.h=((d.h-(e*b>>1))+720)%360;--b;){d.h=(d.h+e)%360;f.push(i(d));}return f;}function D(a,b){b=b||6;var c=i(a).toHsv();var d=c.h,e=c.s,f=c.v;var g=[];var h=1/b;while(b--){g.push(i({h:d,s:e,v:f}));f=(f+h)%1;}return g;}i.mix=function(a,b,c){c=(c===0)?0:(c||50);var d=i(a).toRgb();var e=i(b).toRgb();var f=c/100;var g=f*2-1;var h=e.a-d.a;var j;if(g*h==-1)j=g;else j=(g+h)/(1+g*h);j=(j+1)/2;var k=1-j;var l={r:e.r*j+d.r*k,g:e.g*j+d.g*k,b:e.b*j+d.b*k,a:e.a*f+d.a*(1-f)};return i(l);};i.readability=function(a,b){var c=i(a);var d=i(b);var e=c.toRgb();var f=d.toRgb();var g=c.getBrightness();var h=d.getBrightness();var j=(Math.max(e.r,f.r)-Math.min(e.r,f.r)+Math.max(e.g,f.g)-Math.min(e.g,f.g)+Math.max(e.b,f.b)-Math.min(e.b,f.b));return{brightness:Math.abs(g-h),color:j};};i.isReadable=function(a,b){var c=i.readability(a,b);return c.brightness>125&&c.color>500;};i.mostReadable=function(a,b){var c=null;var d=0;var e=false;for(var f=0;f<b.length;f++){var g=i.readability(a,b[f]);var h=g.brightness>125&&g.color>500;var j=3*(g.brightness/125)+(g.color/500);if((h&&!e)||(h&&e&&j>d)||((!h)&&(!e)&&j>d)){e=h;d=j;c=i(b[f]);}}return c;};var E=i.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"};var F=i.hexNames=G(E);function G(a){var b={};for(var c in a)if(a.hasOwnProperty(c))b[a[c]]=c;return b;}function H(a){a=parseFloat(a);if(isNaN(a)||a<0||a>1)a=1;return a;}function I(a,b){if(L(a))a="100%";var c=M(a);a=f(b,g(0,parseFloat(a)));if(c)a=parseInt(a*b,10)/100;if((d.abs(a-b)<0.000001))return 1;return(a%b)/parseFloat(b);}function J(a){return f(1,g(0,a));}function K(a){return parseInt(a,16);}function L(a){return typeof a=="string"&&a.indexOf('.')!=-1&&parseFloat(a)===1;}function M(a){return typeof a==="string"&&a.indexOf('%')!=-1;}function N(a){return a.length==1?'0'+a:''+a;}function O(a){if(a<=1)a=(a*100)+"%";return a;}function P(a){return Math.round(parseFloat(a)*255).toString(16);}function Q(a){return(K(a)/255);}var R=(function(){var a="[-\\+]?\\d+%?";var b="[-\\+]?\\d*\\.\\d+%?";var c="(?:"+b+")|(?:"+a+")";var d="[\\s|\\(]+("+c+")[,|\\s]+("+c+")[,|\\s]+("+c+")\\s*\\)?";var e="[\\s|\\(]+("+c+")[,|\\s]+("+c+")[,|\\s]+("+c+")[,|\\s]+("+c+")\\s*\\)?";return{rgb:new RegExp("rgb"+d),rgba:new RegExp("rgba"+e),hsl:new RegExp("hsl"+d),hsla:new RegExp("hsla"+e),hsv:new RegExp("hsv"+d),hsva:new RegExp("hsva"+e),hex3:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex8:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};})();function S(c){c=c.replace(a,'').replace(b,'').toLowerCase();var d=false;if(E[c]){c=E[c];d=true;}else if(c=='transparent')return{r:0,g:0,b:0,a:0,format:"name"};var e;if((e=R.rgb.exec(c)))return{r:e[1],g:e[2],b:e[3]};if((e=R.rgba.exec(c)))return{r:e[1],g:e[2],b:e[3],a:e[4]};if((e=R.hsl.exec(c)))return{h:e[1],s:e[2],l:e[3]};if((e=R.hsla.exec(c)))return{h:e[1],s:e[2],l:e[3],a:e[4]};if((e=R.hsv.exec(c)))return{h:e[1],s:e[2],v:e[3]};if((e=R.hsva.exec(c)))return{h:e[1],s:e[2],v:e[3],a:e[4]};if((e=R.hex8.exec(c)))return{a:Q(e[1]),r:K(e[2]),g:K(e[3]),b:K(e[4]),format:d?"name":"hex8"};if((e=R.hex6.exec(c)))return{r:K(e[1]),g:K(e[2]),b:K(e[3]),format:d?"name":"hex"};if((e=R.hex3.exec(c)))return{r:K(e[1]+''+e[1]),g:K(e[2]+''+e[2]),b:K(e[3]+''+e[3]),format:d?"name":"hex"};return false;}window.tinycolor=i;})();a(function(){if(a.fn.spectrum.load)a.fn.spectrum.processNativeColorInputs();});});(function(a,b){if(typeof define==="function"&&define.amd)define("priorityNav",b(a));else if(typeof exports==="object")module.exports=b(a);else a.priorityNav=b(a);})(window||this,function(a){"use strict";var b={};var c=[];var d=!!document.querySelector&&!!a.addEventListener;var e={};var f=0;var g=0;var h,i,j,k,l,m,n,o;var p=0;var q={initClass:"js-priorityNav",mainNavWrapper:"nav",mainNav:"ul",navDropdownClassName:"nav__dropdown",navDropdownToggleClassName:"nav__dropdown-toggle",navDropdownLabel:"more",navDropdownBreakpointLabel:"menu",breakPoint:500,throttleDelay:50,offsetPixels:0,count:true,moved:function(){},movedBack:function(){}};var r=function(a,b,c){if(Object.prototype.toString.call(a)==="[object Object]"){for(var d in a)if(Object.prototype.hasOwnProperty.call(a,d))b.call(c,a[d],d,a);}else for(var e=0,f=a.length;e<f;e++)b.call(c,a[e],e,a);};var s=function(a,b){var c=b.charAt(0);for(;a&&a!==document;a=a.parentNode)if(c==="."){if(a.classList.contains(b.substr(1)))return a;}else if(c==="#"){if(a.id===b.substr(1))return a;}else if(c==="[")if(a.hasAttribute(b.substr(1,b.length-2)))return a;return false;};var t=function(a,b){var c={};r(a,function(b,d){c[d]=a[d];});r(b,function(a,d){c[d]=b[d];});return c;};function u(a,b,c){var d;return function(){var e=this,f=arguments;var g=function(){d=null;if(!c)a.apply(e,f);};var h=c&&!d;clearTimeout(d);d=setTimeout(g,b);if(h)a.apply(e,f);};}var v=function(a,b){if(a.classList)a.classList.toggle(b);else{var c=a.className.split(" ");var d=c.indexOf(b);if(d>=0)c.splice(d,1);else c.push(b);a.className=c.join(" ");}};var w=function(a,b){o=document.createElement("span");l=document.createElement("ul");m=document.createElement("button");m.innerHTML=b.navDropdownLabel;m.setAttribute("aria-controls","menu");m.setAttribute("type","button");l.setAttribute("aria-hidden","true");if(a.querySelector(k).parentNode!==a){console.warn("mainNav is not a direct child of mainNavWrapper, double check please");return;}a.insertAfter(o,a.querySelector(k));o.appendChild(m);o.appendChild(l);l.classList.add(b.navDropdownClassName);l.classList.add("priority-nav__dropdown");m.classList.add(b.navDropdownToggleClassName);m.classList.add("priority-nav__dropdown-toggle");o.classList.add(b.navDropdownClassName+"-wrapper");o.classList.add("priority-nav__wrapper");a.classList.add("priority-nav");};var x=function(a){var b=window.getComputedStyle(a);var c=parseFloat(b.paddingLeft)+parseFloat(b.paddingRight);return a.clientWidth-c;};var y=function(){var a=document,b=window;var c=(a.compatMode&&a.compatMode==="CSS1Compat")?a.documentElement:a.body;var d=c.clientWidth;var e=c.clientHeight;if(b.innerWidth&&d>b.innerWidth){d=b.innerWidth;e=b.innerHeight;}return{width:d,height:e};};var z=function(a){i=x(a);if(a.querySelector(l).parentNode===a)n=a.querySelector(l).offsetWidth;else n=0;j=D(a)+e.offsetPixels;p=y().width;};b.doesItFit=function(a){var d=a.getAttribute("instance")===0?d:e.throttleDelay;f++;(u(function(){var d=a.getAttribute("instance");z(a);while(i<=j&&a.querySelector(k).children.length>0||p<e.breakPoint&&a.querySelector(k).children.length>0){b.toDropdown(a,d);z(a,d);if(p<e.breakPoint)C(a,d,e.navDropdownBreakpointLabel);}while(i>=c[d][c[d].length-1]&&p>e.breakPoint){b.toMenu(a,d);if(p>e.breakPoint)C(a,d,e.navDropdownLabel);}if(c[d].length<1){a.querySelector(l).classList.remove("show");C(a,d,e.navDropdownLabel);}if(a.querySelector(k).children.length<1){a.classList.add("is-empty");C(a,d,e.navDropdownBreakpointLabel);}else a.classList.remove("is-empty");A(a,d);},d))();};var A=function(a,b){if(c[b].length<1){a.querySelector(m).classList.add("priority-nav-is-hidden");a.querySelector(m).classList.remove("priority-nav-is-visible");a.classList.remove("priority-nav-has-dropdown");a.querySelector(".priority-nav__wrapper").setAttribute("aria-haspopup","false");}else{a.querySelector(m).classList.add("priority-nav-is-visible");a.querySelector(m).classList.remove("priority-nav-is-hidden");a.classList.add("priority-nav-has-dropdown");a.querySelector(".priority-nav__wrapper").setAttribute("aria-haspopup","true");}};var B=function(a,b){a.querySelector(m).setAttribute("priorityNav-count",c[b].length);};var C=function(a,b,c){a.querySelector(m).innerHTML=c;};b.toDropdown=function(a,b){if(a.querySelector(l).firstChild&&a.querySelector(k).children.length>0)a.querySelector(l).insertBefore(a.querySelector(k).lastElementChild,a.querySelector(l).firstChild);else if(a.querySelector(k).children.length>0)a.querySelector(l).appendChild(a.querySelector(k).lastElementChild);c[b].push(j);A(a,b);if(a.querySelector(k).children.length>0&&e.count)B(a,b);e.moved();};b.toMenu=function(a,b){if(a.querySelector(l).children.length>0)a.querySelector(k).appendChild(a.querySelector(l).firstElementChild);c[b].pop();A(a,b);if(a.querySelector(k).children.length>0&&e.count)B(a,b);e.movedBack();};var D=function(a){var b=a.childNodes;var c=0;for(var d=0;d<b.length;d++)if(b[d].nodeType!==3)if(!isNaN(b[d].offsetWidth))c+=b[d].offsetWidth;return c;};var E=function(a,c){if(window.attachEvent){window.attachEvent("onresize",function(){if(b.doesItFit)b.doesItFit(a);});}else if(window.addEventListener)window.addEventListener("resize",function(){if(b.doesItFit)b.doesItFit(a);},true);a.querySelector(m).addEventListener("click",function(){v(a.querySelector(l),"show");v(this,"is-open");v(a,"is-open");if(-1!==a.className.indexOf("is-open"))a.querySelector(l).setAttribute("aria-hidden","false");else{a.querySelector(l).setAttribute("aria-hidden","true");a.querySelector(l).blur();}});document.addEventListener("click",function(b){if(!s(b.target,"."+c.navDropdownClassName)&&b.target!==a.querySelector(m)){a.querySelector(l).classList.remove("show");a.querySelector(m).classList.remove("is-open");a.classList.remove("is-open");}});document.onkeydown=function(a){a=a||window.event;if(a.keyCode===27){document.querySelector(l).classList.remove("show");document.querySelector(m).classList.remove("is-open");h.classList.remove("is-open");}};};Element.prototype.remove=function(){this.parentElement.removeChild(this);};NodeList.prototype.remove=HTMLCollection.prototype.remove=function(){for(var a=0,b=this.length;a<b;a++)if(this[a]&&this[a].parentElement)this[a].parentElement.removeChild(this[a]);};b.destroy=function(){if(!e)return;document.documentElement.classList.remove(e.initClass);o.remove();e=null;delete b.init;delete b.doesItFit;};if(d&&typeof Node!=="undefined")Node.prototype.insertAfter=function(a,b){this.insertBefore(a,b.nextSibling);};var F=function(a){var b=a.charAt(0);if(b==="."||b==="#")return false;else return true;};b.init=function(a){e=t(q,a||{});if(!d&&typeof Node==="undefined"){console.warn("This browser doesn't support priorityNav");return;}if(!F(e.navDropdownClassName)||!F(e.navDropdownToggleClassName)){console.warn("No symbols allowed in navDropdownClassName & navDropdownToggleClassName. These are not selectors.");return;}var i=document.querySelectorAll(e.mainNavWrapper);r(i,function(a){c[g]=[];a.setAttribute("instance",g++);h=a;if(!h){console.warn("couldn't find the specified mainNavWrapper element");return;}k=e.mainNav;if(!a.querySelector(k)){console.warn("couldn't find the specified mainNav element");return;}w(a,e);l="."+e.navDropdownClassName;if(!a.querySelector(l)){console.warn("couldn't find the specified navDropdown element");return;}m="."+e.navDropdownToggleClassName;if(!a.querySelector(m)){console.warn("couldn't find the specified navDropdownToggle element");return;}E(a,e);b.doesItFit(a);});f++;document.documentElement.classList.add(e.initClass);};return b;});(function(a){'use strict';if(typeof define==='function'&&define.amd)define(['jquery'],a);else if(typeof exports!=='undefined')module.exports=a(require('jquery'));else a(jQuery);}(function(a){'use strict';var b=window.Slick||{};b=(function(){var b=0;function c(c,d){var e=this,f;e.defaults={accessibility:true,adaptiveHeight:false,appendArrows:a(c),appendDots:a(c),arrows:true,asNavFor:null,prevArrow:'<button type="button" data-role="none" class="slick-prev" aria-label="Previous" tabindex="0" role="button">Previous</button>',nextArrow:'<button type="button" data-role="none" class="slick-next" aria-label="Next" tabindex="0" role="button">Next</button>',autoplay:false,autoplaySpeed:3000,centerMode:false,centerPadding:'50px',cssEase:'ease',customPaging:function(b,c){return a('<button type="button" data-role="none" role="button" tabindex="0" />').text(c+1);},dots:false,dotsClass:'slick-dots',draggable:true,easing:'linear',edgeFriction:0.35,fade:false,focusOnSelect:false,infinite:true,initialSlide:0,lazyLoad:'ondemand',mobileFirst:false,pauseOnHover:true,pauseOnFocus:true,pauseOnDotsHover:false,respondTo:'window',responsive:null,rows:1,rtl:false,slide:'',slidesPerRow:1,slidesToShow:1,slidesToScroll:1,speed:500,swipe:true,swipeToSlide:false,touchMove:true,touchThreshold:5,useCSS:true,useTransform:true,variableWidth:false,vertical:false,verticalSwiping:false,waitForAnimate:true,zIndex:1000};e.initials={animating:false,dragging:false,autoPlayTimer:null,currentDirection:0,currentLeft:null,currentSlide:0,direction:1,$dots:null,listWidth:null,listHeight:null,loadIndex:0,$nextArrow:null,$prevArrow:null,slideCount:null,slideWidth:null,$slideTrack:null,$slides:null,sliding:false,slideOffset:0,swipeLeft:null,$list:null,touchObject:{},transformsEnabled:false,unslicked:false};a.extend(e,e.initials);e.activeBreakpoint=null;e.animType=null;e.animProp=null;e.breakpoints=[];e.breakpointSettings=[];e.cssTransitions=false;e.focussed=false;e.interrupted=false;e.hidden='hidden';e.paused=true;e.positionProp=null;e.respondTo=null;e.rowCount=1;e.shouldClick=true;e.$slider=a(c);e.$slidesCache=null;e.transformType=null;e.transitionType=null;e.visibilityChange='visibilitychange';e.windowWidth=0;e.windowTimer=null;f=a(c).data('slick')||{};e.options=a.extend({},e.defaults,d,f);e.currentSlide=e.options.initialSlide;e.originalSettings=e.options;if(typeof document.mozHidden!=='undefined'){e.hidden='mozHidden';e.visibilityChange='mozvisibilitychange';}else if(typeof document.webkitHidden!=='undefined'){e.hidden='webkitHidden';e.visibilityChange='webkitvisibilitychange';}e.autoPlay=a.proxy(e.autoPlay,e);e.autoPlayClear=a.proxy(e.autoPlayClear,e);e.autoPlayIterator=a.proxy(e.autoPlayIterator,e);e.changeSlide=a.proxy(e.changeSlide,e);e.clickHandler=a.proxy(e.clickHandler,e);e.selectHandler=a.proxy(e.selectHandler,e);e.setPosition=a.proxy(e.setPosition,e);e.swipeHandler=a.proxy(e.swipeHandler,e);e.dragHandler=a.proxy(e.dragHandler,e);e.keyHandler=a.proxy(e.keyHandler,e);e.instanceUid=b++;e.htmlExpr=/^(?:\s*(<[\w\W]+>)[^>]*)$/;e.registerBreakpoints();e.init(true);}return c;}());b.prototype.activateADA=function(){var a=this;a.$slideTrack.find('.slick-active').attr({'aria-hidden':'false'}).find('a, input, button, select').attr({'tabindex':'0'});};b.prototype.addSlide=b.prototype.slickAdd=function(b,c,d){var e=this;if(typeof c==='boolean'){d=c;c=null;}else if(c<0||(c>=e.slideCount))return false;e.unload();if(typeof c==='number')if(c===0&&e.$slides.length===0)a(b).appendTo(e.$slideTrack);else if(d)a(b).insertBefore(e.$slides.eq(c));else a(b).insertAfter(e.$slides.eq(c));else if(d===true)a(b).prependTo(e.$slideTrack);else a(b).appendTo(e.$slideTrack);e.$slides=e.$slideTrack.children(this.options.slide);e.$slideTrack.children(this.options.slide).detach();e.$slideTrack.append(e.$slides);e.$slides.each(function(b,c){a(c).attr('data-slick-index',b);});e.$slidesCache=e.$slides;e.reinit();};b.prototype.animateHeight=function(){var a=this;if(a.options.slidesToShow===1&&a.options.adaptiveHeight===true&&a.options.vertical===false){var b=a.$slides.eq(a.currentSlide).outerHeight(true);a.$list.animate({height:b},a.options.speed);}};b.prototype.animateSlide=function(b,c){var d={},e=this;e.animateHeight();if(e.options.rtl===true&&e.options.vertical===false)b=-b;if(e.transformsEnabled===false)if(e.options.vertical===false)e.$slideTrack.animate({left:b},e.options.speed,e.options.easing,c);else e.$slideTrack.animate({top:b},e.options.speed,e.options.easing,c);else if(e.cssTransitions===false){if(e.options.rtl===true)e.currentLeft=-(e.currentLeft);a({animStart:e.currentLeft}).animate({animStart:b},{duration:e.options.speed,easing:e.options.easing,step:function(a){a=Math.ceil(a);if(e.options.vertical===false){d[e.animType]='translate('+a+'px, 0px)';e.$slideTrack.css(d);}else{d[e.animType]='translate(0px,'+a+'px)';e.$slideTrack.css(d);}},complete:function(){if(c)c.call();}});}else{e.applyTransition();b=Math.ceil(b);if(e.options.vertical===false)d[e.animType]='translate3d('+b+'px, 0px, 0px)';else d[e.animType]='translate3d(0px,'+b+'px, 0px)';e.$slideTrack.css(d);if(c)setTimeout(function(){e.disableTransition();c.call();},e.options.speed);}};b.prototype.getNavTarget=function(){var b=this,c=b.options.asNavFor;if(c&&c!==null)c=a(c).not(b.$slider);return c;};b.prototype.asNavFor=function(b){var c=this,d=c.getNavTarget();if(d!==null&&typeof d==='object')d.each(function(){var c=a(this).slick('getSlick');if(!c.unslicked)c.slideHandler(b,true);});};b.prototype.applyTransition=function(a){var b=this,c={};if(b.options.fade===false)c[b.transitionType]=b.transformType+' '+b.options.speed+'ms '+b.options.cssEase;else c[b.transitionType]='opacity '+b.options.speed+'ms '+b.options.cssEase;if(b.options.fade===false)b.$slideTrack.css(c);else b.$slides.eq(a).css(c);};b.prototype.autoPlay=function(){var a=this;a.autoPlayClear();if(a.slideCount>a.options.slidesToShow)a.autoPlayTimer=setInterval(a.autoPlayIterator,a.options.autoplaySpeed);};b.prototype.autoPlayClear=function(){var a=this;if(a.autoPlayTimer)clearInterval(a.autoPlayTimer);};b.prototype.autoPlayIterator=function(){var a=this,b=a.currentSlide+a.options.slidesToScroll;if(!a.paused&&!a.interrupted&&!a.focussed){if(a.options.infinite===false)if(a.direction===1&&(a.currentSlide+1)===(a.slideCount-1))a.direction=0;else if(a.direction===0){b=a.currentSlide-a.options.slidesToScroll;if(a.currentSlide-1===0)a.direction=1;}a.slideHandler(b);}};b.prototype.buildArrows=function(){var b=this;if(b.options.arrows===true){b.$prevArrow=a(b.options.prevArrow).addClass('slick-arrow');b.$nextArrow=a(b.options.nextArrow).addClass('slick-arrow');if(b.slideCount>b.options.slidesToShow){b.$prevArrow.removeClass('slick-hidden').removeAttr('aria-hidden tabindex');b.$nextArrow.removeClass('slick-hidden').removeAttr('aria-hidden tabindex');if(b.htmlExpr.test(b.options.prevArrow))b.$prevArrow.prependTo(b.options.appendArrows);if(b.htmlExpr.test(b.options.nextArrow))b.$nextArrow.appendTo(b.options.appendArrows);if(b.options.infinite!==true)b.$prevArrow.addClass('slick-disabled').attr('aria-disabled','true');}else b.$prevArrow.add(b.$nextArrow).addClass('slick-hidden').attr({'aria-disabled':'true','tabindex':'-1'});}};b.prototype.buildDots=function(){var b=this,c,d;if(b.options.dots===true&&b.slideCount>b.options.slidesToShow){b.$slider.addClass('slick-dotted');d=a('<ul />').addClass(b.options.dotsClass);for(c=0;c<=b.getDotCount();c+=1)d.append(a('<li />').append(b.options.customPaging.call(this,b,c)));b.$dots=d.appendTo(b.options.appendDots);b.$dots.find('li').first().addClass('slick-active').attr('aria-hidden','false');}};b.prototype.buildOut=function(){var b=this;b.$slides=b.$slider.children(b.options.slide+':not(.slick-cloned)').addClass('slick-slide');b.slideCount=b.$slides.length;b.$slides.each(function(b,c){a(c).attr('data-slick-index',b).data('originalStyling',a(c).attr('style')||'');});b.$slider.addClass('slick-slider');b.$slideTrack=(b.slideCount===0)?a('<div class="slick-track"/>').appendTo(b.$slider):b.$slides.wrapAll('<div class="slick-track"/>').parent();b.$list=b.$slideTrack.wrap('<div aria-live="polite" class="slick-list"/>').parent();b.$slideTrack.css('opacity',0);if(b.options.centerMode===true||b.options.swipeToSlide===true)b.options.slidesToScroll=1;a('img[data-lazy]',b.$slider).not('[src]').addClass('slick-loading');b.setupInfinite();b.buildArrows();b.buildDots();b.updateDots();b.setSlideClasses(typeof b.currentSlide==='number'?b.currentSlide:0);if(b.options.draggable===true)b.$list.addClass('draggable');};b.prototype.buildRows=function(){var a=this,b,c,d,e,f,g,h;e=document.createDocumentFragment();g=a.$slider.children();if(a.options.rows>1){h=a.options.slidesPerRow*a.options.rows;f=Math.ceil(g.length/h);for(b=0;b<f;b++){var i=document.createElement('div');for(c=0;c<a.options.rows;c++){var j=document.createElement('div');for(d=0;d<a.options.slidesPerRow;d++){var k=(b*h+((c*a.options.slidesPerRow)+d));if(g.get(k))j.appendChild(g.get(k));}i.appendChild(j);}e.appendChild(i);}a.$slider.empty().append(e);a.$slider.children().children().children().css({'width':(100/a.options.slidesPerRow)+'%','display':'inline-block'});}};b.prototype.checkResponsive=function(b,c){var d=this,e,f,g,h=false;var i=d.$slider.width();var j=window.innerWidth||a(window).width();if(d.respondTo==='window')g=j;else if(d.respondTo==='slider')g=i;else if(d.respondTo==='min')g=Math.min(j,i);if(d.options.responsive&&d.options.responsive.length&&d.options.responsive!==null){f=null;for(e in d.breakpoints)if(d.breakpoints.hasOwnProperty(e))if(d.originalSettings.mobileFirst===false){if(g<d.breakpoints[e])f=d.breakpoints[e];}else if(g>d.breakpoints[e])f=d.breakpoints[e];if(f!==null){if(d.activeBreakpoint!==null){if(f!==d.activeBreakpoint||c){d.activeBreakpoint=f;if(d.breakpointSettings[f]==='unslick')d.unslick(f);else{d.options=a.extend({},d.originalSettings,d.breakpointSettings[f]);if(b===true)d.currentSlide=d.options.initialSlide;d.refresh(b);}h=f;}}else{d.activeBreakpoint=f;if(d.breakpointSettings[f]==='unslick')d.unslick(f);else{d.options=a.extend({},d.originalSettings,d.breakpointSettings[f]);if(b===true)d.currentSlide=d.options.initialSlide;d.refresh(b);}h=f;}}else if(d.activeBreakpoint!==null){d.activeBreakpoint=null;d.options=d.originalSettings;if(b===true)d.currentSlide=d.options.initialSlide;d.refresh(b);h=f;}if(!b&&h!==false)d.$slider.trigger('breakpoint',[d,h]);}};b.prototype.changeSlide=function(b,c){var d=this,e=a(b.currentTarget),f,g,h;if(e.is('a'))b.preventDefault();if(!e.is('li'))e=e.closest('li');h=(d.slideCount%d.options.slidesToScroll!==0);f=h?0:(d.slideCount-d.currentSlide)%d.options.slidesToScroll;switch(b.data.message){case 'previous':g=f===0?d.options.slidesToScroll:d.options.slidesToShow-f;if(d.slideCount>d.options.slidesToShow)d.slideHandler(d.currentSlide-g,false,c);break;case 'next':g=f===0?d.options.slidesToScroll:f;if(d.slideCount>d.options.slidesToShow)d.slideHandler(d.currentSlide+g,false,c);break;case 'index':var i=b.data.index===0?0:b.data.index||e.index()*d.options.slidesToScroll;d.slideHandler(d.checkNavigable(i),false,c);e.children().trigger('focus');break;default:return;}};b.prototype.checkNavigable=function(a){var b=this,c,d;c=b.getNavigableIndexes();d=0;if(a>c[c.length-1])a=c[c.length-1];else for(var e in c){if(a<c[e]){a=d;break;}d=c[e];}return a;};b.prototype.cleanUpEvents=function(){var b=this;if(b.options.dots&&b.$dots!==null)a('li',b.$dots).off('click.slick',b.changeSlide).off('mouseenter.slick',a.proxy(b.interrupt,b,true)).off('mouseleave.slick',a.proxy(b.interrupt,b,false));b.$slider.off('focus.slick blur.slick');if(b.options.arrows===true&&b.slideCount>b.options.slidesToShow){b.$prevArrow&&b.$prevArrow.off('click.slick',b.changeSlide);b.$nextArrow&&b.$nextArrow.off('click.slick',b.changeSlide);}b.$list.off('touchstart.slick mousedown.slick',b.swipeHandler);b.$list.off('touchmove.slick mousemove.slick',b.swipeHandler);b.$list.off('touchend.slick mouseup.slick',b.swipeHandler);b.$list.off('touchcancel.slick mouseleave.slick',b.swipeHandler);b.$list.off('click.slick',b.clickHandler);a(document).off(b.visibilityChange,b.visibility);b.cleanUpSlideEvents();if(b.options.accessibility===true)b.$list.off('keydown.slick',b.keyHandler);if(b.options.focusOnSelect===true)a(b.$slideTrack).children().off('click.slick',b.selectHandler);a(window).off('orientationchange.slick.slick-'+b.instanceUid,b.orientationChange);a(window).off('resize.slick.slick-'+b.instanceUid,b.resize);a('[draggable!=true]',b.$slideTrack).off('dragstart',b.preventDefault);a(window).off('load.slick.slick-'+b.instanceUid,b.setPosition);a(document).off('ready.slick.slick-'+b.instanceUid,b.setPosition);};b.prototype.cleanUpSlideEvents=function(){var b=this;b.$list.off('mouseenter.slick',a.proxy(b.interrupt,b,true));b.$list.off('mouseleave.slick',a.proxy(b.interrupt,b,false));};b.prototype.cleanUpRows=function(){var a=this,b;if(a.options.rows>1){b=a.$slides.children().children();b.removeAttr('style');a.$slider.empty().append(b);}};b.prototype.clickHandler=function(a){var b=this;if(b.shouldClick===false){a.stopImmediatePropagation();a.stopPropagation();a.preventDefault();}};b.prototype.destroy=function(b){var c=this;c.autoPlayClear();c.touchObject={};c.cleanUpEvents();a('.slick-cloned',c.$slider).detach();if(c.$dots)c.$dots.remove();if(c.$prevArrow&&c.$prevArrow.length){c.$prevArrow.removeClass('slick-disabled slick-arrow slick-hidden').removeAttr('aria-hidden aria-disabled tabindex').css('display','');if(c.htmlExpr.test(c.options.prevArrow))c.$prevArrow.remove();}if(c.$nextArrow&&c.$nextArrow.length){c.$nextArrow.removeClass('slick-disabled slick-arrow slick-hidden').removeAttr('aria-hidden aria-disabled tabindex').css('display','');if(c.htmlExpr.test(c.options.nextArrow))c.$nextArrow.remove();}if(c.$slides){c.$slides.removeClass('slick-slide slick-active slick-center slick-visible slick-current').removeAttr('aria-hidden').removeAttr('data-slick-index').each(function(){a(this).attr('style',a(this).data('originalStyling'));});c.$slideTrack.children(this.options.slide).detach();c.$slideTrack.detach();c.$list.detach();c.$slider.append(c.$slides);}c.cleanUpRows();c.$slider.removeClass('slick-slider');c.$slider.removeClass('slick-initialized');c.$slider.removeClass('slick-dotted');c.unslicked=true;if(!b)c.$slider.trigger('destroy',[c]);};b.prototype.disableTransition=function(a){var b=this,c={};c[b.transitionType]='';if(b.options.fade===false)b.$slideTrack.css(c);else b.$slides.eq(a).css(c);};b.prototype.fadeSlide=function(a,b){var c=this;if(c.cssTransitions===false){c.$slides.eq(a).css({zIndex:c.options.zIndex});c.$slides.eq(a).animate({opacity:1},c.options.speed,c.options.easing,b);}else{c.applyTransition(a);c.$slides.eq(a).css({opacity:1,zIndex:c.options.zIndex});if(b)setTimeout(function(){c.disableTransition(a);b.call();},c.options.speed);}};b.prototype.fadeSlideOut=function(a){var b=this;if(b.cssTransitions===false)b.$slides.eq(a).animate({opacity:0,zIndex:b.options.zIndex-2},b.options.speed,b.options.easing);else{b.applyTransition(a);b.$slides.eq(a).css({opacity:0,zIndex:b.options.zIndex-2});}};b.prototype.filterSlides=b.prototype.slickFilter=function(a){var b=this;if(a!==null){b.$slidesCache=b.$slides;b.unload();b.$slideTrack.children(this.options.slide).detach();b.$slidesCache.filter(a).appendTo(b.$slideTrack);b.reinit();}};b.prototype.focusHandler=function(){var b=this;b.$slider.off('focus.slick blur.slick').on('focus.slick blur.slick','*:not(.slick-arrow)',function(c){c.stopImmediatePropagation();var d=a(this);setTimeout(function(){if(b.options.pauseOnFocus){b.focussed=d.is(':focus');b.autoPlay();}},0);});};b.prototype.getCurrent=b.prototype.slickCurrentSlide=function(){var a=this;return a.currentSlide;};b.prototype.getDotCount=function(){var a=this;var b=0;var c=0;var d=0;if(a.options.infinite===true)while(b<a.slideCount){++d;b=c+a.options.slidesToScroll;c+=a.options.slidesToScroll<=a.options.slidesToShow?a.options.slidesToScroll:a.options.slidesToShow;}else if(a.options.centerMode===true)d=a.slideCount;else if(!a.options.asNavFor)d=1+Math.ceil((a.slideCount-a.options.slidesToShow)/a.options.slidesToScroll);else while(b<a.slideCount){++d;b=c+a.options.slidesToScroll;c+=a.options.slidesToScroll<=a.options.slidesToShow?a.options.slidesToScroll:a.options.slidesToShow;}return d-1;};b.prototype.getLeft=function(a){var b=this,c,d,e=0,f;b.slideOffset=0;d=b.$slides.first().outerHeight(true);if(b.options.infinite===true){if(b.slideCount>b.options.slidesToShow){b.slideOffset=(b.slideWidth*b.options.slidesToShow)*-1;e=(d*b.options.slidesToShow)*-1;}if(b.slideCount%b.options.slidesToScroll!==0)if(a+b.options.slidesToScroll>b.slideCount&&b.slideCount>b.options.slidesToShow)if(a>b.slideCount){b.slideOffset=((b.options.slidesToShow-(a-b.slideCount))*b.slideWidth)*-1;e=((b.options.slidesToShow-(a-b.slideCount))*d)*-1;}else{b.slideOffset=((b.slideCount%b.options.slidesToScroll)*b.slideWidth)*-1;e=((b.slideCount%b.options.slidesToScroll)*d)*-1;}}else if(a+b.options.slidesToShow>b.slideCount){b.slideOffset=((a+b.options.slidesToShow)-b.slideCount)*b.slideWidth;e=((a+b.options.slidesToShow)-b.slideCount)*d;}if(b.slideCount<=b.options.slidesToShow){b.slideOffset=0;e=0;}if(b.options.centerMode===true&&b.options.infinite===true)b.slideOffset+=b.slideWidth*Math.floor(b.options.slidesToShow/2)-b.slideWidth;else if(b.options.centerMode===true){b.slideOffset=0;b.slideOffset+=b.slideWidth*Math.floor(b.options.slidesToShow/2);}if(b.options.vertical===false)c=((a*b.slideWidth)*-1)+b.slideOffset;else c=((a*d)*-1)+e;if(b.options.variableWidth===true){if(b.slideCount<=b.options.slidesToShow||b.options.infinite===false)f=b.$slideTrack.children('.slick-slide').eq(a);else f=b.$slideTrack.children('.slick-slide').eq(a+b.options.slidesToShow);if(b.options.rtl===true)if(f[0])c=(b.$slideTrack.width()-f[0].offsetLeft-f.width())*-1;else c=0;else c=f[0]?f[0].offsetLeft*-1:0;if(b.options.centerMode===true){if(b.slideCount<=b.options.slidesToShow||b.options.infinite===false)f=b.$slideTrack.children('.slick-slide').eq(a);else f=b.$slideTrack.children('.slick-slide').eq(a+b.options.slidesToShow+1);if(b.options.rtl===true)if(f[0])c=(b.$slideTrack.width()-f[0].offsetLeft-f.width())*-1;else c=0;else c=f[0]?f[0].offsetLeft*-1:0;c+=(b.$list.width()-f.outerWidth())/2;}}return c;};b.prototype.getOption=b.prototype.slickGetOption=function(a){var b=this;return b.options[a];};b.prototype.getNavigableIndexes=function(){var a=this,b=0,c=0,d=[],e;if(a.options.infinite===false)e=a.slideCount;else{b=a.options.slidesToScroll*-1;c=a.options.slidesToScroll*-1;e=a.slideCount*2;}while(b<e){d.push(b);b=c+a.options.slidesToScroll;c+=a.options.slidesToScroll<=a.options.slidesToShow?a.options.slidesToScroll:a.options.slidesToShow;}return d;};b.prototype.getSlick=function(){return this;};b.prototype.getSlideCount=function(){var b=this,c,d,e;e=b.options.centerMode===true?b.slideWidth*Math.floor(b.options.slidesToShow/2):0;if(b.options.swipeToSlide===true){b.$slideTrack.find('.slick-slide').each(function(c,f){if(f.offsetLeft-e+(a(f).outerWidth()/2)>(b.swipeLeft*-1)){d=f;return false;}});c=Math.abs(a(d).attr('data-slick-index')-b.currentSlide)||1;return c;}else return b.options.slidesToScroll;};b.prototype.goTo=b.prototype.slickGoTo=function(a,b){var c=this;c.changeSlide({data:{message:'index',index:parseInt(a)}},b);};b.prototype.init=function(b){var c=this;if(!a(c.$slider).hasClass('slick-initialized')){a(c.$slider).addClass('slick-initialized');c.buildRows();c.buildOut();c.setProps();c.startLoad();c.loadSlider();c.initializeEvents();c.updateArrows();c.updateDots();c.checkResponsive(true);c.focusHandler();}if(b)c.$slider.trigger('init',[c]);if(c.options.accessibility===true)c.initADA();if(c.options.autoplay){c.paused=false;c.autoPlay();}};b.prototype.initADA=function(){var b=this;b.$slides.add(b.$slideTrack.find('.slick-cloned')).attr({'aria-hidden':'true','tabindex':'-1'}).find('a, input, button, select').attr({'tabindex':'-1'});b.$slideTrack.attr('role','listbox');b.$slides.not(b.$slideTrack.find('.slick-cloned')).each(function(c){a(this).attr({'role':'option','aria-describedby':'slick-slide'+b.instanceUid+c+''});});if(b.$dots!==null)b.$dots.attr('role','tablist').find('li').each(function(c){a(this).attr({'role':'presentation','aria-selected':'false','aria-controls':'navigation'+b.instanceUid+c+'','id':'slick-slide'+b.instanceUid+c+''});}).first().attr('aria-selected','true').end().find('button').attr('role','button').end().closest('div').attr('role','toolbar');b.activateADA();};b.prototype.initArrowEvents=function(){var a=this;if(a.options.arrows===true&&a.slideCount>a.options.slidesToShow){a.$prevArrow.off('click.slick').on('click.slick',{message:'previous'},a.changeSlide);a.$nextArrow.off('click.slick').on('click.slick',{message:'next'},a.changeSlide);}};b.prototype.initDotEvents=function(){var b=this;if(b.options.dots===true&&b.slideCount>b.options.slidesToShow)a('li',b.$dots).on('click.slick',{message:'index'},b.changeSlide);if(b.options.dots===true&&b.options.pauseOnDotsHover===true)a('li',b.$dots).on('mouseenter.slick',a.proxy(b.interrupt,b,true)).on('mouseleave.slick',a.proxy(b.interrupt,b,false));};b.prototype.initSlideEvents=function(){var b=this;if(b.options.pauseOnHover){b.$list.on('mouseenter.slick',a.proxy(b.interrupt,b,true));b.$list.on('mouseleave.slick',a.proxy(b.interrupt,b,false));}};b.prototype.initializeEvents=function(){var b=this;b.initArrowEvents();b.initDotEvents();b.initSlideEvents();b.$list.on('touchstart.slick mousedown.slick',{action:'start'},b.swipeHandler);b.$list.on('touchmove.slick mousemove.slick',{action:'move'},b.swipeHandler);b.$list.on('touchend.slick mouseup.slick',{action:'end'},b.swipeHandler);b.$list.on('touchcancel.slick mouseleave.slick',{action:'end'},b.swipeHandler);b.$list.on('click.slick',b.clickHandler);a(document).on(b.visibilityChange,a.proxy(b.visibility,b));if(b.options.accessibility===true)b.$list.on('keydown.slick',b.keyHandler);if(b.options.focusOnSelect===true)a(b.$slideTrack).children().on('click.slick',b.selectHandler);a(window).on('orientationchange.slick.slick-'+b.instanceUid,a.proxy(b.orientationChange,b));a(window).on('resize.slick.slick-'+b.instanceUid,a.proxy(b.resize,b));a('[draggable!=true]',b.$slideTrack).on('dragstart',b.preventDefault);a(window).on('load.slick.slick-'+b.instanceUid,b.setPosition);a(document).on('ready.slick.slick-'+b.instanceUid,b.setPosition);};b.prototype.initUI=function(){var a=this;if(a.options.arrows===true&&a.slideCount>a.options.slidesToShow){a.$prevArrow.show();a.$nextArrow.show();}if(a.options.dots===true&&a.slideCount>a.options.slidesToShow)a.$dots.show();};b.prototype.keyHandler=function(a){var b=this;if(!a.target.tagName.match('TEXTAREA|INPUT|SELECT'))if(a.keyCode===37&&b.options.accessibility===true)b.changeSlide({data:{message:b.options.rtl===true?'next':'previous'}});else if(a.keyCode===39&&b.options.accessibility===true)b.changeSlide({data:{message:b.options.rtl===true?'previous':'next'}});};b.prototype.lazyLoad=function(){var b=this,c,d,e,f;function g(c){a('img[data-lazy]',c).each(function(){var c=a(this),d=a(this).attr('data-lazy'),e=document.createElement('img');e.onload=function(){c.animate({opacity:0},100,function(){c.attr('src',d).animate({opacity:1},200,function(){c.removeAttr('data-lazy').removeClass('slick-loading');});b.$slider.trigger('lazyLoaded',[b,c,d]);});};e.onerror=function(){c.removeAttr('data-lazy').removeClass('slick-loading').addClass('slick-lazyload-error');b.$slider.trigger('lazyLoadError',[b,c,d]);};e.src=d;});}if(b.options.centerMode===true)if(b.options.infinite===true){e=b.currentSlide+(b.options.slidesToShow/2+1);f=e+b.options.slidesToShow+2;}else{e=Math.max(0,b.currentSlide-(b.options.slidesToShow/2+1));f=2+(b.options.slidesToShow/2+1)+b.currentSlide;}else{e=b.options.infinite?b.options.slidesToShow+b.currentSlide:b.currentSlide;f=Math.ceil(e+b.options.slidesToShow);if(b.options.fade===true){if(e>0)e--;if(f<=b.slideCount)f++;}}c=b.$slider.find('.slick-slide').slice(e,f);g(c);if(b.slideCount<=b.options.slidesToShow){d=b.$slider.find('.slick-slide');g(d);}else if(b.currentSlide>=b.slideCount-b.options.slidesToShow){d=b.$slider.find('.slick-cloned').slice(0,b.options.slidesToShow);g(d);}else if(b.currentSlide===0){d=b.$slider.find('.slick-cloned').slice(b.options.slidesToShow*-1);g(d);}};b.prototype.loadSlider=function(){var a=this;a.setPosition();a.$slideTrack.css({opacity:1});a.$slider.removeClass('slick-loading');a.initUI();if(a.options.lazyLoad==='progressive')a.progressiveLazyLoad();};b.prototype.next=b.prototype.slickNext=function(){var a=this;a.changeSlide({data:{message:'next'}});};b.prototype.orientationChange=function(){var a=this;a.checkResponsive();a.setPosition();};b.prototype.pause=b.prototype.slickPause=function(){var a=this;a.autoPlayClear();a.paused=true;};b.prototype.play=b.prototype.slickPlay=function(){var a=this;a.autoPlay();a.options.autoplay=true;a.paused=false;a.focussed=false;a.interrupted=false;};b.prototype.postSlide=function(a){var b=this;if(!b.unslicked){b.$slider.trigger('afterChange',[b,a]);b.animating=false;b.setPosition();b.swipeLeft=null;if(b.options.autoplay)b.autoPlay();if(b.options.accessibility===true)b.initADA();}};b.prototype.prev=b.prototype.slickPrev=function(){var a=this;a.changeSlide({data:{message:'previous'}});};b.prototype.preventDefault=function(a){a.preventDefault();};b.prototype.progressiveLazyLoad=function(b){b=b||1;var c=this,d=a('img[data-lazy]',c.$slider),e,f,g;if(d.length){e=d.first();f=e.attr('data-lazy');g=document.createElement('img');g.onload=function(){e.attr('src',f).removeAttr('data-lazy').removeClass('slick-loading');if(c.options.adaptiveHeight===true)c.setPosition();c.$slider.trigger('lazyLoaded',[c,e,f]);c.progressiveLazyLoad();};g.onerror=function(){if(b<3)setTimeout(function(){c.progressiveLazyLoad(b+1);},500);else{e.removeAttr('data-lazy').removeClass('slick-loading').addClass('slick-lazyload-error');c.$slider.trigger('lazyLoadError',[c,e,f]);c.progressiveLazyLoad();}};g.src=f;}else c.$slider.trigger('allImagesLoaded',[c]);};b.prototype.refresh=function(b){var c=this,d,e;e=c.slideCount-c.options.slidesToShow;if(!c.options.infinite&&(c.currentSlide>e))c.currentSlide=e;if(c.slideCount<=c.options.slidesToShow)c.currentSlide=0;d=c.currentSlide;c.destroy(true);a.extend(c,c.initials,{currentSlide:d});c.init();if(!b)c.changeSlide({data:{message:'index',index:d}},false);};b.prototype.registerBreakpoints=function(){var b=this,c,d,e,f=b.options.responsive||null;if(a.type(f)==='array'&&f.length){b.respondTo=b.options.respondTo||'window';for(c in f){e=b.breakpoints.length-1;d=f[c].breakpoint;if(f.hasOwnProperty(c)){while(e>=0){if(b.breakpoints[e]&&b.breakpoints[e]===d)b.breakpoints.splice(e,1);e--;}b.breakpoints.push(d);b.breakpointSettings[d]=f[c].settings;}}b.breakpoints.sort(function(a,c){return(b.options.mobileFirst)?a-c:c-a;});}};b.prototype.reinit=function(){var b=this;b.$slides=b.$slideTrack.children(b.options.slide).addClass('slick-slide');b.slideCount=b.$slides.length;if(b.currentSlide>=b.slideCount&&b.currentSlide!==0)b.currentSlide=b.currentSlide-b.options.slidesToScroll;if(b.slideCount<=b.options.slidesToShow)b.currentSlide=0;b.registerBreakpoints();b.setProps();b.setupInfinite();b.buildArrows();b.updateArrows();b.initArrowEvents();b.buildDots();b.updateDots();b.initDotEvents();b.cleanUpSlideEvents();b.initSlideEvents();b.checkResponsive(false,true);if(b.options.focusOnSelect===true)a(b.$slideTrack).children().on('click.slick',b.selectHandler);b.setSlideClasses(typeof b.currentSlide==='number'?b.currentSlide:0);b.setPosition();b.focusHandler();b.paused=!b.options.autoplay;b.autoPlay();b.$slider.trigger('reInit',[b]);};b.prototype.resize=function(){var b=this;if(a(window).width()!==b.windowWidth){clearTimeout(b.windowDelay);b.windowDelay=window.setTimeout(function(){b.windowWidth=a(window).width();b.checkResponsive();if(!b.unslicked)b.setPosition();},50);}};b.prototype.removeSlide=b.prototype.slickRemove=function(a,b,c){var d=this;if(typeof a==='boolean'){b=a;a=b===true?0:d.slideCount-1;}else a=b===true?--a:a;if(d.slideCount<1||a<0||a>d.slideCount-1)return false;d.unload();if(c===true)d.$slideTrack.children().remove();else d.$slideTrack.children(this.options.slide).eq(a).remove();d.$slides=d.$slideTrack.children(this.options.slide);d.$slideTrack.children(this.options.slide).detach();d.$slideTrack.append(d.$slides);d.$slidesCache=d.$slides;d.reinit();};b.prototype.setCSS=function(a){var b=this,c={},d,e;if(b.options.rtl===true)a=-a;d=b.positionProp=='left'?Math.ceil(a)+'px':'0px';e=b.positionProp=='top'?Math.ceil(a)+'px':'0px';c[b.positionProp]=a;if(b.transformsEnabled===false)b.$slideTrack.css(c);else{c={};if(b.cssTransitions===false){c[b.animType]='translate('+d+', '+e+')';b.$slideTrack.css(c);}else{c[b.animType]='translate3d('+d+', '+e+', 0px)';b.$slideTrack.css(c);}}};b.prototype.setDimensions=function(){var a=this;if(a.options.vertical===false){if(a.options.centerMode===true)a.$list.css({padding:('0px '+a.options.centerPadding)});}else{a.$list.height(a.$slides.first().outerHeight(true)*a.options.slidesToShow);if(a.options.centerMode===true)a.$list.css({padding:(a.options.centerPadding+' 0px')});}a.listWidth=a.$list.width();a.listHeight=a.$list.height();if(a.options.vertical===false&&a.options.variableWidth===false){a.slideWidth=Math.ceil(a.listWidth/a.options.slidesToShow);a.$slideTrack.width(Math.ceil((a.slideWidth*a.$slideTrack.children('.slick-slide').length)));}else if(a.options.variableWidth===true)a.$slideTrack.width(5000*a.slideCount);else{a.slideWidth=Math.ceil(a.listWidth);a.$slideTrack.height(Math.ceil((a.$slides.first().outerHeight(true)*a.$slideTrack.children('.slick-slide').length)));}var b=a.$slides.first().outerWidth(true)-a.$slides.first().width();if(a.options.variableWidth===false)a.$slideTrack.children('.slick-slide').width(a.slideWidth-b);};b.prototype.setFade=function(){var b=this,c;b.$slides.each(function(d,e){c=(b.slideWidth*d)*-1;if(b.options.rtl===true)a(e).css({position:'relative',right:c,top:0,zIndex:b.options.zIndex-2,opacity:0});else a(e).css({position:'relative',left:c,top:0,zIndex:b.options.zIndex-2,opacity:0});});b.$slides.eq(b.currentSlide).css({zIndex:b.options.zIndex-1,opacity:1});};b.prototype.setHeight=function(){var a=this;if(a.options.slidesToShow===1&&a.options.adaptiveHeight===true&&a.options.vertical===false){var b=a.$slides.eq(a.currentSlide).outerHeight(true);a.$list.css('height',b);}};b.prototype.setOption=b.prototype.slickSetOption=function(){var b=this,c,d,e,f,g=false,h;if(a.type(arguments[0])==='object'){e=arguments[0];g=arguments[1];h='multiple';}else if(a.type(arguments[0])==='string'){e=arguments[0];f=arguments[1];g=arguments[2];if(arguments[0]==='responsive'&&a.type(arguments[1])==='array')h='responsive';else if(typeof arguments[1]!=='undefined')h='single';}if(h==='single')b.options[e]=f;else if(h==='multiple')a.each(e,function(a,c){b.options[a]=c;});else if(h==='responsive')for(d in f)if(a.type(b.options.responsive)!=='array')b.options.responsive=[f[d]];else{c=b.options.responsive.length-1;while(c>=0){if(b.options.responsive[c].breakpoint===f[d].breakpoint)b.options.responsive.splice(c,1);c--;}b.options.responsive.push(f[d]);}if(g){b.unload();b.reinit();}};b.prototype.setPosition=function(){var a=this;a.setDimensions();a.setHeight();if(a.options.fade===false)a.setCSS(a.getLeft(a.currentSlide));else a.setFade();a.$slider.trigger('setPosition',[a]);};b.prototype.setProps=function(){var a=this,b=document.body.style;a.positionProp=a.options.vertical===true?'top':'left';if(a.positionProp==='top')a.$slider.addClass('slick-vertical');else a.$slider.removeClass('slick-vertical');if(b.WebkitTransition!==undefined||b.MozTransition!==undefined||b.msTransition!==undefined)if(a.options.useCSS===true)a.cssTransitions=true;if(a.options.fade)if(typeof a.options.zIndex==='number'){if(a.options.zIndex<3)a.options.zIndex=3;}else a.options.zIndex=a.defaults.zIndex;if(b.OTransform!==undefined){a.animType='OTransform';a.transformType='-o-transform';a.transitionType='OTransition';if(b.perspectiveProperty===undefined&&b.webkitPerspective===undefined)a.animType=false;}if(b.MozTransform!==undefined){a.animType='MozTransform';a.transformType='-moz-transform';a.transitionType='MozTransition';if(b.perspectiveProperty===undefined&&b.MozPerspective===undefined)a.animType=false;}if(b.webkitTransform!==undefined){a.animType='webkitTransform';a.transformType='-webkit-transform';a.transitionType='webkitTransition';if(b.perspectiveProperty===undefined&&b.webkitPerspective===undefined)a.animType=false;}if(b.msTransform!==undefined){a.animType='msTransform';a.transformType='-ms-transform';a.transitionType='msTransition';if(b.msTransform===undefined)a.animType=false;}if(b.transform!==undefined&&a.animType!==false){a.animType='transform';a.transformType='transform';a.transitionType='transition';}a.transformsEnabled=a.options.useTransform&&(a.animType!==null&&a.animType!==false);};b.prototype.setSlideClasses=function(a){var b=this,c,d,e,f;d=b.$slider.find('.slick-slide').removeClass('slick-active slick-center slick-current').attr('aria-hidden','true');b.$slides.eq(a).addClass('slick-current');if(b.options.centerMode===true){c=Math.floor(b.options.slidesToShow/2);if(b.options.infinite===true){if(a>=c&&a<=(b.slideCount-1)-c)b.$slides.slice(a-c,a+c+1).addClass('slick-active').attr('aria-hidden','false');else{e=b.options.slidesToShow+a;d.slice(e-c+1,e+c+2).addClass('slick-active').attr('aria-hidden','false');}if(a===0)d.eq(d.length-1-b.options.slidesToShow).addClass('slick-center');else if(a===b.slideCount-1)d.eq(b.options.slidesToShow).addClass('slick-center');}b.$slides.eq(a).addClass('slick-center');}else if(a>=0&&a<=(b.slideCount-b.options.slidesToShow))b.$slides.slice(a,a+b.options.slidesToShow).addClass('slick-active').attr('aria-hidden','false');else if(d.length<=b.options.slidesToShow)d.addClass('slick-active').attr('aria-hidden','false');else{f=b.slideCount%b.options.slidesToShow;e=b.options.infinite===true?b.options.slidesToShow+a:a;if(b.options.slidesToShow==b.options.slidesToScroll&&(b.slideCount-a)<b.options.slidesToShow)d.slice(e-(b.options.slidesToShow-f),e+f).addClass('slick-active').attr('aria-hidden','false');else d.slice(e,e+b.options.slidesToShow).addClass('slick-active').attr('aria-hidden','false');}if(b.options.lazyLoad==='ondemand')b.lazyLoad();};b.prototype.setupInfinite=function(){var b=this,c,d,e;if(b.options.fade===true)b.options.centerMode=false;if(b.options.infinite===true&&b.options.fade===false){d=null;if(b.slideCount>b.options.slidesToShow){if(b.options.centerMode===true)e=b.options.slidesToShow+1;else e=b.options.slidesToShow;for(c=b.slideCount;c>(b.slideCount-e);c-=1){d=c-1;a(b.$slides[d]).clone(true).attr('id','').attr('data-slick-index',d-b.slideCount).prependTo(b.$slideTrack).addClass('slick-cloned');}for(c=0;c<e;c+=1){d=c;a(b.$slides[d]).clone(true).attr('id','').attr('data-slick-index',d+b.slideCount).appendTo(b.$slideTrack).addClass('slick-cloned');}b.$slideTrack.find('.slick-cloned').find('[id]').each(function(){a(this).attr('id','');});}}};b.prototype.interrupt=function(a){var b=this;if(!a)b.autoPlay();b.interrupted=a;};b.prototype.selectHandler=function(b){var c=this;var d=a(b.target).is('.slick-slide')?a(b.target):a(b.target).parents('.slick-slide');var e=parseInt(d.attr('data-slick-index'));if(!e)e=0;if(c.slideCount<=c.options.slidesToShow){c.setSlideClasses(e);c.asNavFor(e);return;}c.slideHandler(e);};b.prototype.slideHandler=function(a,b,c){var d,e,f,g,h=null,i=this,j;b=b||false;if(i.animating===true&&i.options.waitForAnimate===true)return;if(i.options.fade===true&&i.currentSlide===a)return;if(i.slideCount<=i.options.slidesToShow)return;if(b===false)i.asNavFor(a);d=a;h=i.getLeft(d);g=i.getLeft(i.currentSlide);i.currentLeft=i.swipeLeft===null?g:i.swipeLeft;if(i.options.infinite===false&&i.options.centerMode===false&&(a<0||a>i.getDotCount()*i.options.slidesToScroll)){if(i.options.fade===false){d=i.currentSlide;if(c!==true)i.animateSlide(g,function(){i.postSlide(d);});else i.postSlide(d);}return;}else if(i.options.infinite===false&&i.options.centerMode===true&&(a<0||a>(i.slideCount-i.options.slidesToScroll))){if(i.options.fade===false){d=i.currentSlide;if(c!==true)i.animateSlide(g,function(){i.postSlide(d);});else i.postSlide(d);}return;}if(i.options.autoplay)clearInterval(i.autoPlayTimer);if(d<0)if(i.slideCount%i.options.slidesToScroll!==0)e=i.slideCount-(i.slideCount%i.options.slidesToScroll);else e=i.slideCount+d;else if(d>=i.slideCount)if(i.slideCount%i.options.slidesToScroll!==0)e=0;else e=d-i.slideCount;else e=d;i.animating=true;i.$slider.trigger('beforeChange',[i,i.currentSlide,e]);f=i.currentSlide;i.currentSlide=e;i.setSlideClasses(i.currentSlide);if(i.options.asNavFor){j=i.getNavTarget();j=j.slick('getSlick');if(j.slideCount<=j.options.slidesToShow)j.setSlideClasses(i.currentSlide);}i.updateDots();i.updateArrows();if(i.options.fade===true){if(c!==true){i.fadeSlideOut(f);i.fadeSlide(e,function(){i.postSlide(e);});}else i.postSlide(e);i.animateHeight();return;}if(c!==true)i.animateSlide(h,function(){i.postSlide(e);});else i.postSlide(e);};b.prototype.startLoad=function(){var a=this;if(a.options.arrows===true&&a.slideCount>a.options.slidesToShow){a.$prevArrow.hide();a.$nextArrow.hide();}if(a.options.dots===true&&a.slideCount>a.options.slidesToShow)a.$dots.hide();a.$slider.addClass('slick-loading');};b.prototype.swipeDirection=function(){var a,b,c,d,e=this;a=e.touchObject.startX-e.touchObject.curX;b=e.touchObject.startY-e.touchObject.curY;c=Math.atan2(b,a);d=Math.round(c*180/Math.PI);if(d<0)d=360-Math.abs(d);if((d<=45)&&(d>=0))return(e.options.rtl===false?'left':'right');if((d<=360)&&(d>=315))return(e.options.rtl===false?'left':'right');if((d>=135)&&(d<=225))return(e.options.rtl===false?'right':'left');if(e.options.verticalSwiping===true)if((d>=35)&&(d<=135))return 'down';else return 'up';return 'vertical';};b.prototype.swipeEnd=function(a){var b=this,c,d;b.dragging=false;b.interrupted=false;b.shouldClick=(b.touchObject.swipeLength>10)?false:true;if(b.touchObject.curX===undefined)return false;if(b.touchObject.edgeHit===true)b.$slider.trigger('edge',[b,b.swipeDirection()]);if(b.touchObject.swipeLength>=b.touchObject.minSwipe){d=b.swipeDirection();switch(d){case 'left':case 'down':c=b.options.swipeToSlide?b.checkNavigable(b.currentSlide+b.getSlideCount()):b.currentSlide+b.getSlideCount();b.currentDirection=0;break;case 'right':case 'up':c=b.options.swipeToSlide?b.checkNavigable(b.currentSlide-b.getSlideCount()):b.currentSlide-b.getSlideCount();b.currentDirection=1;break;default:}if(d!='vertical'){b.slideHandler(c);b.touchObject={};b.$slider.trigger('swipe',[b,d]);}}else if(b.touchObject.startX!==b.touchObject.curX){b.slideHandler(b.currentSlide);b.touchObject={};}};b.prototype.swipeHandler=function(a){var b=this;if((b.options.swipe===false)||('ontouchend' in document&&b.options.swipe===false))return;else if(b.options.draggable===false&&a.type.indexOf('mouse')!==-1)return;b.touchObject.fingerCount=a.originalEvent&&a.originalEvent.touches!==undefined?a.originalEvent.touches.length:1;b.touchObject.minSwipe=b.listWidth/b.options.touchThreshold;if(b.options.verticalSwiping===true)b.touchObject.minSwipe=b.listHeight/b.options.touchThreshold;switch(a.data.action){case 'start':b.swipeStart(a);break;case 'move':b.swipeMove(a);break;case 'end':b.swipeEnd(a);break;}};b.prototype.swipeMove=function(a){var b=this,c=false,d,e,f,g,h;h=a.originalEvent!==undefined?a.originalEvent.touches:null;if(!b.dragging||h&&h.length!==1)return false;d=b.getLeft(b.currentSlide);b.touchObject.curX=h!==undefined?h[0].pageX:a.clientX;b.touchObject.curY=h!==undefined?h[0].pageY:a.clientY;b.touchObject.swipeLength=Math.round(Math.sqrt(Math.pow(b.touchObject.curX-b.touchObject.startX,2)));if(b.options.verticalSwiping===true)b.touchObject.swipeLength=Math.round(Math.sqrt(Math.pow(b.touchObject.curY-b.touchObject.startY,2)));e=b.swipeDirection();if(e==='vertical')return;if(a.originalEvent!==undefined&&b.touchObject.swipeLength>4)a.preventDefault();g=(b.options.rtl===false?1:-1)*(b.touchObject.curX>b.touchObject.startX?1:-1);if(b.options.verticalSwiping===true)g=b.touchObject.curY>b.touchObject.startY?1:-1;f=b.touchObject.swipeLength;b.touchObject.edgeHit=false;if(b.options.infinite===false)if((b.currentSlide===0&&e==='right')||(b.currentSlide>=b.getDotCount()&&e==='left')){f=b.touchObject.swipeLength*b.options.edgeFriction;b.touchObject.edgeHit=true;}if(b.options.vertical===false)b.swipeLeft=d+f*g;else b.swipeLeft=d+(f*(b.$list.height()/b.listWidth))*g;if(b.options.verticalSwiping===true)b.swipeLeft=d+f*g;if(b.options.fade===true||b.options.touchMove===false)return false;if(b.animating===true){b.swipeLeft=null;return false;}b.setCSS(b.swipeLeft);};b.prototype.swipeStart=function(a){var b=this,c;b.interrupted=true;if(b.touchObject.fingerCount!==1||b.slideCount<=b.options.slidesToShow){b.touchObject={};return false;}if(a.originalEvent!==undefined&&a.originalEvent.touches!==undefined)c=a.originalEvent.touches[0];b.touchObject.startX=b.touchObject.curX=c!==undefined?c.pageX:a.clientX;b.touchObject.startY=b.touchObject.curY=c!==undefined?c.pageY:a.clientY;b.dragging=true;};b.prototype.unfilterSlides=b.prototype.slickUnfilter=function(){var a=this;if(a.$slidesCache!==null){a.unload();a.$slideTrack.children(this.options.slide).detach();a.$slidesCache.appendTo(a.$slideTrack);a.reinit();}};b.prototype.unload=function(){var b=this;a('.slick-cloned',b.$slider).remove();if(b.$dots)b.$dots.remove();if(b.$prevArrow&&b.htmlExpr.test(b.options.prevArrow))b.$prevArrow.remove();if(b.$nextArrow&&b.htmlExpr.test(b.options.nextArrow))b.$nextArrow.remove();b.$slides.removeClass('slick-slide slick-active slick-visible slick-current').attr('aria-hidden','true').css('width','');};b.prototype.unslick=function(a){var b=this;b.$slider.trigger('unslick',[b,a]);b.destroy();};b.prototype.updateArrows=function(){var a=this,b;b=Math.floor(a.options.slidesToShow/2);if(a.options.arrows===true&&a.slideCount>a.options.slidesToShow&&!a.options.infinite){a.$prevArrow.removeClass('slick-disabled').attr('aria-disabled','false');a.$nextArrow.removeClass('slick-disabled').attr('aria-disabled','false');if(a.currentSlide===0){a.$prevArrow.addClass('slick-disabled').attr('aria-disabled','true');a.$nextArrow.removeClass('slick-disabled').attr('aria-disabled','false');}else if(a.currentSlide>=a.slideCount-a.options.slidesToShow&&a.options.centerMode===false){a.$nextArrow.addClass('slick-disabled').attr('aria-disabled','true');a.$prevArrow.removeClass('slick-disabled').attr('aria-disabled','false');}else if(a.currentSlide>=a.slideCount-1&&a.options.centerMode===true){a.$nextArrow.addClass('slick-disabled').attr('aria-disabled','true');a.$prevArrow.removeClass('slick-disabled').attr('aria-disabled','false');}}};b.prototype.updateDots=function(){var a=this;if(a.$dots!==null){a.$dots.find('li').removeClass('slick-active').attr('aria-hidden','true');a.$dots.find('li').eq(Math.floor(a.currentSlide/a.options.slidesToScroll)).addClass('slick-active').attr('aria-hidden','false');}};b.prototype.visibility=function(){var a=this;if(a.options.autoplay)if(document[a.hidden])a.interrupted=true;else a.interrupted=false;};a.fn.slick=function(){var a=this,c=arguments[0],d=Array.prototype.slice.call(arguments,1),e=a.length,f,g;for(f=0;f<e;f++){if(typeof c=='object'||typeof c=='undefined')a[f].slick=new b(a[f],c);else g=a[f].slick[c].apply(a[f].slick,d);if(typeof g!='undefined')return g;}return a;};}));(function(a){"use strict";a(document).ajaxSend(function(a,b,c){function d(a){var b=null;if(document.cookie&&document.cookie!==""){var c=document.cookie.split(";");for(var d=0;d<c.length;d++){var e=window.jQuery.trim(c[d]);if(e.substring(0,a.length+1)==(a+"=")){b=decodeURIComponent(e.substring(a.length+1));break;}}}return b;}function e(a){var b=document.location.host;var c=document.location.protocol;var d="//"+b;var e=c+d;return(a==e||a.slice(0,e.length+1)==e+"/")||(a==d||a.slice(0,d.length+1)==d+"/")||!(/^(\/\/|http:|https:).*/.test(a));}function f(a){return(/^(GET|HEAD|OPTIONS|TRACE)$/.test(a));}if(!f(c.type)&&e(c.url))b.setRequestHeader("X-CSRFToken",d("csrftoken"));});})(jQuery);(function(){"use strict";if(!Array.isArray)Array.isArray=function(a){return Object.prototype.toString.call(a)==="[object Array]";};if(!Array.prototype.indexOf)Array.prototype.indexOf=function(a,b){if(this===undefined||this===null)throw new TypeError("\"this\" is null or not defined");var c=this.length>>>0;b=+b||0;if(Math.abs(b)===Infinity)b=0;if(b<0){b+=c;if(b<0)b=0;}for(;b<c;b++)if(this[b]===a)return b;return -1;};})();(function(a){"use strict";a.fn.a11y_tabs=function(){this.each(function(){var b=a(this);var c=b.find("> ul");c.attr("role","tablist").find("li").attr("role","presentation").find("a").attr({"role":"tab","tabindex":"-1"});c.find("[role=tab]").each(function(){var b=a(this);b.attr("aria-controls",b.attr("href").substring(1));});c.find("li:first-child a").attr({"aria-selected":"true","tabindex":"0"});b.find("section").attr({"role":"tabpanel"});b.find("section > *:first-child").attr({"tabindex":"0"});b.find("[role='tabpanel']:not(:first-of-type)").attr({"aria-hidden":"true"});c.find("[role='tab']").on("keydown",function(c){var d=a(this);var e=d.parents("li").prev().children("[role='tab']");var f=d.parents("li").next().children("[role='tab']");var g;switch(c.keyCode){case 37:g=e;break;case 39:g=f;break;default:g=false;break;}if(g.length){d.attr({"tabindex":"-1","aria-selected":null});g.attr({"tabindex":"0","aria-selected":true}).focus();}b.find("[role='tabpanel']").attr("aria-hidden","true");a("#"+a(document.activeElement).attr("href").substring(1)).attr("aria-hidden",null);});c.find("[role='tab']").on("click",function(d){d.preventDefault();var e=a(this);c.find("[role='tab']").attr({"tabindex":"-1","aria-selected":null});e.attr({"aria-selected":true,"tabindex":"0"});b.find("[role='tabpanel']").attr("aria-hidden","true");a("#"+e.attr("href").substring(1)).attr("aria-hidden",null);});return this;});};}(window.jQuery));(function(a){"use strict";a.fn.a11y_dialog=function(b,c){var d="ismjs-dialog-page",e="ismjs-dialog",f="ismjs-dialog-overlay",g=this,h,i=a("body"),j="no-scroll",k="a[href], area[href], input:not([disabled]), "+"select:not([disabled]), textarea:not([disabled]), "+"button:not([disabled]), iframe, object, embed, "+"*[tabindex], *[contenteditable]";if(b==="open"){this.data("focusReturn",document.activeElement);var l=a("<div/>",{"id":d,"aria-hidden":true});i.wrapInner(l).addClass(j);h=a("<div/>",{"id":this.attr("id")+"-placeholder"}).css("display","none");h.insertAfter(this);var m=a("<dialog/>",{"id":e,"role":"dialog","aria-labelledby":"ismjs-dialog-title","class":"ism "+(this.data("dialogClass")||"ism-dialog"),"open":true}).wrapInner(this).wrapInner(a("<div/>",{"role":"document","class":this.data("dialogContentClass")||"ism-dialog__content"}));var n=a("<div/>",{"id":f,"class":this.data("dialogOverlayClass")||"ism-dialog-overlay"});var o=function(a){a.preventDefault();g.a11y_dialog("close");};m.on("click",".ismjs-dialog-close",o);n.on("click",function(a){if(a.target==a.currentTarget)o(a);});m.on("keydown",function(b){if(b.keyCode==27)o(b);else if(b.keyCode==9){var c=a(document.activeElement),d=g.find(k).filter(":visible"),e=d.length,f=d.index(c);if(!b.shiftKey&&(f==e-1)){d[0].focus();b.preventDefault();}else if(b.shiftKey&&f===0){d[e-1].focus();b.preventDefault();}}});a("#"+d).after(n.wrapInner(m));m.find(k)[0].focus();}else if(b==="close"){a("div#"+d).contents().unwrap();a("dialog#"+e).closest(".ism-dialog-wrapper").contents().unwrap();a("dialog#"+e).contents().unwrap().contents().unwrap();h=a("div#"+this.attr("id")+"-placeholder");this.insertAfter(h);h.remove();i.removeClass(j);if(this.data("focusReturn")&&this.data("focusReturn").focus)this.data("focusReturn").focus();a("div#"+f).remove();this.trigger("dialog:closed");}else window.console.log("Action "+b+" does not exist on a11y_dialog.");};}(window.jQuery));(function(a){"use strict";a.fn.a11y_collapsible=function(){this.each(function(){var b=a(this),c=b.children().first(),d="collapsible-"+b.index(),e=a("<div/>",{"id":d,"aria-hidden":"true","class":(b.data("collapsibleContentClass")||"ism-collapsible__content")});b.addClass(b.data("collapsibleClass")||"ism-collapsible");c.wrapInner(a("<button/>",{"aria-expanded":"false","aria-controls":d,"class":(b.data("collapsibleButtonClass")||"ism-collapsible__button")})).nextAll().wrapAll(e);var f=c.children("button");if(b.data("collapsibleCollapsed")===false){f.attr("aria-expanded",true);b.children("div").attr("aria-hidden",false);}f.on("click",function(c){var d=a(c.target),f=d.attr("aria-expanded")==="false"?true:false;d.attr("aria-expanded",f);b.children(e).attr("aria-hidden",!f);});});};}(window.jQuery));window.ISMApp=new window.Backbone.Marionette.Application();(function(a){"use strict";window.Marionette.Behaviors.behaviorsLookup=function(){return window.ISMApp.Behaviors;};a.bootstrap=function(b){var c=window.jQuery;if(b instanceof Array){var d=window._;var e={};c.when.apply(c,d.map(b,function(a){return c.ajax({type:"GET",url:a});})).done(function(){for(var b=0;b<arguments.length;b++)e=d.extend(e,arguments[b][0]);a.start(e);});}else c.ajax({type:"GET",url:b}).done(function(b){a.start(b);});};a.on("start",function(b){a.execute("create:config",b["game-settings"]);a.execute("create:vocabs",a.vocab||[]);a.execute("create:events",{events:b.events,current:b["current-event"],next:b["next-event"],lastEntry:b["last-entry-event"]});a.execute("create:elementTypes",b.element_types);a.execute("create:teams",b.teams);a.execute("create:elements",b.elements);a.execute("create:phases",b.phases);a.execute("create:statsOptions",b.stats_options);a.execute("create:stats",b.stats);a.execute("create:fixtures",b["next-event"],b.next_event_fixtures);a.execute("create:watched",b.watched);if(b.transfer_window)a.execute("create:transferWindow",b.transfer_window);a.execute("set:entry:total",b["total-players"]);a.execute("login:player",b.player);a.execute("login:entry",b.entry);a.data=b;a.bootstrapTime=new Date().getTime();});a.on("start",function(){window.jQuery(document.body).append("<div id='ismr-tooltip' class='ism-tooltip'></div>");a.addRegions({main:"#ismr-main",side:"#ismr-side",element:{selector:"#ismr-element",regionClass:a.Regions.Popup},tour:{selector:"#ismr-tour",regionClass:a.Regions.Popup},tooltip:{selector:"#ismr-tooltip",regionClass:a.Regions.Tooltip}});});a.on("start",function(){window.jQuery("base").remove();a.execute("utils:navigation:start");});}(window.ISMApp));window.ISMApp.module("Behaviors",function(a,b,c,d,e,f){"use strict";a.Link=d.Behavior.extend({events:{"click .ismjs-link":"linkClick"},linkClick:function(a){b.execute("utils:navigation:click",a);}});});window.ISMApp.module("Behaviors",function(a,b,c,d,e,f){"use strict";a.Confirm=d.Behavior.extend({defaults:{"confirmMessage":"Are you sure?","confirmedEvent":"link:confirmed"},events:{"click .ismjs-confirm":"confirmClick"},confirmClick:function(a){a.preventDefault();var b=a.currentTarget.getAttribute("data-confirm-message")||this.options.confirmMessage;if(window.confirm(b))this.view.trigger(this.options.confirmedEvent,this.view);}});});window.ISMApp.module("Behaviors",function(a,b,c,d,e,f){"use strict";a.DisableOnClick=d.Behavior.extend({events:{"click .ismjs-disable-on-click":"disableOnClick"},disableOnClick:function(a){a.currentTarget.disabled=true;}});});window.ISMApp.module("Behaviors",function(a,b,c,d,e,f){"use strict";a.FacebookFeedDialog=d.Behavior.extend({ui:{feedLink:".ismjs-fb-feed-dialog"},events:{"click @ui.feedLink":"showFeedDialog"},onShow:function(){if(this.ui.feedLink.length)if(!window.fbAsyncInit){window.fbAsyncInit=function(){window.FB.init({appId:b.request("get:setting","facebook_app_id"),xfbml:true,version:"v2.3"});};(function(a,b,c){var d,e=a.getElementsByTagName(b)[0];if(a.getElementById(c))return;d=a.createElement(b);d.id=c;d.src="//connect.facebook.net/en_US/sdk.js";e.parentNode.insertBefore(d,e);}(document,"script","facebook-jssdk"));}},showFeedDialog:function(a){var b=e(a.target).data();window.FB.ui({method:"feed",description:b.description,name:b.name,link:b.link});}});});window.ISMApp.module("Behaviors",function(a,b,c,d,e,f){"use strict";a.TwitterShareButton=d.Behavior.extend({onAttach:function(){this.constructTwitterShare();this.on("render",this.constructTwitterShare);},constructTwitterShare:function(){if(this.$el.find(".twitter-share-button").length)if(window.twttr)window.twttr.widgets.load();else window.twttr=(function(a,b,c){var d,e=a.getElementsByTagName(b)[0],f=window.twttr||{};if(a.getElementById(c))return f;d=a.createElement(b);d.id=c;d.src="https://platform.twitter.com/widgets.js";e.parentNode.insertBefore(d,e);f._e=[];f.ready=function(a){f._e.push(a);};return f;}(document,"script","twitter-wjs"));}});});window.ISMApp.module("Behaviors",function(a,b,c,d,e,f){"use strict";a.Tooltip=d.Behavior.extend({events:{"click .ismjs-tooltip":"tipClick"},tipClick:function(a){a.preventDefault();var c=a.currentTarget.getAttribute("href").substring(1);var d=document.getElementById(c).innerHTML;var e=new b.ItemView({template:function(){return d;}});e.popupOptions={positionTo:a.currentTarget};b.tooltip.show(e);}});});window.ISMApp.module("Regions",function(a,b,c,d,e,f){"use strict";a.Popup=d.Region.extend({onShow:function(a){var c=a.popupOptions||{};var d=this;f.defaults(c,{"afterclose":function(){d.destroyPopup();},beforeposition:function(){var a=e(window).height()-90;e(".ismjs-popup__body").css("max-height",a+"px");}});this.listenTo(a,"dom:refresh",function(){b.execute("utils:ui:me",{view:a});});this.listenTo(a,"popup:close",this.closePopup);this.listenTo(a,"popup:hide",this.hidePopup);this.listenTo(a,"popup:show",this.showPopup);this.listenTo(a,"popup:reposition",this.reposition);this.listenTo(b.vent,"page:changing",this.closePopup);this.$el.popup(c);this.beforeOpen();this.$el.popup("open");},closePopup:function(){this.$el.popup("close");},destroyPopup:function(){this.empty();this.stopListening();if(this.$el.hasClass("ui-popup"))this.$el.popup("destroy");},hidePopup:function(){this.$el.hide();},showPopup:function(){this.$el.show();},reposition:function(a){this.$el.popup("reposition",a);},beforeOpen:function(){this.addClasses("ism-dialog-popup-container","ism-dialog-popup-screen");},addClasses:function(a,b){this.$el.addClass("ism-popup").closest(".ui-popup-container").addClass("ism "+a).prev().addClass(b);}});a.Tooltip=a.Popup.extend({beforeOpen:function(){this.addClasses("ism-tooltip-popup-container","ism-tooltip-popup-screen");}});a.A11yDialog=d.Region.extend({onShow:function(a){this.$el.a11y_dialog("open");this.listenTo(a,"dom:refresh",function(){b.execute("utils:ui:me",{view:a});});this.listenTo(a,"popup:close",this.closeDialog);this.listenTo(b.vent,"page:changing",this.closeDialog);this.$el.on("dialog:closed",f.bind(this.cleanupDialogView,this));},closeDialog:function(){this.$el.a11y_dialog("close");},cleanupDialogView:function(){this.$el.off();this.empty();this.stopListening();}});if(e.fn.a11y_dialog)a.Popup=a.A11yDialog;});window.ISMApp.module("Router",function(a,b,c,d,e,f){"use strict";var g={};a.Named=d.AppRouter.extend({constructor:function(){this.appRoutes=this.appRoutes||{};if(this.namedRoutes)f.each(this.namedRoutes,function(a,b){g[b]=a[0];this.appRoutes[a[0]]=a[1];},this);d.AppRouter.prototype.constructor.apply(this,arguments);}});b.reqres.setHandler("router:named:get",function(a,b){b=b||{};f.defaults(b,{includeRoot:true,substitutions:{},queryString:{}});var d=g[a];if(!d)return d;if(b.includeRoot)d=c.history.root+d;f.each(b.substitutions,function(a,b){d=d.replace(b,a);});if(b.queryString){d+="?";f.each(b.queryString,function(a,b){d+=b+"="+a+"&";});d=d.slice(0,-1);}return d;});});window.ISMApp.module("Utils",function(a,b,c,d,e,f){"use strict";var g={config:{},getConfig:function(a){return this.config[a];},setConfig:function(a,b){this.config[a]=b;}};b.reqres.setHandler("utils:game-config:get",function(a){return g.getConfig(a);});b.commands.setHandler("utils:game-config:set",function(a,b){g.setConfig(a,b);});});window.ISMApp.module("Utils",function(a,b,c,d,e,f){"use strict";var g="/a/";var h=e(".ismjs-nav");var i={startHistory:function(){if(c.history)c.history.start({pushState:true,root:g});},handleLinkClick:function(a){var b=e(a.currentTarget);var d=b.attr("href");if(!d||d==="#"){a.preventDefault();return;}if(b.data("navApplink")){a.preventDefault();a.stopPropagation();c.history.navigate(d.replace(/^\/|\/$/g,""),true);}if(d.indexOf(g)===0){a.preventDefault();a.stopPropagation();var f=d.replace(g,"");var h=c.history.navigate(f,true);if(h===undefined)c.history.loadUrl(f);}},selectNavOption:function(a){h.find("a").each(function(){var b=e(this);var c=b.data("nav-tab")||"";if(c.split(",").indexOf(a)!==-1)b.addClass("is-active");else b.removeClass("is-active");});},reload:function(a){window.location.href=g+a;},hideSubNavs:function(){h.find(".ismjs-has-sub-nav").removeClass("is-open").find(".ismjs-sub-nav").removeClass("is-visible");},showClickedSubNav:function(a){a.addClass("is-open").find(".ismjs-sub-nav").addClass("is-visible");},handleSubNavClicks:function(a){if(e(a.target).hasClass("ismjs-sub-nav-title")||e(a.target).parent().hasClass("ismjs-sub-nav-title")){a.preventDefault();var b=e(a.currentTarget);if(b.hasClass("is-open"))i.hideSubNavs();else{i.hideSubNavs();i.showClickedSubNav(b);}}},handleDocumentClicks:function(a){if(!e(a.target).closest(".ismjs-has-sub-nav").length)i.hideSubNavs();}};b.commands.setHandler("utils:navigation:start",function(){i.startHistory();});b.commands.setHandler("utils:navigation:click",function(a){i.handleLinkClick(a);});b.commands.setHandler("utils:navigation:selected",function(a){i.selectNavOption(a);});b.commands.setHandler("utils:navigation:reload",function(a){a=a||c.history.fragment;i.reload(a);});a.listenTo(b.vent,"page:changed",function(a){i.selectNavOption(a.view.navigationTab);});a.listenTo(b.vent,"page:changed",function(a){i.hideSubNavs();});b.on("start",function(){h.on("click","a",function(a){i.handleLinkClick(a);});});h.on("click",".ismjs-has-sub-nav",i.handleSubNavClicks);e(document).on("click",i.handleDocumentClicks);});window.ISMApp.module("Utils",function(a,b,c,d,e,f){"use strict";var g=e(".ism-container");var h=e(".ismjs-inner-wrap");var i="utils:page:transitionend";g.on("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(a){if(a.target.className.indexOf("ismjs-page-transition")>-1||a.target.className.indexOf("ism-container")>-1)b.vent.trigger(i);});var j=e("#ismjs-top");var k=j.length?j.offset().top:0;var l={changePage:function(a,c,d){d=d||{};f.defaults(d,{maintainScrollPosition:false,allowReload:true});if(d.allowReload){var e=15*60*1000;if(b.bootstrapTime+e<new Date().getTime()){window.location.reload(true);return;}}b.vent.trigger("page:changing",{"view":a});if(!d.maintainScrollPosition)this.toDocumentTop();this.manageBodyClass(a);b.main.show(a);b.side.show(c);this.setPageTitle(a);this.showMain();b.vent.trigger("page:changed",{"view":a});},manageBodyClass:function(a){var b=f.reject(document.body.className.split(/\s+/),function(a){return !a||a.indexOf("ism-page-")===0;});if(a.bodyClass)b.push("ism-page-"+a.bodyClass);document.body.className=b.join(" ");},setPageTitle:function(a){var b=a.$("#ismjs-page-title-data").val();e("#ismjs-page-title").text(b||"");},toggleMenu:function(){if(g.hasClass("ism-show-sidebar"))g.removeClass("ism-show-sidebar").addClass("ism-show-nav");else g.toggleClass("ism-show-nav");this.toSiteTop();},toggleSidebar:function(){if(g.hasClass("ism-show-nav"))g.removeClass("ism-show-nav").addClass("ism-show-sidebar");else g.toggleClass("ism-show-sidebar");this.toSiteTop();},showMain:function(){var a=!g.hasClass("ism-show-nav")&&!g.hasClass("ism-show-sidebar");g.removeClass("ism-show-nav");g.removeClass("ism-show-sidebar");if(a)b.vent.trigger(i);},showSidebar:function(){var a=!g.hasClass("ism-show-nav")&&g.hasClass("ism-show-sidebar");g.removeClass("ism-show-nav");g.addClass("ism-show-sidebar");if(a)b.vent.trigger(i);},toDocumentTop:function(){e(document).scrollTop(0);},toSiteTop:function(){e(document).scrollTop(k);},setWrapperMinHeight:function(){h.css("min-height",e(window).height()+"px");}};b.commands.setHandler("utils:page:change",function(a,b,c){l.changePage(a,b,c);});b.commands.setHandler("utils:page:toggle-menu",function(){l.toggleMenu();});b.commands.setHandler("utils:page:toggle-sidebar",function(){l.toggleSidebar();});b.commands.setHandler("utils:page:show-main",function(){l.showMain();});b.commands.setHandler("utils:page:show-sidebar",function(){l.showSidebar();});b.commands.setHandler("utils:page:document-top",function(){l.toDocumentTop();});b.commands.setHandler("utils:page:site-top",function(){l.toSiteTop();});b.commands.setHandler("utils:page:set-wrapper-min-height",function(){l.setWrapperMinHeight();});b.on("start",function(){});});window.ISMApp.module("Utils",function(a,b,c,d,e,f){"use strict";var g={controllers:{},getController:function(a,b,c){c=c||{};window._.defaults(c,{clearCache:true,destroyAll:true,controllerOptions:{}});var d=this.controllers[a];if(d)d.fromCache=true;else d=new b(c.controllerOptions);if(c.destroyAll)window._.each(this.controllers,function(a){a.destroy();});if(c.clearCache)this.controllers={};this.controllers[a]=d;return d;},clearControllers:function(){this.controllers={};}};b.reqres.setHandler("utils:registry:get",function(a,b,c){return g.getController(a,b,c);});a.listenTo(b.vent,"test:teardown",g.clearControllers);});window.ISMApp.module("Utils",function(a,b,c,d,e,f){"use strict";var g={uiMe:function(a){if(e.mobile){a.view.$(".ismjs-tabs").tabs({activate:function(a,b){g.tablesaw(b.newPanel);}});a.view.$(".ismjs-navbar").navbar({active:1});a.view.$(".ismjs-table").table();a.view.$(".ismjs-collapsible").collapsible();a.view.$(".ismjs-collapsible-set").collapsibleset();a.view.$(".ismjs-flipswitch__input").flipswitch({wrapperClass:"ism-flipswitch ismjs-flipswitch"});a.view.$(".ismjs-responsive-table").table({create:function(a,b){e(this).find("tbody td b.ui-table-cell-label abbr").each(function(){this.outerHTML=this.title;});}});}g.jcarousel(a.view.$el);g.slickCarousel(a.view.$el);g.picturefill();g.tablesaw(a.view.$el);g.stickyTableHeader(a.view.$el);g.fixedSticky(a.view.$el);g.pikaday(a.view.$el);g.a11yTabs(a.view.$el);g.a11yCollapsible(a.view.$el);g.slickSlider(a.view.$el);},slickSlider:function(){if(e.fn.slick)e(".ism-event-slides").slick({accessibility:true,arrows:true,dots:false,edgeFriction:0.25,infinite:true,lazyLoad:"ondemand",appendArrows:".ism-slider-arrows",nextArrow:e(".ism-slider-arrows--next"),prevArrow:e(".ism-slider-arrows--prev"),focusOnSelect:false,responsive:[{breakpoint:780,settings:{centerMode:true,dots:true,arrows:false}}]});},showLoader:function(){e(".ismjs-loading--static").hide();e(".ismjs-loading").show();},hideLoader:function(){e(".ismjs-loading").hide();},picturefill:function(){if(window.picturefill)window.picturefill();},jcarousel:function(a){if(!a)a=e("body");if(e.jcarousel){a.find(".ismjs-carousel").each(function(){var a=e(this);a.jcarousel({wrap:"circular"});if(a.data("start")>1)a.jcarousel("scrollIntoView",a.data("start"),true);});a.find(".ismjs-carousel-prev").jcarouselControl({target:"-=1"});a.find(".ismjs-carousel-next").jcarouselControl({target:"+=1"});}},slickCarousel:function(a){if(!a)a=e("body");if(e.fn.slick)a.find(".ismjs-slick-carousel").each(function(){e(this).slick();});},tablesaw:function(a){if(!a)a=e("body");if(a.table)a.find(".ismjs-tablesaw:visible").each(function(){var a=e(this);a.table();});},stickyTableHeader:function(a){if(!a)a=e("body");if(e.fn.stickyTableHeaders)a.find(".ismjs-sticky-table-header").stickyTableHeaders();},fixedSticky:function(a){if(!a)a=e("body");if(e.fn.fixedsticky)a.find(".ismjs-fixedsticky").fixedsticky({});},loadSVG:function(a){e.get(a,function(a){var b=document.createElement("div");b.innerHTML=new XMLSerializer().serializeToString(a.documentElement);b.style.display="none";document.body.insertBefore(b,document.body.childNodes[0]);});},pikaday:function(a){a.find(".ismjs-pikaday").each(function(){e(this).data("pika",new window.Pikaday({field:this}));});},a11yTabs:function(a){if(!a)a=e("body");if(e.fn.a11y_tabs)a.find(".ismjs-a11y-tabs").a11y_tabs({});},a11yCollapsible:function(a){if(!a)a=e("body");if(e.fn.a11y_collapsible)a.find(".ismjs-a11y-collapsible").a11y_collapsible({});}};a.listenTo(b.vent,"page:changed",g.uiMe);a.listenTo(b.vent,"page:changed",g.hideLoader);b.commands.setHandler("utils:ui:me",g.uiMe);b.commands.setHandler("utils:loader:show",g.showLoader);b.commands.setHandler("utils:loader:hide",g.hideLoader);b.commands.setHandler("utils:ui:picturefill",g.picturefill);b.commands.setHandler("utils:ui:jcarousel",g.jcarousel);b.commands.setHandler("utils:ui:slickCarousel",g.slickCarousel);b.commands.setHandler("utils:ui:tablesaw",g.tablesaw);b.commands.setHandler("utils:ui:a11yTabs",g.a11yTabs);b.commands.setHandler("utils:ui:a11yCollapsible",g.a11yCollapsible);b.commands.setHandler("utils:ui:loadsvg",g.loadSVG);});window.ISMApp.module("Views",function(a,b,c,d,e,f){"use strict";f.extend(d.View.prototype,{templateHelpers:{currency:function(a){return b.request("format:currency",a);},currency_or_raw:function(a,c){return b.request("format:currency_or_raw",a,c);},login_status:function(){return b.request("get:login:status");},render_stat_headers:function(){var a=f.template("<th class=\"<%= className %>\"><abbr title=\"<%= label %>\"><%= abbr %></abbr></th>");return b.request("get:stats").reduce(function(b,c){return b+a(c.toJSON());},"");},render_stat_fields:function(){var a=f.template("<td><%= val %></td>");return b.request("get:stats").reduce(function(b,c){return b+a({"val":this[c.get("field")]});},"",this);},url:function(a,c){return b.request("router:named:get",a,c);},render_static_template:function(a){var c=new b.ItemView({template:a});c.render();return c.$el.html();}},reRender:function(){this.render();b.execute("utils:ui:me",{view:this});}});b.ItemView=d.ItemView.extend({});b.CollectionView=d.CollectionView.extend({});b.CompositeView=d.CompositeView.extend({});b.LayoutView=d.LayoutView.extend({});b.EmptyView=b.ItemView.extend({template:f.template("")});});ISMApp.module("Entities",function(a,b,c,d,e,f){a.Model=c.Model.extend({});a.Collection=c.Collection.extend({});});window.ISMApp.module("Entities",function(a,b,c,d,e,f){"use strict";a.Chip=a.Model.extend({initialize:function(){this.originalStatus=this.get("status_for_entry");},mutators:{displayName:function(){var a="chip-display-"+this.get("name");return b.request("get:vocab",a);}},canBeActivated:function(){return this.originalStatus!=="played";}});a.Chips=a.Collection.extend({model:a.Chip,comparator:"displayName",populate:function(a){this.reset(a);},playChip:function(a){if(a.get("status_for_entry")!=="available")return;this.each(function(a){if(a.get("status_for_entry")==="available")a.set("status_for_entry","unavailable");});a.set("status_for_entry","active");this.trigger("reset");},cancelChip:function(a){if(a.get("status_for_entry")!=="active")return;this.each(function(a){if(a.canBeActivated())a.set("status_for_entry","available");});this.trigger("reset");},dataForChangeAPI:function(){var a={};this.each(function(b){var c=b.get("status_for_entry"),d=b.originalStatus;if(c!==d)if(c==="active")a.play=b.get("name");else if(d==="active")a["delete"]=b.get("name");});return f.size(a)?a:null;},haveChanged:function(){if(this.find(function(a){return a.get("status_for_entry")!==a.originalStatus;}))return true;else return false;},getActive:function(){return this.findWhere({status_for_entry:"active"});},getActiveName:function(){var a=this.getActive();return a?a.get("name"):"";}});});window.ISMApp.module("Entities",function(a,b,c,d,e,f){"use strict";a.Config=a.Model.extend({initialize:function(){var a=this.get("game")||{};var b=this.get("element_type")||{};f.each(b,function(b,c){f.each(b,function(b,d){var e=d+"_flat";var f=a[e]||[];f[c]=b;a[e]=f;});});var c={"currency_multiplier":1,"currency_decimal_places":0,"currency_symbol":"","currency_quantity_identifier":""};f.each(c,function(b,c){a[c]=a[c]||b;});this.set("game",a);},currency:function(a){var b=this.get("game");var c=a/b.currency_multiplier;c=c.toFixed(b.currency_decimal_places);return b.currency_symbol+c+b.currency_quantity_identifier;},currency_or_raw:function(a,b){if(b.substr(b.length-5)=="_cost"||b.substr(0,5)=="cost_")return this.currency(a);else return a;}});var g=new a.Config();b.commands.setHandler("create:config",function(b){g=new a.Config(b);});b.commands.setHandler("add:setting",function(a,b){var c=g.get("game");c[a]=b;g.set("game",c);});b.reqres.setHandler("get:setting",function(a,c){var d,e,f,h;if(!c){h=b.request("get:event:current");if(h)c={"event":h.get("id")};}if(c)if(c.element_type){d=g.get("element_type");if(d&&d[c.element_type]!==undefined){f=d[c.element_type][a];if(f!==undefined)return f;}}else if(c.event){e=g.get("event");if(e&&e[c.event]!==undefined){f=e[c.event][a];if(f!==undefined)return f;}}return g.get("game")[a];});b.reqres.setHandler("format:currency",function(a){return g.currency(a);});b.reqres.setHandler("format:currency_or_raw",function(a,b){return g.currency_or_raw(a,b);});a.listenTo(b.vent,"test:teardown",function(){g=new a.Config();});});window.ISMApp.module("Entities",function(a,b,c,d,e,f){"use strict";a.Entry=a.Model.extend({initialize:function(){var a=this.getDefaultKit();var b=this.get("kit");if(b){var c=window.JSON.parse(b);f.each(a,function(a,b,d){this.set(b,c[b]);},this);}else this.set(a);},mutators:{ownEntry:function(){var a=b.request("get:loggedInEntry");return a&&a.get("id")==this.get("id")?true:false;}},started:function(){var a=b.request("get:event:current");if(!a)return false;if(a.id<this.get("started_event"))return false;return true;},populateChipsCollection:function(a){if(!this.chipsCollection)this.chipsCollection=new b.Entities.Chips();if(a&&a.length)this.chipsCollection.populate(a);},hasChips:function(){if(this.chipsCollection&&this.chipsCollection.length)return true;else return false;},getDefaultKit:function(){return{"kit_shirt_type":"plain","kit_shirt_base":"#e1e1e1","kit_shirt_sleeves":"#e1e1e1","kit_shirt_secondary":"#e1e1e1","kit_shirt_logo":"none","kit_shorts":"#e1e1e1","kit_socks_type":"plain","kit_socks_base":"#e1e1e1","kit_socks_secondary":"#e1e1e1"};},getKit:function(){var a={};f.each(this.getDefaultKit(),function(b,c,d){a[c]=this.get(c);},this);return a;},isDefaultKit:function(){return f.isEqual(this.getDefaultKit(),this.getKit());},renderKitInView:function(a){e(".shirt_colour",a.$el).css("fill",this.get("kit_shirt_base"));e(".shirt_sleeves",a.$el).css("fill",this.get("kit_shirt_sleeves"));e(".shirt_stripes",a.$el).css("fill",this.get("kit_shirt_secondary"));e(".shirt_hoops",a.$el).css("fill",this.get("kit_shirt_secondary"));e(".shorts",a.$el).css("fill",this.get("kit_shorts"));e(".socks",a.$el).css("fill",this.get("kit_socks_base"));e(".sock_hoops",a.$el).css("fill",this.get("kit_socks_secondary"));if(this.get("kit_shirt_type")==="plain"){e(".shirt_stripes",a.$el).hide();e(".shirt_hoops",a.$el).hide();}else if(this.get("kit_shirt_type")==="stripes"){e(".shirt_stripes",a.$el).show();e(".shirt_hoops",a.$el).hide();}else if(this.get("kit_shirt_type")==="hoops"){e(".shirt_stripes",a.$el).hide();e(".shirt_hoops",a.$el).show();}if(this.get("kit_socks_type")==="plain")e("#sock_stripe_left_top, #sock_stripe_left_bottom, #sock_stripe_right_top, #sock_stripe_right_bottom",a.$el).hide();else e("#sock_stripe_left_top, #sock_stripe_left_bottom, #sock_stripe_right_top, #sock_stripe_right_bottom",a.$el).show();if(this.get("kit_shirt_logo")!=="none")e("#"+this.get("kit_shirt_logo"),a.$el).show();else e("[data-name=kit-logo]",a.$el).hide();}});a.LoggedInEntry=a.Entry.extend({updateDetails:function(){var a={"name":this.get("name"),"email":this.get("email")||false,"favourite_team":this.get("favourite_team")||null,"kit":this.isDefaultKit()?null:window.JSON.stringify(this.getKit())};var b=e.ajax({type:"put",url:"/drf/entry-details/",data:window.JSON.stringify(a),contentType:"application/json"});return b;},validForUpdating:function(){var a=this.get("name");return !a||/^\s+$/.test(a)?false:true;},activeChipName:function(){if(this.chipsCollection)return this.chipsCollection.getActiveName();else return "";}});var g=new a.LoggedInEntry();b.commands.setHandler("login:entry",function(b){g=new a.LoggedInEntry(b);});b.reqres.setHandler("get:loggedInEntry",function(){return g;});a.NewEntry=a.Model.extend({defaults:{"name":"","terms_agreed":false,"favourite_team":false,"email":false},validForCreating:function(){var a=this.get("name");if(!a.length||a.length>20)return false;if(/^\s+$/.test(a))return false;if(this.get("terms_agreed")!==true)return false;var c=this.get("favourite_team");if(c>0){if(!b.request("get:teams").get(c))return false;}else if(c!==0)return false;var d=this.get("email");if(d!==true&&d!==false)return false;return true;},toAPI:function(){var a={"name":this.get("name"),"terms_agreed":this.get("terms_agreed"),"email":this.get("email"),"favourite_team":this.get("favourite_team")||null};return a;}});b.reqres.setHandler("entry:open",function(){var a=b.request("get:event:next");if(!a)return false;var c=b.request("get:event:lastEntry");if(a.get("id")>c.get("id"))return false;return true;});var h=0;b.reqres.setHandler("get:entry:total",function(){return h;});b.commands.setHandler("set:entry:total",function(a){h=a;});});window.ISMApp.module("Entities",function(a,b,c,d,e,f){"use strict";a.Event=a.Model.extend({getPrevious:function(){return b.request("get:event",this.get("id")-1);},getNext:function(){return b.request("get:event",this.get("id")+1);},started:function(){var a=b.request("get:event:current");return a&&a.get("id")>=this.get("id")?true:false;},isKoRound:function(){var a=b.request("get:setting","competition_postseason_start_event");if(a&&this.get("id")>=a)return true;else return false;}});a.Events=a.Collection.extend({model:a.Event});var g=new a.Events();var h=null;var i=null;var j=null;var k=null;b.commands.setHandler("create:events",function(b){g=new a.Events(b.events);h=b.current?g.get(b.current):null;i=b.next?g.get(b.next):null;j=g?g.get(g.length):null;k=b.lastEntry?g.get(b.lastEntry):j;});b.reqres.setHandler("get:events",function(){return g;});b.reqres.setHandler("get:events:future",function(){return g.filter(function(a){return h&&h.get("id")>=a.get("id")?false:true;});});b.reqres.setHandler("get:events:started",function(){return g.filter(function(a){return a.started();});});b.reqres.setHandler("get:event",function(a){return g.get(a);});b.reqres.setHandler("get:event:current",function(){return h;});b.reqres.setHandler("get:event:next",function(){return i;});b.reqres.setHandler("get:event:last",function(){return j;});b.reqres.setHandler("get:event:lastEntry",function(){return k;});b.reqres.setHandler("get:event:active",function(){if(h&&!h.get("finished"))return h;return i?i:h;});b.commands.setHandler("check:current:event",function(a){var c=b.request("get:event:current");var d=c?c.get("id"):null;if(a!==d)window.location.reload(true);});});window.ISMApp.module("Entities",function(a,b,c,d,e,f){"use strict";a.League=a.Model.extend({mutators:{urlStandings:function(){var a="leagues_standings_classic";if(this.get("_scoring")==="h")a="leagues_standings_h2h";return b.request("router:named:get",a,{substitutions:{":leagueId":this.get("id")}});},urlAdmin:function(){var a="leagues_admin_classic";if(this.get("_scoring")==="h")a="leagues_admin_h2h";return b.request("router:named:get",a,{substitutions:{":leagueId":this.get("id")}});},urlMatches:function(){var a="leagues_matches_h2h";return b.request("router:named:get",a,{substitutions:{":leagueId":this.get("id")}});},urlInvite:function(){return b.request("router:named:get","leagues_invite",{substitutions:{":leagueId":this.get("id")}});},leagueType:function(){var a={cx:"classic-private",cc:"classic-public",cs:"classic-system",hx:"h2h-private",hc:"h2h-public",hs:"h2h-system"};var b=this.get("_scoring")+this.get("league_type");return a[b];},started:function(){var a=b.request("get:event:current");if(a&&this.get("start_event")<=a.get("id"))return true;else return false;}},sendInvites:function(a){var b=this.formatEmailsAsInvites(a);var c=e.ajax({url:"/drf/leagues-invite/"+this.get("id"),type:"post",data:window.JSON.stringify(b),contentType:"application/json"});return c;},formatEmailsAsInvites:function(a){return f.map(a.split(/\r\n|\r|\n/g),function(a){return{"email":a};});},leave:function(){var a=e.ajax({url:"/drf/leagues-delete-entry/"+this.get("id"),type:"delete"});return a;},getClassicStandings:function(a,b,c){var d=e.ajax({url:"/drf/leagues-classic-standings/"+this.get("id"),data:{"phase":a,"le-page":c,"ls-page":b},type:"get"});return d;},getH2HStandings:function(a,b,c,d){var f=e.ajax({url:"/drf/leagues-h2h-standings/"+this.get("id"),data:{"ls-page":a,"le-page":b,"mt-page":c,"mn-page":d},type:"get"});return f;},getStandings:function(a){if(this.get("_scoring")==="c")return this.getClassicStandings(a);else if(this.get("_scoring")==="h")return this.getH2HStandings(a);},getMatches:function(a){var b="/drf/leagues-h2h-matches/league/";a=f.defaults({},a,{includeLeagueAndEntries:false,entryFilter:null,pageFilter:null});if(a.includeLeagueAndEntries)b="/drf/leagues-entries-and-h2h-matches/league/";b+=this.get("id");var c={};if(a.entryFilter)c.entry=a.entryFilter;if(a.pageFilter)c.page=a.pageFilter;var d=e.ajax({url:b,type:"get",data:c});return d;}});a.Leagues=a.Collection.extend({model:a.League,drfUrl:function(a,b){var c="/drf/leagues-entered/"+a;if(b)c+="?renewable=1";return c;},fetchAndPopulate:function(a,b){b=f.defaults({},b,{renewable:false});var c=this;var d=e.ajax({type:"get",url:this.drfUrl(a,b.renewable)});d.done(function(a){c.populate(a);});return d;},populate:function(b){var c=b.h2h;c.push.apply(c,b.classic);this.renewable=new a.RenewableLeagues(b.renewable||[]);this.reset(c);this.trigger("populated");},getSystemLeagues:function(a){a=a||{};f.defaults(a,{includeCup:false});return this.filter(function(b){if(b.get("league_type")!=="s")return false;if(!a.includeCup&&b.get("is_cup"))return false;return true;});},getPrivateLeagues:function(){return this.where({"league_type":"x"});},getPublicLeagues:function(){return this.where({"league_type":"c"});},getClassicPrivateLeagues:function(){return this.where({"league_type":"x","_scoring":"c"});},getClassicPublicLeagues:function(){return this.where({"league_type":"c","_scoring":"c"});},getHeadToHeadPrivateLeagues:function(){return this.where({"league_type":"x","_scoring":"h"});},getHeadToHeadPublicLeagues:function(){return this.where({"league_type":"c","_scoring":"h"});},getNonSystemClassicLeagues:function(){return this.filter(function(a){return a.get("_scoring")==="c"&&a.get("league_type")!=="s";});},getNonSystemH2HLeagues:function(){return this.filter(function(a){return a.get("_scoring")==="h"&&a.get("league_type")!=="s";});},getCustomLeagues:function(){return [];},canJoinPrivateLeagues:function(){var a=this.getPrivateLeagues().length;var b=window.ISMApp.request("get:setting","league_join_private_max");if(a<b)return true;else return false;},canJoinPublicLeagues:function(){var a=this.getPublicLeagues().length;var b=window.ISMApp.request("get:setting","league_join_public_max");if(a<b)return true;else return false;},getFanLeagueData:function(){var a=/^team-(\d+)$/;var b;this.find(function(c){var d=c.get("short_name");if(d){var e=d.match(a);if(e){b={team:parseInt(e[1],10),league:c};return true;}}return false;});return b;}});a.NewEntries=a.Collection.extend({initialize:function(a,b){this.league=b.league;this.hasNext=b.hasNext;this.number=b.number;},showPager:function(){return this.number>1||this.hasNext?true:false;}});a.Standings=a.Collection.extend({initialize:function(a,b){this.league=b.league;this.hasNext=b.hasNext;this.number=b.number;},showPager:function(){return this.number>1||this.hasNext?true:false;}});a.Matches=a.Collection.extend({populate:function(c,d){var e;this.round=d.round;this.hasNext=d.hasNext;this.number=d.number;e=f.map(c,function(c,d,e){if(c.is_knockout){var f=b.request("get:event:last");var g="h2h-ko-shortname-"+(f.id-c.event);c.matchTitle=b.request("get:vocab",g);}if(c.tiebreak!==null){var h;if(c.entry_1_entry==c.winner)h={entryId:c.entry_1_entry,entryName:c.entry_1_name,playerName:c.entry_1_player_name};else h={entryId:c.entry_2_entry,entryName:c.entry_2_name,playerName:c.entry_2_player_name};var i=new a.H2HMatchTiebreakData({winner:h,reason:c.tiebreak});return [c,i];}delete c.winner;delete c.tiebreak;return c;});e=f.flatten(e);this.reset(e);},showPager:function(){return this.number>1||this.hasNext?true:false;}});a.CupSummaryMatch=a.Model.extend({mutators:{started:function(){var a=b.request("get:event:current");if(a&&this.get("event")<=a.get("id"))return true;else return false;},opponentUrl:function(){if(this.get("started"))return this.getStartedUrl();else return b.request("router:named:get","entry_history",{substitutions:{":entryId":this.get("opponent")}});}},getStartedUrl:function(){return b.request("router:named:get","entry_history",{substitutions:{":entryId":this.get("opponent")}});}});a.CupSummaryMatches=a.Collection.extend({model:a.CupSummaryMatch,populate:function(a,b){var c=[];f.each(a,function(a){var d={event:a.event};if(a.entry_1_entry===b.get("id")){d.entryScore=a.entry_1_points;d.opponent=a.entry_2_entry;d.opponentName=a.entry_2_name;d.opponentScore=a.entry_2_points;}else{d.entryScore=a.entry_2_points;d.opponent=a.entry_1_entry;d.opponentName=a.entry_1_name;d.opponentScore=a.entry_1_points;}c.push(d);});this.reset(c);}});a.RenewableLeague=a.Model.extend({defaults:{action:""}});a.RenewableLeagues=a.Collection.extend({model:a.RenewableLeague,actionable:function(){return this.filter(function(a){var b=a.get("action");return b==="renew"||b==="delete";});},canBeActioned:function(){return this.actionable().length>0;},drfUrl:function(){return "/drf/leagues-renew";},toAPI:function(){return f.map(this.actionable(),function(a){return{league:a.get("id"),action:a.get("action")};},this);},action:function(){return e.ajax({url:this.drfUrl(),type:"post",data:window.JSON.stringify(this.toAPI()),contentType:"application/json"});}});a.CupState=a.Model.extend({});});window.ISMApp.module("Entities",function(a,b,c,d,e,f){"use strict";a.NewClassicLeague=a.Model.extend({defaults:function(){var a=b.request("get:event:next"),c=a?a.get("id"):null;return{"name":null,"start_event_id":c,"error":""};},validForCreating:function(){var a=this.get("name");if(!a||a.length>60)return false;return true;},toAPI:function(){return{"name":this.get("name"),"start_event":this.get("start_event_id")};},submit:function(){return e.ajax({url:"/drf/leagues-classic/",type:"post",data:window.JSON.stringify(this.toAPI()),contentType:"application/json",dataType:"json"});},getSizesCollection:function(){window.console.log("Sizes not implemented in core classic");return [];}});a.UpdateClassicLeague=a.Model.extend({defaults:{error:"",newBan:"",currentBans:null},drfUrl:function(){return "/drf/leagues-classic/"+this.get("id");},drfBanUrl:function(){return "/drf/leagues-bans/"+this.get("id");},fetch:function(){var a=this;var b=e.ajax({url:this.drfUrl(),type:"get"});b.done(function(b){a.set(b.league);f.each(b.entries,function(a){a.player_full_name=a.player_first_name+" "+a.player_last_name;});a.set("entries",b.entries);var c=f.map(b.league.leagueban_set,function(a){return a.entry.toString();});a.set("currentBans",c.length>1?c:c[0]);});return b;},toAPI:function(){return{admin_entry:this.get("admin_entry"),closed:this.get("closed"),forum_disabled:this.get("forum_disabled"),make_code_public:this.get("make_code_public"),name:this.get("name"),size:this.get("size"),start_event:this.get("start_event")};},toBanAPI:function(){var a=[];var b=this.get("newBan");var c=this.get("currentBans");if(b)a.push(b);if(c)if(Array.isArray(c))a.push.apply(a,c);else a.push(c);return f.map(a,function(a){return{entry:a};});},validForUpdating:function(){var a=this.get("name");return !a||/^\s+$/.test(a)?false:true;},update:function(){return e.ajax({url:this.drfUrl(),type:"put",data:window.JSON.stringify(this.toAPI()),contentType:"application/json"});},updateBans:function(){return e.ajax({url:this.drfBanUrl(),type:"post",data:window.JSON.stringify(this.toBanAPI()),contentType:"application/json"});},destroy:function(){return e.ajax({url:this.drfUrl(),type:"delete"});}});});window.ISMApp.module("Entities",function(a,b,c,d,e,f){"use strict";var g={getEventsCollection:function(){var a=b.request("get:events:future");for(var c=0;c<this.get("ko_rounds");c++)a.pop();return new b.Entities.Events(a);},getSizesCollection:function(){var a=[{label:b.request("get:vocab","unlimited"),value:0}];var c=this.minSize();var d=b.request("get:setting","league_size_h2h_max");for(var e=c;e<=d;e++)a.push({label:e,value:e});return new b.Entities.Collection(a);},maxKoRounds:function(){var a=b.request("get:event:last");var c=b.request("get:event:next");var d=b.request("get:setting","league_max_ko_rounds_h2h");if(c)return Math.min(d,a.get("id")-c.get("id"));else return 0;},getKosCollection:function(){var a=[{label:b.request("get:vocab","none"),value:0}];var c=this.maxKoRounds();for(var d=1;d<=c;d++)a[d]={label:d,value:d};return new b.Entities.Collection(a);},minSize:function(){var a=this.get("ko_rounds");if(a)return Math.pow(2,a);else return 2;},setKoRounds:function(a){this.set("ko_rounds",a);var c=this.has("start_event")?"start_event":"start_event_id";var d=this.get(c);var e=b.request("get:event:last");var f=e.get("id")-a;if(d&&d>f)this.set(c,f);var g=this.get("size");var h=this.minSize();if(g&&g<h)this.set("size",h);}};a.NewHeadToHeadLeague=a.Model.extend({defaults:function(){var a=b.request("get:event:next"),c=a?a.get("id"):null;return{"name":null,"start_event_id":c,"size":0,"ko_rounds":0,"error":""};},validForCreating:function(){var a=this.get("name");if(!a||a.length>60)return false;return true;},toAPI:function(){return{"name":this.get("name"),"start_event":this.get("start_event_id"),"ko_rounds":this.get("ko_rounds"),"size":this.get("size")};},submit:function(){return e.ajax({url:"/drf/leagues-h2h/",type:"post",data:JSON.stringify(this.toAPI()),contentType:"application/json",dataType:"json"});}});f.extend(a.NewHeadToHeadLeague.prototype,g);a.UpdateH2HLeague=a.UpdateClassicLeague.extend({drfUrl:function(){return "/drf/leagues-h2h/"+this.get("id");},toAPI:function(){var b=a.UpdateClassicLeague.prototype.toAPI.apply(this,arguments);b.ko_rounds=this.get("ko_rounds");return b;}});f.extend(a.UpdateH2HLeague.prototype,g);a.H2HMatch=a.Model.extend({});a.H2HMatches=a.Collection.extend({model:a.H2HMatch});a.H2HMatchTiebreakData=a.Model.extend({});});window.ISMApp.module("Entities",function(a,b,c,d,e,f){"use strict";a.JoinPrivateLeague=a.Model.extend({defaults:function(){return{"code":null,"error":""};},validForCreating:function(){var a=this.get("code");if(!a)return false;return true;},toAPI:function(){return{"code":this.get("code")};},submit:function(){return e.ajax({url:"/drf/leagues-join-private/",type:"post",data:JSON.stringify(this.toAPI()),contentType:"application/json",dataType:"json"});}});a.JoinPublicLeague=a.Model.extend({defaults:function(){return{"scoring":null,"error":""};},validForCreating:function(){var a=this.get("scoring");if(!a)return false;return true;},toAPI:function(){return{"scoring":this.get("scoring")};},submit:function(){return e.ajax({url:"/drf/leagues-join-public/",type:"post",data:JSON.stringify(this.toAPI()),contentType:"application/json",dataType:"json"});}});});ISMApp.module("Entities",function(a,b,c,d,e,f){a.Phase=a.Model.extend({});a.Phases=a.Collection.extend({model:a.Phase});var g=new a.Phases();b.commands.setHandler("create:phases",function(b){g=new a.Phases(b);});b.reqres.setHandler("get:phase",function(a){return g.get(a);});b.reqres.setHandler("get:phases",function(){return g;});b.reqres.setHandler("get:phases:started",function(){var a=b.request("get:event:current");return g.filter(function(b){return a&&a.get("id")>=b.get("start_event")?true:false;});});});window.ISMApp.module("Entities",function(a,b,c,d,e,f){"use strict";a.LoggedInPlayer=a.Model.extend({loginStatus:function(){var a=b.request("get:loggedInEntry");if(!g.has("id"))return "NOT_LOGGED_IN";else if(g.get("dirty"))return "NEED_CONFIRM";else if(!a||!a.has("id"))return "LOGGED_IN_PLAYER";else return "LOGGED_IN_ENTRY";},checkEligibility:function(){return b.request("player:check:eligibility",this);}});var g=new a.LoggedInPlayer();b.commands.setHandler("login:player",function(b){g=new a.LoggedInPlayer(b);});b.reqres.setHandler("get:loggedInPlayer",function(){return g;});b.reqres.setHandler("get:login:status",function(){return g.loginStatus();});b.reqres.setHandler("player:check:auth",function(a){var c=g.loginStatus();if(f.indexOf(a,c)===-1){b.vent.trigger(c);return false;}else return true;});b.reqres.setHandler("player:check:eligibility",function(a){return "ok";});a.EditablePlayer=a.Model.extend({urlCreate:"/drf/player/register",urlGet:"/drf/player/profile",urlUpdate:"/drf/player/profile",defaults:{"username":null,"password":null,"first_name":null,"last_name":null,"email":null,"date_of_birth":null,"date_of_birth_day":null,"date_of_birth_month":null,"date_of_birth_year":null,"gender":null,"region":null},initialize:function(){this.noChangesValid=false;},validationErrors:{},resetErrors:function(){this.validationErrors={};f.each(this.defaults,function(a,b){this.validationErrors[b]=[];},this);},dateOfBirth:function(){var a=this.get("date_of_birth_year");var b=this.get("date_of_birth_month");var c=this.get("date_of_birth_day");if(a&&b&&c)return a+"-"+b+"-"+c;else return "";},validForCreating:function(a){a=a||{};f.defaults(a,{skipPassword:false});var c=true,d=this;this.resetErrors();if(this.defaults.hasOwnProperty("password")&&!a.skipPassword){var e=this.get("password");if(!e||e.length<6){this.validationErrors.password.push("TOO_SHORT");c=false;}}if(this.defaults.hasOwnProperty("first_name")){var g=this.get("first_name");if(!g){this.validationErrors.first_name.push("TOO_SHORT");c=false;}}if(this.defaults.hasOwnProperty("last_name")){var h=this.get("last_name");if(!h){this.validationErrors.last_name.push("TOO_SHORT");c=false;}}if(this.defaults.hasOwnProperty("email")){var i=this.get("email");if(!/^([\w!.%+\-])+@([\w\-])+(?:\.[\w\-]+)+$/.test(i)){this.validationErrors.email.push("INVALID");c=false;}}if(this.defaults.hasOwnProperty("date_of_birth")){var j=this.dateOfBirth();if(!j||!window.moment(j).isValid()){this.validationErrors.date_of_birth.push("INVALID");c=false;}}if(this.defaults.hasOwnProperty("gender")){var k=this.get("gender");if(!/^[MF]$/.test(k)){this.validationErrors.gender.push("INVALID");c=false;}}if(this.defaults.hasOwnProperty("region")){var l=this.get("region");if(!/^\d+$/.test(l)){this.validationErrors.region.push("INVALID");c=false;}else b.request("get:region:promise",l).done(function(a){if(!a){d.validationErrors.region.push("INVALID");c=false;}});}return c;},validForUpdating:function(){var a=this.validForCreating({skipPassword:true});if(!this.noChangesValid&&!this.profileHasChanged())a=false;return a;},toAPI:function(){return{"username":this.get("email"),"password":this.get("password"),"email":this.get("email"),"first_name":this.get("first_name"),"last_name":this.get("last_name"),"gender":this.get("gender"),"date_of_birth":this.dateOfBirth(),"region":this.get("region")};},getProfile:function(a){a=a||{};f.defaults(a,{"silent":true});var c=this;var d=e.ajax({url:this.urlGet,type:"get"});d.done(function(d){if(d.date_of_birth){var e=d.date_of_birth.split("-");if(e.length===3){d.date_of_birth_year=parseInt(e[0],10);d.date_of_birth_month=e[1];d.date_of_birth_day=e[2];}}if(d.regions)b.execute("create:regions",d.regions);c.set(d,{silent:a.silent});c.originalState=c.toAPI();});return d;},register:function(){return e.ajax({url:this.urlCreate,type:"post",data:JSON.stringify(this.toAPI()),contentType:"application/json"});},updateProfile:function(){return e.ajax({url:this.urlUpdate,type:"put",data:JSON.stringify(this.toAPI()),contentType:"application/json"});},profileHasChanged:function(){return !(f.isEqual(this.toAPI(),this.originalState));}});a.PasswordChange=a.Model.extend({urlUpdate:"/drf/player/password-change",defaults:{"old_password":"","password":""},validationErrors:{},resetErrors:function(){this.validationErrors={};f.each(this.defaults,function(a,b){this.validationErrors[b]=[];},this);},validForUpdating:function(){var a=true;this.resetErrors();var b=this.get("old_password");if(!b||b.length<6){this.validationErrors.old_password.push("TOO_SHORT");a=false;}var c=this.get("password");if(!c||c.length<6){this.validationErrors.password.push("TOO_SHORT");a=false;}return a;},updatePassword:function(){return e.ajax({url:this.urlUpdate,type:"post",data:JSON.stringify(this.toJSON()),contentType:"application/json"});}});a.Login=a.Model.extend({url:"/drf/accounts/login/",defaults:{"username":"","password":""},validForLogin:function(){return this.get("username").length&&this.get("password").length?true:false;}});});window.ISMApp.module("Entities",function(a,b,c,d,e,f){"use strict";a.Region=a.Model.extend({});a.Regions=a.Collection.extend({model:a.Region,url:"/drf/region/",comparator:"name"});var g=new a.Regions();b.commands.setHandler("create:regions",function(a){g.reset(a);});b.reqres.setHandler("get:regions:promise",function(){var a=e.Deferred();if(g.length)a.resolve(g);else g.fetch().done(function(b){g.reset(b);a.resolve(g);});return a;});b.reqres.setHandler("get:region:promise",function(a){var c=e.Deferred();b.request("get:regions:promise").done(function(){c.resolve(g.get(a));});return c;});});window.ISMApp.module("Entities",function(a,b,c,d,e,f){"use strict";a.Team=a.Model.extend();a.Teams=a.Collection.extend({model:a.Team,comparator:function(a){return a.get("name").toLowerCase();}});var g=new a.Teams();b.commands.setHandler("create:teams",function(b){g=new a.Teams(b);});b.reqres.setHandler("get:teams",function(){return g;});b.reqres.setHandler("get:team",function(a){return g.get(a);});b.reqres.setHandler("get:team:fromShortName",function(a){return g.findWhere({short_name:a});});});ISMApp.module("Entities",function(a,b,c,d,e,f){a.Vocab=a.Model.extend({defaults:{text:""}});a.Vocabs=a.Collection.extend({model:a.Vocab});var g=new a.Vocabs();b.commands.setHandler("create:vocabs",function(b){g.reset(f.map(b,function(b,c){return new a.Vocab({"id":c,"text":b});}));});b.reqres.setHandler("get:vocab",function(a){var b=g.get(a);return b?b.get("text"):"MISSING VOCAB FOR "+a;});});window.ISMApp.module("Entities",function(a,b,c,d,e,f){"use strict";a.Element=a.Model.extend({defaults:{isElement:true,isTransfer:false},initialize:function(){var a=b.request("get:teams").get(this.get("team"));var c=b.request("get:elementTypes").get(this.get("element_type"));if(a&&c)this.set({"shirt_id":this.getShirtIdentifier(),"shirt_image_url":this.getShirtImageUrl(),"photo_url":b.request("get:element:photo",this),"team_name":a.get("name"),"team_short_name":a.get("short_name"),"element_type_singular_name":c.get("singular_name"),"element_type_singular_name_short":c.get("singular_name_short"),"element_type_id":this.get("element_type"),"iconInfo":this.elementStatus("ism-icon--info--")||"ism-icon--info","infoStub":this.infoStub(),"next_event_fixture":this.nextEventFixture(),"search_name":this.searchName(),"elementStatus":this.elementStatus()});},elementStatus:function(a){a=a||"";var b=this.get("chance_of_playing_next_round"),c="";if(this.get("status")==="d")if(b!==undefined&&b!==null){if(b===0||b===25||b===50||b===75)c=a+b;}else c=a+"50";else if(this.get("status")==="u"||this.hasNews())c=a+"0";return c;},infoStub:function(){var a=this.get("chance_of_playing_next_round"),b=this.get("status");if(b==="a")return "";if(b==="d")if(a)return "poss_"+a;else return "poss_50";return "warn";},hasNews:function(){if(this.get("news"))return true;},getShirtIdentifier:function(){var a=b.request("get:setting","ui_shirt_specific_flat");var c=b.request("get:team",this.get("team"));var d=c.get(b.request("utils:game-config:get","teamShirtAttribute"));if(a){var e=this.get("element_type");if(a[e])d+=("_"+e);}return d;},getShirtImageUrl:function(a){a=a||"";var c=b.request("get:setting","static_game_url"),d="";d=c+"images/shirts/";if(a)d+=(a+"/");d+=("shirt_"+this.getShirtIdentifier()+".png");return d;},unstartedCurrentEventFixture:function(){var a=b.request("get:teams");var c=a.get(this.get("team")).get("current_event_fixture")||[];var d=b.request("get:fixtures:current");if(c&&d)return b.request("format:fixtures",f.filter(c,function(a){var b=d.get(a.id);if(b)return !b.get("started");else return false;}));else return [];},nextEventFixture:function(){var a=b.request("get:teams");return b.request("format:fixtures",a.get(this.get("team")).get("next_event_fixture")||[]);},sellingPrice:function(){if(this.get("isTransfer")&&f.contains(["original","removed"],this.get("transferStatus")))return this.get("selling_price");else return this.get("now_cost");},purchasePrice:function(){if(this.get("isTransfer")&&f.contains(["original","removed"],this.get("transferStatus")))return this.get("purchase_price");else return this.get("now_cost");},searchName:function(){var a=this.get("web_name")||"";return b.request("make:string:searchable",a);}});a.Elements=a.Collection.extend({model:a.Element,initialize:function(){this.elementsUpdated=0;},drfUrl:function(){return "/drf/elements/";},refreshMe:function(){var a=this;return e.ajax({type:"get",url:this.drfUrl()}).done(function(b){a.resetMe(b);});},resetMe:function(a){this.reset(a);this.elementsUpdated=new Date().getTime();},haveHistoricalData:function(){var a=b.request("get:event:current");if(a)return false;return this.find(function(a){return a.get("total_points");})?true:false;}});var g=new a.Elements();b.commands.setHandler("create:elements",function(a){g.resetMe(a);});b.reqres.setHandler("get:elements",function(){var a=5*60*1000;if(g.elementsUpdated+a<new Date().getTime())g.refreshMe();return g;});b.reqres.setHandler("get:element",function(a){return g.get(a);});b.reqres.setHandler("make:string:searchable",function(a){a=a.toLowerCase();var b="ąàáäâãåæăćčĉęèéëêĝĥìíïîĵłľńňòóöőôõðøśșşšŝťțţŭùúüűûñÿýçżźž";var c="aaaaaaaaaccceeeeeghiiiijllnnoooooooossssstttuuuuuunyyczzz";return a.replace(/.{1}/g,function(a){var d=b.indexOf(a);return d===-1?a:c[d];});});b.reqres.setHandler("get:element:photo",function(a){var c=b.request("get:setting","photo_base_url");return c+a.get("photo");});b.reqres.setHandler("format:fixtures",function(a){var c,d,e=b.request("get:teams"),g=[],h,i=b.request("get:setting","ui_show_home_away"),j=b.request("get:setting","manager_subs_enabled"),k=b.request("get:vocab","home"),l=b.request("get:vocab","away"),m;for(c=0;c<a.length;c++){d=a[c];h=e.get(d.opponent).get("short_name");if(i)h+=(" "+(d.is_home?k:l));if(j)h+=f.str.sprintf(" %02d/%02d",d.day,d.month);g.push(h);}m=g.join(", ");if(g.length>1)return g[0]+", "+g[1].split(" ")[0]+"<span title=\""+m+"\" class=\"ismjs-tooltip ism-tooltip--pointer\">"+" &bull;&bull;&bull;</span>";else return m;});a.FilteredElements=a.Elements.extend({initialize:function(){f.bindAll(this,"sortHelper");this.paginator=new a.Model();this.resetPaginator();this.elementTypes=b.request("get:elementTypes");this.plainByType=new b.Entities.Collection();this.elementTypes.each(function(a){var c=a.clone();c.set("et",a);c.set("elements",new b.Entities.Collection());this.plainByType.add(c);},this);},populate:function(a){a=a||{};var c=a.filters||[],d=a.maxCost||null,e=[],g=c.length,h=null,i=null,j=a.groupByType||false,k=a.page||0,l=b.request("get:watched"),m=b.request("get:elements");this.sortField=a.sort||"total_points";m.each(function(a){var b,f,j,k;if(a.get("status")==="u")return;if(c.indexOf("watchlist")!==-1)if(!l.hasElement(a))return;for(b=0;b<g;b++){f=c[b][0];j=c[b][1];k=c[b][2];if(j==="=="){if(a.get(f)!==k)return;}else if(j==="<="){if(a.get(f)>k)return;}else if(j===">="){if(a.get(f)<k)return;}else if(j==="like"){var m=k.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&");var n=new RegExp("(^"+m+"| "+m+")");if(!a.get(f).match(n))return;}}var o=a.get("now_cost");if(h>o||h===null)h=o;if(o>i||i===null)i=o;if(d&&o>d)return;e.push(a);});e.sort(this.sortHelper);var n=e.length;if(k&&this.canPaginate(c))e=this.paginate(e,k);else this.resetPaginator();this.paginator.set("numPlayers",n);this.minCost=h;this.maxCost=i;if(j){var o={};this.elementTypes.each(function(a){o[a.get("id")]=[];});f.each(e,function(a){o[a.get("element_type")].push(a);});this.elementTypes.each(function(a){var b=a.get("id");this.plainByType.get(b).get("elements").reset(o[b],{silent:true});},this);}this.reset(e);},canPaginate:function(a){var b=f.map(a,function(a){return a[0];});return f.indexOf(b,"team")===-1?true:false;},resetPaginator:function(){this.paginator.set({"pageThis":null,"pageLess":null,"pageMore":null,"pageTotal":null,"numPlayers":null});},paginate:function(a,c){var d,e,f;if(c){d=b.request("get:setting","ui_selection_player_limit");e=(c-1)*d;f=e+d;this.paginator.set({"pageThis":c,"pageLess":c>1?true:false,"pageMore":a.length>f?true:false,"pageTotal":Math.ceil(a.length/d)});a=a.slice(e,f);}return a;},sortHelper:function(a,b){var c=parseFloat(a.get(this.sortField)),d=parseFloat(b.get(this.sortField));if(c>d)return -1;else if(d>c)return 1;if(a.get("team")>b.get("team"))return 1;else if(a.get("team")<b.get("team"))return -1;if(a.get("element_type")>b.get("element_type"))return 1;else if(a.get("element_type")<b.get("element_type"))return -1;return a.get("id")>b.get("id")?1:-1;}});a.ElementSummary=a.Model.extend({urlRoot:"/drf/element-summary",getExplain:function(){var a=[];f.each(this.get("explain"),function(c){var d=[];var e=0;f.each(f.values(c.explain),function(a){d.push(a);e+=a.points;});a.push(new b.Entities.Model({fixture:new b.Entities.Fixture(c.fixture),explain:new b.Entities.Collection(d),total_points:e}));});return new b.Entities.Collection(a);},getFixtures:function(){return new b.Entities.Collection(this.get("fixtures"));},getFixturesSummary:function(){return new b.Entities.Collection(this.get("fixtures_summary"));},getHistory:function(){return new a.ElementFixtureHistories(this.get("history"));},getHistoryPast:function(){return new b.Entities.Collection(this.get("history_past").reverse());},getHistorySummary:function(){return new a.ElementFixtureHistories(this.get("history_summary"));}});a.ElementFixtureHistory=a.Model.extend({initialize:function(){var a=b.request("get:teams").get(this.get("opponent_team"));if(a)this.set({"opponent_short_name":a.get("short_name")});}});a.ElementFixtureHistories=a.Collection.extend({model:a.ElementFixtureHistory,getTotals:function(){var a=b.request("get:statsOptions").pluck("key");var c={};f.each(a,function(a){c[a]=0;});this.each(function(b){f.each(a,function(a){c[a]+=b.get(a);});});return c;}});});window.ISMApp.module("Entities",function(a,b,c,d,e,f){"use strict";a.ElementType=a.Model.extend({defaults:{isElement:false,isTransfer:false}});a.ElementTypes=a.Collection.extend({model:a.ElementType});var g=new a.ElementTypes();b.commands.setHandler("create:elementTypes",function(b){g=new a.ElementTypes(b);});b.reqres.setHandler("get:elementTypes",function(){return g;});b.reqres.setHandler("get:elementType",function(a){return g.get(a);});b.reqres.setHandler("get:elementType:fromShortName",function(a){return g.findWhere({singular_name_short:a});});b.reqres.setHandler("get:elementType:maxPlays",function(){var a=b.request("get:loggedInEntry");if(a&&a.attackChipActive())return [undefined,1,2,5,3];else return b.request("get:setting","squad_max_play_flat");});b.reqres.setHandler("get:elementType:minPlays",function(){var a=b.request("get:loggedInEntry");if(a&&a.attackChipActive())return [undefined,1,2,5,3];else return b.request("get:setting","squad_min_play_flat");});});window.ISMApp.module("Entities",function(a,b,c,d,e,f){"use strict";f.extend(a.Entry.prototype,{transfersType:function(){if(!this.started()||this.get("wildcard_status")==="active")return "unlimited";return b.request("get:setting","transfers_type");}});f.extend(a.LoggedInEntry.prototype,{attackChipActive:function(){return this.activeChipName()==="attack"?true:false;}});a.EntryElementHistory=a.Collection.extend({inflateElements:function(){this.each(function(a){a.set({elIn:b.request("get:element",a.get("element_in")),elOut:b.request("get:element",a.get("element_out"))});});},inflateEvent:function(){this.each(function(a){a.set({ev:b.request("get:event",a.get("event"))});});},inflateEventStartStop:function(){this.each(function(a){a.set({evStart:b.request("get:event",a.get("event_start")),evStop:b.request("get:event",a.get("event_stop"))});});}});});window.ISMApp.module("Entities",function(a,b,c,d,e,f){"use strict";var g=null;b.commands.setHandler("create:transferWindow",function(a){g=a;});b.reqres.setHandler("get:transferWindow",function(){return g;});b.reqres.setHandler("get:transferWindow:status",function(){if(g===null)return "unused";return g.transfer_window_open?"open":"closed";});});window.ISMApp.module("Entities",function(a,b,c,d,e,f){"use strict";a.SelectItem=a.Model.extend({defaults:{selected:false}});a.SelectCollection=a.Collection.extend({model:a.SelectItem,getSelected:function(){return this.findWhere({"selected":true});},setSelected:function(a){var b=this.getSelected();if(b)b.set({"selected":false});this.at(a).set({"selected":true});this.trigger("ism:setSelected");},unset:function(){f.each(this.where({"selected":true}),function(a){a.set({"selected":false});});},getLabelFromValue:function(a){return this.findWhere({value:a}).get("label");}});a.Filters=a.SelectCollection.extend({populate:function(c){c=c||[];var d=[],e,f;f=c.length;for(e=0;e<f;e++)d.push(new a.SelectItem({value:c[e].value,label:c[e].label,filter:c[e].value}));b.request("get:elementTypes").each(function(b){d.push(new a.SelectItem({value:this.getValueFromElementType(b),label:b.get("plural_name"),filter:["element_type","==",b.get("id")]}));},this);b.request("get:teams").each(function(b){if(b.get("unavailable"))return;d.push(new a.SelectItem({value:"te_"+b.get("id"),label:b.get("name"),filter:["team","==",b.get("id")]}));});this.reset(d);},selectByElementType:function(a){var b="et_"+a.get("id");this.each(function(a){a.set({"selected":a.get("value")===b?true:false});});this.trigger("et:changed");},getValueFromElementType:function(a){return "et_"+a.get("id");},getFilterFromValue:function(a){var b=this.findWhere({value:a});if(b)return b.get("filter");else return b;},asOptGroups:function(a,b,c){var d=function(a){return{"value":a.get("value"),"label":a.get("label")};};var e={"opt_labels":[a,b,c]};e[a]=[];e[b]=[];e[c]=[];this.each(function(f){var g=f.get("value");if(g.indexOf("et_")===0)e[b].push(d(f));else if(g.indexOf("te_")===0)e[c].push(d(f));else e[a].push(d(f));});return e;}});a.FilterSorts=a.SelectCollection.extend({populate:function(){var c=b.request("get:statsOptions"),d=[];d=c.map(function(b){return new a.SelectItem({value:b.get("key"),label:b.get("name")});});this.reset(d);}});a.FilterPrices=a.SelectCollection.extend({populate:function(c,d){d=d||[];var e,f=d.length,g=[],h=b.request("get:setting","ui_selection_price_gap");f=d.length;for(e=0;e<f;e++)g.push(new a.SelectItem({value:d[e].value,label:d[e].label}));for(e=c.maxCost;e>=c.minCost;e-=h)g.push(new a.SelectItem({value:e,label:b.request("format:currency",e)}));this.reset(g);},closestPrice:function(a){if(!a)return null;var b=this.at(this.length-1).get("value");if(a<=b)return b;else return this.find(function(b){var c=b.get("value");return c&&a>=c;}).get("value");}});a.FilterTeam=a.SelectCollection.extend({populate:function(c){c=c||{};c.pre=c.pre||[];c.post=c.post||[];var d=c.pre,e=b.request("get:teams").map(function(a){return{"label":a.get("name"),"value":a.get("id")};}),g=[];d.push.apply(d,e);d.push.apply(d,c.post);g=f.map(d,function(b){return new a.SelectItem(b);});this.reset(g);}});a.FilterRegion=a.SelectCollection.extend({populate:function(c){c=c||{};c.pre=c.pre||[];c.post=c.post||[];var d=this,e=c.pre,g=b.request("get:regions:promise"),h=[];g.done(function(b){var g=b.map(function(a){return{"label":a.get("name"),"value":a.get("id")};});e.push.apply(e,g);e.push.apply(e,c.post);h=f.map(e,function(b){return new a.SelectItem(b);});d.reset(h);});return g;}});a.FilterEvent=a.SelectCollection.extend({populate:function(c){c=c||{};c.pre=c.pre||[];c.post=c.post||[];var d=c.pre,e=b.request("get:events").map(function(a){return{"label":a.get("name"),"value":a.get("id")};}),g=[];d.push.apply(d,e);d.push.apply(d,c.post);g=f.map(d,function(b){return new a.SelectItem(b);});this.reset(g);}});a.FilterHeadToHeadSize=a.SelectCollection.extend({populate:function(c){c=c||{};c.pre=c.pre||[];c.post=c.post||[];var d=c.pre,e=1,g=b.request("get:setting","league_size_h2h_max"),h=[],i=[];for(;e<=g;e++)h.push({"label":e,"value":e});d.push.apply(d,h);d.push.apply(d,c.post);i=f.map(d,function(b){return new a.SelectItem(b);});this.reset(i);}});a.FilterKnockoutRounds=a.SelectCollection.extend({populate:function(c,d){c=c||{};c.pre=c.pre||[];c.post=c.post||[];var e=c.pre,g=b.request("get:event:last"),h=b.request("get:setting","league_max_ko_rounds_h2h"),i=g.get("id")-d.get("start_event_id"),j=1,k=Math.min(i,h),l=[],m=[];for(;j<=k;j++)l.push({"label":j,"value":j});e.push.apply(e,l);e.push.apply(e,c.post);m=f.map(e,function(b){return new a.SelectItem(b);});this.reset(m);}});});window.ISMApp.module("Entities",function(a,b,c,d,e,f){"use strict";a.Fixture=a.Model.extend({initialize:function(){var c=b.request("get:teams");var d=this.get("kickoff_time_formatted").match((/\d+:\d+/));if(c){var e=c.get(this.get("team_h"));var f=c.get(this.get("team_a"));this.set({"team_h_name":e.get("name"),"team_a_name":f.get("name"),"team_h_short_name":e.get("short_name"),"team_a_short_name":f.get("short_name"),"ko_time_only":d?d[0]:"","has_score":this.get("team_h_score")===null?false:true});}this.stats=new a.Collection([]);this.statsSummary=new a.Collection([]);},statsUrl:function(){return "/drf/fixtures/"+this.get("id")+"/stats";},fetchAndPopulateStats:function(){var a=this;return e.ajax({type:"get",url:this.statsUrl()}).done(function(b){a.populateStats(b);});},populateStats:function(a){this.stats.reset(a);this.statsSummary.reset(this.getStatSummary());},getStatSummary:function(){var a=this;var c=[];var d=[];var e=b.request("get:fixture:summaryStats");var g=function(a,b){return b.value-a.value;};this.stats.each(function(d,g){var h=b.request("get:element",d.get("element"));var i=d.get("opponent_team")==a.get("team_h")?"team_a":"team_h";var j=f.filter(d.get("stats"),function(a){return e.indexOf(a.name)!==-1;});f.each(j,function(a,d){var e=b.request("get:stat:fromField",a.name);if(!g)c.push({stat:e,team_h:[],team_a:[]});if(a.value)c[d][i].push({element:h,value:a.value});});});f.each(c,function(a){if(a.team_h.length||a.team_a.length)d.push({stat:a.stat,team_h:a.team_h.sort(g),team_a:a.team_a.sort(g)});});return d;}});a.Fixtures=a.Collection.extend({model:a.Fixture,unstartedForElement:function(a){var b=a.get("team");return this.filter(function(a){return !a.get("started")&&a.get("team_h")===b||a.get("team_a")===b;});},matchCount:function(){var a={};b.request("get:teams").each(function(b){a[b.get("id")]=0;});this.each(function(b){a[b.get("team_h")]++;a[b.get("team_a")]++;});return a;},teamsWithNoMatch:function(){var a=[];f.each(this.matchCount(),function(c,d){if(c===0)a.push({team:b.request("get:team",d),matches:c});});return a;},teamsWithMultipleMatches:function(){var a=[];f.each(this.matchCount(),function(c,d){if(c>1)a.push({team:b.request("get:team",d),matches:c});});return a;},teamsByMatches:function(a){a=a||{};f.defaults(a,{excludeSingleMatches:false});var c={};f.each(this.matchCount(),function(d,e){if(d===1&&a.excludeSingleMatches)return;if(c[d])c[d].teams.push(b.request("get:team",e));else c[d]={teams:[b.request("get:team",e)],matches:d};});return f.sortBy(f.values(c),function(a){return -1*a.matches;});},createWithStatDummyAndDayHeader:function(){var c=[],d=0,e=b.request("utils:game-config:get","ui-fixture-show-days");this.each(function(a){var f=a.get("event_day");if(e)if(f!=d)c.push(new b.Entities.Model({day_number:f,day_moment:window.moment.tz(a.get("kickoff_time"),b.request("get:setting","game_timezone")),deadline_time:a.get("deadline_time_formatted")}));c.push(a);if(a.get("has_score"))c.push(new b.Entities.Model({statDummy:a}));d=f;});return new a.Fixtures(c);}});var g={};b.commands.setHandler("create:fixtures",function(b,c){g[b]=new a.Fixtures(c);});b.reqres.setHandler("get:fixtures",function(a){var c=e.Deferred();if(g.hasOwnProperty(a))c.resolve(g[a]);else e.ajax({type:"get",url:"/drf/fixtures/?event="+a}).done(function(d){b.execute("create:fixtures",a,d);c.resolve(g[a]);});return c.promise();});b.reqres.setHandler("get:fixtures:current",function(){var a=b.request("get:event:current");if(a)return g[a.get("id")];else return undefined;});b.reqres.setHandler("get:fixture:summaryStats",function(){return ["goals_scored","assists","own_goals","penalties_saved","penalties_missed","yellow_cards","red_cards","saves","bonus"];});a.listenTo(b.vent,"test:teardown",function(){g={};});});window.ISMApp.module("Entities",function(a,b,c,d,e,f){"use strict";a.Kit=a.Model.extend({defaultKitJSON:function(){return{"shirt":{"type":"plain","base":"#e1e1e1","sleeves":"#e1e1e1","secondary":"#e1e1e1","logo":"none"},"shorts":"#e1e1e1","socks":{"type":"plain","base":"#e1e1e1","secondary":"#e1e1e1"}};},renderInView:function(a){var b=this.get("repr");e(".shirt_colour",a.$el).css("fill",b.shirt.base);e(".shirt_sleeves",a.$el).css("fill",b.shirt.sleeves);e(".shirt_stripes",a.$el).css("fill",b.shirt.secondary);e(".shirt_hoops",a.$el).css("fill",b.shirt.secondary);e(".shorts",a.$el).css("fill",b.shorts);e(".socks",a.$el).css("fill",b.socks.base);e(".sock_hoops",a.$el).css("fill",b.socks.secondary);if(b.shirt.type==="plain"){e(".shirt_stripes",a.$el).hide();e(".shirt_hoops",a.$el).hide();}else if(b.shirt.type==="stripes"){e(".shirt_stripes",a.$el).show();e(".shirt_hoops",a.$el).hide();}else if(b.shirt.type==="hoops"){e(".shirt_stripes",a.$el).hide();e(".shirt_hoops",a.$el).show();}if(b.socks.type==="plain")e("#sock_stripe_left_top, #sock_stripe_left_bottom, #sock_stripe_right_top, #sock_stripe_right_bottom",a.$el).hide();else e("#sock_stripe_left_top, #sock_stripe_left_bottom, #sock_stripe_right_top, #sock_stripe_right_bottom",a.$el).show();if(b.shirt.logo!=="none")e("#"+b.shirt.logo,a.$el).show();else e("[data-name=kit-logo]",a.$el).hide();}});b.reqres.setHandler("get:kit:from-entry",function(b){var c=new a.Kit();var d=b.get("kit");if(!d)c.set("repr",c.defaultKitJSON());else c.set("repr",window.JSON.parse(d));return c;});});window.ISMApp.module("Entities",function(a,b,c,d,e,f){"use strict";f.extend(a.CupSummaryMatch.prototype,{getStartedUrl:function(){return b.request("router:named:get","team_history",{substitutions:{":entryId":this.get("opponent"),":eventId":this.get("event")}});}});});window.ISMApp.module("Entities",function(a,b,c,d,e,f){"use strict";a.Loan=a.Model.extend();a.Loans=a.Collection.extend({model:a.Loan,drfUrl:function(){return "/drf/loans/"+b.request("get:loggedInEntry").get("id");},canBeRefunded:function(){var a=b.request("get:event:current");if(!a)return true;var c=this.find(function(b){return b.get("event_start")<=a.get("id");});return c?false:true;},inflateElements:function(){this.each(function(a){a.set({elIn:b.request("get:element",a.get("element_in")),elOut:b.request("get:element",a.get("element_out"))});});}});});window.ISMApp.module("Entities",function(a,b,c,d,e,f){"use strict";a.Pick=a.Element.extend({defaults:{"subStatus":"","can_sub":false,"is_captain":false,"is_vice_captain":false},initialize:function(a){if(a.bench===undefined)a.bench=a.is_sub?1:0;},isStarter:function(){return this.get("position")<=b.request("get:setting","squad_squadplay");},isInstigator:function(){return this.get("subStatus")=="instigator";},isSub:function(){return !this.isStarter();},getPossibles:function(a,b,c){c=f.defaults(c||{},{"subForSub":false});var d=[],e=this,g=a.totalsByType();if(this.get("is_sub")){a.each(function(a){var b;if(a.get("position")&&a.get("can_sub")){b=a.get("element_type");if(e.legalSwap(a,g))d.push(a);}});if(c.subForSub)b.each(function(a){if(e.legalSwap(a,g))d.push(a);});}else b.each(function(a){var b;if(a.get("position")&&a.get("can_sub")){b=a.get("element_type");if(e.legalSwap(a,g))d.push(a);}});return d;},legalSwap:function(a,c){var d=this.get("element_type"),e=a.get("element_type"),f=this.get("is_sub"),g=a.get("is_sub"),h=this.get("position"),i=a.get("position"),j=b.request("get:elementType:minPlays"),k=b.request("get:elementType:maxPlays"),l=b.request("get:setting","sub_positions_locked_flat")||[],m;if(!f&&!g)return false;if(d===e)return true;if(f&&g)m=true;else if(f)m=(c[d]<k[d]&&c[e]>j[e]);else m=(c[e]<k[e]&&c[d]>j[d]);if(l[d]&&l[d].indexOf(h)!==-1)m=false;if(l[e]&&l[e].indexOf(i)!==-1)m=false;return m;},setAsInstigator:function(){this.set("subStatus","instigator");}});a.Picks=a.Collection.extend({model:a.Pick,pickMode:"future",initialize:function(){this.originalState=[];this.plainByRole=new b.Entities.Collection([{elements:new b.Entities.Collection()},{elements:new b.Entities.Collection()}]);this.on("reset",function(){this.plainByRole.at(0).get("elements").reset(this.getStarters());this.plainByRole.at(1).get("elements").reset(this.getSubs());});},comparator:function(a){return a.get("position");},drfUrl:function(){return "/drf/my-team/"+b.request("get:loggedInEntry").get("id")+"/";},populate:function(a){var c=this.addElementAttributes(a);var d=new b.Entities.Picks(c);this.original=c;this.originalState=d.toAPI();this.reset(d.models);},restore:function(){var a=new b.Entities.Picks(this.original);this.reset(a.models);},addElementAttributes:function(a){var c,d=a.length,e=[];for(c=0;c<d;c++)e.push(f.extend({},b.request("get:element",a[c].element).attributes,a[c].stats,a[c]));return e;},fetchAndPopulate:function(){var a=this;var c=e.ajax({type:"get",url:this.drfUrl()}).done(function(c){b.execute("check:current:event",c.ce);a.populate(c.picks);b.execute("login:entry",c.entry);});return c;},getStarters:function(){var a=b.request("get:setting","squad_squadplay");return this.filter(function(b){return b.get("position")<=a;});},getSubs:function(){var a=b.request("get:setting","squad_squadplay");return this.filter(function(b){return b.get("position")>a;});},formation:function(){var a=b.request("get:elementTypes").map(function(){return 0;});a=f.reduce(this.getStarters(),function(a,b){a[b.get("element_type")-1]++;return a;},a);return a.join("-");},getInstigator:function(){return this.findWhere({"subStatus":"instigator"});},changeInstigated:function(){return this.getInstigator()?true:false;},substitute:function(a){var b=this.getInstigator();if(!b)return;var c=a.get("element_type")===b.get("element_type"),d=a.get("is_sub")&&b.get("is_sub"),e=["position","is_sub","is_captain","is_vice_captain","multiplier"],f={},g={},h;for(h=0;h<e.length;h++){f[e[h]]=a.get(e[h]);g[e[h]]=b.get(e[h]);}a.set(g);b.set(f);this.sort();if(!d&&!c)this.rePositionStarters();this.each(function(a){a.set("subStatus","");});this.trigger("reset");},rePositionStarters:function(){var a;var b=f.sortBy(this.getStarters(),function(a){return(a.get("element_type")*100)+a.get("position");});for(a=0;a<b.length;a++)b[a].set("position",a+1);this.sort();},changeLeader:function(a,b){var c=false,d,e=a==="is_captain"?"is_vice_captain":"is_captain";f.each(this.getStarters(),function(f){if(f.get(a)){d=f;f.set(a,false);}if(f.get("id")===b){f.set(a,true);if(f.get(e)){c=true;f.set(e,false);}}});if(c)d.set(e,true);},withNews:function(){return this.filter(function(a){return a.get("status")!=="a";});},toAPI:function(){return this.map(function(a){return{"element":a.get("element"),"position":a.get("position"),"is_captain":a.get("is_captain"),"is_vice_captain":a.get("is_vice_captain")};});},totalsByType:function(){var a,c=b.request("get:elementTypes").length,d=[];for(a=1;a<=c;a++)d[a]=0;this.each(function(a){d[a.get("element_type")]++;});return d;},haveChanged:function(){return !(f.isEqual(this.toAPI(),this.originalState));},canBeManaged:function(){return true;},forceFormation:function(b){var c=this.formation().split("-"),d=new a.Picks(this.getStarters(),{comparator:function(a){return 2*a.get("is_captain")+a.get("is_vice_captain");}}),e=new a.Picks(this.getStarters()),f=new a.Picks(this.getSubs());if(c.length!==b.length)return;d.each(function(d){var g=d.get("element_type"),h,i,j;if(c[g-1]>b[g-1]){h=d.getPossibles(e,f);for(var k=0;k<h.length;k++){i=h[k];j=i.get("element_type");if(b[j-1]>c[j-1]){d.setAsInstigator();this.substitute(i);e=new a.Picks(this.getStarters());f=new a.Picks(this.getSubs());c=this.formation().split("-");break;}}}},this);}});a.PickHistory=a.Pick.extend({getPossibles:function(b,c,d){d.subForSub=false;return a.Pick.prototype.getPossibles.call(this,b,c,d);}});a.PicksHistory=a.Picks.extend({model:a.PickHistory,pickMode:"history",drfUrl:function(a,b){return "/drf/entry/"+a+"/event/"+b;},drfUpdateUrl:function(){return "/drf/substitutions";},drfEntryUrl:function(a){return "/drf/entry/"+a;},drfLiveUrl:function(a){return "/drf/event/"+a+"/live";},drfPicksUrl:function(a,b){return "/drf/entry/"+a+"/event/"+b+"/picks";},populate:function(a,c){var d=this.addElementAttributes(a.picks);this.original=d;var e=new b.Entities.PicksHistory(d);this.originalState=e.toAPI();this.reset(e.models,{silent:true});this.entry=new b.Entities.Entry(a.entry);this.state=a.state;this.own_entry=a.own_entry;this.round=b.request("get:event",c);this.points=a.points;this.entry_history=a.entry_history;this.manager_subs=new b.Entities.Collection(a.manager_subs);this.automatic_subs=new b.Entities.Collection(a.automatic_subs);this.can_change_captain=a.can_change_captain;this.active_chip=a.active_chip;},restore:function(){var a=new b.Entities.PicksHistory(this.original);a.state=this.state;a.round=this.round;a.own_entry=this.own_entry;var c=this;b.request("get:fixtures",this.round.get("id")).done(function(b){a.addExplainToPicks(b,this.explainView);c.reset(a.models);});},fetchAndPopulate:function(a,c,d){this.explainView=d;var f=this;var g=this.getData(a,c);e.when(g).then(function(a){b.execute("check:current:event",a.ce);f.populate(a,c);b.execute("create:fixtures",c,a.fixtures);b.request("get:fixtures",c).done(function(a){f.addExplainToPicks(a,d);f.trigger("reset");});});return g;},getData:function(a,c){var d=e.Deferred();var f=this;if(b.request("get:setting","sys_use_event_live_api")){var g=e.ajax({url:this.drfPicksUrl(a,c)});var h=e.ajax({url:this.drfLiveUrl(c)});var i=e.ajax({url:this.drfEntryUrl(a)});e.when(g,h,i).then(function(a,b,c){d.resolve(f.dataFromEventLiveAPI(a[0],b[0],c[0]));});}else e.ajax({type:"get",url:this.drfUrl(a,c)}).done(function(a){d.resolve(a);});return d;},dataFromEventLiveAPI:function(c,d,e){var g=b.request("get:event",c.entry_history.event);var h=b.request("get:event:current");var i=c.active_chip;var j=c.picks;f.each(j,function(a){var b=d.elements[a.element];if(b){a.explain=b.explain;a.stats=b.stats;a.points=a.stats.total_points;}});var k=new a.PicksHistory(j);return{active_chip:i,automatic_subs:c.automatic_subs,entry:e.entry,entry_history:c.entry_history,fixtures:d.fixtures,leagues:e.leagues,picks:j,points:this.pointsCalculatedFromPicks(i==="bboost"?k.models:k.getStarters()),can_change_captain:false,ce:h.get("id"),manager_subs:[],own_entry:false,state:{event:g.get("id"),sub_state:"latest",event_day:1,deadline_time:g.get("deadline_time"),deadline_time_formatted:g.get("deadline_time_formatted")}};},eventState:function(){var a=this.state.sub_state;if(this.round.get("finished")||a==="subs_finished"||a==="latest"||a==="my_team")return "finished";else if(this.own_entry&&a==="subs_open")return "open";else if(this.own_entry&&a==="subs_closed")return "closed";else return "hidden";},getPlayedStarters:function(){var a=b.request("get:setting","squad_squadplay");return this.filter(function(b){return b.get("has_played")&&b.get("position")<=a;});},highestScoringStarters:function(a){a=f.defaults(a||{},{"limit":3});return f.chain(this.getPlayedStarters()).sortBy(function(a){return -1*a.get("points");}).value().slice(0,a.limit);},lowestScoringStarters:function(a){a=f.defaults(a||{},{"limit":3});return f.chain(this.getPlayedStarters()).sortBy(function(a){return 1*a.get("points");}).value().slice(0,a.limit);},explainPointsForPick:function(a){var b=this.eventState();if(b==="hidden")return a.get("points");else if(this.active_chip!="bboost"&&a.get("is_sub"))return 0;else if(a.get("multiplier")!==undefined)return a.get("points")*a.get("multiplier");else return a.get("points");},addExplainToPicks:function(a,c){this.each(function(d){var e="";var g="";var h="";var i=[];f.each(d.get("explain"),function(d){var e=a.get(d[1]);if(e.get("started")){var g=new b.Entities.Collection(f.values(d[0]));i.push(g);if(c){var j=new c({model:e,collection:g}).render();h+=j.$el.html();}}});if(i.length)e=this.explainPointsForPick(d);var j=b.request("get:event:current");if(j&&this.round&&j.get("id")==this.round.get("id"))g=d.unstartedCurrentEventFixture();d.set("explainCollections",i);d.set("explainPoints",e);d.set("explainFixtures",g);d.set("explainTip",h);},this);},pointsCalculatedFromPicks:function(a){return f.reduce(a,function(a,b){var c=b.get("points");return a+(b.get("multiplier")*c);},0);},pointsLost:function(){return this.points-this.pointsCalculatedFromPicks(this.getStarters());},possibleCaptains:function(){var a=f.findWhere(this.originalState,{"is_captain":true});return f.filter(this.getStarters(),function(b){return b.get("can_captain")||b.get("element")===a.element;});},picksRemoved:function(){var a=[];var c=b.request("get:setting","squad_squadplay");f.each(this.getSubs(),function(b){var d=f.findWhere(this.originalState,{"element":b.get("element")});if(d.position<=c)a.push(b);},this);return a;},picksAdded:function(){var a=[];var c=b.request("get:setting","squad_squadplay");f.each(this.getStarters(),function(b){var d=f.findWhere(this.originalState,{"element":b.get("element")});if(d.position>c)a.push(b);},this);return a;},captainRemoved:function(){var a=f.findWhere(this.originalState,{"is_captain":true});var b=this.findWhere({"is_captain":true});if(a.element!=b.get("element"))return this.findWhere({"element":a.element});},captainAdded:function(){var a=f.findWhere(this.originalState,{"is_captain":true});var b=this.findWhere({"is_captain":true});if(a.element!=b.get("element"))return b;},haveChanged:function(){var a=false;var c=b.request("get:setting","squad_squadplay");this.each(function(b){var d=f.findWhere(this.originalState,{"element":b.get("element")});if(b.get("is_captain")!=d.is_captain)a=true;if(b.get("position")>c){if(d.position<=c)a=true;}else if(d.position>c)a=true;},this);return a;},canBeManaged:function(){return this.eventState()==="open"?true:false;},managerSubsMade:function(){return this.manager_subs&&this.manager_subs.length?true:false;}});a.PicksDreamTeam=a.PicksHistory.extend({pickMode:"dream",drfUrl:function(a){if(a)return "/drf/dream-team/"+a;else return "/drf/dream-team";},populate:function(a,c){var d=this.addElementAttributes(a.team);var e=new b.Entities.PicksDreamTeam(d);this.reset(e.models,{silent:true});this.round=b.request("get:event",c);this.topPlayer=a.top_player;},fetchAndPopulate:function(a,c){var d=this;var f=e.ajax({type:"get",url:this.drfUrl(a)}).done(function(e){d.populate(e,a);if(a){b.execute("create:fixtures",a,e.fixtures);b.request("get:fixtures",a).done(function(a){d.addExplainToPicks(a,c);d.trigger("reset");});}else{d.each(function(a){a.set("dtPoints",a.get("points"));});d.trigger("reset");}});return f;},eventState:function(){return "dream-team";},totalPoints:function(){return this.reduce(function(a,b){return a+b.get("points");},0);},topPick:function(){if(!this.length)return;return this.get(this.topPlayer.id);},canBeManaged:function(){return false;}});a.PickErrorItem=a.Model.extend({initialize:function(){if(!this.get("message"))this.set("message",this.get("key"));}});a.PickErrorList=a.Collection.extend({model:a.PickErrorItem});});window.ISMApp.module("Entities",function(a,b,c,d,e,f){"use strict";a.SquadInfoItem=a.Model.extend({defaults:{type:null,value:null}});a.SquadInfo=a.Collection.extend({model:a.SquadInfoItem});a.Squad=a.Collection.extend({model:a.Element,mode:"selection",initialize:function(){this.settings={size:b.request("get:setting","squad_squadsize"),teamLimit:b.request("get:setting","squad_team_limit"),spend:b.request("get:setting","squad_total_spend"),select:b.request("get:setting","squad_select_flat"),specialMin:b.request("get:setting","squad_special_min"),specialMax:b.request("get:setting","squad_special_max")};this.elementTypes=b.request("get:elementTypes");this.createRenderHelpers();this.isValid=false;this.visibleErrors=[];this.visibleInfo=new a.SquadInfo();this.setWindowStatus();this.plainByType=new b.Entities.Collection();this.elementTypes.each(function(a){var c=a.clone();c.set("elements",new b.Entities.Collection());this.plainByType.add(c);},this);this.on("reset",function(){this.resetInfo();this.resetPlainByType();},this);},setWindowStatus:function(){this.windowStatus=b.request("get:transferWindow:status");},createRenderHelpers:function(){this.ranges={};this.dividers={};this.etAtPos=[];var a,b=this.settings.select.length,c,d=0,e;for(a=1;a<b;a++){c=this.settings.select[a];this.ranges[a]=[d,(d-1+c)];this.dividers[d]=this.elementTypes.get(a);for(e=0;e<c;e++)this.etAtPos.push(a);d+=c;}},createDummyForPosition:function(a){var b=this.elementTypes.get(this.etAtPos[a]).clone();b.set("element_type",b.get("id"),{silent:true});b.set("id",null,{silent:true});return b;},emptyAndPad:function(){var a,b=this.etAtPos.length,c=[];for(a=0;a<b;a++)c.push(this.createDummyForPosition(a));this.reset(c,{"silent":true});this.validate();this.trigger("reset");},getElement:function(a){var b=a.get("element_type"),c=this.ranges[b][0],d=this.ranges[b][1],e,f;for(e=c;e<=d;e++){f=this.at(e);if(f.get("id")===a.get("id"))return f;}return null;},getPositionForElement:function(a){var b=a.get("element_type"),c=this.ranges[b][0],d=this.ranges[b][1],e,f;for(e=c;e<=d;e++){f=this.at(e);if(!f.get("isElement"))return e;}return null;},addElement:function(a,b){b=b||false;var c=false;if(this.getElement(a))return;var d=this.getPositionForElement(a);if(d!==null){this.remove(this.at(d),{silent:true});this.add(a,{"at":d},{silent:true});c=true;}if(b)this.addElementNoise(a,c);},addElementNoise:function(a,b){this.validate();this.trigger("reset");if(b)this.addInfo({"type":"addition","value":a});},removeElement:function(a){var b=this.indexOf(a);var c=false;if(b!==-1){this.remove(this.at(b),{silent:true});this.add(this.createDummyForPosition(b),{"at":b,"silent":true});c=true;}this.validate();this.trigger("reset");if(c)this.addInfo({"type":"removal","value":a});},selected:function(){return this.where({isElement:true}).length;},selectedByType:function(a){return this.where({isElement:true,element_type:a}).length;},selectedSpecial:function(a){return this.where({isElement:true,special:true}).length;},toSpend:function(){var a=0;this.each(function(b){if(b.get("isElement"))a+=b.get("now_cost");});return this.settings.spend-a;},getTeamsSelected:function(){var a,c=[],d=b.request("get:teams").length;for(a=1;a<=d;a++)c[a]=0;this.each(function(a,b){if(a.get("isElement"))c[a.get("team")]++;});return c;},autoCompleteSort:function(a,b){return(b.get("form")-a.get("form"))||(b.get("now_cost")-a.get("now_cost"));},autoComplete:function(){this.preAutocomplete();f.each(this.autoCompleteSuggestions(),function(a){this.addElement(a);},this);this.validate();if(!this.isValid)this.visibleErrors.push({"type":"autoComplete","value":""});this.trigger("reset");},preAutocomplete:function(){return;},autoCompleteSuggestions:function(){var a,c=b.request("get:elements"),d=this.elementTypes.length,e=f.clone(this.settings.select),g=c.groupBy("element_type"),h=[],i=this.getTeamsSelected(),j={},k=this.settings.size,l=0,m=this.toSpend(),n=0,o=[],p=this.settings.specialMin,q=this.settings.specialMax,r=this.selectedSpecial();for(a=1;a<=d;a++)h[a]={"total":0,"count":0,"average":0,"weighted":0};c.each(function(a){var b=a.get("element_type");h[b].total+=a.get("now_cost");h[b].count++;});for(a=1;a<=d;a++){h[a].average=h[a].total/h[a].count;g[a]=f.shuffle(g[a]).sort(this.autoCompleteSort);}this.each(function(a,b){if(a.get("isElement")){var c=a.get("element_type");e[c]--;j[a.get("id")]=true;k--;}});for(a=1;a<=d;a++)l+=e[a]*h[a].average;for(a=1;a<=d;a++)h[a].weighted=h[a].average*(m/l);this.each(function(a,b){if(a.get("isElement"))return;var c=this.etAtPos[b];var d=h[c].weighted+n;var e=p&&r<p?true:false;var k=q&&r>=q?true:false;var l=f.find(g[c],function(a){return !j[a.get("id")]&&a.get("now_cost")<=m&&a.get("now_cost")<=d&&a.get("status")==="a"&&i[a.get("team")]<this.settings.teamLimit&&a.get("chance_of_playing_next_round")!==0&&(!e||a.get("special"))&&(!k||!a.get("special"));},this);if(l){j[l.get("id")]=true;m-=l.get("now_cost");i[l.get("team")]++;n=(d-l.get("now_cost"));if(l.get("special"))r++;o.push(l);}else{}},this);return o;},validate:function(){this.isValid=true;var a=false,b,c,d=this.getTeamsSelected(),e=d.length,f;this.visibleErrors=[];if(this.length!==this.settings.size){this.emptyAndPad();return false;}if(this.windowStatus==="closed")this.isValid=false;this.each(function(b,c){if(!b.get("isElement")){this.isValid=false;return;}if(b.get("element_type")!==this.etAtPos[c])a=true;},this);if(a){this.emptyAndPad();return false;}b=this.toSpend();if(b<0){this.isValid=false;this.visibleErrors.push({"type":"budget","value":b});}for(c=1;c<=e;c++)if(d[c]>this.settings.teamLimit){this.isValid=false;this.visibleErrors.push({"type":"team","value":c});}if(this.settings.specialMin!==undefined){f=this.selectedSpecial();if(f<this.settings.specialMin){this.isValid=false;this.visibleErrors.push({"type":"specialMin","value":f});}}if(this.settings.specialMax!==undefined){f=this.selectedSpecial();if(f>this.settings.specialMax){this.isValid=false;this.visibleErrors.push({"type":"specialMax","value":f});}}return this.isValid;},hasBankError:function(){return this.toSpend()<0?true:false;},hasCountError:function(){return this.selected()!==this.settings.size?true:false;},hasSpecialError:function(){var a;if(this.settings.specialMin!==undefined){a=this.selectedSpecial();if(a<this.settings.specialMin)return true;}if(this.settings.specialMax!==undefined){a=this.selectedSpecial();if(a>this.settings.specialMax)return true;}return false;},toAPI:function(){var a=[];this.each(function(b){a.push({"element":b.get("id"),"purchase_price":b.get("now_cost")});});return a;},canReset:function(){return this.selected()?true:false;},canAutoComplete:function(){var a,b,c=this.selected(),d=this.settings.size-c,e;if(d<=0)return false;if(this.toSpend()<=0)return false;this.validate();b=this.visibleErrors.length;for(a=0;a<b;a++){e=this.visibleErrors[a].type;if(e==="team")return false;if(e==="specialMax")return false;if(e==="specialMin"&&d<(this.settings.specialMin-this.visibleErrors[a].value))return false;}return true;},resetInfo:function(){this.visibleInfo.reset();},addInfo:function(a){this.visibleInfo.add(a);},canEnter:function(){return this.isValid;},restore:function(){this.emptyAndPad();},changesBlocked:function(){return false;},addStatusToElement:function(a){var b=this.getPositionForElement(a)===null?false:true;var c=this.getElement(a)?"in":"out";a.set({squadHasRoom:b,squadStatus:c});},addStatusToElements:function(a){a.each(function(a){if(a.get("isElement"))this.addStatusToElement(a);},this);},shirtZeroIdAtPosition:function(a){var c=b.request("get:setting","ui_shirt_specific_flat"),d="0",e=this.etAtPos[a];if(c&&c[e])d+=("_"+e);return d;},resetPlainByType:function(){this.elementTypes.each(function(a){var b=this.plainByType.get(a.get("id"));b.get("elements").reset(this.filterByType(a));},this);},filterByType:function(a){return this.filter(function(b){if(b.get("isElement"))return b.get("element_type")==a.get("id");else return b.get("singular_name")==a.get("singular_name");});}});a.SquadTransfer=a.Squad.extend({mode:"transfers",playWildcard:false,initialize:function(){a.Squad.prototype.initialize.apply(this,arguments);this.on("reset",function(){if(!this.transfersCostIgnoringWildcard())this.playWildcard=false;},this);},drfUrl:function(){return "/drf/transfers";},fetchAndPopulate:function(){var a=this;return e.ajax({type:"get",url:this.drfUrl()}).done(function(c){b.execute("check:current:event",c.ce);b.execute("login:entry",c.entry);var d=b.request("get:loggedInEntry");d.populateChipsCollection(c.chips);d.set("wildcard_status",c.helper.wildcard_status);if(c.transfer_window){b.execute("create:transferWindow",c.transfer_window);a.setWindowStatus();}a.populate(c.picks);});},populate:function(a,c){c=c||{};f.defaults(c,{trigger:true});var d,e=a.length,g=[],h;for(d=0;d<e;d++)g.push(f.extend(a[d],b.request("get:element",a[d].element).attributes,{"isTransfer":true,"transferStatus":"original"}));h=new b.Entities.SquadTransfer(g);this.reset(h.models);this.original=this.clone();if(c.trigger)this.trigger("populated");},cloneElement:function(a,b){var c=a.clone();c.set({"isElement":b=="removed"?false:true,"isTransfer":true,"transferStatus":b});return c;},addElement:function(a,b){b=b||false;var c=a.get("element_type"),d=this.ranges[c][0],e=this.ranges[c][1],f,g,h,i,j=null,k=false,l=a;for(f=d;f<=e;f++){g=this.at(f);if(g.get("id")===a.get("id")){if(g.get("transferStatus")==="removed")this.restoreElement(g);return;}if(j===null&&!g.get("isElement"))j=f;}if(j!==null){for(f=d;f<=e;f++){h=this.at(f);i=this.original.at(f);if(i.get("id")===a.get("id"))if(h.get("transferStatus")==="proposed"){this.removeElement(h);this.restoreElement(this.at(f),false);a=h;break;}}this.remove(this.at(j),{silent:true});this.add(this.cloneElement(a,"proposed"),{"at":j},{silent:true});k=true;}if(b)this.addElementNoise(l,k);},removeElement:function(a){if(a.get("transferStatus")==="removed")return this.restoreElement(a);var b=0;var c=false;this.each(function(d){if(d.get("id")===a.get("id")){this.remove(this.at(b),{silent:true});this.add(this.cloneElement(this.original.at(b),"removed"),{"at":b,"silent":true});c=true;}b++;},this);this.validate();this.trigger("reset");if(c)this.addInfo({"type":"removal","value":a});},restoreElement:function(a,b){b=b!==undefined?b:true;var c=this.indexOf(a);var d=false;if(c!==-1){this.remove(this.at(c),{silent:true});this.add(this.cloneElement(this.original.at(c),"original"),{"at":c,"silent":true});d=true;}if(b){this.validate();this.trigger("reset");}if(d)this.addInfo({"type":"restore","value":a});},numEmpty:function(){return this.where({transferStatus:"removed"}).length;},numProposed:function(){return this.where({transferStatus:"proposed"}).length;},numMade:function(){return this.numEmpty()+this.numProposed();},canEnter:function(){return this.isValid&&this.numProposed()?true:false;},canReset:function(){return this.numMade()?true:false;},restore:function(){this.reset(this.original.models,{silent:true});this.validate();this.trigger("reset");},toSpend:function(){var a=b.request("get:loggedInEntry").get("bank");this.each(function(b,c){var d=b.get("transferStatus");if(d==="removed")a+=b.get("selling_price");else if(d==="proposed"){a+=this.original.at(c).get("selling_price");a-=b.get("now_cost");}},this);return a;},transfersLimit:function(){var a=b.request("get:loggedInEntry");var c=b.request("get:setting","transfers_limit");return c+a.get("extra_free_transfers")-a.get("event_transfers");},transfersRemaining:function(){return this.transfersLimit()-this.numMade();},freeTransfersRemaining:function(){return Math.max(this.transfersRemaining(),0);},transfersCostIgnoringWildcard:function(){var a=b.request("get:setting","transfers_type");if(a!=="cost")return 0;var c=b.request("get:setting","transfers_cost");if(!c)return 0;var d=this.transfersRemaining();if(d>=0)return 0;else return(Math.min(-d,this.numMade())*c);},transfersCost:function(){if(this.playWildcard)return 0;return this.transfersCostIgnoringWildcard();},toAPI:function(a){a=a||false;var c=[];this.each(function(a,b){if(a.get("transferStatus")==="proposed"){var d=this.original.at(b);c.push({"element_in":a.get("id"),"element_out":d.get("element"),"purchase_price":a.get("now_cost"),"selling_price":d.get("selling_price")});}},this);return{"confirmed":a,"entry":b.request("get:loggedInEntry").get("id"),"event":b.request("get:event:next").get("id"),"transfers":c,"wildcard":this.playWildcard};},changesBlocked:function(){var c=a.Squad.prototype.changesBlocked.apply(this,arguments);if(b.request("get:setting","transfers_type")==="limit")if(this.transfersRemaining()<=0)c=true;return c;},addStatusToElement:function(a){var b=this.getPositionForElement(a)===null?false:true;var c="";var d=this.getElement(a);if(d)c=d.get("transferStatus")==="removed"?"removed":"in";else c="out";a.set({squadHasRoom:b,squadStatus:c});},doesWildcardMakeSense:function(){var a=b.request("get:setting","transfers_type");if(a==="limit")return this.transfersRemaining()<=0;else if(a==="cost")return this.transfersCost()>0;return false;}});a.SquadLoan=a.SquadTransfer.extend({mode:"loans",activeLoans:false,initialize:function(){a.SquadTransfer.prototype.initialize.apply(this,arguments);this.loanEvents=1;},drfUrl:function(){return "/drf/loans";},fetchAndPopulate:function(){var a=this;return e.ajax({type:"get",url:this.drfUrl()}).done(function(c){b.execute("check:current:event",c.ce);b.execute("login:entry",c.entry);a.maximumRounds=c.maximum_rounds;if(c.loans.length){a.activeLoans=true;a.populate(c.picks,{trigger:false});a.trigger("loans:active",c.loans);}else a.populate(c.picks);});},spentPoints:function(){var a=b.request("get:setting","loans_cost_"+this.loanEvents);return this.numMade()*a;},inOutElements:function(){var a=[];this.each(function(b,c){if(b.get("transferStatus")==="proposed"){var d=this.original.at(c);a.push({"element_in":b.get("id"),"element_out":d.get("element")});}},this);return a;},toAPI:function(){return{"entry":b.request("get:loggedInEntry").get("id"),"event":b.request("get:event:next").get("id"),"rounds":this.loanEvents,"points":this.spentPoints(),"loans":this.inOutElements()};},addStatusToElement:function(b){if(this.activeLoans)b.set({squadHasRoom:false,squadStatus:"activeLoans"});else a.SquadTransfer.prototype.addStatusToElement.apply(this,arguments);}});});window.ISMApp.module("Entities",function(a,b,c,d,e,f){"use strict";var g=function(a){return "ismjs-cat-"+a;};a.Stat=a.Model.extend({initialize:function(){this.set("className",g(this.get("category")));}});a.Stats=a.Collection.extend({model:a.Stat});a.StatCategory=a.Model.extend({initialize:function(){this.set("className",g(this.get("value")));this.set("selected",false);}});a.StatCategories=a.Collection.extend({model:a.StatCategory,getSelected:function(){return this.findWhere({selected:true});},setSelected:function(a){this.each(function(a){a.set("selected",false);});a.set("selected",true);b.vent.trigger("changed:statCategory");},allClasses:function(){return this.pluck("className");}});var h=new a.Stats();var i=new a.StatCategories();b.commands.setHandler("create:stats",function(c){h=new a.Stats(c.headings);h.each(function(a){var c=a.get("abbr");if(!c)a.set("abbr",b.request("abbreviate:stat",a.get("label")));});if(c.categories){i=new a.StatCategories(f.map(c.categories,function(a,b){return{value:b,label:a};}));i.at(0).set("selected",true);}});b.reqres.setHandler("get:stats",function(){return h;});b.reqres.setHandler("get:stat:fromField",function(a){return h.findWhere({"field":a});});b.reqres.setHandler("get:statCategories",function(){return i;});b.reqres.setHandler("abbreviate:stat",function(a){a=a.replace(/[\(\)]/,"","g");return f.map(a.split(" "),function(a){return a[0]?a[0].toUpperCase():"";}).join("");});b.reqres.setHandler("get:stats:fieldNames",function(){return h.pluck("field");});});window.ISMApp.module("Entities",function(a,b,c,d,e,f){"use strict";a.StatsOption=a.Model.extend({});a.StatsOptions=a.Collection.extend({model:a.StatsOption});var g=new a.StatsOptions();b.commands.setHandler("create:statsOptions",function(b){g=new a.StatsOptions(b);});b.reqres.setHandler("get:statsOptions",function(){return g;});b.reqres.setHandler("get:statOption:fromKey",function(a){return g.findWhere({"key":a});});});window.ISMApp.module("Entities",function(a,b,c,d,e,f){"use strict";a.Watch=a.Model.extend({});a.Watched=a.Collection.extend({model:a.Watch,getChangeUrl:function(a){return "/drf/watchlist/element/"+a.get("code")+"/";},hasElement:function(a){return this.findWhere({element:a.get("code")})?true:false;},addElement:function(a){var b=e.ajax({url:this.getChangeUrl(a),type:"POST",context:this});b.done(this.refresh);return b;},removeElement:function(a){var b=e.ajax({url:this.getChangeUrl(a),type:"DELETE",context:this});b.done(this.refresh);return b;},refresh:function(a){this.reset(f.map(a,function(a){return{element:a};}));}});var g=new a.Watch();b.commands.setHandler("create:watched",function(b){g=new a.Watched();g.refresh(b);});b.reqres.setHandler("get:watched",function(){return g;});});window.ISMApp.module("Apps.EntryApp",function(a,b,c,d,e,f){"use strict";a.Router=b.Router.Named.extend({namedRoutes:{"entry_details":["entry/details","showDetails"],"entry_history":["entry/:entryId/history","showHistory"],"entry_challenges":["entry/:entryId/challenges","showChallenges"]}});a.API={getSummary:function(c){var d=b.request("utils:registry:get","entry/summary/",a.SummaryController,{clearCache:false,destroyAll:false});return d.getLayoutView(c);},showDetails:function(){if(!b.request("player:check:auth",["LOGGED_IN_ENTRY"]))return;var d=b.request("router:named:get","entry_details",{includeRoot:false});b.execute("utils:loader:show");var f=b.request("utils:registry:get",d,a.DetailsController);var g=f.show();e.when(g).then(function(a,e){c.history.navigate(d);b.execute("utils:page:change",a,e);},function(){window.alert("Error");b.execute("utils:loader:hide");});},show:function(a,d,f){a=parseInt(a,10);var g=b.request("router:named:get",d,{includeRoot:false,substitutions:{":entryId":a}});b.execute("utils:loader:show");var h=b.request("utils:registry:get",d,f);var i=h.show(a);e.when(i).then(function(a,d){c.history.navigate(g);b.execute("utils:page:change",a,d);},function(){window.alert("Error");b.execute("utils:loader:hide");});},showHistory:function(b){this.show(b,"entry_history",a.HistoryController);},showChallenges:function(b){this.show(b,"entry_challenges",a.ChallengesController);}};a.on("start",function(){b.reqres.setHandler("get:entry:summary",function(b){return a.API.getSummary(b);});new a.Router({controller:a.API});});});window.ISMApp.module("Apps.EntryApp",function(a,b,c,d,e,f){"use strict";a.SummaryController=d.Object.extend({getLayoutView:function(c){var d=new b.Entities.Entry(c.entry);var e=new b.Entities.Leagues();e.populate(c.leagues);var f=new b.Entities.CupSummaryMatches();if(c.leagues.cup&&c.leagues.cup.length)f.populate(c.leagues.cup,d);var g=e.getFanLeagueData();var h=g?g.team:null;var i=new a.SummaryLayoutView({model:d,fanLeagueTeam:h,hasCupMatches:f.length?true:false});this.listenTo(i,"before:show",function(){if(i.$(i.fanLeague.el).length)if(g)i.fanLeague.show(this.getFanLeagueView(g));if(i.$(i.customLeagues.el).length){var c=e.getCustomLeagues();if(c.length)i.customLeagues.show(this.getCustomSummaryView(new b.Entities.Leagues(c)));}var h=new b.Entities.Leagues(e.getNonSystemClassicLeagues());if(h.length)i.classicLeagues.show(this.getClassicSummaryView(h));var j=new b.Entities.Leagues(e.getNonSystemH2HLeagues());if(j.length)i.h2hLeagues.show(this.getH2HSummaryView(j));i.globalLeagues.show(this.getGlobalSummaryView(new b.Entities.Leagues(e.getSystemLeagues())));if(i.$(i.cupMatches.el).length)if(f.length)i.cupMatches.show(this.getCupSummaryView(f));if(i.$(i.kit.el).length){var k=new a.SummaryKitView();i.kit.show(k);d.renderKitInView(k);}});return i;},getCustomSummaryView:function(b){var c=new a.SummaryCustomView({collection:b});return c;},getClassicSummaryView:function(b){var c=new a.SummaryClassicView({collection:b});return c;},getH2HSummaryView:function(b){var c=new a.SummaryH2HView({collection:b});return c;},getGlobalSummaryView:function(b){var c=new a.SummaryGlobalView({collection:b});return c;},getFanLeagueView:function(c){var d=new a.SummaryFanLeagueView({model:c.league,team:b.request("get:team",c.team)});return d;},getCupSummaryView:function(b){var c=new a.CupSummaryView({collection:b});return c;}});a.BaseHistoryController=d.Object.extend({show:function(a){var c=e.Deferred();var d=this;e.get(this.url(a)).done(function(a){var e=d.getView(a);var f=b.request("get:entry:summary",a);c.resolve(e,f);});return c;},listenForElementsInOut:function(a){this.listenTo(a,"childview:showElementIn",this.showElementIn);this.listenTo(a,"childview:showElementOut",this.showElementOut);},showElementIn:function(a,c){b.execute("show:element",c.model.get("elIn"));},showElementOut:function(a,c){b.execute("show:element",c.model.get("elOut"));}});a.HistoryController=a.BaseHistoryController.extend({url:function(a){return "/drf/entry/"+a+"/history";},getView:function(c){var d=new a.HistoryLayoutView();var e=new a.HistoryEventView({collection:new b.Entities.Collection(c.history)});var f;if(c.chips!==undefined)f=new a.HistoryChipsView({collection:new b.Entities.Collection(c.chips)});var g=new a.HistorySeasonView({collection:new b.Entities.Collection(c.season)});this.listenTo(d,"show",function(){d.rounds.show(e);if(c.season.length)d.seasons.show(g);if(f)d.chips.show(f);});return d;}});a.DetailsController=d.Object.extend({show:function(){var a=e.Deferred();a.resolve(this.getView(),b.request("get:static:side"));return a;},getView:function(){var c=b.request("get:loggedInEntry");var d=new a.DetailsView({model:c});this.listenTo(d,"form:submitted",this.updateDetails);return d;},updateDetails:function(a){b.execute("utils:loader:show");var c=a.model.updateDetails();c.done(function(){b.execute("show:my-team");});}});a.ChallengesController=d.Object.extend({initialize:function(){this.challenges=new b.Entities.Challenges();this.challengedThis=new b.Entities.Challenges();this.challengedNext=new b.Entities.Challenges();this.challengedPast=new b.Entities.Challenges();this.celebrities=new b.Entities.Celebrities();this.controlModel=new b.Entities.Model({celebrity:null});this.entry=b.request("get:loggedInEntry");this.ownEntry=false;},url:function(a){return "/drf/entry/"+a+"/challenges";},show:function(a){var c=e.Deferred();var d=this;e.get(this.url(a)).done(function(a){d.challenges.populate(a.challenges);d.challengedThis.reset(d.challenges.thisEvent());d.challengedNext.reset(d.challenges.nextEvent());d.challengedPast.reset(d.challenges.pastEvents());d.celebrities.populate(a.celebrities);d.ownEntry=a.own_entry;var e=d.getLayout();var f=b.request("get:entry:summary",a);c.resolve(e,f);});return c;},getLayout:function(){var c=b.request("get:event:current");var d=new a.ChallengesLayout({thisEvent:c,showPast:this.challengedPast.length});if(c)this.listenTo(d,"before:show",function(){d.challengesThis.show(this.getCurrentView());});if(b.request("get:event:next")){this.listenTo(d,"before:show",function(){d.challengesNext.show(this.getNextLayout());});this.listenTo(this.challengedNext,"challenges:updated",function(){var a=this.getNextLayout();d.challengesNext.show(a);});}if(this.challengedPast.length)this.listenTo(d,"before:show",function(){d.challengesPast.show(this.getPastView());});return d;},getCurrentView:function(){var b=new a.ChallengesContainer({collection:this.challengedThis,showDelete:false,showRound:false});return b;},getPastView:function(){var b=new a.ChallengesContainer({collection:this.challengedPast,showDelete:false,showRound:true});return b;},getNextLayout:function(){var b=new a.ChallengesNextLayout({celebrities:this.celebrities,challenges:this.challengedNext,model:this.controlModel,ownEntry:this.ownEntry});this.listenTo(b,"before:show",function(){b.challengesList.show(this.getNextView());});this.listenTo(b,"form:submitted",this.createChallenge);return b;},getNextView:function(){var b=new a.ChallengesContainer({collection:this.challengedNext,showDelete:this.ownEntry,showRound:false});this.listenTo(b,"childview:challenge:delete",this.deleteChallenge);return b;},createChallenge:function(){b.execute("loader:show");var a=window.JSON.stringify({"challenge":this.controlModel.get("celebrity")});e.ajax({url:this.url(this.entry.get("id")),type:"post",data:a,contentType:"application/json"}).done(f.bind(this.creationDone,this)).fail(f.bind(this.creationFail,this));},creationDone:function(a){this.challengedNext.add(a,{silent:true});this.celebrities.incrementChallengedNextForEntry(a.entry_2);this.challengedNext.trigger("challenges:updated");b.execute("loader:hide");},creationFail:function(){b.execute("utils:navigation:reload");},deleteChallenge:function(a,b){var c=this;var d=b.model;var e=d.remove();e.done(function(){c.deletionDone(d);});e.fail(this.deletionFail);},deletionDone:function(a){this.challengedNext.remove(a,{silent:true});this.celebrities.decrementChallengedNextForEntry(a.get("entry_2"));this.controlModel.set({celebrity:null});this.challengedNext.trigger("challenges:updated");b.execute("loader:hide");},deletionFail:function(){b.execute("utils:navigation:reload");}});});window.ISMApp.module("Apps.EntryApp",function(a,b,c,d,e,f){"use strict";a.SummaryLayoutView=b.LayoutView.extend({template:"#ismt-entry-summary-layout",behaviors:{Link:{}},regions:{"kit":"#ismr-kit","fanLeague":"#ismr-fan-league","customLeagues":"#ismr-entry-custom","classicLeagues":"#ismr-entry-classic","h2hLeagues":"#ismr-entry-h2h","globalLeagues":"#ismr-entry-global","cupMatches":"#ismr-cup-matches"},serializeData:function(){var a=b.LayoutView.prototype.serializeData.apply(this,arguments);var c=this.model.get("favourite_team");if(c){a.favourite_team_name=b.request("get:teams").get(c).get("name");a.favourite_team_short_name=b.request("get:teams").get(c).get("short_name");}else a.favourite_team_name=null;a.fanLeagueTeam=this.options.fanLeagueTeam;a.game_has_wildcards=b.request("get:setting","transfer_wildcards")?true:false;var d=b.request("get:setting","cup_start_event_id");var e=b.request("get:event:current");a.cupStart=d;a.cupStarted=e&&e.get("id")>=d?true:false;a.hasCupMatches=this.options.hasCupMatches?true:false;a.summary_total_players=b.request("get:entry:total");a.currentEventId=e?e.get("id"):null;a.started=this.model.started();return a;}});a.SummaryFanLeagueView=b.ItemView.extend({template:"#ismt-entry-summary-fan-league",initialize:function(a){this.team=a.team;},serializeData:function(){var a=b.ItemView.prototype.serializeData.apply(this,arguments);a.team_id=this.team.get("id");a.team_name=this.team.get("name");a.team_short_name=this.team.get("short_name");return a;}});a.SummaryLeagueItemView=b.ItemView.extend({template:"#ismt-entry-summary-leagues-item",tagName:"tr"});a.SummaryCustomView=b.CompositeView.extend({template:"#ismt-entry-summary-leagues-custom",childView:a.SummaryLeagueItemView,childViewContainer:"tbody"});a.SummaryClassicView=b.CompositeView.extend({template:"#ismt-entry-summary-leagues-classic",childView:a.SummaryLeagueItemView,childViewContainer:"tbody"});a.SummaryH2HView=b.CompositeView.extend({template:"#ismt-entry-summary-leagues-h2h",childView:a.SummaryLeagueItemView,childViewContainer:"tbody"});a.SummaryGlobalView=b.CompositeView.extend({template:"#ismt-entry-summary-leagues-global",childView:a.SummaryLeagueItemView,childViewContainer:"tbody"});a.CupSummaryItemView=b.ItemView.extend({template:"#ismt-entry-summary-cup-item",tagName:"tr"});a.CupSummaryView=b.CompositeView.extend({template:"#ismt-entry-summary-cup",childView:a.CupSummaryItemView,childViewContainer:"tbody"});a.SummaryKitView=b.ItemView.extend({template:"#ismt-entry-summary-kit"});a.HistoryLayoutView=b.LayoutView.extend({template:"#ismt-entry-history-layout",regions:{rounds:"#ismr-event-history",chips:"#ismr-event-chips",seasons:"#ismr-season-history"}});a.HistoryEventItemView=b.ItemView.extend({template:"#ismt-entry-history-event-item",tagName:"tr",behaviors:{Link:{}},templateHelpers:function(){return f.extend(b.ItemView.prototype.templateHelpers,{eventName:function(){var a=b.request("get:event",this.event);return a.get("name");}});}});a.HistoryEventView=b.CompositeView.extend({template:"#ismt-entry-history-event",childView:a.HistoryEventItemView,childViewContainer:"tbody"});a.HistorySeasonItemView=b.ItemView.extend({template:"#ismt-entry-history-season-item",tagName:"tr"});a.HistorySeasonView=b.CompositeView.extend({template:"#ismt-entry-history-season",childView:a.HistorySeasonItemView,childViewContainer:"tbody"});a.HistoryChipsItemView=b.ItemView.extend({template:"#ismt-entry-history-chips-item",tagName:"tr",behaviors:{Link:{}},serializeData:function(){var a=b.ItemView.prototype.serializeData.apply(this,arguments);var c=new b.Entities.Chip({name:a.name});a.displayName=c.get("displayName");return a;}});a.HistoryChipsView=b.CompositeView.extend({template:"#ismt-entry-history-chips",childView:a.HistoryChipsItemView,childViewContainer:"tbody"});a.DetailsView=b.ItemView.extend({navigationTab:"team",template:"#ismt-entry-details",ui:{button:".ismjs-submit"},events:{"click @ui.button":"buttonClicked"},modelEvents:{"change:name":"checkValidity","change:email":"checkValidity","change:favourite_team":"checkValidity","change:kit_shirt_type":"renderKitAndDesigner","change:kit_shirt_logo":"renderKit","change:kit_socks_type":"renderKitAndDesigner","change:kit_shirt_base":"renderKit","change:kit_shirt_sleeves":"renderKit","change:kit_shirt_secondary":"renderKit","change:kit_shorts":"renderKit","change:kit_socks_base":"renderKit","change:kit_socks_secondary":"renderKit"},bindings:{"#ismjs-name":"name","#ismjs-fave-team-id":{observe:"favourite_team",selectOptions:{collection:function(){return this.getTeamsCollection();}}},"#ismjs-email":"email","#ismjs-shirt-base":"kit_shirt_base","#ismjs-shirt-other":"kit_shirt_secondary","#ismjs-shirt-sleeves":"kit_shirt_sleeves","#ismjs-shirt-style":{observe:"kit_shirt_type",selectOptions:{collection:function(){return [{label:"Plain",value:"plain"},{label:"Stripes",value:"stripes"},{label:"Hoops",value:"hoops"}];}}},"#ismjs-shirt-logo":{observe:"kit_shirt_logo",selectOptions:{collection:function(){return [{label:"None",value:"none"},{label:"EA Sports on White",value:"ea-sports-on-white"}];}}},"#ismjs-shorts":"kit_shorts","#ismjs-socks":"kit_socks_base","#ismjs-socks-hoops":"kit_socks_secondary","#ismjs-sock-style":{observe:"kit_socks_type",selectOptions:{collection:function(){return [{label:"Plain",value:"plain"},{label:"Hoops",value:"hoops"}];}}}},onRender:function(){this.stickit();this.checkValidity();},onAttach:function(){if(e.spectrum)this.kitDesigner();},kitDesigner:function(){var a=this;this.renderKitAndDesigner();var b={"#ismjs-shirt-base":function(a,b){b.set("kit_shirt_base",a);},"#ismjs-shirt-sleeves":function(a,b){b.set("kit_shirt_sleeves",a);},"#ismjs-shirt-other":function(a,b){b.set("kit_shirt_secondary",a);},"#ismjs-shorts":function(a,b){b.set("kit_shorts",a);},"#ismjs-socks":function(a,b){b.set("kit_socks_base",a);},"#ismjs-sock-hoops":function(a,b){b.set("kit_socks_secondary",a);}};f.each(b,function(b,c){var d=e(c).spectrum({chooseText:"Set",showInput:true,showAlpha:false,showPalette:true,palette:[],localStorageKey:"spectrum.kitdesigner",preferredFormat:"hex"});d.on("move.spectrum",function(c,d){b(d.toHexString(),a.model);});});},renderKit:function(){this.model.renderKitInView(this);},renderDesigner:function(){this.customiseDesigner();},renderKitAndDesigner:function(){this.model.renderKitInView(this);this.customiseDesigner();},customiseDesigner:function(){if(this.model.get("kit_shirt_type")==="plain")e(".input_shirt_other-selection",this.$el).hide();else if(this.model.get("kit_shirt_type")==="stripes")e(".input_shirt_other-selection",this.$el).show();else if(this.model.get("kit_shirt_type")==="hoops")e(".input_shirt_other-selection",this.$el).show();if(this.model.get("kit_socks_type")==="plain")e(".input_socks_other-selection",this.$el).hide();else e(".input_socks_other-selection",this.$el).show();},checkValidity:function(){var a=this.model.validForUpdating();if(a)this.buttonEnable();else this.buttonDisable();},buttonDisable:function(){this.ui.button.prop("disabled",true);},buttonEnable:function(){this.ui.button.prop("disabled",false);},buttonClicked:function(a){a.preventDefault();this.buttonDisable();if(this.kitEntity)this.model.set("kit",this.kitEntity.get("repr"));this.trigger("form:submitted",this);},getTeamsCollection:function(){var a=b.request("get:teams").map(function(a){return{label:a.get("name"),value:a.get("id")};});a.unshift({label:b.request("get:vocab","none-of-these"),value:0});return a;},serializeData:function(){var a=b.ItemView.prototype.serializeData.apply(this,arguments);var c=b.request("get:event",this.model.get("started_event"));a.nextDeadline=c?c.get("deadline_time_formatted"):"";return a;}});a.ChallengesLayout=b.LayoutView.extend({navigationTab:"challenges",template:"#ismt-entry-challenges-layout",regions:{"challengesThis":"#ismr-challenges-this","challengesNext":"#ismr-challenges-next","challengesPast":"#ismr-challenges-past"},behaviors:{Link:{}},serializeData:function(){var a=b.LayoutView.prototype.serializeData.apply(this,arguments);a.thisEvent=this.options.thisEvent;a.showPast=this.options.showPast;return a;}});a.ChallengesNextLayout=b.LayoutView.extend({template:"#ismt-entry-challenges-next",regions:{"challengesList":"#ismr-challenges-next-list"},ui:{button:".ismjs-challenge-submit"},events:{"click @ui.button":"buttonClicked"},modelEvents:{"change":"checkValidity"},behaviors:{FacebookFeedDialog:{},Link:{},TwitterShareButton:{}},bindings:function(){return{"#ismjs-celebrities":{observe:"celebrity",selectOptions:{collection:this.options.celebrities.selectable(this.options.challenges.challengedNextEvent()),defaultOption:{"label":b.request("get:vocab","select"),value:null}}}};},onRender:function(){this.stickit();},checkValidity:function(){if(this.model.get("celebrity"))this.buttonEnable();else this.buttonDisable();},buttonDisable:function(){this.ui.button.prop("disabled",true);},buttonEnable:function(){this.ui.button.prop("disabled",false);},buttonClicked:function(a){a.preventDefault();this.buttonDisable();this.trigger("form:submitted",this);},serializeData:function(){var a=b.LayoutView.prototype.serializeData.apply(this,arguments);a.haveCelebrities=this.options.celebrities.length;a.limitReached=this.options.challenges.limitReached();a.ownEntry=this.options.ownEntry;a.hasChallenges=this.options.challenges.length?true:false;a.challengedT=this.options.celebrities.twitterHandlesOrNames(this.options.challenges.pluck("entry_2")).join(", ");a.challengedF=this.options.celebrities.names(this.options.challenges.pluck("entry_2")).join(", ");return a;}});a.ChallengesItem=b.ItemView.extend({template:"#ismt-entry-challenges-item",tagName:"tr",triggers:{"click .ismjs-challenge-delete":"challenge:delete"},serializeData:function(){var a=b.ItemView.prototype.serializeData.apply(this,arguments);a.showRound=this.options.showRound;a.showDelete=this.options.showDelete;if(this.model.get("inFutureEvent")){a.entry_1_href=b.request("router:named:get","entry_history",{"substitutions":{":entryId":this.model.get("entry_1")}});a.entry_2_href=b.request("router:named:get","entry_history",{"substitutions":{":entryId":this.model.get("entry_2")}});}else{a.entry_1_href=b.request("router:named:get","team_history",{"substitutions":{":entryId":this.model.get("entry_1"),":eventId":this.model.get("event")}});a.entry_2_href=b.request("router:named:get","team_history",{"substitutions":{":entryId":this.model.get("entry_2"),":eventId":this.model.get("event")}});}return a;}});a.ChallengesNone=b.ItemView.extend({template:"#ismt-entry-challenges-none",tagName:"tr",serializeData:function(){var a=b.CompositeView.prototype.serializeData.apply(this,arguments);a.showDelete=this.options.showDelete;a.showRound=this.options.showRound;return a;}});a.ChallengesContainer=b.CompositeView.extend({template:"#ismt-entry-challenges-container",childView:a.ChallengesItem,childViewContainer:"tbody",emptyView:a.ChallengesNone,initialize:function(){f.defaults(this.options,{showDelete:false,showRound:false,extraCols:0});},serializeData:function(){var a=b.CompositeView.prototype.serializeData.apply(this,arguments);a.showDelete=this.options.showDelete;a.showRound=this.options.showRound;return a;},childViewOptions:function(){return{showDelete:this.options.showDelete,showRound:this.options.showRound};}});});window.ISMApp.module("Apps.LeaguesApp",function(a,b,c,d,e,f){"use strict";a.Router=b.Router.Named.extend({namedRoutes:{"leagues_main":["leagues/main","showMain"],"leagues_create_join":["leagues/create-join","showCreateJoin"],"leagues_create_choice":["leagues/create","showCreateChoice"],"leagues_create_classic":["leagues/create/classic","showCreateClassic"],"leagues_create_h2h":["leagues/create/h2h","showCreateH2H"],"leagues_join_choice":["leagues/join","showJoinChoice"],"leagues_join_private":["leagues/join/private","showJoinPrivate"],"leagues_join_public":["leagues/join/public","showJoinPublic"],"leagues_admin_classic":["leagues/admin/:leagueId/classic","showAdminClassic"],"leagues_admin_h2h":["leagues/admin/:leagueId/h2h","showAdminH2H"],"leagues_invite":["leagues/:leagueId/invite","showInvite"],"leagues_renew":["leagues/renew","showRenew"],"leagues_cup_history":["leagues/cup/:entryId","showCupHistory"]}});a.StandingsClassicRouter=b.Router.Named.extend({namedRoutes:{"leagues_standings_classic":["leagues/standings/:leagueId/classic","showStandingsClassic"]},execute:function(a,b){var c=b[0];var d=g(b[1]);f.defaults(d,{phase:1,lsPage:1,lePage:1});a(c,d.phase,d.lsPage,d.lePage);}});a.StandingsH2HRouter=b.Router.Named.extend({namedRoutes:{"leagues_standings_h2h":["leagues/standings/:leagueId/h2h","showStandingsH2H"]},execute:function(a,b){var c=b[0];var d=g(b[1]);f.defaults(d,{lsPage:1,lePage:1,mtPage:1,mnPage:1});a(c,d.lsPage,d.lePage,d.mtPage,d.mnPage);}});a.H2HMatchesRouter=b.Router.Named.extend({namedRoutes:{"leagues_matches_h2h":["leagues/:leagueId/matches/h2h","showMatchesH2H"]},execute:function(a,b){var c=b[0];var d=g(b[1]);f.defaults(d,{page:1,entry:null});a(c,d);}});var g=function(a){if(!a)return{};return f.chain(a.split("&")).map(function(a){var b=a.split("=");return [b[0],parseInt(b[1],10)];}).object().value();};a.API={showMain:function(){var c=b.request("router:named:get","leagues_main",{includeRoot:false});var d=a.MainController;this.showLeaguePageAuth(c,d);},showRenew:function(){var c=b.request("router:named:get","leagues_renew",{includeRoot:false});var d=a.RenewController;this.showLeaguePageAuth(c,d);},showCreateJoin:function(){var c=b.request("router:named:get","leagues_create_join",{includeRoot:false});var d=a.CreateJoinController;this.showLeaguePageAuth(c,d);},showCreateChoice:function(){var c=b.request("router:named:get","leagues_create_choice",{includeRoot:false});var d=a.CreateChoiceController;this.showLeaguePageAuth(c,d);},showCreateClassic:function(){var c=b.request("router:named:get","leagues_create_classic",{includeRoot:false});var d=a.CreateClassicController;this.showLeaguePageAuth(c,d);},showCreateH2H:function(){var c=b.request("router:named:get","leagues_create_h2h",{includeRoot:false});var d=a.CreateH2HController;this.showLeaguePageAuth(c,d);},showJoinChoice:function(){var c=b.request("router:named:get","leagues_join_choice",{includeRoot:false});var d=a.JoinChoiceController;this.showLeaguePageAuth(c,d);},showJoinPrivate:function(){var c=b.request("router:named:get","leagues_join_private",{includeRoot:false});var d=a.JoinPrivateController;this.showLeaguePageAuth(c,d);},showJoinPublic:function(){var c=b.request("router:named:get","leagues_join_public",{includeRoot:false});var d=a.JoinPublicController;this.showLeaguePageAuth(c,d);},showAdminClassic:function(c){var d=b.request("router:named:get","leagues_admin_classic",{includeRoot:false,substitutions:{":leagueId":c}});var e=a.AdminClassicController;this.showLeaguePageAuth(d,e,[c]);},showAdminH2H:function(c){var d=b.request("router:named:get","leagues_admin_h2h",{includeRoot:false,substitutions:{":leagueId":c}});var e=a.AdminH2HController;this.showLeaguePageAuth(d,e,[c]);},showInvite:function(c){var d=b.request("router:named:get","leagues_invite",{includeRoot:false,substitutions:{":leagueId":c}});var e=a.InviteController;this.showLeaguePageAuth(d,e,[c]);},showStandingsClassic:function(c,d,e,f){var g={};if(d>1||e>1||f>1)g={phase:d,lsPage:e,lePage:f};var h=b.request("router:named:get","leagues_standings_classic",{includeRoot:false,substitutions:{":leagueId":c},queryString:g});var i=a.StandingsClassicController;this.showLeaguePage(h,i,[c,d,e,f]);},showStandingsH2H:function(c,d,e,f,g){var h={};if(d>1||e>1||f>1||g>1)h={lsPage:d,lePage:e,mtPage:f,mnPage:g};var i=b.request("router:named:get","leagues_standings_h2h",{includeRoot:false,substitutions:{":leagueId":c},queryString:h});var j=a.StandingsH2HController;this.showLeaguePage(i,j,[c,d,e,f,g]);},showMatchesH2H:function(d,f){var g=this;if(!f.entry)delete f.entry;var h=b.request("router:named:get","leagues_matches_h2h",{includeRoot:false,substitutions:{":leagueId":d},queryString:f});b.execute("utils:loader:show");var i=b.request("utils:registry:get",h,a.H2HMatchesController);var j=i.show(d,f);e.when(j).then(function(a){c.history.navigate(h);b.execute("utils:page:change",a,g.getSideView());},function(a){b.execute("utils:loader:hide");b.execute("show:home");});},showLeaguePageAuth:function(a,c,d){if(!b.request("player:check:auth",["LOGGED_IN_ENTRY"]))return;this.showLeaguePage(a,c,d);},showLeaguePage:function(a,d,f){f=f||[];b.execute("utils:loader:show");var g=b.request("utils:registry:get",a,d);var h=g.show.apply(g,f);var i=this;e.when(h).then(function(d){c.history.navigate(a);b.execute("utils:page:change",d,i.getSideView());},function(a){b.execute("utils:loader:hide");b.execute("show:home");});},getSideView:function(){return b.request("get:static:side");},showStandings:function(a){var b=a.get("_scoring");if(b==="c")this.showStandingsClassic(a.get("id"),1,1,1);else if(b==="h")this.showStandingsH2H(a.get("id"),1,1,1,1);},showCupHistory:function(d){d=parseInt(d,10);var f=b.request("router:named:get","leagues_cup_history",{includeRoot:false,substitutions:{":entryId":d}});b.execute("utils:loader:show");var g=b.request("utils:registry:get",f,a.CupHistoryController);var h=g.show(d);e.when(h).then(function(a,d){c.history.navigate(f);b.execute("utils:page:change",a,d);},function(){window.alert("Error");b.execute("utils:loader:hide");});}};a.on("start",function(){b.vent.on("league:created",function(b){a.API.showInvite(b.get("id"));});b.vent.on("league:left",function(b){a.API.showMain();});b.vent.on("league:deleted",function(b){a.API.showMain();});b.vent.on("leagues:renewed",function(){a.API.showMain();});b.vent.on("league:updated",function(b){a.API.showStandings(b);});b.vent.on("league:joined",function(b){a.API.showStandings(b);});b.reqres.setHandler("show:standings:classic",function(b,c,d,e){a.API.showStandingsClassic(b,c,d,e);});new a.Router({controller:a.API});new a.StandingsClassicRouter({controller:a.API});new a.StandingsH2HRouter({controller:a.API});new a.H2HMatchesRouter({controller:a.API});});});window.ISMApp.module("Apps.LeaguesApp",function(a,b,c,d,e,f){"use strict";a.MainController=d.Object.extend({show:function(){var a=e.Deferred();var c=this;var d=new b.Entities.Leagues();var f=b.request("get:loggedInEntry");this.listenTo(d,"populated",function(){this.layout=c.getLayoutView(d,f);a.resolve(this.layout);});d.fetchAndPopulate(f.get("id"),{renewable:true});return a;},getLayoutView:function(b,c){var d=new a.MainLayoutView({model:c});this.listenTo(d,"show",function(){d.classicPrivate.show(this.getClassicPrivateView(b.getClassicPrivateLeagues()));d.h2hPrivate.show(this.getH2HPrivateView(b.getHeadToHeadPrivateLeagues()));d.classicPublic.show(this.getClassicPublicView(b.getClassicPublicLeagues()));d.h2hPublic.show(this.getH2HPublicView(b.getHeadToHeadPublicLeagues()));d.system.show(this.getSystemView(b.getSystemLeagues()));});return d;},getClassicPrivateView:function(c){var d=new a.MainSummaryView({leagueType:"classic-private",collection:new b.Entities.Leagues(c)});this.addEventListeners(d);return d;},getH2HPrivateView:function(c){var d=new a.MainSummaryView({leagueType:"h2h-private",collection:new b.Entities.Leagues(c)});this.addEventListeners(d);return d;},getClassicPublicView:function(c){var d=new a.MainSummaryView({leagueType:"classic-public",collection:new b.Entities.Leagues(c)});this.addEventListeners(d);return d;},getH2HPublicView:function(c){var d=new a.MainSummaryView({leagueType:"h2h-public",collection:new b.Entities.Leagues(c)});this.addEventListeners(d);return d;},getSystemView:function(c){var d=new a.MainSummaryView({leagueType:"system",collection:new b.Entities.Leagues(c)});this.addEventListeners(d);return d;},addEventListeners:function(a){this.listenTo(a,"childview:league:menu",this.showMenu);},showMenu:function(a){var b=this.getMenuView(a.model);this.layout.menu.show(b);},getMenuView:function(b){var c=new a.MainSummaryMenuView({model:b});this.listenTo(c,"leave:confirmed",this.leaveLeague);return c;},leaveLeague:function(a){var b=a.model;var c=b.leave();var d=this;c.done(function(b,c,e){d.leaveDone(b,a);});c.fail(function(b,c,e){d.leaveFail(b,a);});},leaveDone:function(a,c){b.vent.trigger("league:left",c.model);},leaveFail:function(a,b){var c=a.responseText;window.alert(c);}});a.RenewController=d.Object.extend({show:function(){var a=e.Deferred();var c=this;var d=new b.Entities.Leagues();var f=b.request("get:loggedInEntry");this.listenTo(d,"populated",function(){this.view=c.getView(d.renewable);a.resolve(this.view);});d.fetchAndPopulate(f.get("id"),{renewable:true});return a;},getView:function(b){var c=new a.RenewView({collection:b});this.listenTo(c,"form:submitted",this.postActions);return c;},postActions:function(a){var b=a.collection.action();var c=this;b.done(function(b,d,e){c.actionsDone(b,a);});b.fail(function(b,d,e){c.actionsFail(b,a);});},actionsDone:function(a,c){b.vent.trigger("leagues:renewed");},actionsFail:function(a,c){b.execute("utils:navigation:reload");}});a.CreateJoinController=d.Object.extend({show:function(){var b=e.Deferred();var c=new a.CreateJoinView();b.resolve(c);return b;}});a.CreateChoiceController=d.Object.extend({show:function(){var b=e.Deferred();var c=new a.CreateChoiceView();b.resolve(c);return b;}});a.JoinChoiceController=d.Object.extend({show:function(){var b=e.Deferred();var c=new a.JoinChoiceView();b.resolve(c);return b;}});a.CreateController=d.Object.extend({show:function(){var a=e.Deferred();var b=this.getView();a.resolve(b);return a;},createLeague:function(a){var b=a.model.submit();var c=this;b.done(function(b,d,e){c.createDone(b,a);});b.fail(function(b,d,e){c.createFail(b,a);});},createDone:function(a,c){b.vent.trigger("league:created",new b.Entities.League(a));},createFail:function(a,b){var c=a.responseText;var d=c;var e=window.JSON.parse(c);var g=f.find(e.non_field_errors,function(a){return a.indexOf("Limit of")>-1;});if(g)d="limit";b.model.set("error",d);},getView:function(){var a={model:this.getCreateModel()};var b=this.getCreateView(a);this.listenTo(b,"form:submitted",this.createLeague);return b;}});a.CreateClassicController=a.CreateController.extend({getCreateModel:function(){return new b.Entities.NewClassicLeague();},getCreateView:function(b){return new a.CreateClassicView(b);}});a.CreateH2HController=a.CreateController.extend({getCreateModel:function(){return new b.Entities.NewHeadToHeadLeague();},getCreateView:function(b){return new a.CreateH2HView(b);}});a.AdminController=d.Object.extend({show:function(a){var b=e.Deferred();var c=this;var d=this.getModel(a);d.fetch().done(function(){var a=c.getView(d);b.resolve(a);});return b;},createEventListeners:function(a){this.listenTo(a,"update:submitted",this.updateLeague);this.listenTo(a,"newBan:submitted",this.updateBans);this.listenTo(a,"changeBans:submitted",this.updateBans);this.listenTo(a,"changeAdmin:submitted",this.updateLeague);this.listenTo(a,"delete:submitted",this.deleteLeague);},updateLeague:function(a){var b=a.model.update();var c=this;b.done(function(b,d,e){c.updateDone(b,a);});b.fail(function(b,d,e){c.updateFail(b,a);});},updateBans:function(a){var b=a.model.updateBans();var c=this;b.done(function(b,d,e){c.updateDone(b,a);});b.fail(function(b,d,e){c.updateFail(b,a);});},updateDone:function(a,c){b.vent.trigger("league:updated",new b.Entities.League(a));},updateFail:function(a,b){var c=a.responseText;b.model.set("error",c);},deleteLeague:function(a){var b=a.model.destroy();var c=this;b.done(function(b,d,e){c.deleteDone(b,a);});b.fail(function(b,d,e){c.deleteFail(b,a);});},deleteDone:function(a,c){b.vent.trigger("league:deleted",c.model);},deleteFail:function(a,b){var c=a.responseText;b.model.set("error",c);}});a.AdminClassicController=a.AdminController.extend({getModel:function(a){return new b.Entities.UpdateClassicLeague({id:a});},getView:function(b){var c=new a.AdminClassicView({model:b});this.createEventListeners(c);return c;}});a.AdminH2HController=a.AdminController.extend({getModel:function(a){return new b.Entities.UpdateH2HLeague({id:a});},getView:function(b){var c=new a.AdminH2HView({model:b});this.createEventListeners(c);return c;}});a.JoinPrivateController=d.Object.extend({show:function(){var a=e.Deferred();var b=this.getView();a.resolve(b);return a;},getView:function(){var c=new a.JoinPrivateView({model:new b.Entities.JoinPrivateLeague()});this.listenTo(c,"form:submitted",this.joinLeague);return c;},joinLeague:function(a){var b=a.model.submit();var c=this;b.done(function(b,d,e){c.joinDone(b,a);});b.fail(function(b,d,e){c.joinFail(b,a);});},joinDone:function(a,c){b.vent.trigger("league:joined",new b.Entities.League(a));},joinFail:function(a,b){var c=a.responseText;var d=c;var e=window.JSON.parse(c);var g=f.find(e.non_field_errors,function(a){return a.indexOf("limit exceeded")>-1;});var h=f.find(e.non_field_errors,function(a){return a.indexOf("Already in league")>-1;});var i=f.find(e.non_field_errors,function(a){return a.indexOf("League closed")>-1;});var j=f.find(e.non_field_errors,function(a){return a.indexOf("Banned")>-1;});var k=f.find(e.non_field_errors,function(a){return a.indexOf("Invalid code")>-1;});k=k||e.code?true:false;if(g)d="limit";else if(k)d="invalid";else if(h)d="already";else if(i)d="closed";else if(j)d="banned";b.model.set("error",d);}});a.JoinPublicController=d.Object.extend({show:function(){var a=e.Deferred();var b=this.getView();a.resolve(b);return a;},getView:function(){var c=new a.JoinPublicView({model:new b.Entities.JoinPublicLeague()});this.listenTo(c,"join:classic",this.joinClassic);this.listenTo(c,"join:h2h",this.joinH2H);return c;},joinClassic:function(a){a.model.set("scoring","classic");this.joinLeague(a);},joinH2H:function(a){a.model.set("scoring","h2h");this.joinLeague(a);},joinLeague:function(a){var b=a.model.submit();var c=this;b.done(function(b,d,e){c.joinDone(b,a);});b.fail(function(b,d,e){c.joinFail(b,a);});},joinDone:function(a,c){b.vent.trigger("league:joined",new b.Entities.League(a));},joinFail:function(a,b){var c=a.responseText;var d=c;var e=window.JSON.parse(c);var g=f.find(e.non_field_errors,function(a){return a.indexOf("limit exceeded")>-1;});if(g)d="limit";b.model.set("error",d);}});a.InviteController=d.Object.extend({show:function(a){var c=e.Deferred();var d=this;var f=b.request("get:loggedInEntry");var g=new b.Entities.Leagues();g.fetchAndPopulate(f.get("id")).done(function(){var b=g.get(a);if(!b){c.reject("Not in requested league");return;}if(!b.get("entry_can_invite")){c.reject("Can't invite people to league");return;}b.set({emails:"",valid:"",invalid:""});var e=d.getView(b);c.resolve(e);});return c;},getView:function(b){var c=new a.InviteView({model:b});this.listenTo(c,"form:submitted",this.sendInvites);return c;},sendInvites:function(a){var b=a.model;b.sendInvites(b.get("emails")).done(function(c){b.set({emails:"",valid:c.valid.join(", "),invalid:c.invalid.join(", ")});a.render();});}});a.StandingsBaseController=d.Object.extend({getNewEntriesView:function(b){var c=new a.StandingsNewEntriesView({collection:b});return c;},getPagerView:function(c,d,e,g,h){if(!h)h={":leagueId":this.leagueId};var i="";if(this[d]>1){var j=f.clone(g);j[d]--;i=b.request("router:named:get",e,{substitutions:h,queryString:j});}var k="";if(c.hasNext){var l=f.clone(g);l[d]++;k=b.request("router:named:get",e,{substitutions:h,queryString:l});}return new a.StandingsPagerView({number:c.number,hasNext:c.hasNext,urlBack:i,urlNext:k});}});a.StandingsClassicController=a.StandingsBaseController.extend({show:function(a,c,d,f){var g=e.Deferred();this.leagueId=a;this.phaseId=c;this.lsPage=d;this.lePage=f;var h=new b.Entities.League({"id":a});var i=this;var j=h.getClassicStandings(c,d,f);j.done(function(d){h=new b.Entities.League(d.league);h.set("phase",c);i.listenTo(h,"change:phase",function(){b.request("show:standings:classic",a,h.get("phase"),1,1);});var e=new b.Entities.Standings(d.standings.results,{league:h,hasNext:d.standings.has_next,number:d.standings.number});var f=new b.Entities.NewEntries(d.new_entries.results,{league:h,hasNext:d.new_entries.has_next,number:d.new_entries.number});var j=i.getLayoutView({model:h,phase:c,standings:e,newEntries:f});g.resolve(j);});return g;},getLayoutView:function(b){var c=new a.StandingsClassicLayoutView({model:b.model,standingsNumber:b.standings.length,newNumber:b.newEntries.length});this.listenTo(c,"show",function(){var a="leagues_standings_classic";var d={phase:this.phaseId,lsPage:this.lsPage,lePage:this.lePage};c.standings.show(this.getStandingsView(b.standings));c.standingsPager.show(this.getPagerView(b.standings,"lsPage",a,d));if(b.newEntries.length){c.newEntries.show(this.getNewEntriesView(b.newEntries));c.newEntriesPager.show(this.getPagerView(b.newEntries,"lePage",a,d));}});return c;},getStandingsView:function(b){var c=new a.StandingsClassicTableView({collection:b});return c;}});a.StandingsH2HController=a.StandingsBaseController.extend({show:function(a,c,d,f,g){var h=e.Deferred();this.leagueId=a;this.lsPage=c;this.lePage=d;this.mtPage=f;this.mnPage=g;var i=new b.Entities.League({"id":a});var j=this;var k=i.getH2HStandings(this.lsPage,this.lePage,this.mtPage,this.mnPage);k.done(function(a){i=new b.Entities.League(a.league);var c=new b.Entities.Standings(a.standings.results,{league:i,hasNext:a.standings.has_next,number:a.standings.number});var d=new b.Entities.NewEntries(a.new_entries.results,{league:i,hasNext:a.new_entries.has_next,number:a.new_entries.number});var e=new b.Entities.Matches();e.populate(a.matches_this.results,{round:b.request("get:event:current"),hasNext:a.matches_this.has_next,number:a.matches_this.number});var f=new b.Entities.Matches();f.populate(a.matches_next.results,{round:b.request("get:event:next"),hasNext:a.matches_next.has_next,number:a.matches_next.number});var g=j.getLayoutView({model:i,standings:c,newEntries:d,thisMatches:e,nextMatches:f});h.resolve(g);});return h;},getLayoutView:function(b){var c=b.model;var d=new a.StandingsH2HLayoutView({model:c,standingsNumber:b.standings.length,newNumber:b.newEntries.length});this.listenTo(d,"show",function(){var a="leagues_standings_h2h";var e={lsPage:this.lsPage,lePage:this.lePage,mtPage:this.mtPage,mnPage:this.mnPage};d.standings.show(this.getStandingsView(b.standings));d.standingsPager.show(this.getPagerView(b.standings,"lsPage",a,e));if(!c.get("has_started")){d.newEntries.show(this.getNewEntriesView(b.newEntries));d.newEntriesPager.show(this.getPagerView(b.newEntries,"lePage",a,e));}if(b.thisMatches.length){d.matchesThis.show(this.getH2HMatchesView(b.thisMatches));d.matchesThisPager.show(this.getPagerView(b.thisMatches,"mtPage",a,e));}if(b.nextMatches.length){d.matchesNext.show(this.getH2HMatchesView(b.nextMatches));d.matchesNextPager.show(this.getPagerView(b.nextMatches,"mnPage",a,e));}});return d;},getStandingsView:function(b){var c=new a.StandingsH2HTableView({collection:b});return c;},getH2HMatchesView:function(b){var c=new a.StandingsH2HMatchesView({collection:b});var d=b.round.get("id");this.listenTo(c,"childview:show:entry:1",function(a){this.showEntryMatches(a.model.get("entry_1_entry"),d);});this.listenTo(c,"childview:show:entry:2",function(a){this.showEntryMatches(a.model.get("entry_2_entry"),d);});return c;}});a.H2HMatchesController=d.Object.extend({initialize:function(){this.controlModel=new b.Entities.Model({page:null,entry:null});this.matchesCollection=new b.Entities.Matches();this.leagueEntries=null;this.league=null;this.listenTo(this.matchesCollection,"reset",function(){this.matchesCollection.specificEntry=this.controlModel.get("entry")?true:false;});},show:function(a,c){var d=e.Deferred();this.league=new b.Entities.League({"id":a});this.leagueId=a;this.controlModel.set("page",c.page);this.controlModel.set("entry",c.entry);var f={includeLeagueAndEntries:true};if(c.entry)f.entryFilter=c.entry;if(c.page)f.pageFilter=c.page;var g=this.league.getMatches(f);var h=this;g.done(function(a){h.matchesCollection.populate(a.matches.results,{round:null,hasNext:a.matches.has_next,number:a.matches.number});h.leagueEntries=a["league-entries"];h.league.set(a.league);var b=h.getLayoutView({model:h.league,matchesCollection:h.matchesCollection,matches:a});d.resolve(b);h.listenTo(h.controlModel,"change:page",h.refreshMatches);h.listenTo(h.controlModel,"change:entry",function(){h.controlModel.set("page",1,{silent:true});h.refreshMatches();});});g.fail(function(a,b,c){d.reject("Not an H2H League");});return d.promise();},getLayoutView:function(b){var c=new a.H2HMatchesLayoutView({model:b.model});this.listenTo(c,"before:show",function(){var a={page:this.page};if(b.matchesCollection.length){c.matches.show(this.getMatchesView(b.matchesCollection));var d=this.getPagerView(b.matchesCollection,"page","leagues_matches_h2h",a);c.matchesPager.show(d);}else c.matches.show(this.getNoMatchesView());});this.layout=c;return c;},getNoMatchesView:function(){var b=new a.NoH2HMatchesView();return b;},getMatchesView:function(b){var c=new a.H2HMatchesView({collection:b,leagueEntries:this.leagueEntries,model:this.league,controlModel:this.controlModel});return c;},getPagerView:function(c,d,e,g){var h="";if(this.controlModel.get(d)>1){var i=f.clone(g);i[d]--;h=b.request("router:named:get",e,{substitutions:{":leagueId":this.leagueId},queryString:i});}var j="";if(c.hasNext){var k=f.clone(g);k[d]++;j=b.request("router:named:get",e,{substitutions:{":leagueId":this.leagueId},queryString:k});}var l=new a.H2HMatchesPagerView({number:c.number,hasNext:c.hasNext,urlBack:h,urlNext:j});this.listenTo(l,"fetchNextPage",function(a){var b=this.controlModel.get("page")+1;this.controlModel.set("page",b);});this.listenTo(l,"fetchPreviousPage",function(a){var b=this.controlModel.get("page")-1;this.controlModel.set("page",b);});return l;},refreshMatches:function(){b.execute("utils:loader:show");var a={includeLeagueAndEntries:false};var d=this.controlModel.get("entry");var e=this.controlModel.get("page");var f={};if(e&&e>1)f.page=e;if(d)f.entry=d;var g=b.request("router:named:get","leagues_matches_h2h",{substitutions:{":leagueId":this.leagueId},includeRoot:false,queryString:f});if(d)a.entryFilter=d;if(e)a.pageFilter=e;var h=this;var i=this.league.getMatches(a);i.done(function(a){b.execute("utils:loader:hide");c.history.navigate(g,false);h.matchesCollection.populate(a.results,{round:null,hasNext:a.has_next,number:a.number});var d=h.getPagerView(h.matchesCollection,"page","leagues_matches_h2h",f);h.layout.matchesPager.show(d);b.execute("utils:page:site-top");});i.fail(function(a,c,d){b.execute("utils:navigation:reload");});}});a.CupHistoryController=d.Object.extend({show:function(a){var c=e.Deferred();var d=this;e.when(this.fetchCupHistory(a)).then(function(a){var e=d.getLayout({model:new b.Entities.CupState(a.cup_status),entry:new b.Entities.Entry(a.entry)});d.makeCupMatchesLookLikeMatches(a.cup_matches);var f=new b.Entities.Matches();f.populate(a.cup_matches,{});if(f.length){var g=d.getMatchesView(f);d.listenTo(e,"before:show",function(){e.matches.show(g);});}var h=b.request("get:entry:summary",a);c.resolve(e,h);},function(){c.fail();});return c;},getLayout:function(b){var c=new a.CupHistoryLayout({model:b.model,entry:b.entry});return c;},getMatchesView:function(b){var c=new a.StandingsH2HMatchesView({collection:b,template:"#ismt-leagues-h2h-matches-cup"});return c;},fetchCupHistory:function(a){return e.ajax({url:this.getUrl(a),type:"get"});},getUrl:function(a){return "/drf/entry/"+a+"/cup";},makeCupMatchesLookLikeMatches:function(a){f.each(a,function(a){a.entry_1_entry=a.entry_1;a.entry_2_entry=a.entry_2;a.is_knockout=true;a.tiebreak=a.tiebreak_used?a.tiebreak_stat:null;a.winner=a.winning_entry;});}});});window.ISMApp.module("Apps.LeaguesApp",function(a,b,c,d,e,f){"use strict";a.MainLayoutView=b.LayoutView.extend({navigationTab:"leagues",template:"#ismt-leagues-main",behaviors:{Link:{}},regions:{classicPrivate:"#ismr-leagues-classic-private",h2hPrivate:"#ismr-leagues-h2h-private",classicPublic:"#ismr-leagues-classic-public",h2hPublic:"#ismr-leagues-h2h-public",system:"#ismr-leagues-system",menu:{selector:"#ismr-leagues-menu",regionClass:b.Regions.Popup}}});a.MainSummaryItemView=b.ItemView.extend({template:"#ismt-leagues-main-summary-item",tagName:"tr",className:"ismjs-menu ism-row-select",behaviors:{Link:{}},triggers:{"click":"league:menu"}});a.MainSummaryView=b.CompositeView.extend({template:"#ismt-leagues-main-summary",childView:a.MainSummaryItemView,childViewContainer:"tbody",serializeData:function(){var a=b.CompositeView.prototype.serializeData.apply(this,arguments);a.leagueType=this.options.leagueType;return a;}});a.MainSummaryMenuView=b.ItemView.extend({template:"#ismt-leagues-main-summary-menu",behaviors:{Link:{},Confirm:{"confirmedEvent":"leave:confirmed"}},serializeData:function(){var a=b.ItemView.prototype.serializeData.apply(this,arguments);a.showMatchesButton=this.model.get("_scoring")=="h";return a;}});a.RenewItemView=b.ItemView.extend({template:"#ismt-leagues-renew-item",bindings:function(){var a={};var b="input[name=\"ism-rendel-"+this.model.get("id")+"\"]";a[b]="action";return a;},onRender:function(){this.stickit();}});a.RenewView=b.CompositeView.extend({navigationTab:"leagues",template:"#ismt-leagues-renew",childView:a.RenewItemView,childViewContainer:"#ismjs-renew-items",ui:{button:".ismjs-submit"},collectionEvents:{change:"checkValidity"},events:{"click @ui.button":"buttonClicked"},checkValidity:function(){if(this.collection.canBeActioned())this.buttonEnable();else this.buttonDisable();},buttonDisable:function(){this.ui.button.prop("disabled",true);},buttonEnable:function(){this.ui.button.prop("disabled",false);},buttonClicked:function(a){a.preventDefault();this.buttonDisable();this.trigger("form:submitted",this);}});a.CreateJoinView=b.ItemView.extend({navigationTab:"leagues",template:"#ismt-leagues-create-join",behaviors:{Link:{}}});a.CreateChoiceView=b.ItemView.extend({navigationTab:"leagues",template:"#ismt-leagues-create-choice",behaviors:{Link:{}}});a.JoinChoiceView=b.ItemView.extend({navigationTab:"leagues",template:"#ismt-leagues-join-choice",behaviors:{Link:{}}});a.CreateClassicView=b.ItemView.extend({navigationTab:"leagues",template:"#ismt-leagues-create-classic",ui:{button:".ismjs-submit"},events:{"click @ui.button":"buttonClicked"},bindings:function(){return{"#ismjs-name":"name","#ismjs-start-event-id":{observe:"start_event_id",selectOptions:{collection:function(){return this.getEventsCollection();},labelPath:"name",valuePath:"id"}},"#ismjs-size":{observe:"size",selectOptions:{collection:function(){return this.getSizesCollection();}}}};},modelEvents:{"change":"checkValidity","change:error":"render"},onRender:function(){this.stickit();this.checkValidity();},checkValidity:function(){var a=this.model.validForCreating();if(a)this.buttonEnable();else this.buttonDisable();},buttonDisable:function(){this.ui.button.prop("disabled",true);},buttonEnable:function(){this.ui.button.prop("disabled",false);},buttonClicked:function(a){a.preventDefault();this.buttonDisable();this.trigger("form:submitted",this);},getEventsCollection:function(){return b.request("get:events");},getSizesCollection:function(){return this.model.getSizesCollection();}});a.AdminClassicView=b.ItemView.extend({navigationTab:"leagues",template:"#ismt-leagues-admin-classic",ui:{buttonUpdate:".ismjs-update-league",buttonNewBan:".ismjs-new-ban",buttonChangeBans:".ismjs-change-bans",buttonChangeAdmin:".ismjs-change-admin",buttonDelete:".ismjs-delete-league"},events:{"click @ui.buttonUpdate":"updateClicked","click @ui.buttonNewBan":"newBanClicked","click @ui.buttonChangeBans":"changeBansClicked","click @ui.buttonChangeAdmin":"changeAdminClicked"},behaviors:{Confirm:{"confirmedEvent":"delete:submitted"}},bindings:function(){return{"#ismjs-name":"name","#ismjs-start-event-id":{observe:"start_event",selectOptions:{collection:function(){return this.getEventsCollection();},labelPath:"name",valuePath:"id"}},"#ismjs-close":"closed","#ismjs-ban":{"observe":"newBan",selectOptions:{collection:function(){return this.getBannableEntries();},labelPath:"player_full_name",valuePath:"entry",defaultOption:{label:b.request("get:vocab","select-player"),value:null}}},".ismjs-ban-current":"currentBans","#ismjs-admin":{observe:"admin_entry",selectOptions:{collection:function(){return this.model.get("entries");},labelPath:"player_full_name",valuePath:"entry"}},"#ismjs-size":{observe:"size",selectOptions:{collection:function(){return this.getSizesCollection();}}}};},modelEvents:{"change":"checkValidity","change:newBan":"checkNewBanValidity","change:currentBans":"checkCurrentBansValidity","change:error":"reRender"},onRender:function(){this.stickit();},checkValidity:function(){var a=this.model.validForUpdating();if(a)this.buttonsEnable();else this.buttonsDisable();},checkNewBanValidity:function(){if(this.model.get("newBan"))this.buttonNewBanEnable();else this.buttonNewBanDisable();},checkCurrentBansValidity:function(){if(this.$(".ismjs-ban-current").not(":checked").length)this.buttonChangeBansEnable();else this.buttonChangeBansDisable();},buttonsDisable:function(){this.ui.buttonUpdate.prop("disabled",true);this.ui.buttonChangeAdmin.prop("disabled",true);},buttonsEnable:function(){this.ui.buttonUpdate.prop("disabled",false);this.ui.buttonChangeAdmin.prop("disabled",false);},buttonNewBanEnable:function(){if(this.ui.buttonNewBan)this.ui.buttonNewBan.prop("disabled",false);},buttonNewBanDisable:function(){if(this.ui.buttonNewBan)this.ui.buttonNewBan.prop("disabled",true);},buttonChangeBansEnable:function(){this.ui.buttonChangeBans.prop("disabled",false);},buttonChangeBansDisable:function(){this.ui.buttonChangeBans.prop("disabled",true);},updateClicked:function(a){a.preventDefault();this.buttonsDisable();this.trigger("update:submitted",this);},newBanClicked:function(a){a.preventDefault();this.buttonNewBanDisable();this.trigger("newBan:submitted",this);},changeBansClicked:function(a){a.preventDefault();this.buttonsDisable();this.trigger("changeBans:submitted",this);},changeAdminClicked:function(a){a.preventDefault();this.buttonsDisable();this.trigger("changeAdmin:submitted",this);},getEventsCollection:function(){return b.request("get:events");},getBannableEntries:function(){var a=this.model.get("admin_entry");return f.reject(this.model.get("entries"),function(b){return b.entry===a;});},getSizesCollection:function(){return this.model.getSizesCollection();}});var g={extraBindings:function(){return{"#ismjs-ko-rounds":{observe:"ko_rounds",selectOptions:{collection:function(){return this.getRoundsCollection();}},onSet:"setKoRounds"}};},extraModelEvents:function(){return{"change:ko_rounds":"reStickit"};},setKoRounds:function(a,b){this.model.setKoRounds(a);return a;},getEventsCollection:function(){return this.model.getEventsCollection();},getRoundsCollection:function(){return this.model.getKosCollection();},reStickit:function(){this.stickit();}};a.CreateH2HView=a.CreateClassicView.extend({navigationTab:"leagues",template:"#ismt-leagues-create-h2h",bindings:function(){var b=f.result(a.CreateClassicView.prototype,"bindings");return f.extend(b,this.extraBindings());},modelEvents:function(){var b=f.result(a.CreateClassicView.prototype,"modelEvents");return f.extend(b,this.extraModelEvents());}});f.extend(a.CreateH2HView.prototype,g);a.AdminH2HView=a.AdminClassicView.extend({navigationTab:"leagues",template:"#ismt-leagues-admin-h2h",bindings:function(){var b=f.result(a.AdminClassicView.prototype,"bindings");return f.extend(b,this.extraBindings());},modelEvents:function(){var b=f.result(a.AdminClassicView.prototype,"modelEvents");return f.extend(b,this.extraModelEvents());}});f.extend(a.AdminH2HView.prototype,g);a.JoinPrivateView=b.ItemView.extend({navigationTab:"leagues",template:"#ismt-leagues-join-private",ui:{button:".ismjs-submit"},events:{"click @ui.button":"buttonClicked"},bindings:{"#ismjs-private-code":"code"},modelEvents:{"change":"checkValidity","change:error":"render"},onRender:function(){this.stickit();this.checkValidity();},checkValidity:function(){var a=this.model.validForCreating();if(a)this.buttonEnable();else this.buttonDisable();},buttonDisable:function(){this.ui.button.prop("disabled",true);},buttonEnable:function(){this.ui.button.prop("disabled",false);},buttonClicked:function(a){a.preventDefault();this.buttonDisable();this.trigger("form:submitted",this);}});a.JoinPublicView=b.ItemView.extend({navigationTab:"leagues",template:"#ismt-leagues-join-public",ui:{buttonClassic:".ismjs-submit-classic",buttonH2H:".ismjs-submit-h2h"},events:{"click @ui.buttonClassic":"classicClick","click @ui.buttonH2H":"h2hClick"},modelEvents:{"change:error":"render"},classicClick:function(a){a.preventDefault();this.buttonsDisable();this.trigger("join:classic",this);},h2hClick:function(a){a.preventDefault();this.buttonsDisable();this.trigger("join:h2h",this);},buttonsDisable:function(){this.ui.buttonClassic.prop("disabled",true);this.ui.buttonH2H.prop("disabled",true);}});a.InviteView=b.ItemView.extend({navigationTab:"leagues",template:"#ismt-leagues-invite",ui:{button:".ismjs-submit"},events:{"click @ui.button":"buttonClicked"},behaviors:{FacebookFeedDialog:{},TwitterShareButton:{}},bindings:{"#ismjs-invite-emails":"emails"},modelEvents:{"change":"checkValidity"},onRender:function(){this.stickit();this.checkValidity();},checkValidity:function(){if(this.model.get("emails").indexOf("@")>0)this.buttonEnable();else this.buttonDisable();},buttonDisable:function(){this.ui.button.prop("disabled",true);},buttonEnable:function(){this.ui.button.prop("disabled",false);},buttonClicked:function(a){a.preventDefault();this.buttonDisable();this.trigger("form:submitted",this);}});a.StandingsClassicLayoutView=b.LayoutView.extend({navigationTab:"leagues",template:"#ismt-leagues-standings-classic-layout",regions:{"standings":"#ismr-classic-standings","standingsPager":"#ismr-classic-standings-pager","newEntries":"#ismr-classic-new","newEntriesPager":"#ismr-classic-new-pager"},bindings:{"#ismjs-phase":{observe:"phase",selectOptions:{collection:function(){return this.getPhaseCollection();}}}},onRender:function(){this.stickit();},serializeData:function(){var a=b.LayoutView.prototype.serializeData.apply(this,arguments);a.standingsNumber=this.options.standingsNumber;a.newNumber=this.options.newNumber;return a;},getPhaseCollection:function(){return f.map(b.request("get:phases:started"),function(a){return{value:a.get("id"),label:a.get("name")};});}});a.StandingsClassicTableItemView=b.ItemView.extend({template:"#ismt-leagues-standings-classic-table-item",tagName:"tr",behaviors:{Link:{}}});a.StandingsClassicTableView=b.CompositeView.extend({template:"#ismt-leagues-standings-classic-table",childView:a.StandingsClassicTableItemView,childViewContainer:"tbody",childViewOptions:function(a,b){var c={};if(a&&a.get("own_entry"))c.className="ism-table__highlight";return c;}});a.StandingsPagerView=b.ItemView.extend({template:"#ismt-leagues-standings-pager",behaviors:{Link:{}},serializeData:function(){return{number:this.options.number,hasNext:this.options.hasNext,urlBack:this.options.urlBack,urlNext:this.options.urlNext};}});a.StandingsNewEntryView=b.ItemView.extend({template:"#ismt-leagues-standings-new-item",tagName:"tr"});a.StandingsNewEntriesView=b.CompositeView.extend({template:"#ismt-leagues-standings-new",childView:a.StandingsNewEntryView,childViewContainer:"tbody",serializeData:function(){var a=b.CompositeView.prototype.serializeData.apply(this,arguments);a.showPager=this.collection.showPager();return a;},collectionEvents:{"reset":"render"}});a.StandingsH2HLayoutView=b.LayoutView.extend({navigationTab:"leagues",template:"#ismt-leagues-standings-h2h",behaviors:{Link:{}},regions:{"standings":"#ismr-h2h-standings","standingsPager":"#ismr-h2h-standings-pager","newEntries":"#ismr-h2h-new","newEntriesPager":"#ismr-h2h-new-pager","matchesThis":"#ismr-h2h-matches-this","matchesThisPager":"#ismr-h2h-matches-this-pager","matchesNext":"#ismr-h2h-matches-next","matchesNextPager":"#ismr-h2h-matches-next-pager"},serializeData:function(){var a=b.LayoutView.prototype.serializeData.apply(this,arguments);a.standingsNumber=this.options.standingsNumber;a.newNumber=this.options.newNumber;var c=this.model.get("id");var d=b.request("router:named:get","leagues_matches_h2h",{substitutions:{":leagueId":c}});a.matchesURL=d;return a;}});a.StandingsH2HTableItemView=b.ItemView.extend({template:"#ismt-leagues-standings-h2h-table-item",tagName:"tr"});a.StandingsH2HTableView=b.CompositeView.extend({template:"#ismt-leagues-standings-h2h-table",childView:a.StandingsH2HTableItemView,childViewContainer:"tbody",serializeData:function(){var a=b.CompositeView.prototype.serializeData.apply(this,arguments);a.showPager=this.collection.showPager();return a;},childViewOptions:function(a,b){var c={};if(a&&a.get("own_entry"))c.className="ism-table__highlight";return c;}});a.StandingsH2HMatchView=b.ItemView.extend({template:"#ismt-leagues-standings-h2h-match",tagName:"tr",serializeData:function(){var a=b.ItemView.prototype.serializeData.apply(this,arguments);a.hasStarted=this.options.hasStarted;a.matchLinkEvent=this.options.matchLinkEvent;a.showRound=this.options.showRound;return a;}});a.StandingsH2HMatchesView=b.CompositeView.extend({template:"#ismt-leagues-standings-h2h-matches",childView:a.StandingsH2HMatchView,childViewContainer:"tbody",initialize:function(a){if(this.collection.round){this.hasStarted=this.collection.round.started();this.showRoundInChild=false;}else this.showRoundInChild=true;this.now=b.request("get:event:current");},serializeData:function(){var a=b.CompositeView.prototype.serializeData.apply(this,arguments);a.showPager=this.collection.showPager();a.roundName=null;if(this.collection.round){var c=b.request("get:setting","league_max_ko_rounds_h2h");var d=b.request("get:event:last");var e=this.collection.at(0).get("is_knockout");var f=this.collection.round.id>(d.id-c);if(e&&f)a.roundName=b.request("get:vocab",("h2h-ko-longname-"+(d.id-this.collection.round.id)));else a.roundName=this.collection.round.get("name");}return a;},childViewOptions:function(a,c){var d;if(a instanceof b.Entities.H2HMatchTiebreakData)d={template:"#ismt-leagues-standings-h2h-match-tiebreak","showRound":this.showRoundInChild};else{var e=this.hasStarted;if(e===undefined){var f=b.request("get:event",a.get("event"));e=f.started();}d={"hasStarted":e,"showRound":this.showRoundInChild,"matchLinkEvent":Math.min(a.get("event"),this.now.get("id"))};if(!this.collection.specificEntry&&a&&a.get("own_entry"))d.className="ism-table__highlight";}return d;}});a.H2HMatchesLayoutView=b.LayoutView.extend({navigationTab:"leagues",template:"#ismt-leagues-h2h-match",behaviors:{Link:{}},regions:{"matches":"#ismr-h2h-matches","matchesPager":"#ismr-h2h-matches-pager"},serializeData:function(){var a=b.LayoutView.prototype.serializeData.apply(this,arguments);var c=this.model.get("id");var d=b.request("router:named:get","leagues_standings_h2h",{substitutions:{":leagueId":c}});a.standingsURL=d;return a;}});a.H2HMatchesPagerView=b.ItemView.extend({template:"#ismt-leagues-h2h-matches-pager",triggers:{"click .ismjs-next":"fetchNextPage","click .ismjs-previous":"fetchPreviousPage"},serializeData:function(){return{number:this.options.number,hasNext:this.options.hasNext,urlBack:this.options.urlBack,urlNext:this.options.urlNext};}});a.NoH2HMatchesView=b.ItemView.extend({template:"#ismt-leagues-h2h-no-matches"});a.H2HMatchesView=a.StandingsH2HMatchesView.extend({template:"#ismt-leagues-h2h-matches",bindings:function(){return{"#ismjs-league-entries":{observe:"entry",selectOptions:{collection:function(){return this.createLECollection();},defaultOption:{label:b.request("get:vocab","all-matches"),value:null}}}};},createLECollection:function(){var a=f.map(this.options.leagueEntries,function(a){var b=a.entry_name!==""?a.entry_name:a.player_first_name+" "+a.player_last_name;return{label:b,value:a.entry};});return a;},onRender:function(){this.stickit(this.options.controlModel);}});a.CupHistoryLayout=b.LayoutView.extend({template:"#ismt-leagues-cup-history",regions:{matches:"#ismr-cup-matches"},behaviors:{Link:{}},initialize:function(a){this.entry=a.entry;},serializeData:function(){var a=b.LayoutView.prototype.serializeData.apply(this,arguments);a.entryName=this.entry.get("name");a.entryStartedId=this.entry.get("started_event");return a;}});});window.ISMApp.module("Apps.PlayerApp",function(a,b,c,d,e,f){"use strict";a.Router=b.Router.Named.extend({namedRoutes:{"player_register":["player/register","showRegister"],"player_profile":["player/profile","showProfile"],"player_confirm":["player/confirm","showConfirm"],"player_login":["login","doLogin"]},execute:function(a,b){var c=this.getQueryParams(b[0]);a(c);},getQueryParams:function(a){if(!a)return{};return f.chain(a.split("&")).map(function(a){var b=a.split("=");return [b[0],b[1]];}).object().value();}});var g={showRegister:function(d){var f=b.request("router:named:get","player_register",{includeRoot:false});var g=b.request("router:named:get","player_register");var h={};if(window.location.pathname==g)h.replace=true;if(!b.request("player:check:auth",["NOT_LOGGED_IN"]))return;b.execute("utils:loader:show");var i=b.request("utils:registry:get",f,a.RegisterController);var j=i.show(d);e.when(j).then(function(a){c.history.navigate(f,h);b.execute("utils:page:change",a,new b.Apps.StaticApp.BlankView());},function(){window.alert("Error");b.execute("utils:loader:hide");});},showProfile:function(){var d="player/profile";if(!b.request("player:check:auth",["LOGGED_IN_PLAYER","LOGGED_IN_ENTRY"]))return;b.execute("utils:loader:show");var f=b.request("utils:registry:get",d,a.ProfileController);var g=f.show();e.when(g).then(function(a){c.history.navigate(d);b.execute("utils:page:change",a,new b.Apps.StaticApp.BlankView());},function(){window.alert("Error");b.execute("utils:loader:hide");});},showConfirm:function(){var d="player/confirm";if(!b.request("player:check:auth",["NEED_CONFIRM"]))return;b.execute("utils:loader:show");var f=b.request("utils:registry:get",d,a.ConfirmController);var g=f.show();e.when(g).then(function(a){c.history.navigate(d);b.execute("utils:page:change",a,new b.Apps.StaticApp.BlankView());},function(){window.alert("Error");b.execute("utils:loader:hide");});},doLogin:function(){var a=b.request("get:login:status");b.vent.trigger(a);}};a.on("start",function(){b.vent.on("NEED_CONFIRM",function(){g.showConfirm({replaceUrl:true});});b.commands.setHandler("show:register",function(){g.showRegister();});new a.Router({controller:g});});});window.ISMApp.module("Apps.PlayerApp",function(a,b,c,d,e,f){"use strict";a.RegisterController=d.Object.extend({show:function(a){var c=this;var d=e.Deferred();var f=b.request("get:regions:promise");e.when(f).then(function(e){a.regions=e;var f=b.request("utils:game-config:get","PlayerEditableEntity");a.model=new f();d.resolve(c.getView(a));});return d;},getView:function(a){a=a||{};a.mode="create";var c=b.request("utils:game-config:get","PlayerRegisterView");var d=new c(a);this.listenTo(d,"form:submitted",this.register);return d;},register:function(a){var b=a.model.register();var c=this;b.done(function(a,b,d){c.registerDone(a,c.view);});b.fail(function(b,d,e){c.registerFail(b,a);});},registerDone:function(a,c){b.execute("login:player",a.player);b.vent.trigger("register:done");},registerFail:function(a,b){var c=a.responseJSON;var d=a.responseText;if(c&&c.username&&(c.username[0].indexOf("already exists")!==-1||c.username[0].indexOf("must be unique")!==-1))d="DUPLICATE";b.trigger("submit:error",d);}});a.ProfileController=d.Object.extend({show:function(){var a=e.Deferred();var c=this;var d=b.request("utils:game-config:get","PlayerEditableEntity");var f=new d();f.getProfile().done(function(d){var g=b.request("get:regions:promise");e.when(g).then(function(b){var d=c.getStandardView({model:f,regions:b});c.layout=c.getLayoutView(d);a.resolve(c.layout);});});return a;},getStandardView:function(a){a=a||{};a.mode="edit";var c=b.request("utils:game-config:get","PlayerRegisterView");var d=new c(a);this.listenTo(d,"form:submitted",this.update);return d;},getLayoutView:function(c){var d=new a.ProfileLayoutView({model:new b.Entities.PasswordChange()});this.listenTo(d,"show",function(){d.standard.show(c);});this.listenTo(d,"form:submitted",this.passwordUpdate);return d;},update:function(a){var b=a.model.updateProfile();var c=this;b.done(function(b,d,e){c.updateDone(b,a);});b.fail(function(b,d,e){c.updateFail(b,a);});},updateDone:function(a,b){this.layout.triggerMethod("profile:updated");},updateFail:function(a,b){var c=a.responseJSON;var d=a.responseText;if(c&&c.username&&c.username[0].indexOf("must be unique")!==-1)d="DUPLICATE";b.trigger("submit:error",d);},passwordUpdate:function(a){var b=a.model.updatePassword();var c=this;b.done(function(b,d,e){c.passwordUpdateDone(b,a);});b.fail(function(b,d,e){c.passwordUpdateFail(b,a);});},passwordUpdateDone:function(a,b){b.triggerMethod("password:updated");},passwordUpdateFail:function(a,b){b.triggerMethod("password:error");}});a.ConfirmController=a.ProfileController.extend({show:function(){var a=e.Deferred();var c=this;var d=b.request("utils:game-config:get","PlayerEditableEntity");var f=new d();f.getProfile().done(function(d){var g=b.request("get:regions:promise");e.when(g).then(function(b){var d=c.getView({model:f,regions:b});a.resolve(d);});});return a;},getView:function(a){a=a||{};a.mode="confirm";var c=b.request("utils:game-config:get","PlayerRegisterView");var d=new c(a);this.listenTo(d,"form:submitted",this.update);return d;},updateDone:function(a,c){var d=b.request("get:loggedInPlayer");d.set("dirty",false);b.vent.trigger(d.loginStatus());}});});window.ISMApp.module("Apps.PlayerApp",function(a,b,c,d,e,f){"use strict";a.RegisterView=b.ItemView.extend({template:"#ismt-player-register",ui:{button:".ismjs-submit"},events:{"click @ui.button":"buttonClicked"},bindings:function(){return{"#ismjs-username":"username","#ismjs-email":"email","#ismjs-password":"password","#ismjs-first-name":"first_name","#ismjs-last-name":"last_name","#ismjs-dob-day":{observe:"date_of_birth_day",selectOptions:{collection:function(){return this.getDayData();},defaultOption:{label:b.request("get:vocab","day"),value:null}}},"#ismjs-dob-month":{observe:"date_of_birth_month",selectOptions:{collection:function(){return this.getMonthData();},defaultOption:{label:b.request("get:vocab","month"),value:null}}},"#ismjs-dob-year":{observe:"date_of_birth_year",selectOptions:{collection:function(){return this.getYearData();},defaultOption:{label:b.request("get:vocab","year"),value:null}}},".ismjs-gender":"gender","#ismjs-region":{observe:"region",selectOptions:{collection:function(){return this.getRegionsData();},defaultOption:{label:b.request("get:vocab","select-country"),value:null}}}};},modelEvents:{"change":"checkValidity","change:date_of_birth_day":"setDateOfBirth","change:date_of_birth_month":"setDateOfBirth","change:date_of_birth_year":"setDateOfBirth"},initialize:function(a){if(a.email)this.model.set("email",a.email,{silent:true});if(this.options.mode==="confirm")this.model.noChangesValid=true;this.errorType="";this.bindEntityEvents(this.model,this.getOption("modelEvents"));this.on("submit:error",this.onSubmitError);},onRender:function(){this.stickit();this.checkValidity();},serializeData:function(){var a=b.ItemView.prototype.serializeData.apply(this,arguments);a.errorType=this.errorType;a.mode=this.options.mode;return a;},onSubmitError:function(a){this.errorType=a;this.render();},checkValidity:function(){var a=this.options.mode==="create"?this.model.validForCreating():this.model.validForUpdating();var b=this.model.validationErrors;f.each(this.bindings,function(a,c){if(a.observe)a=a.observe;if(b[a].length)this.$(c).addClass("ism-player-profile-error");else this.$(c).removeClass("ism-player-profile-error");},this);if(a)this.buttonEnable();else this.buttonDisable();},buttonDisable:function(){this.ui.button.prop("disabled",true);},buttonEnable:function(){this.ui.button.prop("disabled",false);},buttonClicked:function(a){a.preventDefault();this.buttonDisable();this.trigger("form:submitted",this);},setDateOfBirth:function(){this.model.set("date_of_birth",this.model.dateOfBirth());},getRegionsData:function(){return this.options.regions.map(function(a){return{value:a.get("id"),label:a.get("name")};});},getDayData:function(){return f.map(f.range(1,32),function(a){return{value:f.string.sprintf("%02d",a),label:a};});},getMonthData:function(){var a=window.moment([]);return f.map(f.range(0,12),function(b){return{value:f.string.sprintf("%02d",b+1),label:a.month(b).format("MMM")};});},getYearData:function(){var a=new Date().getFullYear();return f.map(f.range(a,1900,-1),function(a){return{value:a,label:a};});}});a.ProfileLayoutView=b.LayoutView.extend({template:"#ismt-player-profile",ui:{button:".ismjs-submit"},events:{"click @ui.button":"buttonClicked"},bindings:{"#ismjs-old-password":"old_password","#ismjs-new-password":"password"},modelEvents:{"change":"checkValidity"},regions:{"standard":"#ismr-standard"},onRender:function(){this.stickit();this.checkValidity();},onProfileUpdated:function(){this.$("#ismjs-profile-updated").show();},checkValidity:function(){var a=this.model.validForUpdating();var b=this.model.validationErrors;f.each(this.bindings,function(a,c){if(a.observe)a=a.observe;if(b[a].length)this.$(c).addClass("ism-player-profile-error");else this.$(c).removeClass("ism-player-profile-error");},this);if(a)this.buttonEnable();else this.buttonDisable();},buttonDisable:function(){this.ui.button.prop("disabled",true);},buttonEnable:function(){this.ui.button.prop("disabled",false);},buttonClicked:function(a){a.preventDefault();this.buttonDisable();this.trigger("form:submitted",this);},onPasswordUpdated:function(){this.$("#ismjs-password-error").hide();this.$("#ismjs-password-updated").show();},onPasswordError:function(){this.$("#ismjs-password-updated").hide();this.$("#ismjs-password-error").show();}});});window.ISMApp.module("Apps.StaticApp",function(a,b,c,d,e,f){"use strict";a.Router=b.Router.Named.extend({appRoutes:{"":"showHome"},namedRoutes:{"static_home":["home","showHome"],"static_home_element_scroll":["home/:elementId/:scrollTop","showHomeElement"],"static_help":["help","showHelp"],"static_prizes":["prizes","showPrizes"]}});a.API={showHome:function(d){d=d||{};f.defaults(d,{replaceUrl:false});var g="home";b.execute("utils:loader:show");var h=b.request("utils:game-config:get","HomeController");var i=b.request("utils:registry:get",g,h);var j=i.show();e.when(j).then(function(f,h){if(!h)h=new a.BlankView();if(c.history.fragment==="")d.replaceUrl=true;c.history.navigate(g,{replace:d.replaceUrl});b.execute("utils:page:change",f,h);if(d.scrollTop)e(document).scrollTop(d.scrollTop);if(d.elementId)b.execute("show:element",b.request("get:element",d.elementId));},function(){window.alert("Error");b.execute("utils:loader:hide");});},showHomeElement:function(a,b){this.showHome({replaceUrl:true,elementId:a,scrollTop:b});},showHelp:function(){var d="help";b.execute("loader:show");var f=b.request("utils:registry:get",d,a.HelpController,{clearCache:false});var g=f.show();var h=e.Deferred();e.when(g).then(function(e){c.history.navigate(d);b.execute("utils:page:change",e,new a.BlankView(),{allowReload:false});h.resolve(e);},function(){window.alert("Error");b.execute("utils:loader:hide");});return h;},showTac:function(){this.showHelp().done(function(a){a.openTac();});},showPrizes:function(){var d="prizes";b.execute("utils:loader:show");var f=b.request("utils:registry:get",d,a.PrizesController);var g=f.show();e.when(g).then(function(e){c.history.navigate(d);b.execute("utils:page:change",e,new a.BlankView());},function(){window.alert("Error");b.execute("utils:loader:hide");});}};a.on("start",function(){b.commands.setHandler("show:home",function(){a.API.showHome();});b.commands.setHandler("show:help",function(){a.API.showHelp();});b.commands.setHandler("show:tac",function(){a.API.showTac();});b.reqres.setHandler("get:static:side",function(){return new a.BlankView();});b.vent.on("NOT_LOGGED_IN",function(){a.API.showHome({replaceUrl:true});});new a.Router({controller:a.API});});});window.ISMApp.module("Apps.StaticApp",function(a,b,c,d,e,f){"use strict";a.HomeController=d.Object.extend({show:function(){var a=e.Deferred();var c=this;e.get("/?base-plain").done(function(d){var e=new b.Entities.Model({content:d});var f=c.getView(e);var g=c.getSideView(e);a.resolve(f,g);});return a;},getView:function(b){var c=new a.HomeView({model:b});return c;},getSideView:function(a){return null;}});a.HelpController=d.Object.extend({show:function(){var c=e.Deferred();e.get("/help/?base-plain").done(function(d){var e=new b.Entities.Model({content:d});var f=new a.HelpView({model:e});c.resolve(f);});return c;}});a.PrizesController=d.Object.extend({show:function(){var c=e.Deferred();e.get("/prizes/?base-plain").done(function(d){var e=new b.Entities.Model({content:d});var f=new a.PrizesView({model:e});c.resolve(f);});return c;}});});window.ISMApp.module("Apps.StaticApp",function(a,b,c,d,e,f){"use strict";a.BlankView=b.ItemView.extend({template:"#ismt-blank",behaviors:{Link:{}}});a.HomeView=b.ItemView.extend({template:"#ismt-home",bodyClass:"home",events:{"click .ismjs-show-element":"showElement"},behaviors:{Link:{}},initialize:function(){this.navigationTab="home";},showElement:function(a){a.preventDefault();b.execute("show:element",b.request("get:element",e(a.currentTarget).data("id")));}});a.HelpView=b.ItemView.extend({template:"#ismt-help",behaviors:{Link:{}},events:{"click .ismjs-link--rules":"openRulesSection","submit .ismjs-form--support":"validateSupportForm"},initialize:function(){this.navigationTab="help";},openRulesSection:function(a){a.preventDefault();var b=this.$("#ism-tabs--help");b.find("a").removeClass("ui-btn-active");b.tabs("option","active",0);b.find("a").eq(0).addClass("ui-btn-active");e("#"+e(a.target).data("target")).collapsible("expand");},openTac:function(){var a=this.$("#ism-tabs--help");a.find("a").removeClass("ui-btn-active");a.tabs("option","active",2);a.find("a").eq(2).addClass("ui-btn-active");},validateSupportForm:function(a){var b=e(a.target);var c=b.find("input[name='ticket[name]']").val();var d=b.find("input[name='ticket[email]']").val();var f=b.find("input[name='ticket[subject]']").val();var g=b.find("textarea[name='ticket[message]']").val();if(!c||!d||!f||!g||!/(.+)@(.+){2,}\.(.+){2,}/.test(d)){var h=b.data("error");window.alert(h);a.preventDefault();}}});a.PrizesView=b.ItemView.extend({template:"#ismt-prizes",initialize:function(){this.navigationTab="prizes";}});});window.ISMApp.module("Apps.TourApp",function(a,b,c,d,e,f){"use strict";var g={startTour:function(c){c=c||{};f.defaults(c,{"Views":[]});if(c.Views.length){var d=b.request("utils:registry:get","tour",a.Controller,{clearCache:false,destroyAll:false});var g=d.getTour(c);e.when(g).then(function(a){if(e(a.template).length)b.tour.show(a);});}}};a.on("start",function(){var a=[];b.commands.setHandler("tour:start",function(a){g.startTour(a);});this.listenTo(b.vent,"page:changed",function(b){if(b.view.tourAutoStart&&b.view.tourViews&&!a[b.view.template]){g.startTour({Views:b.view.tourViews});a[b.view.template]=true;}});});});window.ISMApp.module("Apps.TourApp",function(a,b,c,d,e,f){"use strict";a.Controller=d.Object.extend({activeClass:"ism-tour__active-stop",getTour:function(a){var b=e.Deferred();this.Views=a.Views;this.currentView=0;this.layout=this.getLayout();b.resolve(this.layout);return b;},getLayout:function(){var b=new a.Layout();this.listenTo(b,"show",this.showNextStep);this.listenTo(b,"destroy",this.removeActiveTourStops);this.listenTo(b,"tour:close",this.closeTour);this.listenTo(b,"tour:next",this.showNextStep);this.listenTo(b,"tour:back",this.showPreviousStep);return b;},showTourBody:function(a){var b=this.layout;var c=this;var d=false;this.listenTo(a,"show",function(){if(this.currentView===1)b.ui.back.hide();else b.ui.back.show();if(this.currentView===this.Views.length){b.ui.next.hide();b.ui.close.show();}else{b.ui.next.show();b.ui.close.hide();}var c=a.$el.find(".ismjs-tour-title");b.setHeading(c.html());c.remove();e(a.tourStop).addClass(this.activeClass);this.repositionToView(a);});this.removeActiveTourStops();if(a.tourInit){this.hideTour();var f=function(){if(!d){c.showTour();b.body.show(a);d=true;}};e.when(a.tourInit()).then(f);window.setTimeout(f,1000);}else b.body.show(a);},showNextStep:function(){if(this.Views[this.currentView]){this.currentView++;this.showTourBody(new this.Views[this.currentView-1]());}},showPreviousStep:function(){if(this.currentView>1){this.currentView--;this.showTourBody(new this.Views[this.currentView-1]());}},removeActiveTourStops:function(){e("."+this.activeClass).removeClass(this.activeClass);},closeTour:function(){this.layout.trigger("popup:close");b.execute("utils:page:show-main");},hideTour:function(){this.layout.trigger("popup:hide");},showTour:function(){this.layout.trigger("popup:show");},repositionToView:function(a){this.layout.trigger("popup:reposition",{positionTo:a.tourStop});}});});window.ISMApp.module("Apps.TourApp",function(a,b,c,d,e,f){"use strict";a.Layout=b.LayoutView.extend({template:"#ismt-tour-layout",regions:{body:"#ismr-tour-body"},ui:{"heading":".ismjs-tour-heading","next":".ismjs-tour-next","back":".ismjs-tour-back","close":".ismjs-tour-close"},triggers:{"click @ui.next":"tour:next","click @ui.back":"tour:back","click @ui.close":"tour:close"},popupOptions:{arrow:"b,t,r,l"},setHeading:function(a){this.ui.heading.html(a);}});});window.ISMApp.module("Apps.ElementApp",function(a,b,c,d,e,f){"use strict";a.Router=d.AppRouter.extend({appRoutes:{"element/:elementId":"showElementInPage"}});var g={showElement:function(c,d){b.execute("utils:loader:show");var f=b.request("utils:registry:get","element/",a.Controller,{clearCache:false,destroyAll:false});var g=f.getElementView(c,d);e.when(g).then(function(a){b.execute("utils:loader:hide");b.element.show(a);if(d)a.listenTo(d,"popup:close",function(){a.trigger("popup:close");});});},showElementInPage:function(d){var f="element/"+d;b.execute("utils:loader:show");var g=b.request("utils:registry:get",f,a.Controller);var h=g.show(d);e.when(h).then(function(a){c.history.navigate(f);b.execute("utils:page:change",a,new b.Apps.StaticApp.BlankView());},function(){b.execute("ism:show:home");});}};a.on("start",function(){b.commands.setHandler("show:element",function(a,b){g.showElement(a,b);});new a.Router({controller:g});});});window.ISMApp.module("Apps.ElementApp",function(a,b,c,d,e,f){"use strict";a.Controller=d.Object.extend({show:function(c,d){var f=e.Deferred();var g=b.request("get:element",c);if(!g){f.reject("Unknown element");return f;}var h=new a.PageLayoutView({model:g});var i=this.getElementView(g,d);var j=this;e.when(i.done(function(a){j.listenTo(h,"show",function(){h.element.show(a);});f.resolve(h);}));return f;},getElementView:function(c,d){var f=e.Deferred();var g=this;var h=new a.LayoutView({model:c});var i=new b.Entities.ElementSummary({id:c.get("id")});i.fetch().done(function(){g.listenTo(h,"render",function(){var e=i.getHistory();var f=i.getHistoryPast();h.explain.show(new a.ExplainCollection({collection:i.getExplain()}));h.recent.show(new a.RecentView({collection:i.getHistorySummary()}));h.upcoming.show(new a.UpcomingView({collection:i.getFixturesSummary()}));h.statToggle.show(new a.StatToggleView({collection:b.request("get:statCategories")}));if(e.length)h.historyThis.show(new a.HistoryThisView({collection:e}));if(f.length)h.historyPast.show(new a.HistoryPastView({collection:f}));h.fixtures.show(new a.FixturesView({collection:i.getFixtures()}));var g=this.getWatchlistView(c);if(g)h.watchlist.show(g);if(d)h.custom.show(d);});f.resolve(h);});return f;},getWatchlistView:function(c){if(b.request("get:login:status")!=="LOGGED_IN_ENTRY")return null;var d=new a.WatchlistView({model:c});this.listenTo(d,"watchlist:add",this.addToWatchlist);this.listenTo(d,"watchlist:remove",this.removeFromWatchlist);return d;},addToWatchlist:function(a){var c=b.request("get:watched");c.addElement(a.model).always(function(){a.view.options.state="just_added";a.view.triggerMethod("state:changed");});},removeFromWatchlist:function(a){var c=b.request("get:watched");c.removeElement(a.model).always(function(){a.view.options.state="";a.view.triggerMethod("state:changed");});}});});window.ISMApp.module("Apps.ElementApp",function(a,b,c,d,e,f){"use strict";a.PageLayoutView=b.LayoutView.extend({template:"#ismt-element-layout",regions:{"element":"#ismr-element-page"},initialize:function(){this.navigationTab="elements";}});a.LayoutView=b.LayoutView.extend({template:"#ismt-element",regions:{"explain":"#ismr-element-explain","recent":"#ismr-element-summary-recent","upcoming":"#ismr-element-summary-upcoming","statToggle":"#ismr-element-stat-toggle","historyThis":"#ismr-element-history-this","historyPast":"#ismr-element-history-past","fixtures":"#ismr-element-fixtures","custom":"#ismr-element-custom","watchlist":"#ismr-watchlist"},serializeData:function(){var a=b.LayoutView.prototype.serializeData.apply(this,arguments);var c=b.request("get:event:current")||b.request("get:event:next");a.roundName=c.get("id");return a;}});a.ExplainItemView=b.ItemView.extend({template:"#ismt-element-explain-item",tagName:"tr"});a.ExplainEmptyView=b.ItemView.extend({template:"#ismt-element-explain-empty",serializeData:function(){var a=b.request("get:event:current")||b.request("get:event:next");return{"event_name":a.get("name")};}});a.ExplainView=b.CompositeView.extend({template:"#ismt-element-explain",childViewContainer:"tbody",childView:a.ExplainItemView,initialize:function(){this.collection=this.model.get("explain");},serializeData:function(){var a=b.CompositeView.prototype.serializeData.apply(this,arguments);var c=b.request("get:event:current")||b.request("get:event:next");a.explainIndex=this.options.explainIndex;a.roundName=c.get("name");return a;}});a.ExplainCollection=b.CollectionView.extend({childView:a.ExplainView,emptyView:a.ExplainEmptyView,childViewOptions:function(a,b){return{explainIndex:b};}});a.StatToggleItem=b.ItemView.extend({tagName:"li",template:"#ismt-element-stat-toggle-item",attributes:function(){var a={"class":"ism-link-bar__item"};if(this.model.get("selected"))a["class"]+=" is-active";return a;},triggers:{"click a":"showCategory"}});a.StatToggleView=b.CollectionView.extend({tagName:"ul",className:"ism-link-bar ism-toggle__bar",childView:a.StatToggleItem,initialize:function(){this.on("childview:showCategory",this.showCategory);},showCategory:function(a){this.collection.setSelected(a.model);this.render();}});a.RecentItemView=b.ItemView.extend({template:"#ismt-element-summary-recent-item",tagName:"tr"});a.RecentView=b.CompositeView.extend({template:"#ismt-element-summary-recent",childViewContainer:"tbody",childView:a.RecentItemView});a.UpcomingItemView=b.ItemView.extend({template:"#ismt-element-summary-upcoming-item",tagName:"tr"});a.UpcomingView=b.CompositeView.extend({template:"#ismt-element-summary-upcoming",childViewContainer:"tbody",childView:a.UpcomingItemView});a.HistoryThisItemView=b.ItemView.extend({template:"#ismt-element-history-this-item",tagName:"tr"});a.HistoryThisView=b.CompositeView.extend({template:"#ismt-element-history-this",childViewContainer:"tbody",childView:a.HistoryThisItemView,initialize:function(){if(this.collection.length){this.model=new b.Entities.Model(this.collection.getTotals());this.model.set("showTotals",true);}else this.model=new b.Entities.Model({"showTotals":false});this.listenTo(b.vent,"changed:statCategory",function(){b.execute("showStatCategories",this);});}});a.HistoryPastItemView=b.ItemView.extend({template:"#ismt-element-history-past-item",tagName:"tr"});a.HistoryPastView=b.CompositeView.extend({template:"#ismt-element-history-past",childViewContainer:"tbody",childView:a.HistoryPastItemView,initialize:function(){this.listenTo(b.vent,"changed:statCategory",function(){b.execute("showStatCategories",this);});}});a.FixtureView=b.ItemView.extend({template:"#ismt-element-fixture",tagName:"tr"});a.FixturesView=b.CompositeView.extend({template:"#ismt-element-fixtures",childViewContainer:"tbody",childView:a.FixtureView});a.WatchlistView=b.ItemView.extend({template:"#ismt-element-watchlist",triggers:{"click .ismjs-wl-add":"watchlist:add","click .ismjs-wl-remove":"watchlist:remove"},behaviors:{DisableOnClick:{}},state:"",onStateChanged:function(){this.render();},serializeData:function(){var a=this.getOption("state");if(!a){var c=b.request("get:watched");if(c.hasElement(this.model))a="can_remove";else a="can_add";}return{state:a};}});});window.ISMApp.module("Apps.EntryApp",function(a,b,c,d,e,f){"use strict";f.extend(a.Router.prototype.namedRoutes,{entry_transfers_history:["entry/:entryId/transfers","showTransfers"],entry_loans_history:["entry/:entryId/loans","showLoans"]});f.extend(a.API,{showTransfers:function(b){this.show(b,"entry_transfers_history",a.TransfersController);},showLoans:function(b){this.show(b,"entry_loans_history",a.LoansController);}});});window.ISMApp.module("Apps.EntryApp",function(a,b,c,d,e,f){"use strict";a.TransfersController=a.BaseHistoryController.extend({url:function(a){return "/drf/entry/"+a+"/transfers";},getView:function(b){var c=new a.TransfersLayoutView();var d=this.getTransfersView(b.history);var e=this.getWildcardsView(b.wildcards);this.listenTo(c,"show",function(){c.transfers.show(d);c.wildcards.show(e);});return c;},getTransfersView:function(c){var d=new b.Entities.EntryElementHistory(c);d.inflateElements();d.inflateEvent();var e=new a.TransfersView({collection:d});this.listenForElementsInOut(e);return e;},getWildcardsView:function(c){var d=new a.WildcardsView({collection:new b.Entities.Collection(c)});return d;}});a.LoansController=a.BaseHistoryController.extend({url:function(a){return "/drf/entry/"+a+"/loans";},getView:function(c){var d=new b.Entities.EntryElementHistory(c.history);d.inflateElements();d.inflateEventStartStop();var e=new a.LoansView({collection:d});this.listenForElementsInOut(e);return e;}});});window.ISMApp.module("Apps.EntryApp",function(a,b,c,d,e,f){"use strict";a.TransfersLayoutView=b.LayoutView.extend({template:"#ismt-entry-transfers-layout",regions:{transfers:"#ismr-transfers-history",wildcards:"#ismr-wildcards-history"}});a.TransfersItemView=b.ItemView.extend({template:"#ismt-entry-transfers-item",tagName:"tr",triggers:{"click a.ismjs-info-in":"showElementIn","click a.ismjs-info-out":"showElementOut"}});a.TransfersView=b.CompositeView.extend({template:"#ismt-entry-transfers",childView:a.TransfersItemView,childViewContainer:"tbody"});a.WildcardsItemView=b.ItemView.extend({template:"#ismt-entry-wildcards-item",tagName:"tr"});a.WildcardsView=b.CompositeView.extend({template:"#ismt-entry-wildcards",childView:a.WildcardsItemView,childViewContainer:"tbody"});a.LoansItemView=b.ItemView.extend({template:"#ismt-entry-loans-item",tagName:"tr",triggers:{"click a.ismjs-info-in":"showElementIn","click a.ismjs-info-out":"showElementOut"}});a.LoansView=b.CompositeView.extend({template:"#ismt-entry-loans",childView:a.LoansItemView,childViewContainer:"tbody"});});window.ISMApp.module("Apps.FixturesApp",function(a,b,c,d,e,f){"use strict";a.Router=d.AppRouter.extend({appRoutes:{"fixtures(/:event)":"showFixtures"}});var g={showFixtures:function(d){var f=b.request("get:event",d);if(!f)f=b.request("get:event:active");var g="fixtures/"+f.get("id");b.execute("utils:loader:show");var h=b.request("utils:registry:get",g,a.Controller);var i=h.show(f);e.when(i).then(function(a){var d={};if(c.history.fragment==="fixtures")d.replace=true;c.history.navigate(g,d);b.execute("utils:page:change",a,new b.Apps.StaticApp.BlankView());},function(){window.alert("Error");b.execute("utils:loader:hide");});},showFixturesInRegion:function(c,d){var e=b.request("utils:registry:get","fixtures/",a.Controller,{clearCache:false,destroyAll:false});e.showInRegion(c,d);}};a.on("start",function(){b.commands.setHandler("ism:show:fixtures",function(a){a=a||0;g.showFixtures(a);});b.commands.setHandler("show:fixtures",function(a,b){g.showFixturesInRegion(a,b);});new a.Router({controller:g});});});window.ISMApp.module("Apps.FixturesApp",function(a,b,c,d,e,f){"use strict";a.Controller=d.Object.extend({show:function(c){var d=e.Deferred();var f=new a.LayoutView();var g=this.getView(c);var h=this;e.when(g).then(function(a){h.listenTo(a,"show:previous",function(){b.execute("ism:show:fixtures",c.get("id")-1);});h.listenTo(a,"show:next",function(){b.execute("ism:show:fixtures",c.get("id")+1);});h.listenTo(f,"show",function(){f.fixtures.show(a);});d.resolve(f);});return d;},showInRegion:function(a,c,d){d=d||{};f.defaults(d,{snapToTop:false});var g=this.getView(c);var h=this;e.when(g).then(function(e){h.listenTo(e,"show:previous",function(){h.showInRegion(a,c.getPrevious(),{snapToTop:true});});h.listenTo(e,"show:next",function(){h.showInRegion(a,c.getNext(),{snapToTop:true});});a.show(e);b.execute("utils:ui:picturefill");if(d.snapToTop)e.$el.find("a:first").focus();});},getView:function(c){var d=e.Deferred();var f=this;e.when(b.request("get:fixtures",c.get("id"))).then(function(e){var g=e.createWithStatDummyAndDayHeader();var h=b.request("get:event:next"),i,j,k=new a.EventView({model:c});if(h&&h.get("id")<=c.get("id")&&!c.isKoRound()){i=e.teamsByMatches({excludeSingleMatches:true});if(i.length)j=f.getMatchesView(i);}f.listenTo(k,"show",function(){var b=new a.FixturesView({model:c,collection:g});f.listenTo(b,"childview:show:stats",f.toggleStats);f.listenTo(b,"childview:childview:show:element",f.showElement);k.fixtures.show(b);if(j)k.matches.show(j);});d.resolve(k);});return d;},toggleStats:function(a){if(a.$el.hasClass("ism-fixture-open"))this.hideStats(a);else this.showStats(a);},showStats:function(a){b.execute("loader:show");var c=a.model.fetchAndPopulateStats();c.done(function(){b.execute("loader:hide");a.$el.addClass("ism-fixture-open");a.$el.next().find(".ismjs-fixture-summary").show();});},hideStats:function(a){a.$el.removeClass("ism-fixture-open");a.$el.next().find(".ismjs-fixture-summary").hide();},getMatchesView:function(b){return new a.MatchesView({teamsByMatches:b});},showElement:function(a,c,d){b.execute("show:element",b.request("get:element",d));}});});window.ISMApp.module("Apps.FixturesApp",function(a,b,c,d,e,f){"use strict";a.LayoutView=b.LayoutView.extend({template:"#ismt-fixtures-layout",regions:{"fixtures":"#ismr-fixtures-event"},initialize:function(){this.navigationTab="fixtures";this.headerViews=[];}});a.ItemView=b.ItemView.extend({template:"#ismt-fixtures-item",tagName:"tr",attributes:function(){var a={};if(this.model.get("has_score"))a["class"]="ism-fixture-result";return a;},triggers:function(){var a={};if(this.model.get("has_score"))a.click="show:stats";return a;}});a.StatItemView=b.ItemView.extend({template:"#ismt-fixtures-stat-item",tagName:"li",events:{"click .ismjs-show-element":"showElement"},showElement:function(a){a.preventDefault();var b=/#(\d+)/.exec(a.currentTarget.href);if(b)this.trigger("show:element",parseInt(b[1],10));}});a.StatView=b.CompositeView.extend({template:"#ismt-fixtures-stat",childView:a.StatItemView,childViewContainer:"ul",tagName:"tr",className:"ismjs-summary-row",initialize:function(){this.model=this.model.get("statDummy");this.collection=this.model.statsSummary;}});a.DayHeaderView=b.ItemView.extend({template:"#ismt-fixtures-day-header",tagName:"tr"});a.EventView=b.LayoutView.extend({template:"#ismt-fixtures-event",regions:{"fixtures":"#ismr-fixtures-table","matches":"#ismr-fixtures-matches"},serializeData:function(){var a=this.model.toJSON();var c=b.request("get:event:last").get("id");a.showPrevious=this.model.get("id")>1?true:false;a.showNext=this.model.get("id")<c?true:false;return a;},triggers:{"click .ismjs-next":"show:next","click .ismjs-previous":"show:previous"}});a.FixturesView=b.CompositeView.extend({template:"#ismt-fixtures-table",childViewContainer:"tbody",initialize:function(){this.last_deadline_time="";this.day_number=1;},getChildView:function(b){if(b.get("statDummy"))return a.StatView;else if(b.get("day_number"))return a.DayHeaderView;else return a.ItemView;}});a.MatchesView=b.ItemView.extend({template:"#ismt-fixtures-matches",serializeData:function(){return{teamsByMatches:this.options.teamsByMatches};}});});window.ISMApp.module("Apps.SquadApp",function(a,b,c,d,e,f){"use strict";a.Router=b.Router.Named.extend({namedRoutes:{"squad_selection":["squad/selection","showSelection"],"squad_transfers":["squad/transfers","showTransfers"],"squad_loans":["squad/loans","showLoans"]}});var g={showSelection:function(d){d=d||{};f.defaults(d,{replaceUrl:false});if(!b.request("player:check:auth",["LOGGED_IN_PLAYER"]))return;var g=b.request("router:named:get","squad_selection",{includeRoot:false});var h=b.request("get:loggedInPlayer");var i=h.checkEligibility();if(i!=="ok")window.location="/"+i+"/";else{b.execute("utils:loader:show");var j=b.request("utils:registry:get",g,a.SelectionController);var k={};if(j.fromCache)k={allowReload:false};var l=j.show();e.when(l).then(function(a,e){c.history.navigate(g,{replace:d.replaceUrl});b.execute("utils:page:change",a,e,k);},function(){window.alert("Error");b.execute("utils:loader:hide");});}},showTransfers:function(d){d=d||{};f.defaults(d,{replaceUrl:false});if(!b.request("player:check:auth",["LOGGED_IN_ENTRY"]))return;var g=b.request("get:loggedInEntry");if(g.get("transfers_or_loans")==="loans"){this.showLoans({replaceUrl:true});return;}var h=b.request("router:named:get","squad_transfers",{includeRoot:false});b.execute("utils:loader:show");var i=b.request("utils:registry:get",h,a.TransfersController);var j=i.show();e.when(j).then(function(a,e){c.history.navigate(h);b.execute("utils:page:change",a,e,{replace:d.replaceUrl});},function(){b.execute("utils:navigation:reload");});},showLoans:function(d){d=d||{};f.defaults(d,{replaceUrl:false});if(!b.request("player:check:auth",["LOGGED_IN_ENTRY"]))return;var g=b.request("get:loggedInEntry");if(g.get("transfers_or_loans")==="transfers"){this.showTransfers({replaceUrl:true});return;}var h=b.request("router:named:get","squad_loans",{includeRoot:false});b.execute("utils:loader:show");var i=b.request("utils:registry:get",h,a.LoansController);var j=i.show();e.when(j).then(function(a,e){c.history.navigate(h);b.execute("utils:page:change",a,e,{replace:d.replaceUrl});},function(){b.execute("utils:navigation:reload");});}};a.on("start",function(){b.vent.on("LOGGED_IN_PLAYER",function(){g.showSelection({replaceUrl:true});});b.vent.on("register:done",function(){b.execute("utils:navigation:reload","squad/selection");});b.commands.setHandler("ism:show:squad-selection",function(){g.showSelection();});b.reqres.setHandler("ism:get-squad-summary-view",function(){return a.BaseListSummaryLayoutView;});new a.Router({controller:g});});});window.ISMApp.module("Apps.SquadApp",function(a,b,c,d,e,f){"use strict";a.BaseController=d.Object.extend({createControllers:function(){this.listController=this.getListController();this.elementController=this.getElementController();this.listenTo(this.listController,"element:type:selected",function(c){b.execute("utils:page:show-sidebar");this.elementController.filterByElementType(c);this.listenToOnce(b.vent,"utils:page:transitionend",function(){a.trigger("focus:elementType");});});this.listenTo(this.listController,"submit:squad",this.submitSquad);},onDestroy:function(){if(this.listController)this.listController.destroy();if(this.elementController)this.elementController.destroy();}});a.SelectionController=a.BaseController.extend({initialize:function(){this.squad=new b.Entities.Squad();this.squad.emptyAndPad();this.entry=new b.Entities.NewEntry();},show:function(){var a=e.Deferred();this.createControllers();e.when(this.listController.show(),this.elementController.show()).then(function(b,c){a.resolve(b,c);});return a;},getListController:function(){var a=b.request("utils:game-config:get","SquadSelectionListController");return new a({entry:this.entry,squad:this.squad});},getElementController:function(){return new a.SelectionElementController({squad:this.squad});},submitSquad:function(){var a=window.JSON.stringify({"picks":this.squad.toAPI(),"entry":this.entry.toAPI()});b.execute("loader:show");e.ajax({url:"/drf/squad-selection/",type:"POST",data:a,contentType:"application/json",context:this}).done(this.submissionDone).fail(this.submissionFail);},submissionDone:function(a){if(a.action&&a.action==="post-form"){var c=this.buildPostForm(a.form);e("body").append(c);c.trigger("submit");}else{b.execute("login:entry",{"id":a.entry});b.vent.trigger("entry:done");}},buildPostForm:function(a){var b=e("<form />").attr({"method":"post","action":a.url});f.each(a["form-params"],function(a,c){b.append(e("<input />").attr({"type":"hidden","name":c,"value":a}));});return b;},submissionFail:function(a){window.location.reload(true);}});a.TransfersController=a.BaseController.extend({initialize:function(){this.squad=new b.Entities.SquadTransfer();this.entry=b.request("get:loggedInEntry");},show:function(){var a=e.Deferred();this.listenTo(this.squad,"populated",function(){this.createControllers();e.when(this.listController.show(),this.elementController.show()).then(function(b,c){a.resolve(b,c);});});this.squad.fetchAndPopulate().fail(function(){a.reject();});return a;},getListController:function(){return new a.TransfersListController({entry:this.entry,squad:this.squad});},getElementController:function(){return new a.TransfersElementController({squad:this.squad});}});a.LoansController=a.BaseController.extend({initialize:function(a){this.squad=new b.Entities.SquadLoan();this.entry=b.request("get:loggedInEntry");},show:function(){var a=e.Deferred();this.listenTo(this.squad,"loans:active",function(c){var d=new b.Entities.Loans(c);d.inflateElements();var f=this.getActiveLoansView(d);this.elementController=this.getElementController();e.when(this.elementController.show()).then(function(b){a.resolve(f,b);});});this.listenTo(this.squad,"populated",function(){this.createControllers();e.when(this.listController.show(),this.elementController.show()).then(function(b,c){a.resolve(b,c);});});this.squad.fetchAndPopulate().fail(function(){a.reject();});return a;},getListController:function(){return new a.LoansListController({entry:this.entry,squad:this.squad});},getElementController:function(){return new a.LoansElementController({squad:this.squad});},getActiveLoansView:function(c){var d=new a.LoansActiveLayout();this.listenTo(d,"show",function(){d.list.show(this.getActiveLoansListView(c));b.execute("show:fixtures",d.fixtures,b.request("get:event:next"));});return d;},getActiveLoansListView:function(b){var c=new a.LoansActiveListView({collection:b});this.listenTo(c,"cancel:loans",this.cancelActiveLoans);this.listenTo(c,"childview:showElementIn",this.showActiveElementIn);this.listenTo(c,"childview:showElementOut",this.showActiveElementOut);return c;},cancelActiveLoans:function(a){e.ajax({type:"DELETE",url:a.collection.drfUrl(),contentType:"application/json; charset=utf-8"}).done(function(a){b.execute("show:my-team");}).fail(function(){window.location.reload(true);});},showActiveElementIn:function(a){b.execute("show:element",a.model.get("elIn"));},showActiveElementOut:function(a){b.execute("show:element",a.model.get("elOut"));}});a.BaseListController=d.Object.extend({initialize:function(a){this.entry=a.entry;this.squad=a.squad;this.hasDetailViews=b.request("utils:game-config:get","ui-detail-views-enabled");},show:function(){var a=e.Deferred();this.layout=this.getLayout();this.listenTo(this.layout,"tour:start",function(){b.execute("tour:start",{Views:this.layout.tourViews});});this.listenTo(this.layout,"before:show",function(){this.layout.info.show(this.getInfoView());this.layout.errors.show(this.getErrorsView());this.layout.scoreboard.show(this.getScoreboardView());this.layout.summary.show(this.getSummaryLayoutView());if(this.hasDetailViews)this.layout.detail.show(this.getDetailView());var a=b.request("get:event:next");if(a)b.execute("show:fixtures",this.layout.fixtures,a);});this.listenTo(this.layout,"attach",function(){if(this.layout.buttons&&e(this.layout.buttons.el).length)this.layout.buttons.show(this.getButtonsView());if(this.squad.windowStatus==="closed"){this.layout.tourAutoStart=false;this.showWindowClosedView();}});a.resolve(this.layout);return a;},showWindowClosedView:function(){var a=this.getWindowClosedView();this.layout.confirm.show(a);},getLayout:function(){var b=new a.BaseListLayoutView();return b;},getInfoView:function(){var b=new a.BaseListInfoView({squad:this.squad});this.listenTo(this.squad.visibleInfo,"add",b.render);this.listenTo(this.squad.visibleInfo,"remove",b.render);this.listenTo(this.squad.visibleInfo,"reset",b.render);return b;},getScoreboardView:function(b){b=b||{};f.defaults(b,{View:a.BaseListScoreboardView});var c=new b.View({collection:this.squad});this.listenTo(c,"squad:complete",function(){this.squad.autoComplete();this.layout.el.scrollIntoView();});this.listenTo(c,"squad:reset",function(){this.squad.restore();this.layout.el.scrollIntoView();});this.listenTo(c,"squad:confirm",this.showConfirm);this.listenTo(c,"squad:help",this.showHelp);return c;},getButtonsView:function(){return this.getScoreboardView({View:a.BaseListButtonsView});},getErrorsView:function(){var b=new a.BaseListErrorsView({collection:this.squad});return b;},getSummaryLayoutView:function(){var b=new a.BaseListSummaryLayoutView({collection:this.squad});this.setUpItemHandlers(b);return b;},setUpItemHandlers:function(a){this.listenTo(a,"childview:element:select",this.elementSelect);this.listenTo(a,"childview:element:remove",this.elementRemove);this.listenTo(a,"childview:element:show",this.elementShow);this.listenTo(a,"childview:element:menu",this.elementMenu);},elementSelect:function(a){var c;var d=a.model.get("element_type_singular_name");if(d)c=b.request("get:elementTypes").findWhere({"singular_name":d});else c=b.request("get:elementTypes").findWhere({"singular_name_short":a.model.get("singular_name_short")});if(c)this.trigger("element:type:selected",c);},elementRemove:function(a){this.squad.removeElement(a.model);},elementShow:function(a){var c=a.model;b.execute("show:element",c,this.getCustomView(c));},elementMenu:function(a){var b=this.getMenuView(a.model);this.layout.menu.show(b);}});a.SelectionListController=a.BaseListController.extend({show:function(){var b=a.BaseListController.prototype.show.apply(this,arguments);var c=this;b.done(function(a){c.listenTo(a,"attach",function(){if(c.squad.canEnter())c.showConfirm();});});return b;},getLayout:function(){var b=new a.SelectionListLayoutView();return b;},showHelp:function(){var b=new a.SelectionHelpView({squad:this.squad});this.layout.help.show(b);},getWindowClosedView:function(){var c=new a.SelectionClosedView({model:new b.Entities.Model(b.request("get:transferWindow"))});return c;},getDetailView:function(){var b=new a.BaseListCollection({collection:this.squad.plainByType,squad:this.squad,childView:a.SelectionListDetailView});this.listenTo(b,"childview:before:show",function(a){this.setUpItemHandlers(a);});return b;},getMenuView:function(b){var c=new a.SelectionListMenuView({model:b});this.listenTo(c,"element:show",function(a){a.view.trigger("popup:close");this.elementShow(a);});this.listenTo(c,"element:remove",function(a){a.view.trigger("popup:close");this.elementRemove(a);});return c;},getCustomView:function(b){var c=new a.SelectionListCustomView({model:b});this.listenTo(c,"element:remove",function(a){c.trigger("popup:close");this.elementRemove(a);});return c;},showConfirm:function(){if(b.request("entry:open")){var c=new a.SelectionConfirmLayoutView({model:this.entry,teams:this.getTeamCollection()});this.listenTo(c,"show:terms",this.showTerms);this.listenTo(c,"form:submitted",function(){this.trigger("submit:squad");});this.layout.confirm.show(c);}else{var d=new a.SelectionGameOverView();this.layout.confirm.show(d);}},getTeamCollection:function(){var a=new b.Entities.FilterTeam(),c=this.entry,d=c.get("favourite_team"),e;a.populate({"pre":[{"value":"","label":b.request("get:vocab","select-team")}],"post":[{"value":0,"label":b.request("get:vocab","none-of-these")}]});if(d!==""){e=a.findWhere({"value":d});if(e)a.setSelected(a.indexOf(e));}return a;},showTerms:function(){b.execute("show:tac");}});a.TransfersListController=a.BaseListController.extend({getTransfersScoreboardView:function(){var c=b.request("get:event:next");if(!c)return a.TransfersScoreboardUnlimitedView;var d=b.request("get:loggedInEntry");if(d.transfersType()=="limit")return a.TransfersScoreboardLimitView;else if(d.transfersType()=="cost")return a.TransfersScoreboardCostView;else return a.TransfersScoreboardUnlimitedView;},getScoreboardView:function(b){b=b||{};f.defaults(b,{View:this.getTransfersScoreboardView()});var c=a.BaseListController.prototype.getScoreboardView.call(this,{View:b.View});this.listenTo(c,"wildcard:clicked",this.toggleWildcard);return c;},toggleWildcard:function(c){if(this.squad.playWildcard){this.squad.playWildcard=false;c.view.render();return;}var d=b.request("get:loggedInEntry");var e=d.get("wildcard_status");if(e!=="available")return;if(this.squad.doesWildcardMakeSense()){this.squad.playWildcard=true;c.view.render();this.layout.help.show(new a.TransfersWildcardActivatedView());}else this.layout.help.show(new a.TransfersWildcardNoSenseView());},getDetailView:function(){var b=new a.BaseListCollection({collection:this.squad.plainByType,squad:this.squad,childView:a.TransfersListDetailView});this.listenTo(b,"childview:before:show",function(a){this.setUpItemHandlers(a);});return b;},elementRestore:function(a){this.squad.restoreElement(a.model);},addPopupEvents:function(a){this.listenTo(a,"element:show",function(a){a.view.trigger("popup:close");this.elementShow(a);});this.listenTo(a,"element:remove",function(a){a.view.trigger("popup:close");this.elementRemove(a);});this.listenTo(a,"element:select",function(a){a.view.trigger("popup:close");this.elementSelect(a);});this.listenTo(a,"element:restore",function(a){a.view.trigger("popup:close");this.elementRestore(a);});},getMenuView:function(b){var c=new a.TransfersListMenuView({model:b,changesBlocked:this.squad.changesBlocked()});this.addPopupEvents(c);return c;},getCustomView:function(b){var c=new a.TransfersListCustomView({model:b,changesBlocked:this.squad.changesBlocked()});this.addPopupEvents(c);return c;},showConfirm:function(){if(b.request("get:event:next")){b.execute("utils:loader:show");e.ajax({type:"POST",url:this.squad.drfUrl(),data:window.JSON.stringify(this.squad.toAPI()),contentType:"application/json; charset=utf-8",context:this}).done(function(a){b.execute("utils:loader:hide");var c=this.getConfirmView(new b.Entities.Collection(a.transfers));this.layout.confirm.show(c);}).fail(function(){window.location.reload(true);});}else{var c=new a.SelectionGameOverView();this.layout.confirm.show(c);}},getConfirmView:function(c){var d=b.request("get:event:next");var e=new a.TransfersConfirmView({model:d,collection:c,squad:this.squad});this.listenTo(e,"transfers:confirm",this.changesConfirm);this.listenTo(e,"transfers:cancel",this.changesCancel);return e;},changesConfirm:function(a){a.view.trigger("popup:close");b.execute("utils:oader:show");e.ajax({type:"POST",url:this.squad.drfUrl(),data:window.JSON.stringify(this.squad.toAPI(true)),contentType:"application/json; charset=utf-8"}).done(function(a){b.execute("show:my-team");}).fail(function(){window.location.reload(true);});},changesCancel:function(a){a.view.trigger("popup:close");b.execute("show:my-team");},getWindowClosedView:function(){var c=new a.TransfersClosedView({model:new b.Entities.Model(b.request("get:transferWindow"))});return c;}});a.LoansListController=a.TransfersListController.extend({getScoreboardView:function(b){b=b||{};f.defaults(b,{View:a.LoansScoreboardView});var c=a.BaseListController.prototype.getScoreboardView.call(this,{View:b.View});c.model=this.getModel();return c;},getModel:function(){var a=new b.Entities.Model({loanEvents:this.squad.loanEvents,spentPoints:this.squad.spentPoints()});this.listenTo(this.squad,"reset",function(){a.set("spentPoints",this.squad.spentPoints());});this.listenTo(a,"change:loanEvents",function(){this.squad.loanEvents=a.get("loanEvents");a.set("spentPoints",this.squad.spentPoints());});return a;},showConfirm:function(){var a=this.getConfirmView();this.layout.confirm.show(a);},getConfirmView:function(){var c;var d=b.request("get:event:next");if(d){c=new a.LoansConfirmView({model:this.getConfirmModel(),collection:this.getConfirmCollection()});this.listenTo(c,"loans:confirm",this.changesConfirm);this.listenTo(c,"loans:cancel",this.changesCancel);}else c=new a.SelectionGameOverView();return c;},getConfirmCollection:function(){var a=f.map(this.squad.inOutElements(),function(a){return{"elIn":b.request("get:element",a.element_in),"elOut":b.request("get:element",a.element_out)};});return new b.Entities.Collection(a);},getConfirmModel:function(){return new b.Entities.Model({next:b.request("get:event:next"),spentPoints:this.squad.spentPoints(),rounds:this.squad.loanEvents});},getWindowClosedView:function(){var c=new a.LoansClosedView({model:new b.Entities.Model(b.request("get:transferWindow"))});return c;}});a.BaseElementController=d.Object.extend({initialize:function(a){this.squad=a.squad;this.filters=this.getFiltersCollection();this.sorts=this.getSortsCollection();this.priceRanges=new b.Entities.FilterPrices();this.setupControlModel();this.filteredElements=new b.Entities.FilteredElements();this.refreshElements();this.refreshPriceRanges();var c=this.squad;this.filteredElements.listenTo(this.squad,"reset",function(){c.addStatusToElements(this);});},setupControlModel:function(){this.control=new b.Entities.Model({filter:this.filters.at(0).get("value"),sort:this.sorts.at(0).get("value"),maxPrice:null,specialsOnly:false,search:""});this.listenTo(this.control,"change:filter",function(){this.resetSearch();this.refreshElements();this.refreshPriceRanges();});this.listenTo(this.control,"change:sort",function(){this.refreshElements();this.refreshPriceRanges();});this.listenTo(this.control,"change:maxPrice",function(){this.refreshElements();});this.listenTo(this.control,"change:specialsOnly",function(){this.refreshElements();});this.listenTo(this.control,"change:search",function(){this.refreshElements();});this.listenTo(b.request("get:watched"),"reset",function(){this.refreshElements();});},show:function(){var b=e.Deferred();this.layout=new a.BaseElementsLayoutView({model:this.control,filters:this.filters,sorts:this.sorts});this.listenTo(this.layout,"before:show",function(){this.layout.price.show(this.getPriceView());this.layout.list.show(this.getListView(this.sorts));if(this.layout.$el.find(this.layout.sideboard.el).length)this.layout.sideboard.show(this.getSideboardView());});b.resolve(this.layout);return b;},getFiltersCollection:function(){var a=new b.Entities.Filters();var c=[{"value":"all","label":b.request("get:vocab","all-players")}];if(b.request("get:login:status")==="LOGGED_IN_ENTRY")c.push({"value":"watchlist","label":b.request("get:vocab","watchlist")});a.populate(c);return a;},getSortsCollection:function(){var a=new b.Entities.FilterSorts();a.populate();return a;},getPriceView:function(){var b=new a.BaseElementsPriceView({model:this.control,collection:this.priceRanges});return b;},filterByElementType:function(a){this.control.set("filter",this.filters.getValueFromElementType(a));},refreshElements:function(a){a=a||1;var c={filters:[]},d=this.control.get("filter"),e=this.control.get("specialsOnly"),f=this.control.get("sort"),g=this.control.get("maxPrice"),h=this.control.get("search");if(d)c.filters.push(this.filters.getFilterFromValue(d));if(e)c.filters.push(["special","==",true]);if(f)c.sort=[f];if(g)c.maxCost=g;if(h)c.filters.push(["search_name","like",b.request("make:string:searchable",h)]);c.groupByType=true;c.page=a;this.filteredElements.populate(c);this.squad.addStatusToElements(this.filteredElements);},refreshPriceRanges:function(){var a=[{"value":"","label":b.request("get:vocab","unlimited")}];this.priceRanges.populate(this.filteredElements,a);this.control.set("maxPrice",this.priceRanges.closestPrice(this.control.get("maxPrice")));},getListView:function(b){var c=new a.BaseElementsListContainer({control:this.control,collection:this.filteredElements.plainByType,model:this.filteredElements.paginator,sorts:b});this.listenTo(this.filteredElements,"reset",function(){c.render();});this.listenTo(c,"page:changed",this.refreshElements);this.listenTo(c,":show:element:type",function(a){this.filterByElementType(a.model.get("et"));});this.listenTo(c,"::element:show",function(){this.elementShow(arguments[arguments.length-1]);});this.listenTo(c,"::element:add",function(){this.elementAdd(arguments[arguments.length-1]);});this.listenTo(c,"::element:remove",function(){this.elementRemove(arguments[arguments.length-1]);});this.listenTo(c,"::element:menu",this.showMenu);return c;},showMenu:function(a,b,c){var d=this.getMenuView(c.model);this.layout.menu.show(d);},getMenuView:function(b){var c=new a.BaseElementsListMenuView({model:b,changesBlocked:this.squad.changesBlocked()});this.listenTo(c,"element:show",function(a){a.view.trigger("popup:close");this.elementShow(a);});this.listenTo(c,"element:add",function(a){a.view.trigger("popup:close");this.elementAdd(a);});this.listenTo(c,"element:remove",function(a){a.view.trigger("popup:close");this.elementRemove(a);});return c;},getCustomView:function(b){var c=new a.BaseElementsListCustomView({model:b,changesBlocked:this.squad.changesBlocked()});this.listenTo(c,"element:add",function(a){c.trigger("popup:close");this.elementAdd(a);});return c;},elementAdd:function(a){this.squad.resetInfo();this.squad.addElement(a.model,true);this.afterSquadChangeFocus();b.execute("utils:page:show-main");},elementRemove:function(a){this.squad.resetInfo();this.squad.removeElement(a.model,true);this.afterSquadChangeFocus();b.execute("utils:page:show-main");},afterSquadChangeFocus:function(){this.listenToOnce(b.vent,"utils:page:transitionend",function(){e("#ismjs-squad-info").focus();});},elementShow:function(a){var c=a.model;b.execute("show:element",c,this.getCustomView(c));},getSideboardView:function(){var b=new a.SideboardView({collection:this.squad});return b;},resetSearch:function(){this.control.set("search","");}});a.SelectionElementController=a.BaseElementController.extend({});a.TransfersElementController=a.BaseElementController.extend({});a.LoansElementController=a.BaseElementController.extend({});});window.ISMApp.module("Apps.SquadApp",function(a,b,c,d,e,f){"use strict";a.BaseListLayoutView=b.LayoutView.extend({navigationTab:"squad",template:"#ismt-squad-base-list-layout",regions:{errors:"#ismr-errors",info:"#ismr-info",scoreboard:"#ismr-scoreboard",buttons:"#ismr-buttons",summary:"#ismr-summary",detail:"#ismr-detail",menu:{selector:"#ismr-squad-menu",regionClass:b.Regions.Popup},fixtures:"#ismr-squad-fixtures",help:{selector:"#ismr-help",regionClass:b.Regions.Popup},confirm:{selector:"#ismr-confirm",regionClass:b.Regions.Popup}},triggers:{"click .ismjs-tour-start":"tour:start"},serializeData:function(){var a=b.LayoutView.prototype.serializeData.apply(this,arguments);a.hasTour=this.tourViews?true:false;return a;},events:function(){return{};}});a.BaseListInfoView=b.ItemView.extend({template:"#ismt-squad-base-list-info",serializeData:function(){return{"info":this.options.squad.visibleInfo,"valid":this.options.squad.canEnter()};}});a.BaseListScoreboardView=b.ItemView.extend({template:"#ismt-squad-base-list-scoreboard",collectionEvents:{"reset":"render"},triggers:{"click .ismjs-squad-auto":"squad:complete","click .ismjs-squad-reset":"squad:reset","click .ismjs-squad-confirm":"squad:confirm","click .ismjs-help":"squad:help"},serializeData:function(){var a=b.request("get:event:next");return{"bank":this.collection.toSpend(),"bankError":this.collection.hasBankError(),"selected":this.collection.selected(),"squadSize":this.collection.settings.size,"countError":this.collection.hasCountError(),"specials":this.collection.selectedSpecial(),"specialError":this.collection.hasSpecialError(),"canReset":this.collection.canReset(),"canComplete":this.collection.canAutoComplete(),"canEnter":this.collection.canEnter(),"deadline":a?a.get("deadline_time_formatted"):"","deadlineISO":a?a.get("deadline_time"):"","roundName":a?a.get("name"):"","roundId":a?a.get("id"):"","teamLimit":this.collection.settings.teamLimit,"specialMin":this.collection.settings.specialMin,"specialMax":this.collection.settings.specialMax,"mode":this.collection.mode,"changesMade":this.collection.mode==="selection"?null:this.collection.numMade(),"windowStatus":this.collection.windowStatus,"windowOpens":this.collection.windowStatus==="closed"?b.request("get:transferWindow").transfer_window_opens_formatted:""};}});a.BaseListButtonsView=a.BaseListScoreboardView.extend({template:"#ismt-squad-base-list-buttons"});a.BaseListErrorsView=b.ItemView.extend({template:"#ismt-squad-base-list-errors",collectionEvents:{"reset":"render"},formatErrors:function(){var a=[];var c=f.template(b.request("get:vocab","err-team"));f.each(this.collection.visibleErrors,function(d){var e;if(d.type==="team"){e=b.request("get:teams").get(d.value);a.push(c({"limit":this.collection.settings.teamLimit,"team":e.get("name")}));}if(d.type==="autoComplete")a.push(b.request("get:vocab","err-autocomplete"));},this);return a;},serializeData:function(){return{"errors":this.formatErrors()};}});a.BaseListSummaryLayoutView=b.LayoutView.extend({template:"#ismt-squad-base-list-summary-layout",initialize:function(){var a,c=this.collection.elementTypes.length,d=this.collection.settings.size;this.positionHeaders=b.request("utils:game-config:get","ui-squad-positionHeaders");if(this.positionHeaders)for(a=1;a<=c;a++)this.addRegion("et"+a,"#ismr-et"+a);for(a=1;a<=d;a++)this.addRegion("pos"+a,"#ismr-pos"+a);this.renderMode=this.options.renderMode||"";},collectionEvents:{"reset":"reRender"},onRender:function(){if(this.positionHeaders)this.renderTypeHeaders();this.renderPositions();},reRender:function(){this.renderPositions();b.execute("utils:ui:me",{view:this});},renderTypeHeaders:function(){var b,c=this.collection.elementTypes,d=this.collection.elementTypes.length;for(b=1;b<=d;b++)this["et"+b].show(new a.BaseListSummaryDividerView({model:c.at(b-1),collection:this.collection,renderMode:this.renderMode}));},renderPositions:function(){var b,c=this.collection.settings.size,d,e,f,g=this.collection.changesBlocked();for(b=1;b<=c;b++){d=this["pos"+b];e=this.collection.at(b-1);if(!d.currentView||d.currentView.model.cid!=e.cid||this.lastChangesBlocked!==g){f=new a.BaseListSummaryItemView({model:e,changesBlocked:g,shirtZeroId:this.collection.shirtZeroIdAtPosition(b-1),renderMode:this.renderMode,squadInfo:this.collection.visibleInfo});d.show(f);}}this.lastChangesBlocked=g;}});a.BaseListSummaryDividerView=b.ItemView.extend({template:"#ismt-squad-base-list-summary-divider",tagName:"div",className:"ism-panel--header",collectionEvents:{"reset":"render"},serializeData:function(){var a=this.model.toJSON();var b=this.model.get("id");a.numberSelected=this.collection.selectedByType(b);a.numberRequired=this.collection.settings.select[b];a.renderMode=this.options.renderMode;return a;}});a.BaseListSummaryItemView=b.ItemView.extend({template:"#ismt-squad-base-list-summary-item",triggers:{"click .ismjs-select":"element:select","click .ismjs-remove":"element:remove","click .ismjs-info":"element:show","click .ismjs-menu":"element:menu"},attributes:function(){var a={};if(this.model.get("isTransfer"))a["class"]="ism-transfer--"+this.model.get("transferStatus");return a;},serializeData:function(){var a=this.model.toJSON();if(this.model.get("isElement")||this.model.get("isTransfer")){a.info=this.model.elementStatus("ism-icon--info--")||"ism-icon--info";a.sellingPrice=this.model.sellingPrice();a.purchasePrice=this.model.purchasePrice();}a.changesBlocked=this.options.changesBlocked;a.shirtZeroId=this.options.shirtZeroId;a.renderMode=this.options.renderMode;return a;}});a.BaseListDetailItemView=a.BaseListSummaryItemView.extend({tagName:"tr"});a.BaseListDetailDividerView=b.ItemView.extend({tagName:"tr",attributes:function(){var a={"class":"ism-table__divider ism-table__divider--"+this.model.get("et").get("id")};return a;}});a.BaseListDetailView=b.CompositeView.extend({initialize:function(){this.isTransfer=this.collection.at(0).get("isTransfer");},childViewContainer:"tbody",childViewOptions:function(a,b){return{"changesBlocked":this.options.squad.changesBlocked(),"shirtZeroId":this.options.squad.shirtZeroIdAtPosition(b)};},onRenderCollection:function(){b.execute("utils:ui:picturefill");}});a.BaseListCollection=b.CollectionView.extend({childViewOptions:function(a,b){return{collection:a.get("elements"),squad:this.options.squad};}});a.BaseElementsLayoutView=b.LayoutView.extend({template:"#ismt-squad-base-elements-layout",regions:{sideboard:"#ismr-sideboard",price:"#ismr-price",special:"#ismr-special",list:"#ismr-elements-list",menu:{selector:"#ismr-elements-menu",regionClass:b.Regions.Popup}},ui:{filter:"#ismjs-element-filter"},bindings:{"#ismjs-element-filter":{observe:"filter",selectOptions:{collection:function(){return this.options.filters.asOptGroups(this.ui.filter.data("global"),this.ui.filter.data("position"),this.ui.filter.data("team"));}}},"#ismjs-element-sort":{observe:"sort",selectOptions:{collection:function(){return this.options.sorts;}}},"#ismjs-element-special":"specialsOnly","#ismjs-element-search":"search"},events:function(){return{};},initialize:function(){this.listenTo(a,"focus:elementType",function(){this.ui.filter.focus();});},onRender:function(){this.stickit();}});a.BaseElementsPriceView=b.ItemView.extend({template:"#ismt-squad-base-elements-price",bindings:{"#ismjs-element-price":{observe:"maxPrice",selectOptions:{collection:function(){return this.collection;}}}},collectionEvents:{"reset":"render"},onRender:function(){this.stickit();}});a.SideboardView=a.BaseListScoreboardView.extend({template:"#ismt-squad-base-elements-sideboard"});a.BaseElementsListContainer=b.CompositeView.extend({template:"#ismt-squad-base-elements-list-container",childViewContainer:"div#ismjs-elements-list-tables",childViewEventPrefix:"",getChildView:function(c,d){return c.get("elements").length?a.BaseElementsListView:b.EmptyView;},childViewOptions:function(a){return{collection:a.get("elements"),control:this.options.control,sorts:this.options.sorts};},events:{"click .ismjs-change-page":"changePage"},changePage:function(a){a.preventDefault();var b=/#(\d+)/.exec(a.currentTarget.href);if(b){this.trigger("page:changed",parseInt(b[1],10));this.el.scrollIntoView();}},serializeData:function(){var a=b.CompositeView.prototype.serializeData.apply(this,arguments);var c=b.request("get:elements");a.historicalData=c.haveHistoricalData();return a;}});a.BaseElementsListItemView=b.ItemView.extend({template:"#ismt-squad-base-elements-list-item",tagName:"tr",className:function(){return this.getClassName();},modelEvents:{"change:squadStatus":"setClassName"},getClassName:function(){var a="ismjs-menu ism-row-select";if(this.model.hasNews())a+=" ism-element-list__info--0";if(this.model.get("squadStatus")==="in")a+=" ism-element-list__in-squad";return a;},setClassName:function(){this.el.className=this.getClassName();},serializeData:function(){var a=this.model.toJSON();var c=this.options.sort;a.stat=b.request("format:currency_or_raw",a[c],c);a.info=this.model.elementStatus("ism-icon--info--")||"ism-icon--info";return a;},triggers:{"click .ismjs-add":"element:add","click .ismjs-remove":"element:remove","click .ismjs-info":"element:show","click":"element:menu"}});a.BaseElementsListView=b.CompositeView.extend({template:"#ismt-squad-base-elements-list",childViewContainer:"tbody",childView:a.BaseElementsListItemView,childViewEventPrefix:"",triggers:{"click a":"show:element:type"},initialize:function(a){this.control=a.control;this.sort=this.control.get("sort");this.sorts=a.sorts;},serializeData:function(){var a=b.CompositeView.prototype.serializeData.apply(this,arguments);a.sort=this.sort;a.sorts=this.sorts;return a;},templateHelpers:f.extend(b.ItemView.prototype.templateHelpers,{},{statAbbreviation:function(){var a=this.sorts.getLabelFromValue(this.sort);return b.request("abbreviate:stat",a);},statTitle:function(){return this.sorts.getLabelFromValue(this.sort);}}),childViewOptions:function(){return{sort:this.options.control.get("sort"),sorts:this.options.sorts};},onDomRefresh:function(){b.execute("utils:ui:picturefill");}});a.BaseElementsListMenuView=b.ItemView.extend({template:"#ismt-squad-base-elements-list-menu",popupOptions:{overlayTheme:"b"},triggers:{"click .ismjs-add":"element:add","click .ismjs-remove":"element:remove","click .ismjs-info":"element:show"},serializeData:function(){var a=b.ItemView.prototype.serializeData.apply(this,arguments);a.changesBlocked=this.getOption("changesBlocked");return a;}});a.BaseElementsListCustomView=b.ItemView.extend({template:"#ismt-squad-base-elements-list-custom",triggers:{"click .ismjs-add":"element:add","click .ismjs-info":"element:show"},serializeData:function(){var a=b.ItemView.prototype.serializeData.apply(this,arguments);a.changesBlocked=this.getOption("changesBlocked");return a;}});a.SelectionTourStep1=b.ItemView.extend({template:"#ismt-squad-selection-tour-1",tourStop:".ismjs-squad-selection-tour-stop-1",tourInit:function(){var a=e.Deferred();this.listenTo(b.vent,"utils:page:transitionend",function(){a.resolve();});b.execute("utils:page:show-main");e(this.tourStop).get(0).scrollIntoView(false);return a.promise();}});a.SelectionTourStep2=b.ItemView.extend({template:"#ismt-squad-selection-tour-2",tourStop:".ismjs-squad-selection-tour-stop-2",tourInit:function(){var a=e.Deferred();this.listenTo(b.vent,"utils:page:transitionend",function(){a.resolve();});b.execute("utils:page:show-sidebar");return a.promise();}});a.SelectionTourStep3=b.ItemView.extend({template:"#ismt-squad-selection-tour-3",tourStop:".ismjs-squad-selection-tour-stop-3"});a.SelectionListLayoutView=a.BaseListLayoutView.extend({initialize:function(c){a.BaseListLayoutView.prototype.initialize.apply(this,arguments);this.tourViews=[a.SelectionTourStep1,a.SelectionTourStep2,a.SelectionTourStep3];var d=b.request("utils:game-config:get","selectionTourAutoStart");if(d===true)this.tourAutoStart=true;else this.tourAutoStart=false;}});a.SelectionListDetailItemView=a.BaseListDetailItemView.extend({template:"#ismt-squad-selection-list-detail-item"});a.SelectionListDetailDividerView=a.BaseListDetailDividerView.extend({template:"#ismt-squad-selection-list-detail-divider"});a.SelectionListDetailView=a.BaseListDetailView.extend({template:"#ismt-squad-selection-list-detail",getChildView:function(b){if(b.get("isDivider"))return a.SelectionListDetailDividerView;else return a.SelectionListDetailItemView;}});a.SelectionListMenuView=b.ItemView.extend({template:"#ismt-squad-selection-list-menu",triggers:{"click .ismjs-remove":"element:remove","click .ismjs-info":"element:show"}});a.SelectionListCustomView=b.ItemView.extend({template:"#ismt-squad-selection-list-custom",triggers:{"click .ismjs-remove":"element:remove"}});a.SelectionHelpView=b.ItemView.extend({template:"#ismt-squad-selection-help",serializeData:function(){return{"toSpend":this.options.squad.settings.spend,"squadSize":this.options.squad.settings.size,"teamLimit":this.options.squad.settings.teamLimit,"specialMin":this.options.squad.settings.specialMin};}});a.SelectionClosedView=b.ItemView.extend({template:"#ismt-squad-selection-window-closed"});a.SelectionConfirmLayoutView=b.ItemView.extend({template:"#ismt-squad-selection-confirm-layout",ui:{button:".ismjs-submit"},triggers:{"click .ismjs-terms":"show:terms"},events:{"click @ui.button":"buttonClicked"},bindings:{"#ismjs-name":"name","#ismjs-fave":{observe:"favourite_team",selectOptions:{collection:"this.options.teams"}},"#ismjs-email":{observe:"email",onSet:function(a){return a?true:false;}},"#ismjs-terms-agreed":"terms_agreed"},modelEvents:{"change":"checkValidity"},onRender:function(){this.stickit();this.checkValidity();},checkValidity:function(){var a=this.model.validForCreating();if(a)this.buttonEnable();else this.buttonDisable();},buttonDisable:function(){this.ui.button.prop("disabled",true);},buttonEnable:function(){this.ui.button.prop("disabled",false);},buttonClicked:function(a){a.preventDefault();this.buttonDisable();this.trigger("form:submitted",this);}});a.SelectionTermsView=b.ItemView.extend({template:"#ismt-squad-selection-terms",initialize:function(a){this.html=a.html;this.dialogOptions={height:400};},onShow:function(){this.$("#ismjs-terms").html(this.html);}});a.SelectionGameOverView=b.ItemView.extend({template:"#ismt-squad-selection-over",initialize:function(){this.dialogOptions={modal:true};}});a.TransfersScoreboardUnlimitedView=a.BaseListScoreboardView.extend({});a.TransfersClosedView=b.ItemView.extend({template:"#ismt-squad-transfers-window-closed"});a.TransfersScoreboardLimitBase=a.BaseListScoreboardView.extend({serializeData:function(){var c=b.request("get:loggedInEntry");var d=a.BaseListScoreboardView.prototype.serializeData.apply(this,arguments);d.playWildcard=this.collection.playWildcard;d.wildcardStatus=c.get("wildcard_status");d.activeChip="";if(c.hasChips()){var e=c.chipsCollection.getActive();if(e)d.activeChip=e.get("displayName");}return d;},triggers:function(){var b=f.result(a.BaseListScoreboardView.prototype,"triggers");b["click .ismjs-wildcard"]="wildcard:clicked";return b;}});a.TransfersScoreboardLimitView=a.TransfersScoreboardLimitBase.extend({template:"#ismt-squad-transfers-scoreboard-limit",serializeData:function(){var b=a.TransfersScoreboardLimitBase.prototype.serializeData.apply(this,arguments);b.remaining=this.collection.transfersRemaining();b.remainingError=b.remaining<=0?true:false;return b;}});a.TransfersScoreboardCostView=a.TransfersScoreboardLimitBase.extend({template:"#ismt-squad-transfers-scoreboard-cost",serializeData:function(){var b=a.TransfersScoreboardLimitBase.prototype.serializeData.apply(this,arguments);b.remaining=this.collection.freeTransfersRemaining();b.cost=this.collection.transfersCost();return b;}});a.TransfersWildcardNoSenseView=b.ItemView.extend({template:"#ismt-squad-transfers-wildcard-no-sense"});a.TransfersWildcardActivatedView=b.ItemView.extend({template:"#ismt-squad-transfers-wildcard-activated"});a.TransfersListDetailItemView=a.BaseListDetailItemView.extend({template:"#ismt-squad-transfers-list-detail-item"});a.TransfersListDetailView=a.BaseListDetailView.extend({template:"#ismt-squad-transfers-list-detail",childView:a.TransfersListDetailItemView});a.TransfersListMenuView=b.ItemView.extend({template:"#ismt-squad-transfers-list-menu",triggers:{"click .ismjs-remove":"element:remove","click .ismjs-restore":"element:restore","click .ismjs-select":"element:select","click .ismjs-info":"element:show"},serializeData:function(){var a=b.ItemView.prototype.serializeData.apply(this,arguments);a.changesBlocked=this.getOption("changesBlocked");return a;}});a.TransfersListCustomView=b.ItemView.extend({template:"#ismt-squad-transfers-list-custom",triggers:{"click .ismjs-remove":"element:remove","click .ismjs-restore":"element:restore"},serializeData:function(){var a=b.ItemView.prototype.serializeData.apply(this,arguments);a.changesBlocked=this.getOption("changesBlocked");return a;}});a.TransfersConfirmItem=b.ItemView.extend({template:"#ismt-squad-transfers-confirm-item",tagName:"tr",serializeData:function(){var a=b.ItemView.prototype.serializeData.apply(this,arguments);a.in_web_name=b.request("get:element",this.model.get("element_in")).get("web_name");a.out_web_name=b.request("get:element",this.model.get("element_out")).get("web_name");a.in_team_name=b.request("get:element",this.model.get("element_in")).get("team_name");a.out_team_name=b.request("get:element",this.model.get("element_out")).get("team_name");return a;}});a.TransfersConfirmView=b.CompositeView.extend({template:"#ismt-squad-transfers-confirm",childView:a.TransfersConfirmItem,childViewContainer:"tbody",triggers:{"click .ismjs-confirm":"transfers:confirm","click .ismjs-cancel":"transfers:cancel"},serializeData:function(){var a=b.request("get:loggedInEntry");var c=a.get("wildcard_status");var d=b.CompositeView.prototype.serializeData.apply(this,arguments);d.cost=a.started()&&c!=="active"?this.options.squad.transfersCost():0;d.wildcard_proposed=this.options.squad.playWildcard;d.wildcard_status=c;return d;}});a.LoansClosedView=b.ItemView.extend({template:"#ismt-squad-loans-window-closed"});a.LoansScoreboardView=a.BaseListScoreboardView.extend({template:"#ismt-squad-loans-scoreboard",initialize:function(){this.roundsCollection=this.getRoundsCollection();},bindings:{"#ismjs-loan-events":{observe:"loanEvents",selectOptions:{collection:"this.roundsCollection"}},"#ismjs-loans-cost":"spentPoints"},onRender:function(){this.stickit();},getRoundsCollection:function(){var a=f.range(1,this.collection.maximumRounds+1);return new f.map(a,function(a){return{label:a,value:a};});}});a.LoansConfirmItem=b.ItemView.extend({template:"#ismt-squad-loans-confirm-item",tagName:"tr"});a.LoansConfirmView=b.CompositeView.extend({template:"#ismt-squad-loans-confirm",childView:a.LoansConfirmItem,childViewContainer:"tbody",triggers:{"click .ismjs-confirm":"loans:confirm","click .ismjs-cancel":"loans:cancel"}});a.LoansActiveLayout=b.LayoutView.extend({template:"#ismt-squad-loans-active",regions:{list:"#ismr-loans-active-list",fixtures:"#ismr-loans-active-fixtures"}});a.LoansActiveItem=b.ItemView.extend({template:"#ismt-squad-loans-active-item",tagName:"tr",triggers:{"click .ismjs-info-in":"showElementIn","click .ismjs-info-out":"showElementOut"}});a.LoansActiveListView=b.CompositeView.extend({template:"#ismt-squad-loans-active-list",childView:a.LoansActiveItem,childViewContainer:"tbody",behaviors:{Confirm:{"confirmedEvent":"cancel:loans"}},serializeData:function(){var a={};a.canBeRefunded=this.collection.canBeRefunded();a.next=b.request("get:event:next");return a;}});});window.ISMApp.module("Apps.StatisticsApp",function(a,b,c,d,e,f){"use strict";a.Router=b.Router.Named.extend({namedRoutes:{"statistics":["statistics","show"],"statistics_with_stat_and_filter":["statistics/:stat(/:filter)","showWithStatAndFilter"]}});var g={show:function(d){d=d||{};f.defaults(d,{stat:"total_points",filter:"",page:1});var g=b.request("router:named:get","statistics_with_stat_and_filter",{includeRoot:false,substitutions:{":stat":d.stat,"(/:filter)":d.filter?"/"+d.filter:""}});b.execute("utils:loader:show");var h=b.request("utils:registry:get",g,a.Controller);var i=h.show(d);e.when(i).then(function(a,d){c.history.navigate(g);b.execute("utils:page:change",a,d);},function(){window.alert("Error");b.execute("utils:loader:hide");});},showWithStatAndFilter:function(a,c,d){if(!b.request("get:statOption:fromKey",a))a="total_points";var e=new b.Entities.Filters();if(!c)c="";else{e.populate();if(!e.getFilterFromValue(c))c="";}if(!d)d=1;this.show({stat:a,filter:c,page:d});}};a.on("start",function(){b.commands.setHandler("show:stats",function(a,b,c){g.showWithStatAndFilter(a,b,c);});new a.Router({controller:g});});});window.ISMApp.module("Apps.StatisticsApp",function(a,b,c,d,e,f){"use strict";a.Controller=d.Object.extend({initialize:function(){this.filters=new b.Entities.Filters();var a=[{"value":"","label":b.request("get:vocab","all-players")}];this.filters.populate(a);this.sorts=new b.Entities.FilterSorts();this.sorts.populate();},show:function(a){a=a||{};f.defaults(a,{stat:"total_points",filter:"",page:1});var c=e.Deferred();c.resolve(this.getView(a),b.request("get:static:side"));return c;},getView:function(b){var c=new a.LayoutView({collection:this.getElements(b),model:this.getControlModel(b),filters:this.filters,sorts:this.sorts});this.listenTo(c,"childview:showElement",this.showElement);return c;},getElements:function(a){var c=new b.Entities.FilteredElements();var d="";if(a.filter)d=this.filters.getFilterFromValue(a.filter)||"";c.populate({filters:[d],sort:a.stat,page:a.page});return c;},getControlModel:function(a){var c=new b.Entities.Model({filter:a.filter,stat:a.stat,page:a.page});this.listenTo(c,"change",this.filterStatPageChange);return c;},filterStatPageChange:function(a){if(a.changed.stat||a.changed.filter)a.set("page",1,{silent:true});b.execute("show:stats",a.get("stat"),a.get("filter"),a.get("page"));},showElement:function(a,c){b.execute("show:element",b.request("get:element",c.model.get("id")));}});});window.ISMApp.module("Apps.StatisticsApp",function(a,b,c,d,e,f){"use strict";a.StatItemView=b.ItemView.extend({template:"#ismt-statistics-stat-item",tagName:"tr",serializeData:function(){var a=b.ItemView.prototype.serializeData.apply(this,arguments);a.stat=this.options.stat;a.showStat=this.options.showStat;return a;},triggers:{"click .ismjs-show-element":"showElement"}});a.LayoutView=b.CompositeView.extend({template:"#ismt-statistics-layout",childView:a.StatItemView,childViewContainer:"tbody",navigationTab:"statistics",initialize:function(a){var b=["now_cost","selected_by_percent","form","total_points"];this.showStat=b.indexOf(this.model.get("stat"))===-1;},childViewOptions:function(a,c){var d=this.model.get("stat");return{stat:b.request("format:currency_or_raw",a.get(d),d),showStat:this.showStat};},ui:{filter:"#ismjs-stats-filter"},events:{"click .ismjs-change-page":"changePage"},changePage:function(a){a.preventDefault();var b=/#(\d+)/.exec(a.currentTarget.href);if(b)this.model.set("page",parseInt(b[1],10));},bindings:{"#ismjs-stats-filter":{observe:"filter",selectOptions:{collection:function(){return this.options.filters.asOptGroups(this.ui.filter.data("global"),this.ui.filter.data("position"),this.ui.filter.data("team"));}}},"#ismjs-stats-sort":{observe:"stat",selectOptions:{collection:function(){return this.options.sorts;}}}},onRender:function(){this.stickit();},serializeData:function(){var a=b.ItemView.prototype.serializeData.apply(this,arguments);a.showStat=this.showStat;a.statLong=this.options.sorts.getLabelFromValue(this.model.get("stat"));a.statAbbr=b.request("abbreviate:stat",a.statLong);if(this.collection&&this.collection.paginator)a=f.extend(a,this.collection.paginator.toJSON());return a;}});});window.ISMApp.module("Apps.TeamApp",function(a,b,c,d,e,f){"use strict";a.Router=b.Router.Named.extend({namedRoutes:{"team_my":["team/my","showMyTeam"],"team_dream_event":["team/dream/:eventId","showDreamTeam"],"team_dream":["team/dream","showDreamTeam"],"team_history":["team/:entryId/event/:eventId","showHistory"],"team_history_now":["team/:entryId","showHistoryNow"]}});var g={showMyTeam:function(d){d=d||{};f.defaults(d,{replaceUrl:false});var g=b.request("router:named:get","team_my",{includeRoot:false});if(!b.request("player:check:auth",["LOGGED_IN_ENTRY"]))return;var h=b.request("get:event:next");if(!h){var i=b.request("get:loggedInEntry");this.showHistoryNow(i.get("id"));return;}b.execute("utils:loader:show");var j=b.request("utils:registry:get",g,a.MyTeamController);var k=j.show();e.when(k).then(function(a,e){c.history.navigate(g,{replace:d.replaceUrl});b.execute("utils:page:change",a,e);},function(){b.execute("utils:navigation:reload");});},showHistory:function(d,f,g){var h={};if(g&&g.replaceUrl){h.replace=true;delete g.replaceUrl;}var i=b.request("router:named:get","team_history",{includeRoot:false,substitutions:{":entryId":d,":eventId":f}});b.execute("utils:loader:show");var j=b.request("utils:registry:get",i,a.HistoryController);var k=j.show(d,f);e.when(k).then(function(a,e){var f=b.request("router:named:get","team_history_now",{includeRoot:false,substitutions:{":entryId":d}});if(c.history.getFragment()===f)h.replace=true;var j=b.request("get:event:next");var k=b.request("router:named:get","team_my",{includeRoot:false});if(!j&&c.history.getFragment()===k)h.replace=true;c.history.navigate(i,h);b.execute("utils:page:change",a,e,g);},function(){window.alert("Error");b.execute("utils:loader:hide");});},showHistoryNow:function(a){var c=b.request("get:event:current");if(c)this.showHistory(a,c.get("id"));else b.request("show:home");},showDreamTeam:function(d,f){var g;if(d)g=b.request("router:named:get","team_dream_event",{includeRoot:false,substitutions:{":eventId":d}});else g=b.request("router:named:get","team_dream",{includeRoot:false});b.execute("utils:loader:show");var h=b.request("utils:registry:get",g,a.DreamTeamController);var i=h.show(d);e.when(i).then(function(a,d){c.history.navigate(g);b.execute("utils:page:change",a,b.request("get:static:side"));},function(){window.alert("Error");b.execute("utils:loader:hide");});}};a.on("start",function(){b.vent.on("LOGGED_IN_ENTRY",function(){var a=b.request("get:loggedInEntry");var c=b.request("get:event:current");var d=b.request("get:event:next");if(!d||(c&&!c.get("finished")&&a.started()))g.showHistory(a.get("id"),c.get("id"),{replaceUrl:true});else g.showMyTeam({replaceUrl:true});});b.vent.on("entry:done",function(){b.execute("utils:navigation:reload","team/my");});b.commands.setHandler("show:my-team",function(){g.showMyTeam();});b.commands.setHandler("show:picks:history",function(a,b,c){g.showHistory(a,b,c);});new a.Router({controller:g});});});window.ISMApp.module("Apps.TeamApp",function(a,b,c,d,e,f){"use strict";a.BaseController=d.Object.extend({initialize:function(a){this.hasDetailViews=b.request("utils:game-config:get","ui-detail-views-enabled");},getSummaryStartersLayoutView:function(){var b=new a.SummaryStartersLayoutView({collection:this.starters,childData:this.getChildData(),entry:this.entry,activeChip:this.picks.active_chip});this.setUpItemHandlers(b);return b;},getSummaryBenchLayoutView:function(){var b=new a.SummaryBenchLayoutView({collection:this.subs,childData:this.getChildData(),entry:this.entry,activeChip:this.picks.active_chip});this.setUpItemHandlers(b);return b;},setUpItemHandlers:function(a){this.listenTo(a,"childview:element:show",this.elementShow);this.listenTo(a,"childview:element:menu",this.elementMenu);this.listenTo(a,"childview:element:sub",function(a){if(this.picks.changeInstigated()){if(a.model.get("subStatus")=="target")this.processSubstitution(a);else if(a.model.get("subStatus")=="instigator")this.stopSubstitution(a);}else this.startSubstitution(a);});this.listenTo(a,"childview:element:cancel",function(){this.stopSubstitution();});},elementShow:function(a){var c=a.model;b.execute("show:element",c,this.getCustomView(c));},getCustomView:function(){return undefined;},elementMenu:function(a){var b=this.getMenuView(a.model);this.layout.menu.show(b);},getMenuButtonOptions:function(a){var c={options:0,canSubstitute:false,canSubstituteCancel:false,canCaptain:false,canViceCaptain:false,changeInstigated:this.picks.changeInstigated()};var d=a.get("subStatus");if(a.get("can_sub")){if(d===""||d==="target"){c.canSubstitute=true;c.options++;}else if(a.isInstigator()){c.canSubstituteCancel=true;c.options++;}if(!a.get("is_sub")&&!c.changeInstigated){if(a.get("can_captain")&&!a.get("is_captain")){c.canCaptain=true;c.options++;}if(this.picks.pickMode==="future"&&b.request("get:setting","sys_vice_captain_enabled")&&a.get("can_captain")&&!a.get("is_vice_captain")){c.canViceCaptain=true;c.options++;}}}return c;},getMenuView:function(b){var c=new a.MyTeamMenuView({model:b,extraModelData:this.getMenuButtonOptions(b)});this.listenTo(c,"element:show",function(a){a.view.trigger("popup:close");this.elementShow(a);});this.createPopupHandlers(c);return c;},createPopupHandlers:function(a){return undefined;},showBenchMessageBoost:function(){var b=new a.BenchMessageBoostView();this.layout.benchMessage.show(b);}});a.ManageController=a.BaseController.extend({setupManageLayout:function(a){this.on("substitution:started",this.successHide);this.listenTo(a,"tour:start",function(){b.execute("tour:start",{Views:a.tourViews});});this.listenTo(this.picks,"reset",function(){this.starters=new b.Entities.Picks(this.picks.getStarters());this.subs=new b.Entities.Picks(this.picks.getSubs());a.scoreboard.show(this.getScoreboardView());if(this.layout.regions.buttons&&this.layout.el.innerHTML.indexOf(this.layout.regions.buttons.substr(1))!==-1){var c=this.getButtonsView();if(c)this.layout.buttons.show(c);}a.summaryStarters.show(this.getSummaryStartersLayoutView());a.summaryBench.show(this.getSummaryBenchLayoutView());this.activateDragAndDrop(a);if(this.hasDetailViews)a.detail.show(this.getDetailView());if(this.entry&&this.entry.activeChipName()==="bboost")this.showBenchMessageBoost();b.execute("utils:ui:picturefill");});this.listenTo(this,"leader:changed",function(){a.summaryStarters.currentView.render();this.activateDragAndDrop(a);});this.listenTo(this,"chip:changed",function(){a.summaryStarters.currentView.render();a.summaryBench.currentView.render();this.activateDragAndDrop(a);});},activateDragAndDrop:function(a){f.each(a.getDraggableViews(),function(b){a.makeViewDraggable(b);});},createPopupHandlers:function(a){this.listenTo(a,"element:sub",function(a){a.view.trigger("popup:close");if(this.picks.changeInstigated())this.processSubstitution(a);else this.startSubstitution(a);});this.listenTo(a,"element:cancel",function(a){a.view.trigger("popup:close");this.stopSubstitution(a);});this.listenTo(a,"element:captain",function(a){a.view.trigger("popup:close");this.changeCaptain(a);});this.listenTo(a,"element:vice-captain",function(a){a.view.trigger("popup:close");this.changeViceCaptain(a);});},getCustomView:function(b){var c=new a.MyTeamCustomView({model:b,extraModelData:this.getMenuButtonOptions(b)});this.createPopupHandlers(c);return c;},startSubstitution:function(a){var c=a.model;var d=c.get("id");var e=[];var g=b.request("utils:game-config:get","ui-team-autoSelect");this.trigger("substitution:started");var h=f.map(c.getPossibles(this.starters,this.subs,{"subForSub":true}),function(a){return a.get("id");});this.picks.each(function(a){var b=a.get("id");if(b===d)a.setAsInstigator();else if(f.contains(h,b)){a.set("subStatus","target");e.push(a);}else a.set("subStatus","invalid");});if(g&&e.length===1)this.processSubstitution({model:e[0]});},stopSubstitution:function(a){this.picks.each(function(a){a.set("subStatus","");});},processSubstitution:function(a){this.picks.substitute(a.model);this.trigger("substitution:made");},changeCaptain:function(a){this.picks.changeLeader("is_captain",a.model.get("id"));this.trigger("leader:changed");this.successHide();},successHide:function(){if(this.layout.success)this.layout.success.reset();},saveFail:function(a){window.alert("Error "+a.responseText);window.location.reload(true);}});a.MyTeamController=a.ManageController.extend({show:function(){var a=e.Deferred();var c=this;this.picks=new b.Entities.Picks();this.picks.fetchAndPopulate().done(function(d){b.execute("login:entry",d.entry);c.entry=b.request("get:loggedInEntry");c.entry.populateChipsCollection(d.chips);c.layout=c.getLayoutView();var e=b.request("get:entry:summary",d);c.listenTo(c.layout,"before:show",function(){if(c.entry.hasChips())c.layout.chips.show(this.getChipsView(c.entry.chipsCollection));var a=b.request("get:event:next");if(a)b.execute("show:fixtures",c.layout.fixtures,a);c.picks.trigger("reset");});a.resolve(c.layout,e);}).fail(function(){a.reject();});return a;},getLayoutView:function(){var b=new a.MyTeamLayoutView({model:this.entry});this.setupManageLayout(b);return b;},getScoreboardView:function(b){b=b||{};f.defaults(b,{View:a.MyTeamScoreboard});var c=new b.View({collection:this.picks,chips:this.entry.chipsCollection});this.listenTo(c,"team:save",this.saveTeam);c.listenTo(this,"leader:changed",c.render);return c;},getButtonsView:function(){return this.getScoreboardView({View:a.MyTeamButtonsView});},getChipsView:function(b){var c;if(b.getActiveName()=="wildcard"){c=new a.MyTeamChipWildcardView();return c;}else{c=new a.MyTeamChipsView({collection:b,entry:this.entry});this.listenTo(c,"childview:chip:play",this.playChip);this.listenTo(c,"childview:chip:cancel",this.cancelChip);return c;}},playChip:function(a,b){this.entry.chipsCollection.playChip(b.model);switch(b.model.get("name")){case "attack":this.picks.forceFormation([1,2,5,3]);break;case "bboost":this.showBenchMessageBoost();break;}this.trigger("chip:changed");},cancelChip:function(a,b){this.entry.chipsCollection.cancelChip(b.model);switch(b.model.get("name")){case "attack":this.picks.forceFormation([1,3,4,3]);break;case "bboost":this.layout.benchMessage.currentView.destroy();break;}this.trigger("chip:changed");},getChildData:function(){return{summaryStat:"next-event-fixture",dtLink:b.request("router:named:get","team_dream")};},getDetailView:function(){var c=new a.DetailCollection({collection:this.picks.plainByRole,childView:a.MyTeamDetailView,childData:this.getChildData()});c.listenTo(this,"leader:changed",function(){c.render();b.execute("utils:ui:picturefill");});this.listenTo(c,"childview:before:show",function(a){this.setUpItemHandlers(a);});return c;},changeViceCaptain:function(a){this.picks.changeLeader("is_vice_captain",a.model.get("id"));this.trigger("leader:changed");this.successHide();},saveTeam:function(a){var c={"picks":this.picks.toAPI()};var d=this.entry.chipsCollection.dataForChangeAPI();if(d)c.chips=d;b.execute("utils:loader:show");e.ajax({type:"POST",url:this.picks.drfUrl(),data:window.JSON.stringify(c),contentType:"application/json; charset=utf-8",context:this}).done(this.saveDone).fail(this.saveFail);},saveDone:function(a){b.execute("utils:loader:hide");this.picks.populate(a.picks);this.picks.trigger("reset");this.entry.populateChipsCollection(a.chips);this.successShow();},successShow:function(){this.layout.success.show(new a.MyTeamSuccessView());this.layout.el.scrollIntoView();}});a.HistoryController=a.ManageController.extend({show:function(c,d){var f=e.Deferred();var g=this;this.picks=new b.Entities.PicksHistory();this.picks.fetchAndPopulate(c,d,a.HistoryExplainView).done(function(c){g.controlModel=new b.Entities.Model({subsNeedEnabling:g.subsNeedEnabling()});g.layout=g.getLayoutView();var d=b.request("get:entry:summary",c);g.listenTo(g.layout,"before:show",function(){if(g.picks.automatic_subs.length)g.layout.autosubs.show(new a.AutomaticSubsView({collection:this.picks.automatic_subs}));else if(g.picks.managerSubsMade())g.layout.autosubs.show(new a.ManagerSubsView({collection:this.picks.manager_subs}));if(this.picks.active_chip==="bboost")this.showBenchMessageBoost();b.execute("show:fixtures",g.layout.fixtures,g.picks.round);g.picks.trigger("reset");});f.resolve(g.layout,d);});return f;},getLayoutView:function(){var b=this.picks.eventState();var c=new a.HistoryLayoutView({model:this.picks.entry,eventState:b});if(b==="hidden")this.setupHiddenLayout(c);else this.setupManageLayout(c);return c;},setupHiddenLayout:function(a){var c=this;this.listenTo(a,"before:show",function(){a.scoreboard.show(this.getScoreboardView());var d=b.request("ism:get-squad-summary-view");var e=new d({collection:new b.Entities.Squad(c.picks.models),renderMode:"hiddenSubs"});c.listenTo(e,"childview:element:menu",c.elementMenu);a.summaryStarters.show(e);if(this.hasDetailViews)a.detail.show(this.getDetailView());});},getScoreboardView:function(a){var c;switch(this.picks.eventState()){case "open":c=this.getScoreboardOpen(a);break;case "closed":c=this.getScoreboardClosed(a);break;case "hidden":c=this.getScoreboardHidden(a);break;case "finished":c=this.getScoreboardFinished(a);default:}this.listenTo(c,"reload:points",function(){b.execute("show:picks:history",this.picks.entry.get("id"),this.picks.round.get("id"),{"maintainScrollPosition":true});});return c;},getButtonsView:function(){if(this.picks.eventState()==="open")return this.getScoreboardOpen({template:"#ismt-team-history-open-buttons"});},getScoreboardFinished:function(){var b=new a.HistoryScoreboardFinished({picks:this.picks,showRefresh:!this.picks.round.get("finished")});return b;},getScoreboardOpen:function(b){b=b||{};f.defaults(b,{picks:this.picks,model:this.controlModel});var c=new a.HistoryScoreboardOpen(b);this.listenTo(c,"team:save",this.showConfirm);this.listenTo(c,"subs:toggle",this.toggleSubs);this.listenTo(c,"subs:confirmed",this.showSubsConfirmed);c.listenTo(this,"leader:changed",c.render);return c;},getScoreboardClosed:function(){var b=new a.HistoryScoreboardClosed({picks:this.picks});return b;},getScoreboardHidden:function(){var b=new a.HistoryScoreboardHidden({picks:this.picks});return b;},getChildData:function(){return{summaryStat:"explain",dtLink:b.request("router:named:get","team_dream_event",{substitutions:{":eventId":this.picks.round.get("id")}})};},getDetailView:function(){var b=new a.DetailCollection({collection:this.picks.plainByRole,childView:a.HistoryDetailView,childData:this.getChildData()});b.listenTo(this,"leader:changed",b.render);this.listenTo(b,"childview:before:show",function(a){this.setUpItemHandlers(a);});return b;},showConfirm:function(){this.layout.confirm.show(this.getConfirmView());},getConfirmView:function(){var b=new a.SubsConfirmView({picks:this.picks});this.listenTo(b,"subs:confirm",this.savePicks);this.listenTo(b,"subs:cancel",this.changesCancel);return b;},changesCancel:function(a){a.view.trigger("popup:close");this.picks.restore();},savePicks:function(){var a={"picks":this.picks.toAPI(),"entry":this.picks.entry.id,"event":this.picks.round.id};b.execute("utils:loader:show");e.ajax({type:"POST",url:this.picks.drfUpdateUrl(),data:window.JSON.stringify(a),contentType:"application/json; charset=utf-8",context:this}).done(this.saveDone).fail(this.saveFail);},saveDone:function(){b.execute("show:picks:history",this.picks.entry.id,this.picks.round.id);},saveFail:function(a){window.alert("Error "+a.responseText);window.location.reload(true);},subsNeedEnabling:function(){if(!b.request("utils:game-config:get","ui-subs-need-enabling"))return "unused";if(this.picks.eventState()!=="open")return null;if(this.picks.managerSubsMade())return "confirmed";else return "off";},toggleSubs:function(a){var b=a.view.getToggleClasses();this.layout.scoreboard.currentView.setToggleClasses(b);this.layout.buttons.currentView.setToggleClasses(b);var c=this.controlModel.get("subsNeedEnabling");if(c==="off"){this.controlModel.set("subsNeedEnabling","on");this.layout.confirm.show(this.getToggleSubsConfirmView());}else if(c==="on"){this.controlModel.set("subsNeedEnabling","off");this.picks.restore();}else window.alert("Unknown sub state: "+c);},showSubsConfirmed:function(){this.layout.confirm.show(this.getSubsConfirmedView());},getToggleSubsConfirmView:function(){var b=new a.ToggleSubsConfirmView();this.listenTo(b,"toggle:confirm",function(){b.trigger("popup:close");});this.listenTo(b,"toggle:cancel",function(){b.trigger("popup:close");this.layout.scoreboard.currentView.trigger("toggle:change");});return b;},getSubsConfirmedView:function(){var b=new a.SubsConfirmedView({picks:this.picks});return b;},getMenuButtonOptions:function(b){var c=a.ManageController.prototype.getMenuButtonOptions.apply(this,arguments);if(this.controlModel.get("subsNeedEnabling")==="off"){c.canSubstitute=false;c.canCaptain=false;c.canViceCaptain=false;}if(!this.picks.can_change_captain){c.canCaptain=false;c.canViceCaptain=false;}return c;}});a.DreamTeamController=a.BaseController.extend({show:function(c){var d=e.Deferred();var f=this;var g=this.picks=new b.Entities.PicksDreamTeam();g.fetchAndPopulate(c,a.HistoryExplainView).done(function(a){f.layout=f.getLayoutView();f.starters=f.picks;f.layout.on("before:show",function(){if(f.picks.round)b.execute("show:fixtures",f.layout.fixtures,f.picks.round);});d.resolve(f.layout);}).fail(function(a,b,c){d.reject(b);});return d;},getLayoutView:function(){var b=new a.DreamLayoutView();this.listenTo(b,"before:show",function(){b.scoreboard.show(this.getScoreboardView());b.summaryStarters.show(this.getSummaryStartersLayoutView());if(this.hasDetailViews)b.detail.show(this.getDetailView());});return b;},getScoreboardView:function(b){var c=new a.DreamScoreboard({picks:this.picks});this.listenTo(c,"element:show",function(a){a.view.trigger("popup:close");this.elementShow(a);});return c;},getChildData:function(){if(this.picks.round)return{summaryStat:"explain",dtLink:b.request("router:named:get","team_dream_event",{substitutions:{":eventId":this.picks.round.get("id")}})};else return{summaryStat:"dtPoints",dtLink:b.request("router:named:get","team_dream")};},getDetailView:function(){var b=new a.DreamDetailView({collection:this.picks});this.setUpItemHandlers(b);return b;},setUpItemHandlers:function(a){this.listenTo(a,"childview:element:show",this.elementShow);if(this.picks.round)this.listenTo(a,"childview:element:menu",this.elementMenu);else this.listenTo(a,"childview:element:menu",this.elementShow);}});});window.ISMApp.module("Apps.TeamApp",function(a,b,c,d,e,f){"use strict";var g={dragMoveListener:function(a){var b=a.target,c=(parseFloat(b.getAttribute("data-x"))||0)+a.dx,d=(parseFloat(b.getAttribute("data-y"))||0)+a.dy;b.style.webkitTransform=b.style.transform="translate("+c+"px, "+d+"px)";b.setAttribute("data-x",c);b.setAttribute("data-y",d);},dragStart:function(a){var b=a.interactable.mnView;if(b.model.get("subStatus"))b.triggerMethod("element:cancel");else{b.triggerMethod("element:sub");f.each(this.getDroppableViews(),function(a){this.makeViewDroppable(a);},this);}},dragEnd:function(a){if(a.dropzone)a.dropzone.mnView.triggerMethod("element:sub");else{var b=a.target;b.setAttribute("data-x",0);b.setAttribute("data-y",0);b.style.webkitTransform=b.style.transform="translate(0px, 0px)";a.interactable.mnView.triggerMethod("element:cancel");}},makeViewDraggable:function(a){var b="ontouchstart" in window;var c=window.interact(a.el,{allowFrom:".ismjs-shirt"}).draggable({manualStart:b?true:false,restrict:{restriction:"#ism-summary",elementRect:{left:0,right:1,top:0,bottom:1}},autoScroll:true,onmove:f.bind(this.dragMoveListener,this),onstart:f.bind(this.dragStart,this),onend:f.bind(this.dragEnd,this)});if(b)c.on("hold",function(a){var b=a.interaction;if(!b.interacting())b.start({name:"drag"},a.interactable,a.currentTarget);}).on("contextmenu",function(a){a.preventDefault();a.stopPropagation();return false;});a.$el.off("click",".ismjs-menu");c.on("tap",function(a){var b=a.interactable.mnView;if(b.el.querySelector(".ismjs-menu").contains(a.target)){b.triggerMethod("element:menu");a.preventDefault();}});c.mnView=a;},makeViewDroppable:function(a){var b="ismjs-sub-drop-active";var c=window.interact(a.el).dropzone({accept:".ismjs-sub-instigator",overlap:0.40,ondropactivate:function(a){},ondragenter:function(a){a.target.classList.add(b);a.relatedTarget.classList.add(b);},ondragleave:function(a){a.target.classList.remove(b);a.relatedTarget.classList.remove(b);},ondrop:function(a){},ondropdeactivate:function(a){}});c.mnView=a;},getDraggableViews:function(){var a=[];if(!window.interact)return a;var b=f.extend(this.summaryStarters.currentView.getRegions(),this.summaryBench.currentView.getRegions());f.each(b,function(b){var c=b.currentView;if(c.model.get("can_sub"))a.push(b.currentView);});return a;},getDroppableViews:function(){var a=[];if(!window.interact)return a;var b=f.extend(this.summaryStarters.currentView.getRegions(),this.summaryBench.currentView.getRegions());f.each(b,function(b){var c=b.currentView;if(c.model.get("subStatus")=="target")a.push(b.currentView);});return a;}};a.SummaryItemView=b.ItemView.extend({template:"#ismt-team-summary-item",triggers:{"click .ismjs-menu":"element:menu","click .ismjs-info":"element:show","click .ismjs-sub":"element:sub"},modelEvents:{"change:subStatus":"changeSubStatus"},behaviors:{Link:{}},serializeData:function(){var a=b.ItemView.prototype.serializeData.apply(this,arguments);a=f.extend(a,this.options.childData);a.captainStub=this.options.activeChip==="3xc"?"-3xc":"";return a;},changeSubStatus:function(){var a=this.model.get("subStatus");this.$el.removeClass("ismjs-sub-instigator ismjs-sub-target ismjs-sub-invalid");if(a)this.$el.addClass("ismjs-sub-"+a);}});a.SummaryBenchItemView=a.SummaryItemView.extend({template:"#ismt-team-summary-item"});a.SummaryReserveItemView=a.SummaryItemView.extend({template:"#ismt-team-summary-item"});a.SummaryBaseLayoutView=b.LayoutView.extend({initialize:function(a){this.setActiveChip();},onBeforeRender:function(){this.setActiveChip();},createItemView:function(a,b,c){var d=new a({model:b,childData:c,activeChip:this.activeChip});return d;},serializeData:function(){var a=b.LayoutView.prototype.serializeData.apply(this,arguments);a.activeChip=this.activeChip;return a;},setActiveChip:function(){this.activeChip="";if(this.options.activeChip)this.activeChip=this.options.activeChip;else if(this.options.entry)this.activeChip=this.options.entry.activeChipName();}});a.SummaryStartersLayoutView=a.SummaryBaseLayoutView.extend({getTemplate:function(){return "#ismt-team-summary-"+this.collection.formation();},initialize:function(c){a.SummaryBaseLayoutView.prototype.initialize.apply(this,arguments);var d;this.positions=b.request("get:setting","squad_squadplay");for(d=1;d<=this.positions;d++)this.addRegion("pos"+d,"#ismr-pos"+d);},onRender:function(){this.renderPositions();},renderPositions:function(){var b,c,d;for(b=1;b<=this.positions;b++){c=this["pos"+b];d=this.collection.at(b-1);c.show(this.createItemView(a.SummaryItemView,d,this.options.childData));}}});a.SummaryBenchLayoutView=a.SummaryBaseLayoutView.extend({template:"#ismt-team-summary-bench",initialize:function(c){a.SummaryBaseLayoutView.prototype.initialize.apply(this,arguments);var d;this.state=c.state;this.startPos=b.request("get:setting","squad_squadplay")+1;this.stopPos=b.request("get:setting","squad_squadsize");this.reservesStart=b.request("get:setting","squad_exclusions_start");for(d=this.startPos;d<=this.stopPos;d++)this.addRegion("pos"+d,"#ismr-pos"+d);},onRender:function(){this.renderPositions();},renderPositions:function(){var b,c,d,e;for(b=this.startPos;b<=this.stopPos;b++){c=this["pos"+b];d=this.collection.at(b-this.startPos);if(!this.reservesStart||b<this.reservesStart)e=this.createItemView(a.SummaryBenchItemView,d,this.options.childData);else e=this.createItemView(a.SummaryReserveItemView,d,this.options.childData);c.show(e);}}});a.DetailCollection=b.CollectionView.extend({childViewOptions:function(a,c){return{collection:a.get("elements"),model:new b.Entities.Model({index:c}),childData:this.options.childData};}});a.TeamTourBase=b.ItemView.extend({tourInit:function(){var a=e.Deferred();a.resolve();e(this.tourStop).get(0).scrollIntoView(false);return a.promise();}});a.TeamTourStep1=a.TeamTourBase.extend({template:"#ismt-pick-team-tour-1",tourStop:".ismjs-pick-team-tour-stop-1"});a.TeamTourStep2=a.TeamTourBase.extend({template:"#ismt-pick-team-tour-2",tourStop:".ismjs-pick-team-tour-stop-2"});a.TeamTourStep3=a.TeamTourBase.extend({template:"#ismt-pick-team-tour-3",tourStop:".ismjs-pick-team-tour-stop-3"});a.TeamTourStep4=a.TeamTourBase.extend({template:"#ismt-pick-team-tour-4",tourStop:".ismjs-pick-team-tour-stop-4"});a.MyTeamLayoutView=b.LayoutView.extend({navigationTab:"team",template:"#ismt-team-my-layout",regions:{success:"#ismr-success",scoreboard:"#ismr-scoreboard",summaryStarters:"#ismr-summary-starters",summaryBench:"#ismr-summary-bench",detail:"#ismr-detail",chips:"#ismr-chips",buttons:"#ismr-buttons",fixtures:"#ismr-fixtures",help:"#ismr-help",benchMessage:"#ismr-bench-message",menu:{selector:"#ismr-team-menu",regionClass:b.Regions.Popup}},behaviors:{Link:{}},triggers:{"click .ismjs-tour-start":"tour:start"},initialize:function(c){b.LayoutView.prototype.initialize.apply(this,arguments);this.tourViews=[];for(var d=1;d<=20;d++){var e=a["TeamTourStep"+d];if(!e)break;this.tourViews.push(e);}var f=b.request("utils:game-config:get","myTeamAutoStart");if(f===true)this.tourAutoStart=this.model.get("joined_seconds")<15;else this.tourAutoStart=false;}});f.extend(a.MyTeamLayoutView.prototype,g);a.MyTeamScoreboard=b.ItemView.extend({template:"#ismt-team-my-scoreboard",triggers:{"click .ismjs-save":"team:save"},behaviors:{Link:{}},initialize:function(){this.chips=this.options.chips;this.listenTo(this.chips,"reset",this.render);},serializeData:function(){var a=b.request("get:event:current"),c=b.request("get:event:next"),d=null,e=b.request("get:loggedInEntry");if(a&&e.get("started_event")<=a.get("id"))d=b.request("router:named:get","team_history",{substitutions:{":entryId":e.get("id"),":eventId":a.get("id")}});return{"nextEventId":c?c.get("id"):undefined,"nextEventName":c?c.get("name"):undefined,"nextEventDeadline":c?c.get("deadline_time_formatted"):undefined,"previousEventId":a?a.get("id"):undefined,"changed":this.collection.haveChanged()||this.chips.haveChanged(),"backLink":d,"entryName":e.get("name")};}});a.MyTeamButtonsView=a.MyTeamScoreboard.extend({template:"#ismt-team-my-buttons"});a.MyTeamSuccessView=b.ItemView.extend({template:"#ismt-team-my-success"});a.MyTeamBaseMenu=b.ItemView.extend({triggers:{"click .ismjs-info":"element:show","click .ismjs-sub":"element:sub","click .ismjs-cancel":"element:cancel","click .ismjs-captain":"element:captain","click .ismjs-vice-captain":"element:vice-captain"},serializeData:function(){var a=b.ItemView.prototype.serializeData.apply(this,arguments);return f.extend({explainTip:""},a,this.options.extraModelData);}});a.MyTeamMenuView=a.MyTeamBaseMenu.extend({template:"#ismt-team-my-menu"});a.MyTeamCustomView=a.MyTeamBaseMenu.extend({template:"#ismt-team-my-custom"});a.MyTeamDetailItemView=a.SummaryItemView.extend({template:"#ismt-team-my-detail-item",tagName:"tr"});a.MyTeamDetailView=b.CompositeView.extend({template:"#ismt-team-my-detail",childView:a.MyTeamDetailItemView,childViewContainer:"tbody",childViewOptions:function(){return{childData:this.options.childData};}});a.MyTeamChipItemView=b.ItemView.extend({template:"#ismt-team-my-chip-item",tagName:"li",className:"ism-chip-list__item",ui:{playButton:".ismjs-chip-play",cancelButton:".ismjs-chip-cancel"},triggers:{"click @ui.playButton":"chip:play","click @ui.cancelButton":"chip:cancel"},behaviors:{Tooltip:{},Link:{}},serializeData:function(){var a=b.ItemView.prototype.serializeData.apply(this,arguments);a.entry=this.options.entry;return a;}});a.MyTeamChipsView=b.CollectionView.extend({childView:a.MyTeamChipItemView,tagName:"ul",className:"ism-chip-list",filter:function(a,b,c){return a.get("name")!=="wildcard";},childViewOptions:function(a,b){return{entry:this.options.entry.get("id")};}});a.MyTeamChipWildcardView=b.ItemView.extend({template:"#ismt-team-my-chip-wildcard",behaviors:{Tooltip:{},Link:{}}});a.BenchMessageBoostView=b.ItemView.extend({template:"#ismt-team-bench-message-boost",serializeData:function(){var a=b.ItemView.prototype.serializeData.apply(this,arguments);var c=b.request("get:event:next");if(c)a.eventName=c.get("name");return a;}});a.HistoryLayoutView=b.LayoutView.extend({navigationTab:"points",template:"#ismt-team-history-layout",regions:{scoreboard:"#ismr-scoreboard",summaryStarters:"#ismr-summary-starters",summaryBench:"#ismr-summary-bench",detail:"#ismr-detail",buttons:"#ismr-buttons",autosubs:"#ismr-automatic-subs",fixtures:"#ismr-fixtures",benchMessage:"#ismr-bench-message",menu:{selector:"#ismr-team-menu",regionClass:b.Regions.Popup},confirm:{selector:"#ismr-confirm",regionClass:b.Regions.Popup}},serializeData:function(){var a=b.LayoutView.prototype.serializeData.apply(this,arguments);a.eventState=this.options.eventState;return a;}});f.extend(a.HistoryLayoutView.prototype,g);a.HistoryScoreboardBase=b.ItemView.extend({triggers:function(){return{"click .ismjs-reload":"reload:points"};},behaviors:{Link:{}},serializeData:function(){var a=this.options.picks,c=b.request("get:loggedInEntry"),d=a.entry.get("id"),e=a.round.get("id"),f=a.entry.get("started_event"),g=b.request("get:event:current").get("id"),h=b.request("get:event:next"),i=null,j=null,k=null,l=b.request("router:named:get","team_dream_event",{substitutions:{":eventId":e}});if(g>1&&e>f)i=b.request("router:named:get","team_history",{substitutions:{":entryId":d,":eventId":e-1}});if(e<g)j=b.request("router:named:get","team_history",{substitutions:{":entryId":d,":eventId":e+1}});else if(h&&c&&c.get("id")===d)j=b.request("router:named:get","team_my");if(a.round.get("highest_score"))k=b.request("router:named:get","team_history",{substitutions:{":entryId":a.round.get("highest_scoring_entry"),":eventId":e}});return{entry_history:a.entry_history,round:a.round,eventDay:a.state.event_day,points:a.points,showRefresh:this.options.showRefresh?true:false,backLink:i,nextLink:j,highLink:k,dtLink:l,eventHadLoans:b.request("get:setting","loans_enabled",{event:e-1}),activeChip:a.active_chip};}});a.HistoryScoreboardFinished=a.HistoryScoreboardBase.extend({template:"#ismt-team-history-scoreboard-finished"});a.HistoryScoreboardOpen=a.HistoryScoreboardBase.extend({template:"#ismt-team-history-scoreboard-open",ui:{toggle:".ismjs-flipswitch",button:".ismjs-save"},initialize:function(){this.on("toggle:change",function(){this.ui.toggle.trigger("click");});},onAttach:function(){this.bindUIElements();},triggers:function(){return f.extend(a.HistoryScoreboardBase.prototype.triggers.apply(this,arguments),{"click @ui.button":"team:save","click @ui.toggle":"subs:toggle","click .ismjs-subs-confirmed":"subs:confirmed"});},modelEvents:{"change:subsNeedEnabling":"showOrHideButton"},onRender:function(){this.showOrHideButton();b.execute("utils:ui:me",{view:this});},showOrHideButton:function(){if(this.model.get("subsNeedEnabling")==="off")this.ui.button.hide();else this.ui.button.show();},getToggleClasses:function(){return this.ui.toggle.attr("class");},setToggleClasses:function(a){this.ui.toggle.attr("class",a);},serializeData:function(){var b=a.HistoryScoreboardBase.prototype.serializeData.apply(this,arguments);var c=this.options.picks;b.changed=c.haveChanged();b.pointsLost=c.pointsLost();b.nextDeadline=c.state.deadline_time_formatted;b.subsNeedEnabling=this.model.get("subsNeedEnabling");return b;}});a.HistoryOpenButtonsView=a.HistoryScoreboardOpen.extend({template:"#ismt-team-history-open-buttons"});a.HistoryScoreboardHidden=a.HistoryScoreboardBase.extend({template:"#ismt-team-history-scoreboard-hidden"});a.HistoryScoreboardClosed=a.HistoryScoreboardBase.extend({template:"#ismt-team-history-scoreboard-closed"});a.HistoryDetailItemView=a.SummaryItemView.extend({template:"#ismt-team-history-detail-item",tagName:"tr"});a.HistoryDetailView=b.CompositeView.extend({template:"#ismt-team-history-detail",childView:a.HistoryDetailItemView,childViewContainer:"tbody",childViewOptions:function(){return{childData:this.options.childData};}});a.HistoryExplainItem=b.ItemView.extend({template:"#ismt-team-history-explain-item",tagName:"tr"});a.HistoryExplainView=b.CompositeView.extend({template:"#ismt-team-history-explain",childView:a.HistoryExplainItem,childViewContainer:"tbody"});a.AutomaticSubsItem=b.ItemView.extend({template:"#ismt-team-history-automatic-subs-item",tagName:"tr",serializeData:function(){return{"player_out_name":b.request("get:element",this.model.get("element_out")).get("web_name"),"player_in_name":b.request("get:element",this.model.get("element_in")).get("web_name")};}});a.AutomaticSubsView=b.CompositeView.extend({template:"#ismt-team-history-automatic-subs",childView:a.AutomaticSubsItem,childViewContainer:"tbody"});a.ManagerSubsItem=b.ItemView.extend({template:"#ismt-team-manager-subs-item",tagName:"tr",namesFromIds:function(a){if(!a)return "";var c=f.map(a.split(","),function(a){return b.request("get:element",a).get("web_name");});return c.join(", ");},nameFromId:function(a){if(!a)return "";return b.request("get:element",a).get("web_name");},serializeData:function(){var a=this.model;return{"time_formatted":this.model.get("time_formatted"),"players_out_names":this.namesFromIds(a.get("elements_out")),"players_in_names":this.namesFromIds(a.get("elements_in")),"captain_out_name":this.nameFromId(a.get("captain_out")),"captain_in_name":this.nameFromId(a.get("captain_in"))};}});a.ManagerSubsView=b.CompositeView.extend({template:"#ismt-team-manager-subs",childView:a.ManagerSubsItem,childViewContainer:"tbody"});a.SubsConfirmView=b.ItemView.extend({template:"#ismt-team-subs-confirm",triggers:{"click .ismjs-confirm":"subs:confirm","click .ismjs-cancel":"subs:cancel"},serializeData:function(){return{picksAdded:this.options.picks.picksAdded(),picksRemoved:this.options.picks.picksRemoved(),captainAdded:this.options.picks.captainAdded(),captainRemoved:this.options.picks.captainRemoved()};}});a.ToggleSubsConfirmView=b.ItemView.extend({template:"#ismt-team-toggle-subs-confirm",triggers:{"click .ismjs-toggle-confirm":"toggle:confirm","click .ismjs-toggle-cancel":"toggle:cancel"},popupOptions:{dismissible:false}});a.SubsConfirmedView=b.ItemView.extend({template:"#ismt-team-subs-confirmed",serializeData:function(){return{nextDeadline:this.options.picks.state.deadline_time_formatted};}});a.DreamLayoutView=a.HistoryLayoutView.extend({navigationTab:"points",template:"#ismt-team-dream-layout"});a.DreamScoreboard=b.ItemView.extend({template:"#ismt-team-dream-scoreboard",triggers:{"click .ismthreload":"reload:points","click .ismjs-info":"element:show"},behaviors:{Link:{}},initialize:function(a){this.model=this.options.picks.topPick();},serializeData:function(){var a=b.request("get:event:current"),c="",d="",e="",g=this.options.picks.round;if(g){var h=g.get("id");if(h>1)c=b.request("router:named:get","team_dream_event",{substitutions:{":eventId":h-1}});if(h<a.get("id"))d=b.request("router:named:get","team_dream_event",{substitutions:{":eventId":h+1}});e=b.request("router:named:get","team_dream");}else if(a)e=b.request("router:named:get","team_dream_event",{substitutions:{":eventId":a.get("id")}});return f.extend(b.ItemView.prototype.serializeData.apply(this,arguments),{totalPoints:this.options.picks.totalPoints(),round:g,backLink:c,nextLink:d,toggleLink:e});}});a.DreamDetailView=a.HistoryDetailView.extend({});});window.ISMApp.module("Apps",function(a,b,c,d,e,f){"use strict";b.execute("utils:game-config:set","PlayerEditableEntity",b.Entities.EditablePlayer);b.execute("utils:game-config:set","PlayerRegisterView",a.PlayerApp.RegisterView);b.execute("utils:game-config:set","HomeController",a.StaticApp.HomeController);b.execute("utils:game-config:set","myTeamAutoStart",true);b.execute("utils:game-config:set","selectionTourAutoStart",true);b.execute("utils:game-config:set","teamShirtAttribute","id");});window.ISMApp.module("Apps",function(a,b,c,d,e,f){"use strict";b.execute("utils:game-config:set","SquadSelectionListController",a.SquadApp.SelectionListController);b.execute("utils:game-config:set","ui-squad-positionHeaders",true);b.execute("utils:game-config:set","ui-team-autoSelect",false);b.execute("utils:game-config:set","ui-subs-need-enabling",false);b.execute("utils:game-config:set","ui-fixture-show-days",false);b.execute("utils:game-config:set","ui-detail-views-enabled",true);});window.ISMApp.module("Apps.TeamApp",function(a,b,c,d,e,f){"use strict";a.TeamTourStep5=a.TeamTourBase.extend({template:"#ismt-pick-team-tour-5",tourStop:".ismjs-pick-team-tour-stop-5"});});window.ISMApp.module("ScoutApp",function(a,b,c,d,e,f){"use strict";a.Router=b.Router.Named.extend({namedRoutes:{"static_scout":["the-scout","showScout"]}});var g={showScout:function(){var d="the-scout";b.execute("utils:loader:show");var f=b.request("utils:registry:get",d,a.ScoutController);var g=f.show();e.when(g).then(function(a){c.history.navigate(d);b.execute("utils:page:change",a,new b.Apps.StaticApp.BlankView());},function(){window.alert("Error");b.execute("utils:loader:hide");});}};a.on("start",function(){new a.Router({controller:g});});a.ScoutController=d.Object.extend({show:function(){var c=e.Deferred();e.get("/the-scout/?base-plain").done(function(d){var e=new b.Entities.Model({content:d});var f=new a.ScoutView({model:e});c.resolve(f);});return c;}});a.ScoutView=b.ItemView.extend({template:"#ismt-scout",bodyClass:"scout",initialize:function(){this.navigationTab="scout";}});});window.ISMApp.module("Entities",function(a,b,c,d,e,f){"use strict";f.extend(a.Leagues.prototype,{CUSTOM:["nbcsports","tv2"],base_getSystemLeagues:a.Leagues.prototype.getSystemLeagues,getSystemLeagues:function(){var a=this.base_getSystemLeagues.apply(this,arguments);if(a)a=f.filter(a,function(a){return this.CUSTOM.indexOf(a.get("short_name"))===-1;},this);return a;},getCustomLeagues:function(){return this.filter(function(a){return this.CUSTOM.indexOf(a.get("short_name"))!==-1;},this);}});});window.ISMApp.module("Apps.FixturesApp",function(a,b,c,d,e,f){"use strict";f.extend(a.Controller.prototype,{showStats:function(a){var c=[];f.each(a.model.get("stats"),function(a){f.each(f.keys(a),function(d){var e=b.request("get:stat:fromField",d);var g=f.map(a[d].h,function(a){return{element:b.request("get:element",a.element),value:a.value};});var h=f.map(a[d].a,function(a){return{element:b.request("get:element",a.element),value:a.value};});if(d=="bps"){if(g.length>5)g=g.slice(0,5);if(h.length>5)h=h.slice(0,5);}if(g.length||h.length)c.push({stat:e,team_h:g,team_a:h});});});a.model.statsSummary.reset(c);a.$el.addClass("ism-fixture-open");a.$el.next().find(".ismjs-fixture-summary").show();}});f.extend(a.FixturesView.prototype,{childViewContainer:"ul"});f.extend(a.ItemView.prototype,{tagName:"li"});f.extend(a.StatView.prototype,{tagName:"li"});f.extend(a.DayHeaderView.prototype,{tagName:"li",className:"ism-match-list__heading"});});window.ISMApp.module("Apps.SquadApp",function(a,b,c,d,e,f){"use strict";var g=a.BaseListLayoutView.prototype.events;f.extend(a.BaseListLayoutView.prototype,{events:function(){var a=g.apply(this,arguments);a["click .ismjs-show-sidebar"]="setFocus";return a;},setFocus:function(){this.listenToOnce(b.vent,"utils:page:transitionend",function(){e("#ismjs-side-focus").focus();});}});var h=a.BaseElementsLayoutView.prototype.events;f.extend(a.BaseElementsLayoutView.prototype,{events:function(){var a=h.apply(this,arguments);a["click .ismjs-show-main"]="setFocus";return a;},setFocus:function(){this.listenToOnce(b.vent,"utils:page:transitionend",function(){e("#ismjs-main-focus").focus();});}});});window.ISMApp.module("Utils",function(a,b,c,d,e,f){"use strict";this.listenTo(b.vent,"page:changing",function(a){var b=e("#ismr-side");var c="ism-sidebar--squad";if(a.view.navigationTab==="squad")b.addClass(c);else b.removeClass(c);});});(function(a,b){"use strict";if(window.priorityNav)window.priorityNav.init({mainNavWrapper:".ismjs-priority-nav",mainNav:".ismjs-main-nav",navDropdownClassName:"ism-nav__dropdown",navDropdownToggleClassName:"ism-nav__dropdown-toggle",navDropdownLabel:"More",breakPoint:0});a(".ism-nav__dropdown").on("click","a",function(){a(document).trigger(a.Event("keydown",{keyCode:27}));});}(window.jQuery,window.ISMApp));window.ISMApp.module("Apps",function(a,b,c,d,e,f){"use strict";b.execute("utils:game-config:set","ui-squad-positionHeaders",false);b.execute("utils:game-config:set","ui-fixture-show-days",true);b.execute("utils:game-config:set","teamShirtAttribute","code");});(function(a,b){"use strict";window.ISMApp.execute("utils:page:set-wrapper-min-height");a(window).on("resize",function(){window.ISMApp.execute("utils:page:set-wrapper-min-height");});a(".ism").on("click",".ismjs-toggle-nav",function(a){a.preventDefault();window.ISMApp.execute("utils:page:toggle-menu");});a(".ism").on("click",".ismjs-toggle-sidebar",function(a){a.preventDefault();window.ISMApp.execute("utils:page:toggle-sidebar");});a(".ism").on("click",".ismjs-show-main",function(a){a.preventDefault();window.ISMApp.execute("utils:page:show-main");});a(".ism").on("click",".ismjs-show-sidebar",function(a){a.preventDefault();window.ISMApp.execute("utils:page:show-sidebar");});window.ISMApp.execute("utils:ui:jcarousel");window.ISMApp.execute("utils:ui:slickCarousel");window.ISMApp.execute("utils:ui:a11yTabs");window.ISMApp.execute("utils:ui:a11yCollapsible");a(".ism").on("click",".ismjs-show-element",function(c){if(!b.bootstrapTime){c.preventDefault();var d=a(c.currentTarget).data("id");window.location.replace("/a/home/"+d+"/"+a(document).scrollTop());}});a(document).on("collapsibleexpand","[data-role=collapsible]",function(b){var c=a(this);if(!c.data("noMove")){var d=c.offset().top;a.mobile.silentScroll(d);}});a(".ism").on("click",".ismjs-show-help-section",function(b){if(window.location.pathname==="/help/"){var c=b.target.href.indexOf("#");if(c>-1){var d=b.target.href.substring(c);if(d){var e=a("a[href='"+d+"']");if(e.length)e[0].click();}}}});if(window.FastClick)window.FastClick.attach(document.body);}(window.jQuery,window.ISMApp));window.ISMApp.execute("utils:ui:loadsvg","/static/libsass/plfpl/dist/img/svg/processed/icons.svg");